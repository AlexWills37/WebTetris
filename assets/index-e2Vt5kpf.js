var pn=Object.defineProperty;var bn=(Ge,s,S)=>s in Ge?pn(Ge,s,{enumerable:!0,configurable:!0,writable:!0,value:S}):Ge[s]=S;var jr=(Ge,s,S)=>(bn(Ge,typeof s!="symbol"?s+"":s,S),S),Ka=(Ge,s,S)=>{if(!s.has(Ge))throw TypeError("Cannot "+S)};var ne=(Ge,s,S)=>(Ka(Ge,s,"read from private field"),S?S.call(Ge):s.get(Ge)),Xe=(Ge,s,S)=>{if(s.has(Ge))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(Ge):s.set(Ge,S)},mr=(Ge,s,S,k)=>(Ka(Ge,s,"write to private field"),k?k.call(Ge,S):s.set(Ge,S),S);var qa=(Ge,s,S,k)=>({set _(N){mr(Ge,s,N,S)},get _(){return ne(Ge,s,k)}}),ar=(Ge,s,S)=>(Ka(Ge,s,"access private method"),S);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const N of document.querySelectorAll('link[rel="modulepreload"]'))k(N);new MutationObserver(N=>{for(const be of N)if(be.type==="childList")for(const Ee of be.addedNodes)Ee.tagName==="LINK"&&Ee.rel==="modulepreload"&&k(Ee)}).observe(document,{childList:!0,subtree:!0});function S(N){const be={};return N.integrity&&(be.integrity=N.integrity),N.referrerPolicy&&(be.referrerPolicy=N.referrerPolicy),N.crossOrigin==="use-credentials"?be.credentials="include":N.crossOrigin==="anonymous"?be.credentials="omit":be.credentials="same-origin",be}function k(N){if(N.ep)return;N.ep=!0;const be=S(N);fetch(N.href,be)}})();class En{constructor(){this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0)}keyToState(s){return s.length==1&&(s=s.toUpperCase()),this.inputKeys.get(s)}setInputState(s,S){let k=this.keyToState(s);k!=null&&this.actionStates.set(k,S)}getInputState(s){return this.actionStates.has(s)?this.actionStates.get(s):(console.log("ERROR: trying to access an input action that doesn't exist ("+s+"). The allowed options are:"),this.actionStates.forEach(function(S,k,N){console.log("    - "+k)}),null)}updateCounters(){for(const[s,S]of this.counters)this.getInputState(s)?this.counters.set(s,S+1):this.counters.set(s,0)}getCounter(s){return this.counters.has(s)?this.counters.get(s):(console.log("ERROR: trying to access input action that doesn't have a counter ("+s+"). The counters are:"),this.counters.forEach(function(S,k,N){console.log("    - "+k+": "+S)}),null)}}var qt,st,Ct,at,Bt,Kr,Ta,en,Aa,rn,da,tn,_a,an,Qt,Qa,It,Ea,Sa,nn,Pa,on,Zt,Za,ga,un,xa,fn;class Tn{constructor(){Xe(this,Ta);Xe(this,Aa);Xe(this,da);Xe(this,_a);Xe(this,Qt);Xe(this,It);Xe(this,Sa);Xe(this,Pa);Xe(this,Zt);Xe(this,ga);Xe(this,xa);jr(this,"numRows",21);jr(this,"graceTimerDuration",.5);jr(this,"gameTickTime",1/30);jr(this,"pieceMap",new Map);jr(this,"gameState",{gameRunning:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0});Xe(this,qt,15);Xe(this,st,!0);Xe(this,Ct,0);Xe(this,at,-1);Xe(this,Bt,0);Xe(this,Kr,!1);ar(this,Qt,Qa).call(this),ar(this,It,Ea).call(this),mr(this,qt,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7),this.rgbGrid=new Uint8Array(600),this.colorMap=new Map,this.colorMap.set(1,[255,0,0]),this.colorMap.set(2,[0,255,0]),this.colorMap.set(3,[255,255,0]),this.colorMap.set(4,[0,0,255]),this.colorMap.set(5,[180,90,246]),this.colorMap.set(6,[0,255,255]),this.colorMap.set(7,[255,140,40])}get isStateChanged(){let s=ne(this,st);return mr(this,st,!1),s}generateRGBGrid(){for(let s=0;s<20;s++)for(let S=0;S<10;S++){let k=this.getBlockData(S,s),N=30*s+3*S;if(k!=0){let be=this.colorMap.get(k);this.rgbGrid[N]=be[0],this.rgbGrid[N+1]=be[1],this.rgbGrid[N+2]=be[2]}else this.rgbGrid[N]=0,this.rgbGrid[N+1]=0,this.rgbGrid[N+2]=0}if(this.gameState.playerPiece.active){for(let S=0;S<4;S++){let k=200,N=30*this.gameState.ghostBlocks[S][1]+3*this.gameState.ghostBlocks[S][0];this.rgbGrid[N]=k,this.rgbGrid[N+1]=k,this.rgbGrid[N+2]=k}let s=this.gameState.playerPiece.blocks;for(let S=0;S<4;S++){let k=this.colorMap.get(this.pieceMap.get(this.gameState.playerPiece.shape)),N=30*s[S][1]+3*s[S][0];this.rgbGrid[N]=k[0],this.rgbGrid[N+1]=k[1],this.rgbGrid[N+2]=k[2]}}return this.rgbGrid}runTick(s){let S=!1;if(s.updateCounters(),!this.gameState.gameRunning)this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0&&(this.clearRow(0),this.rowCount++,mr(this,st,!0)));else if(s.getCounter("HardDrop")==1)this.hardDropPlayerPiece(),this.finishWithPiece(),S=!0;else if(s.getCounter("Hold")==1)this.holdPiece(),S=!0;else{s.getInputState("SoftDrop")&&(S=this.tryMovePiece(0,-1)||S);let k=0;s.getCounter("RotateClockwise")==1&&(k+=1),s.getCounter("RotateAntiClockwise")==1&&(k-=1),k!=0&&(S=this.tryRotatePiece(k==1)||S);let N=0;if((s.getCounter("MoveLeft")==1||s.getCounter("MoveLeft")>5)&&(N-=1),(s.getCounter("MoveRight")==1||s.getCounter("MoveRight")>5)&&(N+=1),N!=0&&(S=this.tryMovePiece(N,0)||S),qa(this,Ct)._++,ne(this,Ct)>=ne(this,qt)){let be=!this.tryMovePiece(0,-1);S||(S=!be),mr(this,Ct,0),be&&!ne(this,Kr)&&ar(this,Sa,nn).call(this)}if(ne(this,Kr)&&(ar(this,Pa,on).call(this,this.gameTickTime),ne(this,at)<=0)){let be=!this.tryMovePiece(0,-1);S=!0,be&&this.finishWithPiece()}}S&&(ar(this,xa,fn).call(this),mr(this,st,!0))}tryMovePiece(s,S){let k=!0;for(let N=0;N<4&&k;N++){let be=this.gameState.playerPiece.blocks[N][0]+s,Ee=this.gameState.playerPiece.blocks[N][1]+S;this.isBlockHere(be,Ee)&&(k=!1)}return k&&(ar(this,Aa,rn).call(this,s,S),s!=0&&ar(this,Zt,Za).call(this),S!=0&&mr(this,Kr,!1)),k}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(s){let S=ar(this,da,tn).call(this,s);return S&&ar(this,Zt,Za).call(this),S}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,ar(this,It,Ea).call(this);else if(!this.gameState.playerPiece.wasHeld){let s=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new tt(s),this.gameState.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)}}finishWithPiece(){ar(this,_a,an).call(this),ar(this,It,Ea).call(this),mr(this,Kr,!1),ar(this,ga,un).call(this)}clearRow(s){for(let S=s;S<this.numRows-1;S++)this.gameState.gridData[S]=this.gameState.gridData[S+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(s,S){if(s<0||S<0||s>=10||S>=this.numRows)return!0;const k=this.gameState.gridData[S],N=7<<32-(3+3*s);return(k&N)!=0}getBlockData(s,S){const k=this.gameState.gridData[S],N=32-(3+3*s),be=7<<N;return(k&be)>>>N}isPlayerPieceValid(){let s=!0;for(let S=0;S<4&&s;S++)this.isBlockHere(this.gameState.playerPiece.blocks[S][0],this.gameState.playerPiece.blocks[S][1])&&(s=!1);return s}}qt=new WeakMap,st=new WeakMap,Ct=new WeakMap,at=new WeakMap,Bt=new WeakMap,Kr=new WeakMap,Ta=new WeakSet,en=function(s,S,k){const be=~(7<<32-(3+3*s));this.gameState.gridData[S]&=be;const Ee=k<<32-(3+3*s);this.gameState.gridData[S]|=Ee},Aa=new WeakSet,rn=function(s,S){for(let k=0;k<4;k++)this.gameState.playerPiece.blocks[k][0]+=s,this.gameState.playerPiece.blocks[k][1]+=S},da=new WeakSet,tn=function(s){let S=(this.gameState.playerPiece.rotationIndex+4+(s?1:-1))%4,k=[...this.gameState.playerPiece.blocks[0]],N=[];for(let fe=0;fe<4;fe++)N.push([...this.gameState.playerPiece.blocks[fe]]);let be=1,Ee=1;s?Ee=-1:be=-1;let u;for(let fe=0;fe<4;fe++)N[fe][0]-=k[0],N[fe][1]-=k[1],u=N[fe][0],N[fe][0]=be*N[fe][1],N[fe][1]=Ee*u,N[fe][0]+=k[0],N[fe][1]+=k[1];let Q;switch(this.gameState.playerPiece.shape){case"O":Q=tt.offsets.O;break;case"I":Q=tt.offsets.I;break;default:Q=tt.offsets.OTHER;break}let ue,W,he=!1;for(let fe=0;fe<5&&!he;fe++){ue=Q[fe],W=[ue[this.gameState.playerPiece.rotationIndex][0]-ue[S][0],ue[this.gameState.playerPiece.rotationIndex][1]-ue[S][1]],he=!0;for(let V=0;V<4;V++)N[V][0]+=W[0],N[V][1]+=W[1],this.isBlockHere(N[V][0],N[V][1])&&(he=!1);if(!he)for(let V=0;V<4;V++)N[V][0]-=W[0],N[V][1]-=W[1]}if(he){for(let fe=0;fe<4;fe++)this.gameState.playerPiece.blocks[fe]=[...N[fe]];this.gameState.playerPiece.rotationIndex=S}return he},_a=new WeakSet,an=function(){let s,S,k=this.pieceMap.get(this.gameState.playerPiece.shape);for(let N=0;N<4;N++)s=this.gameState.playerPiece.blocks[N][0],S=this.gameState.playerPiece.blocks[N][1],ar(this,Ta,en).call(this,s,S,k)},Qt=new WeakSet,Qa=function(){let s=["O","I","T","J","L","S","Z"],S;for(let k=0;k<7;k++)S=Math.floor(Math.random()*s.length),this.gameState.pieceQueue.push(s[S]),s.splice(S,1)},It=new WeakSet,Ea=function(){let s=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&ar(this,Qt,Qa).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new tt(s),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)},Sa=new WeakSet,nn=function(){mr(this,at,this.graceTimerDuration),mr(this,Kr,!0),mr(this,Bt,0)},Pa=new WeakSet,on=function(s){mr(this,at,ne(this,at)-s)},Zt=new WeakSet,Za=function(){ne(this,Kr)&&ne(this,Bt)<30&&(mr(this,at,Math.min(ne(this,at)+.5,this.graceTimerDuration)),qa(this,Bt)._++)},ga=new WeakSet,un=function(){for(let s=0;s<this.numRows;s++){let S=!0;for(let k=0;k<10&&S;k++)this.isBlockHere(k,s)||(S=!1);S&&(this.clearRow(s),this.gameState.linesCleared++,s--)}},xa=new WeakSet,fn=function(){for(let S=0;S<4;S++)this.gameState.ghostBlocks[S]=[...this.gameState.playerPiece.blocks[S]];let s=!1;for(;!s;){for(let S=0;S<4;S++)this.isBlockHere(this.gameState.ghostBlocks[S][0],this.gameState.ghostBlocks[S][1]-1)&&(s=!0);if(!s)for(let S=0;S<4;S++)this.gameState.ghostBlocks[S][1]-=1}};const Br=class Br{constructor(s){this.blocks=[],this.shape=s,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let S=Br.getBaseShape(s);for(let k=0;k<4;k++)this.blocks.push([...S[k]]),this.blocks[k][0]+=3,this.blocks[k][1]+=19}static getBaseShape(s){let S;switch(s){case"O":S=Br.pieces.O;break;case"I":S=Br.pieces.I;break;case"L":S=Br.pieces.L;break;case"J":S=Br.pieces.J;break;case"T":S=Br.pieces.T;break;case"S":S=Br.pieces.S;break;case"Z":S=Br.pieces.Z;break;default:S=[[0,0],[0,0],[0,0],[0,0]]}return S}};jr(Br,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),jr(Br,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let tt=Br;var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Ge,s){(function(k,N){Ge.exports=N()})(typeof self<"u"?self:An,()=>(()=>{var S={"./src/attributes.js":(Ee,u,Q)=>{function ue(l){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ue(l)}u.__esModule=!0,u.createAttribsFromArrays=ur,u.createBufferFromArray=f,u.createBufferFromTypedArray=ce,u.createBufferInfoFromArrays=i,u.createBuffersFromArrays=E,u.getArray_=O,u.getNumComponents_=we,u.setAttribInfoBufferFromArray=rr,u.setAttributeDefaults_=or,u.setAttributePrefix=nr;var W=V(Q("./src/typedarrays.js")),he=V(Q("./src/helper.js"));function fe(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(fe=function(v){return v?n:o})(l)}function V(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||ue(l)!="object"&&typeof l!="function")return{default:l};var n=fe(o);if(n&&n.has(l))return n.get(l);var m={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in l)if(T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)){var P=v?Object.getOwnPropertyDescriptor(l,T):null;P&&(P.get||P.set)?Object.defineProperty(m,T,P):m[T]=l[T]}return m.default=l,n&&n.set(l,m),m}var ye=35044,te=34962,xe=34963,C=34660,X=5120,Y=5121,w=5122,G=5123,ae=5124,pe=5125,Ne=5126,Pe={attribPrefix:""};function nr(l){Pe.attribPrefix=l}function or(l){he.copyExistingProperties(l,Pe)}function Je(l,o,n,m,v){l.bindBuffer(o,n),l.bufferData(o,m,v||ye)}function ce(l,o,n,m){if(he.isBuffer(l,o))return o;n=n||te;var v=l.createBuffer();return Je(l,n,v,o,m),v}function x(l){return l==="indices"}function B(l){return l===Int8Array||l===Uint8Array}function O(l){return l.length?l:l.data}var _=/coord|texture/i,se=/color|colour/i;function Ae(l,o){var n;if(_.test(l)?n=2:se.test(l)?n=4:n=3,o%n>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(n," but ").concat(o," values is not evenly divisible by ").concat(n,". You should specify it."));return n}function we(l,o,n){return l.numComponents||l.size||Ae(o,n||O(l).length)}function ke(l,o){if(W.isArrayBuffer(l))return l;if(W.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var n=l.type?Qe(l.type):void 0;return n||(x(o)?n=Uint16Array:n=Float32Array),new n(l.data)}function Oe(l){return typeof l=="number"?l:l?W.getGLTypeForTypedArrayType(l):Ne}function Qe(l){return typeof l=="number"?W.getTypedArrayTypeForGLType(l):l||Float32Array}function He(l,o){return{buffer:o.buffer,numValues:24,type:Oe(o.type),arrayType:Qe(o.type)}}function ir(l,o){var n=o.data||o,m=Qe(o.type),v=n*m.BYTES_PER_ELEMENT,T=l.createBuffer();return l.bindBuffer(te,T),l.bufferData(te,v,o.drawType||ye),{buffer:T,numValues:n,type:W.getGLTypeForTypedArrayType(m),arrayType:m}}function Tr(l,o,n){var m=ke(o,n);return{arrayType:m.constructor,buffer:ce(l,m,void 0,o.drawType),type:W.getGLTypeForTypedArray(m),numValues:0}}function ur(l,o){var n={};return Object.keys(o).forEach(function(m){if(!x(m)){var v=o[m],T=v.attrib||v.name||v.attribName||Pe.attribPrefix+m;if(v.value){if(!Array.isArray(v.value)&&!W.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");n[T]={value:v.value}}else{var P;v.buffer&&v.buffer instanceof WebGLBuffer?P=He:typeof v=="number"||typeof v.data=="number"?P=ir:P=Tr;var I=P(l,v,m),M=I.buffer,j=I.type,H=I.numValues,K=I.arrayType,J=v.normalize!==void 0?v.normalize:B(K),Z=we(v,m,H);n[T]={buffer:M,numComponents:Z,type:j,normalize:J,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),l.bindBuffer(te,null),n}function rr(l,o,n,m){n=ke(n),m!==void 0?(l.bindBuffer(te,o.buffer),l.bufferSubData(te,m,n)):Je(l,te,o.buffer,n,o.drawType)}function lr(l,o){return o===X||o===Y?1:o===w||o===G?2:o===ae||o===pe||o===Ne?4:0}var Ar=["position","positions","a_position"];function ee(l){var o,n;for(n=0;n<Ar.length&&(o=Ar[n],!(o in l));++n);n===Ar.length&&(o=Object.keys(l)[0]);var m=l[o],v=O(m).length;if(v===void 0)return 1;var T=we(m,o),P=v/T;if(v%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(v));return P}function r(l,o){var n,m;for(m=0;m<Ar.length&&(n=Ar[m],!(n in o||(n=Pe.attribPrefix+n,n in o)));++m);m===Ar.length&&(n=Object.keys(o)[0]);var v=o[n];if(!v.buffer)return 1;l.bindBuffer(te,v.buffer);var T=l.getBufferParameter(te,C);l.bindBuffer(te,null);var P=lr(l,v.type),I=T/P,M=v.numComponents||v.size,j=I/M;if(j%1!==0)throw new Error("numComponents ".concat(M," not correct for length ").concat(length));return j}function i(l,o,n){var m=ur(l,o),v=Object.assign({},n||{});v.attribs=Object.assign({},n?n.attribs:{},m);var T=o.indices;if(T){var P=ke(T,"indices");v.indices=ce(l,P,xe),v.numElements=P.length,v.elementType=W.getGLTypeForTypedArray(P)}else v.numElements||(v.numElements=r(l,v.attribs));return v}function f(l,o,n){var m=n==="indices"?xe:te,v=ke(o,n);return ce(l,v,m)}function E(l,o){var n={};return Object.keys(o).forEach(function(m){n[m]=f(l,o[m],m)}),o.indices?(n.numElements=o.indices.length,n.elementType=W.getGLTypeForTypedArray(ke(o.indices),"indices")):n.numElements=ee(o),n}},"./src/draw.js":(Ee,u,Q)=>{function ue(C){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},ue(C)}u.__esModule=!0,u.drawBufferInfo=te,u.drawObjectList=xe;var W=fe(Q("./src/programs.js"));function he(C){if(typeof WeakMap!="function")return null;var X=new WeakMap,Y=new WeakMap;return(he=function(G){return G?Y:X})(C)}function fe(C,X){if(!X&&C&&C.__esModule)return C;if(C===null||ue(C)!="object"&&typeof C!="function")return{default:C};var Y=he(X);if(Y&&Y.has(C))return Y.get(C);var w={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in C)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(C,ae)){var pe=G?Object.getOwnPropertyDescriptor(C,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=C[ae]}return w.default=C,Y&&Y.set(C,w),w}var V=4,ye=5123;function te(C,X,Y,w,G,ae){Y=Y===void 0?V:Y;var pe=X.indices,Ne=X.elementType,Pe=w===void 0?X.numElements:w;G=G===void 0?0:G,Ne||pe?ae!==void 0?C.drawElementsInstanced(Y,Pe,Ne===void 0?ye:X.elementType,G,ae):C.drawElements(Y,Pe,Ne===void 0?ye:X.elementType,G):ae!==void 0?C.drawArraysInstanced(Y,G,Pe,ae):C.drawArrays(Y,G,Pe)}function xe(C,X){var Y=null,w=null;X.forEach(function(G){if(G.active!==!1){var ae=G.programInfo,pe=G.vertexArrayInfo||G.bufferInfo,Ne=!1,Pe=G.type===void 0?V:G.type;ae!==Y&&(Y=ae,C.useProgram(ae.program),Ne=!0),(Ne||pe!==w)&&(w&&w.vertexArrayObject&&!pe.vertexArrayObject&&C.bindVertexArray(null),w=pe,W.setBuffersAndAttributes(C,ae,pe)),W.setUniforms(ae,G.uniforms),te(C,pe,Pe,G.count,G.offset,G.instanceCount)}}),w&&w.vertexArrayObject&&C.bindVertexArray(null)}},"./src/framebuffers.js":(Ee,u,Q)=>{function ue(ee){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ue(ee)}u.__esModule=!0,u.bindFramebufferInfo=Ar,u.createFramebufferInfo=rr,u.resizeFramebufferInfo=lr;var W=V(Q("./src/textures.js")),he=V(Q("./src/helper.js"));function fe(ee){if(typeof WeakMap!="function")return null;var r=new WeakMap,i=new WeakMap;return(fe=function(E){return E?i:r})(ee)}function V(ee,r){if(!r&&ee&&ee.__esModule)return ee;if(ee===null||ue(ee)!="object"&&typeof ee!="function")return{default:ee};var i=fe(r);if(i&&i.has(ee))return i.get(ee);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in ee)if(l!=="default"&&Object.prototype.hasOwnProperty.call(ee,l)){var o=E?Object.getOwnPropertyDescriptor(ee,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=ee[l]}return f.default=ee,i&&i.set(ee,f),f}var ye=36160,te=36161,xe=3553,C=5121,X=6402,Y=6408,w=33190,G=36012,ae=35056,pe=36013,Ne=32854,Pe=32855,nr=36194,or=33189,Je=6401,ce=36168,x=34041,B=36064,O=36096,_=36128,se=33306,Ae=33071,we=9729,ke=[{format:Y,type:C,min:we,wrap:Ae},{format:x}],Oe={};Oe[x]=se,Oe[Je]=_,Oe[ce]=_,Oe[X]=O,Oe[or]=O,Oe[w]=O,Oe[G]=O,Oe[ae]=se,Oe[pe]=se;function Qe(ee,r){return Oe[ee]||Oe[r]}var He={};He[Ne]=!0,He[Pe]=!0,He[nr]=!0,He[x]=!0,He[or]=!0,He[Je]=!0,He[ce]=!0;function ir(ee){return He[ee]}var Tr=32;function ur(ee){return ee>=B&&ee<B+Tr}function rr(ee,r,i,f){var E=ye,l=ee.createFramebuffer();ee.bindFramebuffer(E,l),i=i||ee.drawingBufferWidth,f=f||ee.drawingBufferHeight,r=r||ke;var o=[],n={framebuffer:l,attachments:[],width:i,height:f};return r.forEach(function(m,v){var T=m.attachment,P=m.samples,I=m.format,M=m.attachmentPoint||Qe(I,m.internalFormat);if(M||(M=B+v),ur(M)&&o.push(M),!T)if(P!==void 0||ir(I))T=ee.createRenderbuffer(),ee.bindRenderbuffer(te,T),P>1?ee.renderbufferStorageMultisample(te,P,I,i,f):ee.renderbufferStorage(te,I,i,f);else{var j=Object.assign({},m);j.width=i,j.height=f,j.auto===void 0&&(j.auto=!1,j.min=j.min||j.minMag||we,j.mag=j.mag||j.minMag||we,j.wrapS=j.wrapS||j.wrap||Ae,j.wrapT=j.wrapT||j.wrap||Ae),T=W.createTexture(ee,j)}if(he.isRenderbuffer(ee,T))ee.framebufferRenderbuffer(E,M,te,T);else if(he.isTexture(ee,T))m.layer!==void 0?ee.framebufferTextureLayer(E,M,T,m.level||0,m.layer):ee.framebufferTexture2D(E,M,m.target||xe,T,m.level||0);else throw new Error("unknown attachment type");n.attachments.push(T)}),ee.drawBuffers&&ee.drawBuffers(o),n}function lr(ee,r,i,f,E){f=f||ee.drawingBufferWidth,E=E||ee.drawingBufferHeight,r.width=f,r.height=E,i=i||ke,i.forEach(function(l,o){var n=r.attachments[o],m=l.format,v=l.samples;if(v!==void 0||he.isRenderbuffer(ee,n))ee.bindRenderbuffer(te,n),v>1?ee.renderbufferStorageMultisample(te,v,m,f,E):ee.renderbufferStorage(te,m,f,E);else if(he.isTexture(ee,n))W.resizeTexture(ee,n,l,f,E);else throw new Error("unknown attachment type")})}function Ar(ee,r,i){i=i||ye,r?(ee.bindFramebuffer(i,r.framebuffer),ee.viewport(0,0,r.width,r.height)):(ee.bindFramebuffer(i,null),ee.viewport(0,0,ee.drawingBufferWidth,ee.drawingBufferHeight))}},"./src/helper.js":(Ee,u)=>{u.__esModule=!0,u.copyExistingProperties=W,u.copyNamedProperties=ue,u.error=he,u.isBuffer=te,u.isRenderbuffer=xe,u.isSampler=Y,u.isShader=C,u.isTexture=X,u.warn=fe;function Q(w){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},Q(w)}function ue(w,G,ae){w.forEach(function(pe){var Ne=G[pe];Ne!==void 0&&(ae[pe]=Ne)})}function W(w,G){Object.keys(G).forEach(function(ae){G.hasOwnProperty(ae)&&w.hasOwnProperty(ae)&&(G[ae]=w[ae])})}function he(){var w;(w=console).error.apply(w,arguments)}function fe(){var w;(w=console).warn.apply(w,arguments)}var V=new Map;function ye(w,G){if(!w||Q(w)!=="object")return!1;var ae=V.get(G);ae||(ae=new WeakMap,V.set(G,ae));var pe=ae.get(w);if(pe===void 0){var Ne=Object.prototype.toString.call(w);pe=Ne.substring(8,Ne.length-1)===G,ae.set(w,pe)}return pe}function te(w,G){return typeof WebGLBuffer<"u"&&ye(G,"WebGLBuffer")}function xe(w,G){return typeof WebGLRenderbuffer<"u"&&ye(G,"WebGLRenderbuffer")}function C(w,G){return typeof WebGLShader<"u"&&ye(G,"WebGLShader")}function X(w,G){return typeof WebGLTexture<"u"&&ye(G,"WebGLTexture")}function Y(w,G){return typeof WebGLSampler<"u"&&ye(G,"WebGLSampler")}},"./src/m4.js":(Ee,u,Q)=>{function ue(r){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ue(r)}u.__esModule=!0,u.axisRotate=Tr,u.axisRotation=ir,u.copy=C,u.create=xe,u.frustum=Je,u.getAxis=Ne,u.getTranslation=pe,u.identity=X,u.inverse=w,u.lookAt=O,u.multiply=G,u.negate=te,u.ortho=or,u.perspective=nr,u.rotateX=we,u.rotateY=Oe,u.rotateZ=He,u.rotationX=Ae,u.rotationY=ke,u.rotationZ=Qe,u.scale=rr,u.scaling=ur,u.setAxis=Pe,u.setDefaultType=ye,u.setTranslation=ae,u.transformDirection=Ar,u.transformNormal=ee,u.transformPoint=lr,u.translate=se,u.translation=_,u.transpose=Y;var W=fe(Q("./src/v3.js"));function he(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(he=function(l){return l?f:i})(r)}function fe(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||ue(r)!="object"&&typeof r!="function")return{default:r};var f=he(i);if(f&&f.has(r))return f.get(r);var E={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var n=l?Object.getOwnPropertyDescriptor(r,o):null;n&&(n.get||n.set)?Object.defineProperty(E,o,n):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var V=Float32Array;function ye(r){var i=V;return V=r,i}function te(r,i){return i=i||new V(16),i[0]=-r[0],i[1]=-r[1],i[2]=-r[2],i[3]=-r[3],i[4]=-r[4],i[5]=-r[5],i[6]=-r[6],i[7]=-r[7],i[8]=-r[8],i[9]=-r[9],i[10]=-r[10],i[11]=-r[11],i[12]=-r[12],i[13]=-r[13],i[14]=-r[14],i[15]=-r[15],i}function xe(){return new V(16).fill(0)}function C(r,i){return i=i||new V(16),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}function X(r){return r=r||new V(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Y(r,i){if(i=i||new V(16),i===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,i}var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=r[2*4+0],M=r[2*4+1],j=r[2*4+2],H=r[2*4+3],K=r[3*4+0],J=r[3*4+1],Z=r[3*4+2],oe=r[3*4+3];return i[0]=E,i[1]=m,i[2]=I,i[3]=K,i[4]=l,i[5]=v,i[6]=M,i[7]=J,i[8]=o,i[9]=T,i[10]=j,i[11]=Z,i[12]=n,i[13]=P,i[14]=H,i[15]=oe,i}function w(r,i){i=i||new V(16);var f=r[0*4+0],E=r[0*4+1],l=r[0*4+2],o=r[0*4+3],n=r[1*4+0],m=r[1*4+1],v=r[1*4+2],T=r[1*4+3],P=r[2*4+0],I=r[2*4+1],M=r[2*4+2],j=r[2*4+3],H=r[3*4+0],K=r[3*4+1],J=r[3*4+2],Z=r[3*4+3],oe=M*Z,ie=J*j,q=v*Z,ve=J*T,Ie=v*j,ze=M*T,Ue=l*Z,je=J*o,de=l*j,Re=M*o,qe=l*T,Ve=v*o,Ke=P*K,We=H*I,Ze=n*K,Fe=H*m,De=n*I,hr=P*m,fr=f*K,dr=H*E,Sr=f*I,Mr=P*E,Or=f*m,Nr=n*E,Qr=oe*m+ve*I+Ie*K-(ie*m+q*I+ze*K),mt=ie*E+Ue*I+Re*K-(oe*E+je*I+de*K),ht=q*E+je*m+qe*K-(ve*E+Ue*m+Ve*K),yt=ze*E+de*m+Ve*I-(Ie*E+Re*m+qe*I),vr=1/(f*Qr+n*mt+P*ht+H*yt);return i[0]=vr*Qr,i[1]=vr*mt,i[2]=vr*ht,i[3]=vr*yt,i[4]=vr*(ie*n+q*P+ze*H-(oe*n+ve*P+Ie*H)),i[5]=vr*(oe*f+je*P+de*H-(ie*f+Ue*P+Re*H)),i[6]=vr*(ve*f+Ue*n+Ve*H-(q*f+je*n+qe*H)),i[7]=vr*(Ie*f+Re*n+qe*P-(ze*f+de*n+Ve*P)),i[8]=vr*(Ke*T+Fe*j+De*Z-(We*T+Ze*j+hr*Z)),i[9]=vr*(We*o+fr*j+Mr*Z-(Ke*o+dr*j+Sr*Z)),i[10]=vr*(Ze*o+dr*T+Or*Z-(Fe*o+fr*T+Nr*Z)),i[11]=vr*(hr*o+Sr*T+Nr*j-(De*o+Mr*T+Or*j)),i[12]=vr*(Ze*M+hr*J+We*v-(De*J+Ke*v+Fe*M)),i[13]=vr*(Sr*J+Ke*l+dr*M-(fr*M+Mr*J+We*l)),i[14]=vr*(fr*v+Nr*J+Fe*l-(Or*J+Ze*l+dr*v)),i[15]=vr*(Or*M+De*l+Mr*v-(Sr*v+Nr*M+hr*l)),i}function G(r,i,f){f=f||new V(16);var E=r[0],l=r[1],o=r[2],n=r[3],m=r[4],v=r[5],T=r[6],P=r[7],I=r[8],M=r[9],j=r[10],H=r[11],K=r[12],J=r[13],Z=r[14],oe=r[15],ie=i[0],q=i[1],ve=i[2],Ie=i[3],ze=i[4],Ue=i[5],je=i[6],de=i[7],Re=i[8],qe=i[9],Ve=i[10],Ke=i[11],We=i[12],Ze=i[13],Fe=i[14],De=i[15];return f[0]=E*ie+m*q+I*ve+K*Ie,f[1]=l*ie+v*q+M*ve+J*Ie,f[2]=o*ie+T*q+j*ve+Z*Ie,f[3]=n*ie+P*q+H*ve+oe*Ie,f[4]=E*ze+m*Ue+I*je+K*de,f[5]=l*ze+v*Ue+M*je+J*de,f[6]=o*ze+T*Ue+j*je+Z*de,f[7]=n*ze+P*Ue+H*je+oe*de,f[8]=E*Re+m*qe+I*Ve+K*Ke,f[9]=l*Re+v*qe+M*Ve+J*Ke,f[10]=o*Re+T*qe+j*Ve+Z*Ke,f[11]=n*Re+P*qe+H*Ve+oe*Ke,f[12]=E*We+m*Ze+I*Fe+K*De,f[13]=l*We+v*Ze+M*Fe+J*De,f[14]=o*We+T*Ze+j*Fe+Z*De,f[15]=n*We+P*Ze+H*Fe+oe*De,f}function ae(r,i,f){return f=f||X(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=i[0],f[13]=i[1],f[14]=i[2],f[15]=1,f}function pe(r,i){return i=i||W.create(),i[0]=r[12],i[1]=r[13],i[2]=r[14],i}function Ne(r,i,f){f=f||W.create();var E=i*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function Pe(r,i,f,E){E!==r&&(E=C(r,E));var l=f*4;return E[l+0]=i[0],E[l+1]=i[1],E[l+2]=i[2],E}function nr(r,i,f,E,l){l=l||new V(16);var o=Math.tan(Math.PI*.5-.5*r),n=1/(f-E);return l[0]=o/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+E)*n,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*E*n*2,l[15]=0,l}function or(r,i,f,E,l,o,n){return n=n||new V(16),n[0]=2/(i-r),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2/(E-f),n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2/(l-o),n[11]=0,n[12]=(i+r)/(r-i),n[13]=(E+f)/(f-E),n[14]=(o+l)/(l-o),n[15]=1,n}function Je(r,i,f,E,l,o,n){n=n||new V(16);var m=i-r,v=E-f,T=l-o;return n[0]=2*l/m,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*l/v,n[6]=0,n[7]=0,n[8]=(r+i)/m,n[9]=(E+f)/v,n[10]=o/T,n[11]=-1,n[12]=0,n[13]=0,n[14]=l*o/T,n[15]=0,n}var ce,x,B;function O(r,i,f,E){return E=E||new V(16),ce=ce||W.create(),x=x||W.create(),B=B||W.create(),W.normalize(W.subtract(r,i,B),B),W.normalize(W.cross(f,B,ce),ce),W.normalize(W.cross(B,ce,x),x),E[0]=ce[0],E[1]=ce[1],E[2]=ce[2],E[3]=0,E[4]=x[0],E[5]=x[1],E[6]=x[2],E[7]=0,E[8]=B[0],E[9]=B[1],E[10]=B[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function _(r,i){return i=i||new V(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}function se(r,i,f){f=f||new V(16);var E=i[0],l=i[1],o=i[2],n=r[0],m=r[1],v=r[2],T=r[3],P=r[1*4+0],I=r[1*4+1],M=r[1*4+2],j=r[1*4+3],H=r[2*4+0],K=r[2*4+1],J=r[2*4+2],Z=r[2*4+3],oe=r[3*4+0],ie=r[3*4+1],q=r[3*4+2],ve=r[3*4+3];return r!==f&&(f[0]=n,f[1]=m,f[2]=v,f[3]=T,f[4]=P,f[5]=I,f[6]=M,f[7]=j,f[8]=H,f[9]=K,f[10]=J,f[11]=Z),f[12]=n*E+P*l+H*o+oe,f[13]=m*E+I*l+K*o+ie,f[14]=v*E+M*l+J*o+q,f[15]=T*E+j*l+Z*o+ve,f}function Ae(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=f,i[6]=E,i[7]=0,i[8]=0,i[9]=-E,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function we(r,i,f){f=f||new V(16);var E=r[4],l=r[5],o=r[6],n=r[7],m=r[8],v=r[9],T=r[10],P=r[11],I=Math.cos(i),M=Math.sin(i);return f[4]=I*E+M*m,f[5]=I*l+M*v,f[6]=I*o+M*T,f[7]=I*n+M*P,f[8]=I*m-M*E,f[9]=I*v-M*l,f[10]=I*T-M*o,f[11]=I*P-M*n,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ke(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=0,i[2]=-E,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=E,i[9]=0,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Oe(r,i,f){f=f||new V(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[2*4+0],v=r[2*4+1],T=r[2*4+2],P=r[2*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E-M*m,f[1]=I*l-M*v,f[2]=I*o-M*T,f[3]=I*n-M*P,f[8]=I*m+M*E,f[9]=I*v+M*l,f[10]=I*T+M*o,f[11]=I*P+M*n,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Qe(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=E,i[2]=0,i[3]=0,i[4]=-E,i[5]=f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function He(r,i,f){f=f||new V(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E+M*m,f[1]=I*l+M*v,f[2]=I*o+M*T,f[3]=I*n+M*P,f[4]=I*m-M*E,f[5]=I*v-M*l,f[6]=I*T-M*o,f[7]=I*P-M*n,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ir(r,i,f){f=f||new V(16);var E=r[0],l=r[1],o=r[2],n=Math.sqrt(E*E+l*l+o*o);E/=n,l/=n,o/=n;var m=E*E,v=l*l,T=o*o,P=Math.cos(i),I=Math.sin(i),M=1-P;return f[0]=m+(1-m)*P,f[1]=E*l*M+o*I,f[2]=E*o*M-l*I,f[3]=0,f[4]=E*l*M-o*I,f[5]=v+(1-v)*P,f[6]=l*o*M+E*I,f[7]=0,f[8]=E*o*M+l*I,f[9]=l*o*M-E*I,f[10]=T+(1-T)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,i,f,E){E=E||new V(16);var l=i[0],o=i[1],n=i[2],m=Math.sqrt(l*l+o*o+n*n);l/=m,o/=m,n/=m;var v=l*l,T=o*o,P=n*n,I=Math.cos(f),M=Math.sin(f),j=1-I,H=v+(1-v)*I,K=l*o*j+n*M,J=l*n*j-o*M,Z=l*o*j-n*M,oe=T+(1-T)*I,ie=o*n*j+l*M,q=l*n*j+o*M,ve=o*n*j-l*M,Ie=P+(1-P)*I,ze=r[0],Ue=r[1],je=r[2],de=r[3],Re=r[4],qe=r[5],Ve=r[6],Ke=r[7],We=r[8],Ze=r[9],Fe=r[10],De=r[11];return E[0]=H*ze+K*Re+J*We,E[1]=H*Ue+K*qe+J*Ze,E[2]=H*je+K*Ve+J*Fe,E[3]=H*de+K*Ke+J*De,E[4]=Z*ze+oe*Re+ie*We,E[5]=Z*Ue+oe*qe+ie*Ze,E[6]=Z*je+oe*Ve+ie*Fe,E[7]=Z*de+oe*Ke+ie*De,E[8]=q*ze+ve*Re+Ie*We,E[9]=q*Ue+ve*qe+Ie*Ze,E[10]=q*je+ve*Ve+Ie*Fe,E[11]=q*de+ve*Ke+Ie*De,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function ur(r,i){return i=i||new V(16),i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function rr(r,i,f){f=f||new V(16);var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function lr(r,i,f){f=f||W.create();var E=i[0],l=i[1],o=i[2],n=E*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+l*r[4]+o*r[8]+r[12])/n,f[1]=(E*r[1]+l*r[5]+o*r[9]+r[13])/n,f[2]=(E*r[2]+l*r[6]+o*r[10]+r[14])/n,f}function Ar(r,i,f){f=f||W.create();var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0]+l*r[4]+o*r[8],f[1]=E*r[1]+l*r[5]+o*r[9],f[2]=E*r[2]+l*r[6]+o*r[10],f}function ee(r,i,f){f=f||W.create();var E=w(r),l=i[0],o=i[1],n=i[2];return f[0]=l*E[0]+o*E[1]+n*E[2],f[1]=l*E[4]+o*E[5]+n*E[6],f[2]=l*E[8]+o*E[9]+n*E[10],f}},"./src/primitives.js":(Ee,u,Q)=>{function ue(o){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ue(o)}u.__esModule=!0,u.concatVertices=i,u.create3DFBuffers=u.create3DFBufferInfo=void 0,u.create3DFVertices=ke,u.createAugmentedTypedArray=w,u.createCrescentBuffers=u.createCrescentBufferInfo=void 0,u.createCrescentVertices=Oe,u.createCubeBuffers=u.createCubeBufferInfo=u.createCresentVertices=u.createCresentBuffers=u.createCresentBufferInfo=void 0,u.createCubeVertices=se,u.createCylinderBuffers=u.createCylinderBufferInfo=void 0,u.createCylinderVertices=Qe,u.createDiscBuffers=u.createDiscBufferInfo=void 0,u.createDiscVertices=ir,u.createPlaneBuffers=u.createPlaneBufferInfo=void 0,u.createPlaneVertices=B,u.createSphereBuffers=u.createSphereBufferInfo=void 0,u.createSphereVertices=O,u.createTorusBuffers=u.createTorusBufferInfo=void 0,u.createTorusVertices=He,u.createTruncatedConeBuffers=u.createTruncatedConeBufferInfo=void 0,u.createTruncatedConeVertices=Ae,u.createXYQuadBuffers=u.createXYQuadBufferInfo=void 0,u.createXYQuadVertices=x,u.deindexVertices=ae,u.duplicateVertices=f,u.flattenNormals=pe,u.makeRandomVertexColors=ur,u.reorientDirections=nr,u.reorientNormals=or,u.reorientPositions=Je,u.reorientVertices=ce;var W=xe(Q("./src/attributes.js")),he=xe(Q("./src/helper.js")),fe=xe(Q("./src/typedarrays.js")),V=xe(Q("./src/m4.js")),ye=xe(Q("./src/v3.js"));function te(o){if(typeof WeakMap!="function")return null;var n=new WeakMap,m=new WeakMap;return(te=function(T){return T?m:n})(o)}function xe(o,n){if(!n&&o&&o.__esModule)return o;if(o===null||ue(o)!="object"&&typeof o!="function")return{default:o};var m=te(n);if(m&&m.has(o))return m.get(o);var v={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in o)if(P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)){var I=T?Object.getOwnPropertyDescriptor(o,P):null;I&&(I.get||I.set)?Object.defineProperty(v,P,I):v[P]=o[P]}return v.default=o,m&&m.set(o,v),v}var C=W.getArray_,X=W.getNumComponents_;function Y(o,n){var m=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var T=arguments[v];if(T instanceof Array||fe.isArrayBuffer(T))for(var P=0;P<T.length;++P)o[m++]=T[P];else o[m++]=T}},o.reset=function(v){m=v||0},o.numComponents=n,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function w(o,n,m){var v=m||Float32Array;return Y(new v(o*n),o)}function G(o){return o!=="indices"}function ae(o){var n=o.indices,m={},v=n.length;function T(P){for(var I=o[P],M=I.numComponents,j=w(M,v,I.constructor),H=0;H<v;++H)for(var K=n[H],J=K*M,Z=0;Z<M;++Z)j.push(I[J+Z]);m[P]=j}return Object.keys(o).filter(G).forEach(T),m}function pe(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var n=o.normal,m=n.length,v=0;v<m;v+=9){var T=n[v+0],P=n[v+1],I=n[v+2],M=n[v+3],j=n[v+4],H=n[v+5],K=n[v+6],J=n[v+7],Z=n[v+8],oe=T+M+K,ie=P+j+J,q=I+H+Z,ve=Math.sqrt(oe*oe+ie*ie+q*q);oe/=ve,ie/=ve,q/=ve,n[v+0]=oe,n[v+1]=ie,n[v+2]=q,n[v+3]=oe,n[v+4]=ie,n[v+5]=q,n[v+6]=oe,n[v+7]=ie,n[v+8]=q}return o}function Ne(o,n,m){for(var v=o.length,T=new Float32Array(3),P=0;P<v;P+=3)m(n,[o[P],o[P+1],o[P+2]],T),o[P]=T[0],o[P+1]=T[1],o[P+2]=T[2]}function Pe(o,n,m){m=m||ye.create();var v=n[0],T=n[1],P=n[2];return m[0]=v*o[0]+T*o[1]+P*o[2],m[1]=v*o[4]+T*o[5]+P*o[6],m[2]=v*o[8]+T*o[9]+P*o[10],m}function nr(o,n){return Ne(o,n,V.transformDirection),o}function or(o,n){return Ne(o,V.inverse(n),Pe),o}function Je(o,n){return Ne(o,n,V.transformPoint),o}function ce(o,n){return Object.keys(o).forEach(function(m){var v=o[m];m.indexOf("pos")>=0?Je(v,n):m.indexOf("tan")>=0||m.indexOf("binorm")>=0?nr(v,n):m.indexOf("norm")>=0&&or(v,n)}),o}function x(o,n,m){return o=o||2,n=n||0,m=m||0,o*=.5,{position:{numComponents:2,data:[n+-1*o,m+-1*o,n+1*o,m+-1*o,n+-1*o,m+1*o,n+1*o,m+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function B(o,n,m,v,T){o=o||1,n=n||1,m=m||1,v=v||1,T=T||V.identity();for(var P=(m+1)*(v+1),I=w(3,P),M=w(3,P),j=w(2,P),H=0;H<=v;H++)for(var K=0;K<=m;K++){var J=K/m,Z=H/v;I.push(o*J-o*.5,0,n*Z-n*.5),M.push(0,1,0),j.push(J,Z)}for(var oe=m+1,ie=w(3,m*v*2,Uint16Array),q=0;q<v;q++)for(var ve=0;ve<m;ve++)ie.push((q+0)*oe+ve,(q+1)*oe+ve,(q+0)*oe+ve+1),ie.push((q+1)*oe+ve,(q+1)*oe+ve+1,(q+0)*oe+ve+1);var Ie=ce({position:I,normal:M,texcoord:j,indices:ie},T);return Ie}function O(o,n,m,v,T,P,I){if(n<=0||m<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,T=T||Math.PI,P=P||0,I=I||Math.PI*2;for(var M=T-v,j=I-P,H=(n+1)*(m+1),K=w(3,H),J=w(3,H),Z=w(2,H),oe=0;oe<=m;oe++)for(var ie=0;ie<=n;ie++){var q=ie/n,ve=oe/m,Ie=j*q+P,ze=M*ve+v,Ue=Math.sin(Ie),je=Math.cos(Ie),de=Math.sin(ze),Re=Math.cos(ze),qe=je*de,Ve=Re,Ke=Ue*de;K.push(o*qe,o*Ve,o*Ke),J.push(qe,Ve,Ke),Z.push(1-q,ve)}for(var We=n+1,Ze=w(3,n*m*2,Uint16Array),Fe=0;Fe<n;Fe++)for(var De=0;De<m;De++)Ze.push((De+0)*We+Fe,(De+0)*We+Fe+1,(De+1)*We+Fe),Ze.push((De+1)*We+Fe,(De+0)*We+Fe+1,(De+1)*We+Fe+1);return{position:K,normal:J,texcoord:Z,indices:Ze}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function se(o){o=o||1;for(var n=o/2,m=[[-n,-n,-n],[+n,-n,-n],[-n,+n,-n],[+n,+n,-n],[-n,-n,+n],[+n,-n,+n],[-n,+n,+n],[+n,+n,+n]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],P=6*4,I=w(3,P),M=w(3,P),j=w(2,P),H=w(3,6*2,Uint16Array),K=0;K<6;++K){for(var J=_[K],Z=0;Z<4;++Z){var oe=m[J[Z]],ie=v[K],q=T[Z];I.push(oe),M.push(ie),j.push(q)}var ve=4*K;H.push(ve+0,ve+1,ve+2),H.push(ve+0,ve+2,ve+3)}return{position:I,normal:M,texcoord:j,indices:H}}function Ae(o,n,m,v,T,P,I){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var M=P===void 0?!0:P,j=I===void 0?!0:I,H=(M?2:0)+(j?2:0),K=(v+1)*(T+1+H),J=w(3,K),Z=w(3,K),oe=w(2,K),ie=w(3,v*(T+H/2)*2,Uint16Array),q=v+1,ve=Math.atan2(o-n,m),Ie=Math.cos(ve),ze=Math.sin(ve),Ue=M?-2:0,je=T+(j?2:0),de=Ue;de<=je;++de){var Re=de/T,qe=m*Re,Ve=void 0;de<0?(qe=0,Re=1,Ve=o):de>T?(qe=m,Re=1,Ve=n):Ve=o+(n-o)*(de/T),(de===-2||de===T+2)&&(Ve=0,Re=0),qe-=m/2;for(var Ke=0;Ke<q;++Ke){var We=Math.sin(Ke*Math.PI*2/v),Ze=Math.cos(Ke*Math.PI*2/v);J.push(We*Ve,qe,Ze*Ve),de<0?Z.push(0,-1,0):de>T?Z.push(0,1,0):Ve===0?Z.push(0,0,0):Z.push(We*Ie,ze,Ze*Ie),oe.push(Ke/v,1-Re)}}for(var Fe=0;Fe<T+H;++Fe)if(!(Fe===1&&M||Fe===T+H-2&&j))for(var De=0;De<v;++De)ie.push(q*(Fe+0)+0+De,q*(Fe+0)+1+De,q*(Fe+1)+1+De),ie.push(q*(Fe+0)+0+De,q*(Fe+1)+1+De,q*(Fe+1)+0+De);return{position:J,normal:Z,texcoord:oe,indices:ie}}function we(o,n){n=n||[];for(var m=[],v=0;v<o.length;v+=4){var T=o[v],P=o.slice(v+1,v+4);P.push.apply(P,n);for(var I=0;I<T;++I)m.push.apply(m,P)}return m}function ke(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],n=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],m=we([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=we([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,P={position:w(3,T),texcoord:w(2,T),normal:w(3,T),color:w(4,T,Uint8Array),indices:w(3,T/3,Uint16Array)};P.position.push(o),P.texcoord.push(n),P.normal.push(m),P.color.push(v);for(var I=0;I<T;++I)P.indices.push(I);return P}function Oe(o,n,m,v,T,P,I){if(T<=0)throw new Error("subdivisionDown must be > 0");P=P||0,I=I||1;var M=2,j=I-P,H=(T+1)*2*(2+M),K=w(3,H),J=w(3,H),Z=w(2,H);function oe(je,de,Re){return je+(de-je)*Re}function ie(je,de,Re,qe,Ve,Ke){for(var We=0;We<=T;We++){var Ze=de/(M-1),Fe=We/T,De=(Ze-.5)*2,hr=(P+Fe*j)*Math.PI,fr=Math.sin(hr),dr=Math.cos(hr),Sr=oe(o,je,fr),Mr=De*v,Or=dr*o,Nr=fr*Sr;K.push(Mr,Or,Nr);var Qr=ye.add(ye.multiply([0,fr,dr],Re),qe);J.push(Qr),Z.push(Ze*Ve+Ke,Fe)}}for(var q=0;q<M;q++){var ve=(q/(M-1)-.5)*2;ie(n,q,[1,1,1],[0,0,0],1,0),ie(n,q,[0,0,0],[ve,0,0],0,0),ie(m,q,[1,1,1],[0,0,0],1,0),ie(m,q,[0,0,0],[ve,0,0],0,1)}var Ie=w(3,T*2*(2+M),Uint16Array);function ze(je,de){for(var Re=0;Re<T;++Re)Ie.push(je+Re+0,je+Re+1,de+Re+0),Ie.push(je+Re+1,de+Re+1,de+Re+0)}var Ue=T+1;return ze(Ue*0,Ue*4),ze(Ue*5,Ue*7),ze(Ue*6,Ue*2),ze(Ue*3,Ue*1),{position:K,normal:J,texcoord:Z,indices:Ie}}function Qe(o,n,m,v,T,P){return Ae(o,o,n,m,v,T,P)}function He(o,n,m,v,T,P){if(m<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,P=P||Math.PI*2;for(var I=P-T,M=m+1,j=v+1,H=M*j,K=w(3,H),J=w(3,H),Z=w(2,H),oe=w(3,m*v*2,Uint16Array),ie=0;ie<j;++ie)for(var q=ie/v,ve=q*Math.PI*2,Ie=Math.sin(ve),ze=o+Ie*n,Ue=Math.cos(ve),je=Ue*n,de=0;de<M;++de){var Re=de/m,qe=T+Re*I,Ve=Math.sin(qe),Ke=Math.cos(qe),We=Ve*ze,Ze=Ke*ze,Fe=Ve*Ie,De=Ke*Ie;K.push(We,je,Ze),J.push(Fe,Ue,De),Z.push(Re,1-q)}for(var hr=0;hr<v;++hr)for(var fr=0;fr<m;++fr){var dr=1+fr,Sr=1+hr;oe.push(M*hr+fr,M*Sr+fr,M*hr+dr),oe.push(M*Sr+fr,M*Sr+dr,M*hr+dr)}return{position:K,normal:J,texcoord:Z,indices:oe}}function ir(o,n,m,v,T){if(n<3)throw new Error("divisions must be at least 3");m=m||1,T=T||1,v=v||0;for(var P=(n+1)*(m+1),I=w(3,P),M=w(3,P),j=w(2,P),H=w(3,m*n*2,Uint16Array),K=0,J=o-v,Z=n+1,oe=0;oe<=m;++oe){for(var ie=v+J*Math.pow(oe/m,T),q=0;q<=n;++q){var ve=2*Math.PI*q/n,Ie=ie*Math.cos(ve),ze=ie*Math.sin(ve);if(I.push(Ie,0,ze),M.push(0,1,0),j.push(1-q/n,oe/m),oe>0&&q!==n){var Ue=K+(q+1),je=K+q,de=K+q-Z,Re=K+(q+1)-Z;H.push(Ue,je,de),H.push(Ue,de,Re)}}K+=n+1}return{position:I,normal:M,texcoord:j,indices:H}}function Tr(o){return Math.random()*o|0}function ur(o,n){n=n||{};var m=o.position.numElements,v=w(4,m,Uint8Array),T=n.rand||function(J,Z){return Z<3?Tr(256):255};if(o.color=v,o.indices)for(var P=0;P<m;++P)v.push(T(P,0),T(P,1),T(P,2),T(P,3));else for(var I=n.vertsPerColor||3,M=m/I,j=0;j<M;++j)for(var H=[T(j,0),T(j,1),T(j,2),T(j,3)],K=0;K<I;++K)v.push(H);return o}function rr(o){return function(n){var m=o.apply(this,Array.prototype.slice.call(arguments,1));return W.createBuffersFromArrays(n,m)}}function lr(o){return function(n){var m=o.apply(null,Array.prototype.slice.call(arguments,1));return W.createBufferInfoFromArrays(n,m)}}var Ar=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function ee(o,n,m,v){v=v||0;for(var T=o.length,P=0;P<T;++P)n[m+P]=o[P]+v}function r(o,n){var m=C(o),v=new m.constructor(n),T=v;return m.numComponents&&m.numElements&&Y(v,m.numComponents),o.data&&(T={data:v},he.copyNamedProperties(Ar,o,T)),T}function i(o){for(var n={},m,v=function(){var K=o[T];Object.keys(K).forEach(function(J){n[J]||(n[J]=[]),!m&&J!=="indices"&&(m=J);var Z=K[J],oe=X(Z,J),ie=C(Z),q=ie.length/oe;n[J].push(q)})},T=0;T<o.length;++T)v();function P(H){for(var K=0,J,Z=0;Z<o.length;++Z){var oe=o[Z],ie=oe[H],q=C(ie);K+=q.length,(!J||ie.data)&&(J=ie)}return{length:K,spec:J}}function I(H,K,J){for(var Z=0,oe=0,ie=0;ie<o.length;++ie){var q=o[ie],ve=q[H],Ie=C(ve);H==="indices"?(ee(Ie,J,oe,Z),Z+=K[ie]):ee(Ie,J,oe),oe+=Ie.length}}var M=n[m],j={};return Object.keys(n).forEach(function(H){var K=P(H),J=r(K.spec,K.length);I(H,M,C(J)),j[H]=J}),j}function f(o){var n={};return Object.keys(o).forEach(function(m){var v=o[m],T=C(v),P=r(v,T.length);ee(T,C(P),0),n[m]=P}),n}u.create3DFBufferInfo=lr(ke),u.create3DFBuffers=rr(ke),u.createCubeBufferInfo=lr(se),u.createCubeBuffers=rr(se),u.createPlaneBufferInfo=lr(B),u.createPlaneBuffers=rr(B),u.createSphereBufferInfo=lr(O),u.createSphereBuffers=rr(O),u.createTruncatedConeBufferInfo=lr(Ae),u.createTruncatedConeBuffers=rr(Ae),u.createXYQuadBufferInfo=lr(x),u.createXYQuadBuffers=rr(x);var E=u.createCrescentBufferInfo=lr(Oe),l=u.createCrescentBuffers=rr(Oe);u.createCylinderBufferInfo=lr(Qe),u.createCylinderBuffers=rr(Qe),u.createTorusBufferInfo=lr(He),u.createTorusBuffers=rr(He),u.createDiscBufferInfo=lr(ir),u.createDiscBuffers=rr(ir),u.createCresentBufferInfo=E,u.createCresentBuffers=l,u.createCresentVertices=Oe},"./src/programs.js":(Ee,u,Q)=>{function ue(e){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(e)}u.__esModule=!0,u.bindTransformFeedbackInfo=xt,u.bindUniformBlock=wt,u.createAttributeSetters=Yt,u.createProgram=ft,u.createProgramAsync=void 0,u.createProgramFromScripts=kt,u.createProgramFromSources=Vt,u.createProgramInfo=c,u.createProgramInfoAsync=void 0,u.createProgramInfoFromProgram=Ft,u.createProgramInfos=d,u.createProgramInfosAsync=void 0,u.createPrograms=y,u.createProgramsAsync=void 0,u.createTransformFeedback=Xt,u.createTransformFeedbackInfo=gt,u.createUniformBlockInfo=zt,u.createUniformBlockInfoFromProgram=Ht,u.createUniformBlockSpecFromProgram=Yr,u.createUniformSetters=$r,u.setAttributes=Kt,u.setBlockUniforms=Va,u.setBuffersAndAttributes=Wa,u.setUniformBlock=ha,u.setUniforms=Rt,u.setUniformsAndBindTextures=void 0;var W=V(Q("./src/utils.js")),he=V(Q("./src/helper.js"));function fe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(fe=function(b){return b?a:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ue(e)!="object"&&typeof e!="function")return{default:e};var a=fe(t);if(a&&a.has(e))return a.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in e)if(A!=="default"&&Object.prototype.hasOwnProperty.call(e,A)){var R=b?Object.getOwnPropertyDescriptor(e,A):null;R&&(R.get||R.set)?Object.defineProperty(p,A,R):p[A]=e[A]}return p.default=e,a&&a.set(e,p),p}function ye(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ye=function(){return t};var e,t={},a=Object.prototype,p=a.hasOwnProperty,b=Object.defineProperty||function(re,L,z){re[L]=z.value},A=typeof Symbol=="function"?Symbol:{},R=A.iterator||"@@iterator",g=A.asyncIterator||"@@asyncIterator",D=A.toStringTag||"@@toStringTag";function F(re,L,z){return Object.defineProperty(re,L,{value:z,enumerable:!0,configurable:!0,writable:!0}),re[L]}try{F({},"")}catch{F=function(z,Te,Be){return z[Te]=Be}}function U(re,L,z,Te){var Be=L&&L.prototype instanceof Le?L:Le,Se=Object.create(Be.prototype),cr=new za(Te||[]);return b(Se,"_invoke",{value:hn(re,z,cr)}),Se}function $(re,L,z){try{return{type:"normal",arg:re.call(L,z)}}catch(Te){return{type:"throw",arg:Te}}}t.wrap=U;var le="suspendedStart",me="suspendedYield",ge="executing",Me="completed",Ce={};function Le(){}function Ye(){}function tr(){}var sr={};F(sr,R,function(){return this});var Pr=Object.getPrototypeOf,Dr=Pr&&Pr(Pr(Ya([])));Dr&&Dr!==a&&p.call(Dr,R)&&(sr=Dr);var Gr=tr.prototype=Le.prototype=Object.create(sr);function pa(re){["next","throw","return"].forEach(function(L){F(re,L,function(z){return this._invoke(L,z)})})}function ba(re,L){function z(Be,Se,cr,gr){var wr=$(re[Be],re,Se);if(wr.type!=="throw"){var lt=wr.arg,et=lt.value;return et&&ue(et)=="object"&&p.call(et,"__await")?L.resolve(et.__await).then(function(vt){z("next",vt,cr,gr)},function(vt){z("throw",vt,cr,gr)}):L.resolve(et).then(function(vt){lt.value=vt,cr(lt)},function(vt){return z("throw",vt,cr,gr)})}gr(wr.arg)}var Te;b(this,"_invoke",{value:function(Se,cr){function gr(){return new L(function(wr,lt){z(Se,cr,wr,lt)})}return Te=Te?Te.then(gr,gr):gr()}})}function hn(re,L,z){var Te=le;return function(Be,Se){if(Te===ge)throw new Error("Generator is already running");if(Te===Me){if(Be==="throw")throw Se;return{value:e,done:!0}}for(z.method=Be,z.arg=Se;;){var cr=z.delegate;if(cr){var gr=$a(cr,z);if(gr){if(gr===Ce)continue;return gr}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(Te===le)throw Te=Me,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);Te=ge;var wr=$(re,L,z);if(wr.type==="normal"){if(Te=z.done?Me:me,wr.arg===Ce)continue;return{value:wr.arg,done:z.done}}wr.type==="throw"&&(Te=Me,z.method="throw",z.arg=wr.arg)}}}function $a(re,L){var z=L.method,Te=re.iterator[z];if(Te===e)return L.delegate=null,z==="throw"&&re.iterator.return&&(L.method="return",L.arg=e,$a(re,L),L.method==="throw")||z!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+z+"' method")),Ce;var Be=$(Te,re.iterator,L.arg);if(Be.type==="throw")return L.method="throw",L.arg=Be.arg,L.delegate=null,Ce;var Se=Be.arg;return Se?Se.done?(L[re.resultName]=Se.value,L.next=re.nextLoc,L.method!=="return"&&(L.method="next",L.arg=e),L.delegate=null,Ce):Se:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,Ce)}function yn(re){var L={tryLoc:re[0]};1 in re&&(L.catchLoc=re[1]),2 in re&&(L.finallyLoc=re[2],L.afterLoc=re[3]),this.tryEntries.push(L)}function Ha(re){var L=re.completion||{};L.type="normal",delete L.arg,re.completion=L}function za(re){this.tryEntries=[{tryLoc:"root"}],re.forEach(yn,this),this.reset(!0)}function Ya(re){if(re||re===""){var L=re[R];if(L)return L.call(re);if(typeof re.next=="function")return re;if(!isNaN(re.length)){var z=-1,Te=function Be(){for(;++z<re.length;)if(p.call(re,z))return Be.value=re[z],Be.done=!1,Be;return Be.value=e,Be.done=!0,Be};return Te.next=Te}}throw new TypeError(ue(re)+" is not iterable")}return Ye.prototype=tr,b(Gr,"constructor",{value:tr,configurable:!0}),b(tr,"constructor",{value:Ye,configurable:!0}),Ye.displayName=F(tr,D,"GeneratorFunction"),t.isGeneratorFunction=function(re){var L=typeof re=="function"&&re.constructor;return!!L&&(L===Ye||(L.displayName||L.name)==="GeneratorFunction")},t.mark=function(re){return Object.setPrototypeOf?Object.setPrototypeOf(re,tr):(re.__proto__=tr,F(re,D,"GeneratorFunction")),re.prototype=Object.create(Gr),re},t.awrap=function(re){return{__await:re}},pa(ba.prototype),F(ba.prototype,g,function(){return this}),t.AsyncIterator=ba,t.async=function(re,L,z,Te,Be){Be===void 0&&(Be=Promise);var Se=new ba(U(re,L,z,Te),Be);return t.isGeneratorFunction(L)?Se:Se.next().then(function(cr){return cr.done?cr.value:Se.next()})},pa(Gr),F(Gr,D,"Generator"),F(Gr,R,function(){return this}),F(Gr,"toString",function(){return"[object Generator]"}),t.keys=function(re){var L=Object(re),z=[];for(var Te in L)z.push(Te);return z.reverse(),function Be(){for(;z.length;){var Se=z.pop();if(Se in L)return Be.value=Se,Be.done=!1,Be}return Be.done=!0,Be}},t.values=Ya,za.prototype={constructor:za,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ha),!L)for(var z in this)z.charAt(0)==="t"&&p.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=e)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var z=this;function Te(lt,et){return cr.type="throw",cr.arg=L,z.next=lt,et&&(z.method="next",z.arg=e),!!et}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var Se=this.tryEntries[Be],cr=Se.completion;if(Se.tryLoc==="root")return Te("end");if(Se.tryLoc<=this.prev){var gr=p.call(Se,"catchLoc"),wr=p.call(Se,"finallyLoc");if(gr&&wr){if(this.prev<Se.catchLoc)return Te(Se.catchLoc,!0);if(this.prev<Se.finallyLoc)return Te(Se.finallyLoc)}else if(gr){if(this.prev<Se.catchLoc)return Te(Se.catchLoc,!0)}else{if(!wr)throw new Error("try statement without catch or finally");if(this.prev<Se.finallyLoc)return Te(Se.finallyLoc)}}}},abrupt:function(L,z){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Be=this.tryEntries[Te];if(Be.tryLoc<=this.prev&&p.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var Se=Be;break}}Se&&(L==="break"||L==="continue")&&Se.tryLoc<=z&&z<=Se.finallyLoc&&(Se=null);var cr=Se?Se.completion:{};return cr.type=L,cr.arg=z,Se?(this.method="next",this.next=Se.finallyLoc,Ce):this.complete(cr)},complete:function(L,z){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&z&&(this.next=z),Ce},finish:function(L){for(var z=this.tryEntries.length-1;z>=0;--z){var Te=this.tryEntries[z];if(Te.finallyLoc===L)return this.complete(Te.completion,Te.afterLoc),Ha(Te),Ce}},catch:function(L){for(var z=this.tryEntries.length-1;z>=0;--z){var Te=this.tryEntries[z];if(Te.tryLoc===L){var Be=Te.completion;if(Be.type==="throw"){var Se=Be.arg;Ha(Te)}return Se}}throw new Error("illegal catch attempt")},delegateYield:function(L,z,Te){return this.delegate={iterator:Ya(L),resultName:z,nextLoc:Te},this.method==="next"&&(this.arg=e),Ce}},t}function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),a.push.apply(a,p)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?te(Object(a),!0).forEach(function(p){C(e,p,a[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(a,p))})}return e}function C(e,t,a){return t=X(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X(e){var t=Y(e,"string");return ue(t)=="symbol"?t:String(t)}function Y(e,t){if(ue(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var p=a.call(e,t||"default");if(ue(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w(e,t,a,p,b,A,R){try{var g=e[A](R),D=g.value}catch(F){a(F);return}g.done?t(D):Promise.resolve(D).then(p,b)}function G(e){return function(){var t=this,a=arguments;return new Promise(function(p,b){var A=e.apply(t,a);function R(D){w(A,p,b,R,g,"next",D)}function g(D){w(A,p,b,R,g,"throw",D)}R(void 0)})}}function ae(e,t){return Pe(e)||Ne(e,t)||ce(e,t)||pe()}function pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ne(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var p,b,A,R,g=[],D=!0,F=!1;try{if(A=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;D=!1}else for(;!(D=(p=A.call(a)).done)&&(g.push(p.value),g.length!==t);D=!0);}catch(U){F=!0,b=U}finally{try{if(!D&&a.return!=null&&(R=a.return(),Object(R)!==R))return}finally{if(F)throw b}}return g}}function Pe(e){if(Array.isArray(e))return e}function nr(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=ce(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(F){throw F},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,R=!1,g;return{s:function(){a=a.call(e)},n:function(){var F=a.next();return A=F.done,F},e:function(F){R=!0,g=F},f:function(){try{!A&&a.return!=null&&a.return()}finally{if(R)throw g}}}}function or(e){return B(e)||x(e)||ce(e)||Je()}function Je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,t){if(e){if(typeof e=="string")return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}}function x(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,p=new Array(t);a<t;a++)p[a]=e[a];return p}var _=he.error,se=he.warn;function Ae(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var we=33984,ke=35048,Oe=34962,Qe=34963,He=35345,ir=35982,Tr=36386,ur=35713,rr=35714,lr=35632,Ar=35633,ee=35981,r=35718,i=35721,f=35971,E=35382,l=35396,o=35398,n=35392,m=35395,v=5126,T=35664,P=35665,I=35666,M=5124,j=35667,H=35668,K=35669,J=35670,Z=35671,oe=35672,ie=35673,q=35674,ve=35675,Ie=35676,ze=35678,Ue=35680,je=35679,de=35682,Re=35685,qe=35686,Ve=35687,Ke=35688,We=35689,Ze=35690,Fe=36289,De=36292,hr=36293,fr=5125,dr=36294,Sr=36295,Mr=36296,Or=36298,Nr=36299,Qr=36300,mt=36303,ht=36306,yt=36307,vr=36308,Ba=36311,pt=3553,bt=34067,Ot=32879,Et=35866,_e={};function ea(e,t){return _e[t].bindPoint}function Ia(e,t){return function(a){e.uniform1f(t,a)}}function Ma(e,t){return function(a){e.uniform1fv(t,a)}}function Da(e,t){return function(a){e.uniform2fv(t,a)}}function Oa(e,t){return function(a){e.uniform3fv(t,a)}}function Na(e,t){return function(a){e.uniform4fv(t,a)}}function ra(e,t){return function(a){e.uniform1i(t,a)}}function ta(e,t){return function(a){e.uniform1iv(t,a)}}function aa(e,t){return function(a){e.uniform2iv(t,a)}}function na(e,t){return function(a){e.uniform3iv(t,a)}}function oa(e,t){return function(a){e.uniform4iv(t,a)}}function Ur(e,t){return function(a){e.uniform1ui(t,a)}}function er(e,t){return function(a){e.uniform1uiv(t,a)}}function Tt(e,t){return function(a){e.uniform2uiv(t,a)}}function Zr(e,t){return function(a){e.uniform3uiv(t,a)}}function At(e,t){return function(a){e.uniform4uiv(t,a)}}function kr(e,t){return function(a){e.uniformMatrix2fv(t,!1,a)}}function yr(e,t){return function(a){e.uniformMatrix3fv(t,!1,a)}}function ia(e,t){return function(a){e.uniformMatrix4fv(t,!1,a)}}function ua(e,t){return function(a){e.uniformMatrix2x3fv(t,!1,a)}}function fa(e,t){return function(a){e.uniformMatrix3x2fv(t,!1,a)}}function Rr(e,t){return function(a){e.uniformMatrix2x4fv(t,!1,a)}}function ut(e,t){return function(a){e.uniformMatrix4x2fv(t,!1,a)}}function Nt(e,t){return function(a){e.uniformMatrix3x4fv(t,!1,a)}}function Ua(e,t){return function(a){e.uniformMatrix4x3fv(t,!1,a)}}function br(e,t,a,p){var b=ea(e,t);return W.isWebGL2(e)?function(A){var R,g;!A||he.isTexture(e,A)?(R=A,g=null):(R=A.texture,g=A.sampler),e.uniform1i(p,a),e.activeTexture(we+a),e.bindTexture(b,R),e.bindSampler(a,g)}:function(A){e.uniform1i(p,a),e.activeTexture(we+a),e.bindTexture(b,A)}}function Er(e,t,a,p,b){for(var A=ea(e,t),R=new Int32Array(b),g=0;g<b;++g)R[g]=a+g;return W.isWebGL2(e)?function(D){e.uniform1iv(p,R),D.forEach(function(F,U){e.activeTexture(we+R[U]);var $,le;!F||he.isTexture(e,F)?($=F,le=null):($=F.texture,le=F.sampler),e.bindSampler(a,le),e.bindTexture(A,$)})}:function(D){e.uniform1iv(p,R),D.forEach(function(F,U){e.activeTexture(we+R[U]),e.bindTexture(A,F)})}}_e[v]={Type:Float32Array,size:4,setter:Ia,arraySetter:Ma},_e[T]={Type:Float32Array,size:8,setter:Da,cols:2},_e[P]={Type:Float32Array,size:12,setter:Oa,cols:3},_e[I]={Type:Float32Array,size:16,setter:Na,cols:4},_e[M]={Type:Int32Array,size:4,setter:ra,arraySetter:ta},_e[j]={Type:Int32Array,size:8,setter:aa,cols:2},_e[H]={Type:Int32Array,size:12,setter:na,cols:3},_e[K]={Type:Int32Array,size:16,setter:oa,cols:4},_e[fr]={Type:Uint32Array,size:4,setter:Ur,arraySetter:er},_e[dr]={Type:Uint32Array,size:8,setter:Tt,cols:2},_e[Sr]={Type:Uint32Array,size:12,setter:Zr,cols:3},_e[Mr]={Type:Uint32Array,size:16,setter:At,cols:4},_e[J]={Type:Uint32Array,size:4,setter:ra,arraySetter:ta},_e[Z]={Type:Uint32Array,size:8,setter:aa,cols:2},_e[oe]={Type:Uint32Array,size:12,setter:na,cols:3},_e[ie]={Type:Uint32Array,size:16,setter:oa,cols:4},_e[q]={Type:Float32Array,size:32,setter:kr,rows:2,cols:2},_e[ve]={Type:Float32Array,size:48,setter:yr,rows:3,cols:3},_e[Ie]={Type:Float32Array,size:64,setter:ia,rows:4,cols:4},_e[Re]={Type:Float32Array,size:32,setter:ua,rows:2,cols:3},_e[qe]={Type:Float32Array,size:32,setter:Rr,rows:2,cols:4},_e[Ve]={Type:Float32Array,size:48,setter:fa,rows:3,cols:2},_e[Ke]={Type:Float32Array,size:48,setter:Nt,rows:3,cols:4},_e[We]={Type:Float32Array,size:64,setter:ut,rows:4,cols:2},_e[Ze]={Type:Float32Array,size:64,setter:Ua,rows:4,cols:3},_e[ze]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},_e[Ue]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[je]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},_e[de]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},_e[Fe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[De]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[hr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[Or]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},_e[Nr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},_e[Qr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[mt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[ht]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},_e[yt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},_e[vr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[Ba]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et};function dt(e,t){return function(a){if(a.value)switch(e.disableVertexAttribArray(t),a.value.length){case 4:e.vertexAttrib4fv(t,a.value);break;case 3:e.vertexAttrib3fv(t,a.value);break;case 2:e.vertexAttrib2fv(t,a.value);break;case 1:e.vertexAttrib1fv(t,a.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,a.numComponents||a.size,a.type||v,a.normalize||!1,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function xr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4iv(t,a.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||M,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function Cr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4uiv(t,a.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||fr,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function Vr(e,t,a){var p=a.size,b=a.count;return function(A){e.bindBuffer(Oe,A.buffer);for(var R=A.size||A.numComponents||p,g=R/b,D=A.type||v,F=_e[D],U=F.size*R,$=A.normalize||!1,le=A.offset||0,me=U/b,ge=0;ge<b;++ge)e.enableVertexAttribArray(t+ge),e.vertexAttribPointer(t+ge,g,D,$,U,le+me*ge),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+ge,A.divisor||0)}}var $e={};$e[v]={size:4,setter:dt},$e[T]={size:8,setter:dt},$e[P]={size:12,setter:dt},$e[I]={size:16,setter:dt},$e[M]={size:4,setter:xr},$e[j]={size:8,setter:xr},$e[H]={size:12,setter:xr},$e[K]={size:16,setter:xr},$e[fr]={size:4,setter:Cr},$e[dr]={size:8,setter:Cr},$e[Sr]={size:12,setter:Cr},$e[Mr]={size:16,setter:Cr},$e[J]={size:4,setter:xr},$e[Z]={size:8,setter:xr},$e[oe]={size:12,setter:xr},$e[ie]={size:16,setter:xr},$e[q]={size:4,setter:Vr,count:2},$e[ve]={size:9,setter:Vr,count:3},$e[Ie]={size:16,setter:Vr,count:4};var Wr=/ERROR:\s*\d+:(\d+)/gi;function Lr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=or(t.matchAll(Wr)),b=new Map(p.map(function(A,R){var g=parseInt(A[1]),D=p[R+1],F=D?D.index:t.length,U=t.substring(A.index,F);return[g-1,U]}));return e.split(`
`).map(function(A,R){var g=b.get(R);return"".concat(R+1+a,": ").concat(A).concat(g?`

^^^ `.concat(g):"")}).join(`
`)}var Ut=/^[ \t]*\n/;function pr(e){var t=0;return Ut.test(e)&&(t=1,e=e.replace(Ut,"")),{lineOffset:t,shaderSource:e}}function _t(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function St(e,t,a,p){p=p||_;var b=e.getShaderParameter(a,ur);if(!b){var A=e.getShaderInfoLog(a),R=pr(e.getShaderSource(a)),g=R.lineOffset,D=R.shaderSource,F="".concat(Lr(D,A,g),`
Error compiling `).concat(W.glEnumToString(e,t),": ").concat(A);return p(F),F}return""}function Xr(e,t,a){var p,b,A;if(typeof t=="function"&&(a=t,t=void 0),typeof e=="function")a=e,e=void 0;else if(e&&!Array.isArray(e)){var R=e;a=R.errorCallback,e=R.attribLocations,p=R.transformFeedbackVaryings,b=R.transformFeedbackMode,A=R.callback}var g=a||_,D=[],F={errorCallback:function(le){D.push(le);for(var me=arguments.length,ge=new Array(me>1?me-1:0),Me=1;Me<me;Me++)ge[Me-1]=arguments[Me];g.apply(void 0,[le].concat(ge))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:A,errors:D};{var U={};Array.isArray(e)?e.forEach(function($,le){U[$]=t?t[le]:le}):U=e||{},F.attribLocations=U}return F}var Hr=["VERTEX_SHADER","FRAGMENT_SHADER"];function ca(e,t){if(t.indexOf("frag")>=0)return lr;if(t.indexOf("vert")>=0)return Ar}function la(e,t,a){var p=e.getAttachedShaders(t),b=nr(p),A;try{for(b.s();!(A=b.n()).done;){var R=A.value;a.has(R)&&e.deleteShader(R)}}catch(g){b.e(g)}finally{b.f()}e.deleteProgram(t)}var va=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(a){return setTimeout(a,t)})};function sa(e,t,a){for(var p=e.createProgram(),b=Xr(a),A=b.attribLocations,R=b.transformFeedbackVaryings,g=b.transformFeedbackMode,D=0;D<t.length;++D){var F=t[D];if(typeof F=="string"){var U=Ae(F),$=U?U.text:F,le=e[Hr[D]];U&&U.type&&(le=ca(e,U.type)||le),F=e.createShader(le),e.shaderSource(F,pr($).shaderSource),e.compileShader(F),e.attachShader(p,F)}}Object.entries(A).forEach(function(ge){var Me=ae(ge,2),Ce=Me[0],Le=Me[1];return e.bindAttribLocation(p,Le,Ce)});{var me=R;me&&(me.attribs&&(me=me.attribs),Array.isArray(me)||(me=Object.keys(me)),e.transformFeedbackVaryings(p,me,g||ee))}return e.linkProgram(p),p}function ft(e,t,a,p,b){var A=Xr(a,p,b),R=new Set(t),g=sa(e,t,A);function D(F,U){var $=jt(F,U,A.errorCallback);return $&&la(F,U,R),$}if(A.callback){Lt(e,g).then(function(){var F=D(e,g);A.callback(F,F?void 0:g)});return}return D(e,g)?void 0:g}function zr(e){return function(t,a){for(var p=arguments.length,b=new Array(p>2?p-2:0),A=2;A<p;A++)b[A-2]=arguments[A];return new Promise(function(R,g){var D=Xr.apply(void 0,b);D.callback=function(F,U){F?g(F):R(U)},e(t,a,D)})}}u.createProgramAsync=zr(ft),u.createProgramInfoAsync=zr(c);function Lt(e,t){return Gt.apply(this,arguments)}function Gt(){return Gt=G(ye().mark(function e(t,a){var p,b,A;return ye().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,F){return D.getProgramParameter(F,p.COMPLETION_STATUS_KHR)}:function(){return!0},A=0;case 3:return g.next=5,va(A);case 5:A=16.666666666666668;case 6:if(!b(t,a)){g.next=3;break}case 7:case"end":return g.stop()}},e)})),Gt.apply(this,arguments)}function Jr(e,t){return Pt.apply(this,arguments)}function Pt(){return Pt=G(ye().mark(function e(t,a){var p,b,A;return ye().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=0,b=Object.values(a);case 1:if(!(p<b.length)){g.next=8;break}return A=b[p],g.next=5,Lt(t,A);case 5:p++,g.next=1;break;case 8:case"end":return g.stop()}},e)})),Pt.apply(this,arguments)}function jt(e,t,a){a=a||_;var p=e.getProgramParameter(t,rr);if(!p){var b=e.getProgramInfoLog(t);a("Error in program linking: ".concat(b));var A=e.getAttachedShaders(t),R=A.map(function(g){return St(e,e.getShaderParameter(g,e.SHADER_TYPE),g,a)});return"".concat(b,`
`).concat(R.filter(function(g){return g}).join(`
`))}}function kt(e,t,a,p,b){var A=Xr(a,p,b),R=[],g=nr(t),D;try{for(g.s();!(D=g.n()).done;){var F=D.value,U=Ae(F);if(!U)return _t(A,"unknown script element: ".concat(F));R.push(U.text)}}catch($){g.e($)}finally{g.f()}return ft(e,R,A)}function Vt(e,t,a,p,b){return ft(e,t,a,p,b)}function Wt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var La=/(\.|\[|]|\w+)/g,Ga=function(t){return t>="0"&&t<="9"};function ct(e,t,a,p){for(var b=e.split(La).filter(function(ge){return ge!==""}),A=0,R="";;){var g=b[A++];R+=g;var D=Ga(g[0]),F=D?parseInt(g):g;D&&(R+=b[A++]);var U=A===b.length;if(U){a[F]=t;break}else{var $=b[A++],le=$==="[",me=a[F]||(le?[]:{});a[F]=me,a=me,p[R]=p[R]||function(ge){return function(Me){ya(ge,Me)}}(me),R+=$}}}function $r(e,t){var a=0;function p(le,me,ge){var Me=me.name.endsWith("[0]"),Ce=me.type,Le=_e[Ce];if(!Le)throw new Error("unknown type: 0x".concat(Ce.toString(16)));var Ye;if(Le.bindPoint){var tr=a;a+=me.size,Me?Ye=Le.arraySetter(e,Ce,tr,ge,me.size):Ye=Le.setter(e,Ce,tr,ge,me.size)}else Le.arraySetter&&Me?Ye=Le.arraySetter(e,ge):Ye=Le.setter(e,ge);return Ye.location=ge,Ye}for(var b={},A={},R=e.getProgramParameter(t,r),g=0;g<R;++g){var D=e.getActiveUniform(t,g);if(!Wt(D)){var F=D.name;F.endsWith("[0]")&&(F=F.substr(0,F.length-3));var U=e.getUniformLocation(t,D.name);if(U){var $=p(t,D,U);b[F]=$,ct(F,$,A,b)}}}return b}function gt(e,t){for(var a={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var A=e.getTransformFeedbackVarying(t,b);a[A.name]={index:b,type:A.type,size:A.size}}return a}function xt(e,t,a){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),a.attribs&&(a=a.attribs);for(var p in a){var b=t[p];if(b){var A=a[p];A.offset?e.bindBufferRange(ir,b.index,A.buffer,A.offset,A.size):e.bindBufferBase(ir,b.index,A.buffer)}}}function Xt(e,t,a){var p=e.createTransformFeedback();return e.bindTransformFeedback(Tr,p),e.useProgram(t.program),xt(e,t,a),e.bindTransformFeedback(Tr,null),p}function Yr(e,t){for(var a=e.getProgramParameter(t,r),p=[],b=[],A=0;A<a;++A){b.push(A),p.push({});var R=e.getActiveUniform(t,A);p[A].name=R.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(le){var me=le[0],ge=le[1];e.getActiveUniforms(t,b,e[me]).forEach(function(Me,Ce){p[Ce][ge]=Me})});for(var g={},D=e.getProgramParameter(t,E),F=0;F<D;++F){var U=e.getActiveUniformBlockName(t,F),$={index:e.getUniformBlockIndex(t,U),usedByVertexShader:e.getActiveUniformBlockParameter(t,F,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,F,o),size:e.getActiveUniformBlockParameter(t,F,n),uniformIndices:e.getActiveUniformBlockParameter(t,F,m)};$.used=$.usedByVertexShader||$.usedByFragmentShader,g[U]=$}return{blockSpecs:g,uniformData:p}}var ma=/\[\d+\]\.$/,ja=function(t,a){return((t+(a-1))/a|0)*a};function ka(e,t,a,p){if(t||a){p=p||1;var b=e.length,A=b/4;return function(R){for(var g=0,D=0,F=0;F<A;++F){for(var U=0;U<p;++U)e[g++]=R[D++];g+=4-p}}}else return function(R){R.length?e.set(R):e[0]=R}}function Ht(e,t,a,p){var b=a.blockSpecs,A=a.uniformData,R=b[p];if(!R)return se("no uniform block object named:",p),{name:p,uniforms:{}};var g=new ArrayBuffer(R.size),D=e.createBuffer(),F=R.index;e.bindBuffer(He,D),e.uniformBlockBinding(t,R.index,F);var U=p+".";ma.test(U)&&(U=U.replace(ma,"."));var $={},le={},me={};return R.uniformIndices.forEach(function(ge){var Me=A[ge],Ce=Me.name;Ce.startsWith(U)&&(Ce=Ce.substr(U.length));var Le=Ce.endsWith("[0]");Le&&(Ce=Ce.substr(0,Ce.length-3));var Ye=_e[Me.type],tr=Ye.Type,sr=Le?ja(Ye.size,16)*Me.size:Ye.size*Me.size,Pr=new tr(g,Me.offset,sr/tr.BYTES_PER_ELEMENT);$[Ce]=Pr;var Dr=ka(Pr,Le,Ye.rows,Ye.cols);le[Ce]=Dr,ct(Ce,Dr,me,le)}),{name:p,array:g,asFloat:new Float32Array(g),buffer:D,uniforms:$,setters:le}}function zt(e,t,a){return Ht(e,t.program,t.uniformBlockSpec,a)}function wt(e,t,a){var p=t.uniformBlockSpec||t,b=p.blockSpecs[a.name];if(b){var A=b.index;return e.bindBufferRange(He,A,a.buffer,a.offset||0,a.array.byteLength),!0}return!1}function ha(e,t,a){wt(e,t,a)&&e.bufferData(He,a.array,ke)}function Va(e,t){var a=e.setters;for(var p in t){var b=a[p];if(b){var A=t[p];b(A)}}}function ya(e,t){for(var a in t){var p=e[a];typeof p=="function"?p(t[a]):ya(e[a],t[a])}}function Rt(e){for(var t=e.uniformSetters||e,a=arguments.length<=1?0:arguments.length-1,p=0;p<a;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var A=b.length,R=0;R<A;++R)Rt(t,b[R]);else for(var g in b){var D=t[g];D&&D(b[g])}}}u.setUniformsAndBindTextures=Rt;function Yt(e,t){for(var a={},p=e.getProgramParameter(t,i),b=0;b<p;++b){var A=e.getActiveAttrib(t,b);if(!Wt(A)){var R=e.getAttribLocation(t,A.name),g=$e[A.type],D=g.setter(e,R,g);D.location=R,a[A.name]=D}}return a}function Kt(e,t){for(var a in t){var p=e[a];p&&p(t[a])}}function Wa(e,t,a){a.vertexArrayObject?e.bindVertexArray(a.vertexArrayObject):(Kt(t.attribSetters||t,a.attribs),a.indices&&e.bindBuffer(Qe,a.indices))}function Ft(e,t){var a=$r(e,t),p=Yt(e,t),b={program:t,uniformSetters:a,attribSetters:p};return W.isWebGL2(e)&&(b.uniformBlockSpec=Yr(e,t),b.transformFeedbackInfo=gt(e,t)),b}var Xa=/\s|{|}|;/;function c(e,t,a,p,b){var A=Xr(a,p,b),R=[];if(t=t.map(function(F){if(!Xa.test(F)){var U=Ae(F);if(U)F=U.text;else{var $="no element with id: ".concat(F);A.errorCallback($),R.push($)}}return F}),R.length)return _t(A,"");var g=A.callback;g&&(A.callback=function(F,U){g(F,F?void 0:Ft(e,U))});var D=Vt(e,t,A);return D?Ft(e,D):null}function h(e,t,a,p,b){for(var A=0,R=Object.entries(t);A<R.length;A++){var g=ae(R[A],2),D=g[0],F=g[1],U=xe({},b),$=a[D];Array.isArray($)||Object.assign(U,$);var le=jt(e,F,U.errorCallback);if(le){for(var me=0,ge=Object.values(t);me<ge.length;me++){var Me=ge[me],Ce=e.getAttachedShaders(Me);e.deleteProgram(Me);var Le=nr(Ce),Ye;try{for(Le.s();!(Ye=Le.n()).done;){var tr=Ye.value;p.has(tr)||e.deleteShader(tr)}}catch(sr){Le.e(sr)}finally{Le.f()}}return le}}}function y(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(R){var g=ae(R,2),D=g[0],F=g[1],U=xe({},a),$=Array.isArray(F)?F:F.shaders;return Array.isArray(F)||Object.assign(U,F),$.forEach(p.add,p),[D,sa(e,$,U)]}));if(a.callback){Jr(e,b).then(function(){var R=h(e,b,t,p,a);a.callback(R,R?void 0:b)});return}var A=h(e,b,t,p,a);return A?void 0:b}function d(e,t,a){a=Xr(a);function p(R,g){return Object.fromEntries(Object.entries(g).map(function(D){var F=ae(D,2),U=F[0],$=F[1];return[U,Ft(R,$)]}))}var b=a.callback;b&&(a.callback=function(R,g){b(R,R?void 0:p(e,g))});var A=y(e,t,a);if(!(b||!A))return p(e,A)}u.createProgramsAsync=zr(y),u.createProgramInfosAsync=zr(d)},"./src/textures.js":(Ee,u,Q)=>{function ue(c){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},ue(c)}u.__esModule=!0,u.canFilter=va,u.canGenerateMipmap=la,u.createSampler=Wt,u.createSamplers=La,u.createTexture=Kt,u.createTextures=Xa,u.getBytesPerElementForInternalFormat=Xr,u.getFormatAndTypeForInternalFormat=Hr,u.getNumComponentsForFormat=sa,u.loadTextureFromUrl=ha,u.resizeTexture=Wa,u.setDefaultTextureColor=Lt,u.setEmptyTexture=Yt,u.setSamplerParameters=Vt,u.setTextureDefaults_=Gt,u.setTextureFilteringForSize=ct,u.setTextureFromArray=Rt,u.setTextureFromElement=Xt,u.setTextureParameters=kt;var W=ye(Q("./src/utils.js")),he=ye(Q("./src/typedarrays.js")),fe=ye(Q("./src/helper.js"));function V(c){if(typeof WeakMap!="function")return null;var h=new WeakMap,y=new WeakMap;return(V=function(e){return e?y:h})(c)}function ye(c,h){if(!h&&c&&c.__esModule)return c;if(c===null||ue(c)!="object"&&typeof c!="function")return{default:c};var y=V(h);if(y&&y.has(c))return y.get(c);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var a=e?Object.getOwnPropertyDescriptor(c,t):null;a&&(a.get||a.set)?Object.defineProperty(d,t,a):d[t]=c[t]}return d.default=c,y&&y.set(c,d),d}var te={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},xe=he.isArrayBuffer,C=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),X=6406,Y=6407,w=6408,G=6409,ae=6410,pe=6402,Ne=34041,Pe=33071,nr=9728,or=9729,Je=3553,ce=34067,x=32879,B=35866,O=34069,_=34070,se=34071,Ae=34072,we=34073,ke=34074,Oe=10241,Qe=10240,He=10242,ir=10243,Tr=32882,ur=33082,rr=33083,lr=33084,Ar=33085,ee=34892,r=34893,i=3317,f=3314,E=32878,l=3316,o=3315,n=32877,m=37443,v=37441,T=37440,P=33321,I=36756,M=33325,j=33326,H=33330,K=33329,J=33338,Z=33337,oe=33340,ie=33339,q=33323,ve=36757,Ie=33327,ze=33328,Ue=33336,je=33335,de=33332,Re=33331,qe=33334,Ve=33333,Ke=32849,We=35905,Ze=36194,Fe=36758,De=35898,hr=35901,fr=34843,dr=34837,Sr=36221,Mr=36239,Or=36215,Nr=36233,Qr=36209,mt=36227,ht=32856,yt=35907,vr=36759,Ba=32855,pt=32854,bt=32857,Ot=34842,Et=34836,_e=36220,ea=36238,Ia=36975,Ma=36214,Da=36232,Oa=36226,Na=36208,ra=33189,ta=33190,aa=36012,na=36013,oa=35056,Ur=5120,er=5121,Tt=5122,Zr=5123,At=5124,kr=5125,yr=5126,ia=32819,ua=32820,fa=33635,Rr=5131,ut=36193,Nt=33640,Ua=35899,br=35902,Er=36269,dt=34042,xr=33319,Cr=33320,Vr=6403,$e=36244,Wr=36248,Lr=36249,Ut={};{var pr=Ut;pr[X]={numColorComponents:1},pr[G]={numColorComponents:1},pr[ae]={numColorComponents:2},pr[Y]={numColorComponents:3},pr[w]={numColorComponents:4},pr[Vr]={numColorComponents:1},pr[$e]={numColorComponents:1},pr[xr]={numColorComponents:2},pr[Cr]={numColorComponents:2},pr[Y]={numColorComponents:3},pr[Wr]={numColorComponents:3},pr[w]={numColorComponents:4},pr[Lr]={numColorComponents:4},pr[pe]={numColorComponents:1},pr[Ne]={numColorComponents:2}}var _t;function St(c){if(!_t){var h={};h[X]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Rr,ut,yr]},h[G]={textureFormat:G,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Rr,ut,yr]},h[ae]={textureFormat:ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[er,Rr,ut,yr]},h[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[er,Rr,ut,yr,fa]},h[w]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[er,Rr,ut,yr,ia,ua]},h[pe]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[kr,Zr]},h[P]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[er]},h[I]={textureFormat:Vr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Ur]},h[M]={textureFormat:Vr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[yr,Rr]},h[j]={textureFormat:Vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[H]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[er]},h[K]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ur]},h[de]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Zr]},h[Re]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Tt]},h[qe]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kr]},h[Ve]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},h[q]={textureFormat:xr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[er]},h[ve]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Ur]},h[Ie]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[yr,Rr]},h[ze]={textureFormat:xr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[yr]},h[Ue]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[er]},h[je]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ur]},h[J]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},h[Z]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tt]},h[oe]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[kr]},h[ie]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[At]},h[Ke]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[er]},h[We]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[er]},h[Ze]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[er,fa]},h[Fe]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ur]},h[De]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,Ua]},h[hr]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,br]},h[fr]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[yr,Rr]},h[dr]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},h[Sr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[er]},h[Mr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ur]},h[Or]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Zr]},h[Nr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Tt]},h[Qr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[kr]},h[mt]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[At]},h[ht]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},h[yt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},h[vr]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Ur]},h[Ba]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[er,ua,Nt]},h[pt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[er,ia]},h[bt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Nt]},h[Ot]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[yr,Rr]},h[Et]={textureFormat:w,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[yr]},h[_e]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[er]},h[ea]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ur]},h[Ia]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nt]},h[Ma]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zr]},h[Da]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Tt]},h[Oa]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[At]},h[Na]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[kr]},h[ra]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zr,kr]},h[ta]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kr]},h[aa]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[oa]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dt]},h[na]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(h).forEach(function(y){var d=h[y];d.bytesPerElementMap={},d.bytesPerElement.forEach(function(e,t){var a=d.type[t];d.bytesPerElementMap[a]=e})}),_t=h}return _t[c]}function Xr(c,h){var y=St(c);if(!y)throw"unknown internal format";var d=y.bytesPerElementMap[h];if(d===void 0)throw"unknown internal format";return d}function Hr(c){var h=St(c);if(!h)throw"unknown internal format";return{format:h.textureFormat,type:h.type[0]}}function ca(c){return(c&c-1)===0}function la(c,h,y,d){if(!W.isWebGL2(c))return ca(h)&&ca(y);var e=St(d);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function va(c){var h=St(c);if(!h)throw"unknown internal format";return h.textureFilterable}function sa(c){var h=Ut[c];if(!h)throw"unknown format: "+c;return h.numColorComponents}function ft(c,h,y){return xe(h)?he.getGLTypeForTypedArray(h):y||er}function zr(c,h,y,d,e){if(e%1!==0)throw"can't guess dimensions";if(!y&&!d){var t=Math.sqrt(e/(h===ce?6:1));t%1===0?(y=t,d=t):(y=e,d=1)}else if(d){if(!y&&(y=e/d,y%1))throw"can't guess dimensions"}else if(d=e/y,d%1)throw"can't guess dimensions";return{width:y,height:d}}function Lt(c){te.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Gt(c){fe.copyExistingProperties(c,te),c.textureColor&&Lt(c.textureColor)}function Jr(c,h){h.colorspaceConversion!==void 0&&c.pixelStorei(m,h.colorspaceConversion),h.premultiplyAlpha!==void 0&&c.pixelStorei(v,h.premultiplyAlpha),h.flipY!==void 0&&c.pixelStorei(T,h.flipY)}function Pt(c){c.pixelStorei(i,4),W.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(n,0))}function jt(c,h,y,d){d.minMag&&(y.call(c,h,Oe,d.minMag),y.call(c,h,Qe,d.minMag)),d.min&&y.call(c,h,Oe,d.min),d.mag&&y.call(c,h,Qe,d.mag),d.wrap&&(y.call(c,h,He,d.wrap),y.call(c,h,ir,d.wrap),(h===x||fe.isSampler(c,h))&&y.call(c,h,Tr,d.wrap)),d.wrapR&&y.call(c,h,Tr,d.wrapR),d.wrapS&&y.call(c,h,He,d.wrapS),d.wrapT&&y.call(c,h,ir,d.wrapT),d.minLod!==void 0&&y.call(c,h,ur,d.minLod),d.maxLod!==void 0&&y.call(c,h,rr,d.maxLod),d.baseLevel!==void 0&&y.call(c,h,lr,d.baseLevel),d.maxLevel!==void 0&&y.call(c,h,Ar,d.maxLevel),d.compareFunc!==void 0&&y.call(c,h,r,d.compareFunc),d.compareMode!==void 0&&y.call(c,h,ee,d.compareMode)}function kt(c,h,y){var d=y.target||Je;c.bindTexture(d,h),jt(c,d,c.texParameteri,y)}function Vt(c,h,y){jt(c,h,c.samplerParameteri,y)}function Wt(c,h){var y=c.createSampler();return Vt(c,y,h),y}function La(c,h){var y={};return Object.keys(h).forEach(function(d){y[d]=Wt(c,h[d])}),y}function Ga(c){return c=c||te.textureColor,xe(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function ct(c,h,y,d,e,t){y=y||te.textureOptions,t=t||w;var a=y.target||Je;if(d=d||y.width,e=e||y.height,c.bindTexture(a,h),la(c,d,e,t))c.generateMipmap(a);else{var p=va(t)?or:nr;c.texParameteri(a,Oe,p),c.texParameteri(a,Qe,p),c.texParameteri(a,He,Pe),c.texParameteri(a,ir,Pe)}}function $r(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function gt(c,h){return h=h||{},h.cubeFaceOrder||[O,_,se,Ae,we,ke]}function xt(c,h){var y=gt(c,h),d=y.map(function(e,t){return{face:e,ndx:t}});return d.sort(function(e,t){return e.face-t.face}),d}function Xt(c,h,y,d){d=d||te.textureOptions;var e=d.target||Je,t=d.level||0,a=y.width,p=y.height,b=d.internalFormat||d.format||w,A=Hr(b),R=d.format||A.format,g=d.type||A.type;if(Jr(c,d),c.bindTexture(e,h),e===ce){var D=y.width,F=y.height,U,$;if(D/6===F)U=F,$=[0,0,1,0,2,0,3,0,4,0,5,0];else if(F/6===D)U=D,$=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===F/2)U=D/3,$=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===F/3)U=D/2,$=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(y.src?y.src:y.nodeName);var le=C();le?(le.canvas.width=U,le.canvas.height=U,a=U,p=U,xt(c,d).forEach(function(Pr){var Dr=$[Pr.ndx*2+0]*U,Gr=$[Pr.ndx*2+1]*U;le.drawImage(y,Dr,Gr,U,U,0,0,U,U),c.texImage2D(Pr.face,t,b,R,g,le.canvas)}),le.canvas.width=1,le.canvas.height=1):typeof createImageBitmap<"u"&&(a=U,p=U,xt(c,d).forEach(function(Pr){var Dr=$[Pr.ndx*2+0]*U,Gr=$[Pr.ndx*2+1]*U;c.texImage2D(Pr.face,t,b,U,U,0,R,g,null),createImageBitmap(y,Dr,Gr,U,U,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(pa){Jr(c,d),c.bindTexture(e,h),c.texImage2D(Pr.face,t,b,R,g,pa),$r(d)&&ct(c,h,d,a,p,b)})}))}else if(e===x||e===B){var me=Math.min(y.width,y.height),ge=Math.max(y.width,y.height),Me=ge/me;if(Me%1!==0)throw"can not compute 3D dimensions of element";var Ce=y.width===ge?1:0,Le=y.height===ge?1:0;c.pixelStorei(i,1),c.pixelStorei(f,y.width),c.pixelStorei(E,0),c.pixelStorei(n,0),c.texImage3D(e,t,b,me,me,me,0,R,g,null);for(var Ye=0;Ye<Me;++Ye){var tr=Ye*me*Ce,sr=Ye*me*Le;c.pixelStorei(l,tr),c.pixelStorei(o,sr),c.texSubImage3D(e,t,0,0,Ye,me,me,1,R,g,y)}Pt(c)}else c.texImage2D(e,t,b,R,g,y);$r(d)&&ct(c,h,d,a,p,b),kt(c,h,d)}function Yr(){}function ma(c){if(typeof document<"u"){var h=document.createElement("a");return h.href=c,h.hostname===location.hostname&&h.port===location.port&&h.protocol===location.protocol}else{var y=new URL(location.href).origin,d=new URL(c,location.href).origin;return d===y}}function ja(c,h){return h===void 0&&!ma(c)?"anonymous":h}function ka(c,h,y){y=y||Yr;var d;if(h=h!==void 0?h:te.crossOrigin,h=ja(c,h),typeof Image<"u"){d=new Image,h!==void 0&&(d.crossOrigin=h);var e=function(){d.removeEventListener("error",t),d.removeEventListener("load",a),d=null},t=function(){var D="couldn't load image: "+c;fe.error(D),y(D,d),e()},a=function(){y(null,d),e()};return d.addEventListener("error",t),d.addEventListener("load",a),d.src=c,d}else if(typeof ImageBitmap<"u"){var p,b,A=function(){y(p,b)},R={};h&&(R.mode="cors"),fetch(c,R).then(function(g){if(!g.ok)throw g;return g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){b=g,setTimeout(A)}).catch(function(g){p=g,setTimeout(A)}),d=null}return d}function Ht(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function zt(c,h,y){return Ht(c)?(setTimeout(function(){y(null,c)}),c):ka(c,h,y)}function wt(c,h,y){y=y||te.textureOptions;var d=y.target||Je;if(c.bindTexture(d,h),y.color!==!1){var e=Ga(y.color);if(d===ce)for(var t=0;t<6;++t)c.texImage2D(O+t,0,w,1,1,0,w,er,e);else d===x||d===B?c.texImage3D(d,0,w,1,1,1,0,w,er,e):c.texImage2D(d,0,w,1,1,0,w,er,e)}}function ha(c,h,y,d){d=d||Yr,y=y||te.textureOptions,wt(c,h,y),y=Object.assign({},y);var e=zt(y.src,y.crossOrigin,function(t,a){t?d(t,h,a):(Xt(c,h,a,y),d(null,h,a))});return e}function Va(c,h,y,d){d=d||Yr;var e=y.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=y.level||0,a=y.internalFormat||y.format||w,p=Hr(a),b=y.format||p.format,A=y.type||er,R=y.target||Je;if(R!==ce)throw"target must be TEXTURE_CUBE_MAP";wt(c,h,y),y=Object.assign({},y);var g=6,D=[],F=gt(c,y),U;function $(le){return function(me,ge){--g,me?D.push(me):ge.width!==ge.height?D.push("cubemap face img is not a square: "+ge.src):(Jr(c,y),c.bindTexture(R,h),g===5?gt().forEach(function(Me){c.texImage2D(Me,t,a,b,A,ge)}):c.texImage2D(le,t,a,b,A,ge),$r(y)&&c.generateMipmap(R)),g===0&&d(D.length?D:void 0,h,U)}}U=e.map(function(le,me){return zt(le,y.crossOrigin,$(F[me]))})}function ya(c,h,y,d){d=d||Yr;var e=y.src,t=y.internalFormat||y.format||w,a=Hr(t),p=y.format||a.format,b=y.type||er,A=y.target||B;if(A!==x&&A!==B)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";wt(c,h,y),y=Object.assign({},y);var R=e.length,g=[],D,F=y.level||0,U=y.width,$=y.height,le=e.length,me=!0;function ge(Me){return function(Ce,Le){if(--R,Ce)g.push(Ce);else{if(Jr(c,y),c.bindTexture(A,h),me){me=!1,U=y.width||Le.width,$=y.height||Le.height,c.texImage3D(A,F,t,U,$,le,0,p,b,null);for(var Ye=0;Ye<le;++Ye)c.texSubImage3D(A,F,0,0,Ye,U,$,1,p,b,Le)}else{var tr=Le,sr;(Le.width!==U||Le.height!==$)&&(sr=C(),tr=sr.canvas,sr.canvas.width=U,sr.canvas.height=$,sr.drawImage(Le,0,0,U,$)),c.texSubImage3D(A,F,0,0,Me,U,$,1,p,b,tr),sr&&tr===sr.canvas&&(sr.canvas.width=0,sr.canvas.height=0)}$r(y)&&c.generateMipmap(A)}R===0&&d(g.length?g:void 0,h,D)}}D=e.map(function(Me,Ce){return zt(Me,y.crossOrigin,ge(Ce))})}function Rt(c,h,y,d){d=d||te.textureOptions;var e=d.target||Je;c.bindTexture(e,h);var t=d.width,a=d.height,p=d.depth,b=d.level||0,A=d.internalFormat||d.format||w,R=Hr(A),g=d.format||R.format,D=d.type||ft(c,y,R.type);if(xe(y))y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));else{var F=he.getTypedArrayTypeForGLType(D);y=new F(y)}var U=Xr(A,D),$=y.byteLength/U;if($%1)throw"length wrong size for format: "+W.glEnumToString(c,g);var le;if(e===x||e===B)if(!t&&!a&&!p){var me=Math.cbrt($);if(me%1!==0)throw"can't guess cube size of array of numElements: "+$;t=me,a=me,p=me}else t&&(!a||!p)?(le=zr(c,e,a,p,$/t),a=le.width,p=le.height):a&&(!t||!p)?(le=zr(c,e,t,p,$/a),t=le.width,p=le.height):(le=zr(c,e,t,a,$/p),t=le.width,a=le.height);else le=zr(c,e,t,a,$),t=le.width,a=le.height;if(Pt(c),c.pixelStorei(i,d.unpackAlignment||1),Jr(c,d),e===ce){var ge=U/y.BYTES_PER_ELEMENT,Me=$/6*ge;xt(c,d).forEach(function(Ce){var Le=Me*Ce.ndx,Ye=y.subarray(Le,Le+Me);c.texImage2D(Ce.face,b,A,t,a,0,g,D,Ye)})}else e===x||e===B?c.texImage3D(e,b,A,t,a,p,0,g,D,y):c.texImage2D(e,b,A,t,a,0,g,D,y);return{width:t,height:a,depth:p,type:D}}function Yt(c,h,y){var d=y.target||Je;c.bindTexture(d,h);var e=y.level||0,t=y.internalFormat||y.format||w,a=Hr(t),p=y.format||a.format,b=y.type||a.type;if(Jr(c,y),d===ce)for(var A=0;A<6;++A)c.texImage2D(O+A,e,t,y.width,y.height,0,p,b,null);else d===x||d===B?c.texImage3D(d,e,t,y.width,y.height,y.depth,0,p,b,null):c.texImage2D(d,e,t,y.width,y.height,0,p,b,null)}function Kt(c,h,y){y=y||Yr,h=h||te.textureOptions;var d=c.createTexture(),e=h.target||Je,t=h.width||1,a=h.height||1,p=h.internalFormat||w;c.bindTexture(e,d),e===ce&&(c.texParameteri(e,He,Pe),c.texParameteri(e,ir,Pe));var b=h.src;if(b)if(typeof b=="function"&&(b=b(c,h)),typeof b=="string")ha(c,d,h,y);else if(xe(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||xe(b[0]))){var A=Rt(c,d,b,h);t=A.width,a=A.height}else Array.isArray(b)&&(typeof b[0]=="string"||Ht(b[0]))?e===ce?Va(c,d,h,y):ya(c,d,h,y):(Xt(c,d,b,h),t=b.width,a=b.height);else Yt(c,d,h);return $r(h)&&ct(c,d,h,t,a,p),kt(c,d,h),d}function Wa(c,h,y,d,e,t){d=d||y.width,e=e||y.height,t=t||y.depth;var a=y.target||Je;c.bindTexture(a,h);var p=y.level||0,b=y.internalFormat||y.format||w,A=Hr(b),R=y.format||A.format,g,D=y.src;if(D&&(xe(D)||Array.isArray(D)&&typeof D[0]=="number")?g=y.type||ft(c,D,A.type):g=y.type||A.type,a===ce)for(var F=0;F<6;++F)c.texImage2D(O+F,p,b,d,e,0,R,g,null);else a===x||a===B?c.texImage3D(a,p,b,d,e,t,0,R,g,null):c.texImage2D(a,p,b,d,e,0,R,g,null)}function Ft(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function Xa(c,h,y){y=y||Yr;var d=0,e=[],t={},a={};function p(){d===0&&setTimeout(function(){y(e.length?e:void 0,t,a)},0)}return Object.keys(h).forEach(function(b){var A=h[b],R;Ft(A.src)&&(R=function(D,F,U){a[b]=U,--d,D&&e.push(D),p()},++d),t[b]=Kt(c,A,R)}),p(),t}},"./src/twgl-full.js":(Ee,u,Q)=>{function ue(C){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},ue(C)}u.__esModule=!0;var W={m4:!0,v3:!0,primitives:!0};u.v3=u.primitives=u.m4=void 0;var he=xe(Q("./src/m4.js"));u.m4=he;var fe=xe(Q("./src/v3.js"));u.v3=fe;var V=xe(Q("./src/primitives.js"));u.primitives=V;var ye=Q("./src/twgl.js");Object.keys(ye).forEach(function(C){C==="default"||C==="__esModule"||Object.prototype.hasOwnProperty.call(W,C)||C in u&&u[C]===ye[C]||(u[C]=ye[C])});function te(C){if(typeof WeakMap!="function")return null;var X=new WeakMap,Y=new WeakMap;return(te=function(G){return G?Y:X})(C)}function xe(C,X){if(!X&&C&&C.__esModule)return C;if(C===null||ue(C)!="object"&&typeof C!="function")return{default:C};var Y=te(X);if(Y&&Y.has(C))return Y.get(C);var w={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in C)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(C,ae)){var pe=G?Object.getOwnPropertyDescriptor(C,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=C[ae]}return w.default=C,Y&&Y.set(C,w),w}},"./src/twgl.js":(Ee,u,Q)=>{function ue(_){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},ue(_)}u.__esModule=!0;var W={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};u.addExtensionsToContext=or,u.framebuffers=u.draw=u.attributes=void 0,u.getContext=B,u.getWebGLContext=ce,u.programs=void 0,u.resizeCanvasToDisplaySize=O,u.setDefaults=pe,u.vertexArrays=u.utils=u.typedarrays=u.textures=void 0;var he=G(Q("./src/attributes.js"));u.attributes=he,Object.keys(he).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===he[_]||(u[_]=he[_])});var fe=G(Q("./src/textures.js"));u.textures=fe,Object.keys(fe).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===fe[_]||(u[_]=fe[_])});var V=G(Q("./src/helper.js")),ye=G(Q("./src/utils.js"));u.utils=ye,Object.keys(ye).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===ye[_]||(u[_]=ye[_])});var te=G(Q("./src/draw.js"));u.draw=te,Object.keys(te).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===te[_]||(u[_]=te[_])});var xe=G(Q("./src/framebuffers.js"));u.framebuffers=xe,Object.keys(xe).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===xe[_]||(u[_]=xe[_])});var C=G(Q("./src/programs.js"));u.programs=C,Object.keys(C).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===C[_]||(u[_]=C[_])});var X=G(Q("./src/typedarrays.js"));u.typedarrays=X,Object.keys(X).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===X[_]||(u[_]=X[_])});var Y=G(Q("./src/vertex-arrays.js"));u.vertexArrays=Y,Object.keys(Y).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(W,_)||_ in u&&u[_]===Y[_]||(u[_]=Y[_])});function w(_){if(typeof WeakMap!="function")return null;var se=new WeakMap,Ae=new WeakMap;return(w=function(ke){return ke?Ae:se})(_)}function G(_,se){if(!se&&_&&_.__esModule)return _;if(_===null||ue(_)!="object"&&typeof _!="function")return{default:_};var Ae=w(se);if(Ae&&Ae.has(_))return Ae.get(_);var we={__proto__:null},ke=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Oe in _)if(Oe!=="default"&&Object.prototype.hasOwnProperty.call(_,Oe)){var Qe=ke?Object.getOwnPropertyDescriptor(_,Oe):null;Qe&&(Qe.get||Qe.set)?Object.defineProperty(we,Oe,Qe):we[Oe]=_[Oe]}return we.default=_,Ae&&Ae.set(_,we),we}var ae={addExtensionsToContext:!0};function pe(_){V.copyExistingProperties(_,ae),he.setAttributeDefaults_(_),fe.setTextureDefaults_(_)}var Ne=/^(.*?)_/;function Pe(_,se){ye.glEnumToString(_,0);var Ae=_.getExtension(se);if(Ae){var we={},ke=Ne.exec(se)[1],Oe="_"+ke;for(var Qe in Ae){var He=Ae[Qe],ir=typeof He=="function",Tr=ir?ke:Oe,ur=Qe;Qe.endsWith(Tr)&&(ur=Qe.substring(0,Qe.length-Tr.length)),_[ur]!==void 0?!ir&&_[ur]!==He&&V.warn(ur,_[ur],He,Qe):ir?_[ur]=function(rr){return function(){return rr.apply(Ae,arguments)}}(He):(_[ur]=He,we[ur]=He)}we.constructor={name:Ae.constructor.name},ye.glEnumToString(we,0)}return Ae}var nr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function or(_){for(var se=0;se<nr.length;++se)Pe(_,nr[se])}function Je(_,se){for(var Ae=["webgl","experimental-webgl"],we=null,ke=0;ke<Ae.length;++ke)if(we=_.getContext(Ae[ke],se),we){ae.addExtensionsToContext&&or(we);break}return we}function ce(_,se){var Ae=Je(_,se);return Ae}function x(_,se){for(var Ae=["webgl2","webgl","experimental-webgl"],we=null,ke=0;ke<Ae.length;++ke)if(we=_.getContext(Ae[ke],se),we){ae.addExtensionsToContext&&or(we);break}return we}function B(_,se){var Ae=x(_,se);return Ae}function O(_,se){se=se||1,se=Math.max(0,se);var Ae=_.clientWidth*se|0,we=_.clientHeight*se|0;return _.width!==Ae||_.height!==we?(_.width=Ae,_.height=we,!0):!1}},"./src/typedarrays.js":(Ee,u)=>{u.__esModule=!0,u.getGLTypeForTypedArray=nr,u.getGLTypeForTypedArrayType=or,u.getTypedArrayTypeForGLType=Je,u.isArrayBuffer=void 0;var Q=5120,ue=5121,W=5122,he=5123,fe=5124,V=5125,ye=5126,te=32819,xe=32820,C=33635,X=5131,Y=33640,w=35899,G=35902,ae=36269,pe=34042,Ne={};{var Pe=Ne;Pe[Q]=Int8Array,Pe[ue]=Uint8Array,Pe[W]=Int16Array,Pe[he]=Uint16Array,Pe[fe]=Int32Array,Pe[V]=Uint32Array,Pe[ye]=Float32Array,Pe[te]=Uint16Array,Pe[xe]=Uint16Array,Pe[C]=Uint16Array,Pe[X]=Uint16Array,Pe[Y]=Uint32Array,Pe[w]=Uint32Array,Pe[G]=Uint32Array,Pe[ae]=Uint32Array,Pe[pe]=Uint32Array}function nr(ce){if(ce instanceof Int8Array)return Q;if(ce instanceof Uint8Array||ce instanceof Uint8ClampedArray)return ue;if(ce instanceof Int16Array)return W;if(ce instanceof Uint16Array)return he;if(ce instanceof Int32Array)return fe;if(ce instanceof Uint32Array)return V;if(ce instanceof Float32Array)return ye;throw new Error("unsupported typed array type")}function or(ce){if(ce===Int8Array)return Q;if(ce===Uint8Array||ce===Uint8ClampedArray)return ue;if(ce===Int16Array)return W;if(ce===Uint16Array)return he;if(ce===Int32Array)return fe;if(ce===Uint32Array)return V;if(ce===Float32Array)return ye;throw new Error("unsupported typed array type")}function Je(ce){var x=Ne[ce];if(!x)throw new Error("unknown gl type");return x}u.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(x){return x&&x.buffer&&(x.buffer instanceof ArrayBuffer||x.buffer instanceof SharedArrayBuffer)}:function(x){return x&&x.buffer&&x.buffer instanceof ArrayBuffer}},"./src/utils.js":(Ee,u)=>{u.__esModule=!0,u.glEnumToString=void 0,u.isWebGL1=ue,u.isWebGL2=Q;function Q(W){return!!W.texStorage2D}function ue(W){return!W.texStorage2D}u.glEnumToString=function(){var W={},he={};function fe(V){var ye=V.constructor.name;if(!W[ye]){for(var te in V)if(typeof V[te]=="number"){var xe=he[V[te]];he[V[te]]=xe?"".concat(xe," | ").concat(te):te}W[ye]=!0}}return function(ye,te){return fe(ye),he[te]||(typeof te=="number"?"0x".concat(te.toString(16)):te)}}()},"./src/v3.js":(Ee,u)=>{u.__esModule=!0,u.add=he,u.copy=or,u.create=W,u.cross=Y,u.distance=pe,u.distanceSq=Ne,u.divScalar=X,u.divide=ce,u.dot=w,u.length=G,u.lengthSq=ae,u.lerp=V,u.lerpV=ye,u.max=te,u.min=xe,u.mulScalar=C,u.multiply=Je,u.negate=nr,u.normalize=Pe,u.setDefaultType=ue,u.subtract=fe;var Q=Float32Array;function ue(x){var B=Q;return Q=x,B}function W(x,B,O){var _=new Q(3);return x&&(_[0]=x),B&&(_[1]=B),O&&(_[2]=O),_}function he(x,B,O){return O=O||new Q(3),O[0]=x[0]+B[0],O[1]=x[1]+B[1],O[2]=x[2]+B[2],O}function fe(x,B,O){return O=O||new Q(3),O[0]=x[0]-B[0],O[1]=x[1]-B[1],O[2]=x[2]-B[2],O}function V(x,B,O,_){return _=_||new Q(3),_[0]=x[0]+O*(B[0]-x[0]),_[1]=x[1]+O*(B[1]-x[1]),_[2]=x[2]+O*(B[2]-x[2]),_}function ye(x,B,O,_){return _=_||new Q(3),_[0]=x[0]+O[0]*(B[0]-x[0]),_[1]=x[1]+O[1]*(B[1]-x[1]),_[2]=x[2]+O[2]*(B[2]-x[2]),_}function te(x,B,O){return O=O||new Q(3),O[0]=Math.max(x[0],B[0]),O[1]=Math.max(x[1],B[1]),O[2]=Math.max(x[2],B[2]),O}function xe(x,B,O){return O=O||new Q(3),O[0]=Math.min(x[0],B[0]),O[1]=Math.min(x[1],B[1]),O[2]=Math.min(x[2],B[2]),O}function C(x,B,O){return O=O||new Q(3),O[0]=x[0]*B,O[1]=x[1]*B,O[2]=x[2]*B,O}function X(x,B,O){return O=O||new Q(3),O[0]=x[0]/B,O[1]=x[1]/B,O[2]=x[2]/B,O}function Y(x,B,O){O=O||new Q(3);var _=x[2]*B[0]-x[0]*B[2],se=x[0]*B[1]-x[1]*B[0];return O[0]=x[1]*B[2]-x[2]*B[1],O[1]=_,O[2]=se,O}function w(x,B){return x[0]*B[0]+x[1]*B[1]+x[2]*B[2]}function G(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])}function ae(x){return x[0]*x[0]+x[1]*x[1]+x[2]*x[2]}function pe(x,B){var O=x[0]-B[0],_=x[1]-B[1],se=x[2]-B[2];return Math.sqrt(O*O+_*_+se*se)}function Ne(x,B){var O=x[0]-B[0],_=x[1]-B[1],se=x[2]-B[2];return O*O+_*_+se*se}function Pe(x,B){B=B||new Q(3);var O=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],_=Math.sqrt(O);return _>1e-5?(B[0]=x[0]/_,B[1]=x[1]/_,B[2]=x[2]/_):(B[0]=0,B[1]=0,B[2]=0),B}function nr(x,B){return B=B||new Q(3),B[0]=-x[0],B[1]=-x[1],B[2]=-x[2],B}function or(x,B){return B=B||new Q(3),B[0]=x[0],B[1]=x[1],B[2]=x[2],B}function Je(x,B,O){return O=O||new Q(3),O[0]=x[0]*B[0],O[1]=x[1]*B[1],O[2]=x[2]*B[2],O}function ce(x,B,O){return O=O||new Q(3),O[0]=x[0]/B[0],O[1]=x[1]/B[1],O[2]=x[2]/B[2],O}},"./src/vertex-arrays.js":(Ee,u,Q)=>{function ue(C){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},ue(C)}u.__esModule=!0,u.createVAOAndSetAttributes=te,u.createVAOFromBufferInfo=xe,u.createVertexArrayInfo=ye;var W=fe(Q("./src/programs.js"));function he(C){if(typeof WeakMap!="function")return null;var X=new WeakMap,Y=new WeakMap;return(he=function(G){return G?Y:X})(C)}function fe(C,X){if(!X&&C&&C.__esModule)return C;if(C===null||ue(C)!="object"&&typeof C!="function")return{default:C};var Y=he(X);if(Y&&Y.has(C))return Y.get(C);var w={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in C)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(C,ae)){var pe=G?Object.getOwnPropertyDescriptor(C,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=C[ae]}return w.default=C,Y&&Y.set(C,w),w}var V=34963;function ye(C,X,Y){var w=C.createVertexArray();return C.bindVertexArray(w),X.length||(X=[X]),X.forEach(function(G){W.setBuffersAndAttributes(C,G,Y)}),C.bindVertexArray(null),{numElements:Y.numElements,elementType:Y.elementType,vertexArrayObject:w}}function te(C,X,Y,w){var G=C.createVertexArray();return C.bindVertexArray(G),W.setAttributes(X,Y),w&&C.bindBuffer(V,w),C.bindVertexArray(null),G}function xe(C,X,Y){return te(C,X.attribSetters||X,Y.attribs,Y.indices)}}},k={};function N(Ee){var u=k[Ee];if(u!==void 0)return u.exports;var Q=k[Ee]={exports:{}};return S[Ee](Q,Q.exports,N),Q.exports}var be=N("./src/twgl-full.js");return be})())})(cn);var rt=cn.exports,Fr,Ir,nt,Mt,ot,_r,it,qr,Dt,Jt,wa,ln,Ra,vn,Fa,sn,$t,Ja,Ca,mn;class dn{constructor(){Xe(this,wa);Xe(this,Ra);Xe(this,Fa);Xe(this,$t);Xe(this,Ca);jr(this,"canvas",document.querySelector("#canvas"));jr(this,"gl");Xe(this,Fr,new Map);Xe(this,Ir,new Map);Xe(this,nt,void 0);Xe(this,Mt,void 0);Xe(this,ot,void 0);Xe(this,_r,new Uint8Array(600));Xe(this,it,void 0);Xe(this,qr,new Uint8Array(3*40));Xe(this,Dt,void 0);Xe(this,Jt,document.createTextNode("0"));document.querySelector("#linesCleared").appendChild(ne(this,Jt)),ne(this,Fr).set(1,[255,0,0]),ne(this,Fr).set(2,[0,255,0]),ne(this,Fr).set(3,[255,255,0]),ne(this,Fr).set(4,[0,0,255]),ne(this,Fr).set(5,[180,90,246]),ne(this,Fr).set(6,[0,255,255]),ne(this,Fr).set(7,[255,140,40]),ne(this,Ir).set("Z",1),ne(this,Ir).set("S",2),ne(this,Ir).set("O",3),ne(this,Ir).set("J",4),ne(this,Ir).set("T",5),ne(this,Ir).set("I",6),ne(this,Ir).set("L",7);let s=this.canvas.getContext("webgl");this.gl=s,s||document.body.appendChild(document.createTextNode("WebGL is not supported."));const S={a_Position:{numComponents:2,data:[-.5,-1,.5,-1,.5,1,-.5,1,-.75,1-.2,-.55,1-.2,-.55,1,-.75,1,.55,1-.2,.75,1-.2,.75,1,.55,1,.55,.5,.75,.5,.75,.7,.55,.7,.55,.3,.75,.3,.75,.5,.55,.5]},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16]}};mr(this,Mt,rt.createBufferInfoFromArrays(s,S));let k=document.querySelector("#vertex-shader-2d").text,N=document.querySelector("#fragment-shader-2d").text;mr(this,nt,rt.createProgramInfo(s,[k,N]));let be={src:"textures/block.png",mag:s.LINEAR};mr(this,Dt,rt.createTexture(this.gl,be)),mr(this,ot,s.createTexture()),s.bindTexture(s.TEXTURE_2D,ne(this,ot)),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_2D,0,s.RGB,10,20,0,s.RGB,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),mr(this,it,s.createTexture()),s.bindTexture(s.TEXTURE_2D,ne(this,it)),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_2D,0,s.RGB,4,2*5,0,s.RGB,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.useProgram(ne(this,nt).program),rt.setBuffersAndAttributes(s,ne(this,nt),ne(this,Mt));let Ee={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:ne(this,ot),u_QueueData:ne(this,it),u_BlockTexture:ne(this,Dt)};rt.setUniforms(ne(this,nt),Ee)}updateData(s){ar(this,wa,ln).call(this,s),ar(this,Fa,sn).call(this,s),ar(this,Ca,mn).call(this,s)}renderGame(){rt.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let s={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:ne(this,ot),u_QueueData:ne(this,it),u_BlockTexture:ne(this,Dt)};rt.setUniforms(ne(this,nt),s),rt.drawBufferInfo(this.gl,ne(this,Mt))}}Fr=new WeakMap,Ir=new WeakMap,nt=new WeakMap,Mt=new WeakMap,ot=new WeakMap,_r=new WeakMap,it=new WeakMap,qr=new WeakMap,Dt=new WeakMap,Jt=new WeakMap,wa=new WeakSet,ln=function(s){for(let S=0;S<20;S++){let k=s.gridData[S];for(let N=0;N<10;N++){let be=ar(this,Ra,vn).call(this,k,N),Ee=3*(10*S+N);if(be!=0){let u=ne(this,Fr).get(be);ne(this,_r)[Ee]=u[0],ne(this,_r)[Ee+1]=u[1],ne(this,_r)[Ee+2]=u[2]}else ne(this,_r)[Ee]=0,ne(this,_r)[Ee+1]=0,ne(this,_r)[Ee+2]=0}}if(s.playerPiece.active){let S=200;for(let N=0;N<4;N++){let be=3*(10*s.ghostBlocks[N][1]+s.ghostBlocks[N][0]);ne(this,_r)[be]=S,ne(this,_r)[be+1]=S,ne(this,_r)[be+2]=S}let k=s.playerPiece.shape;for(let N=0;N<4;N++){let be=ne(this,Fr).get(ne(this,Ir).get(k)),Ee=3*(10*s.playerPiece.blocks[N][1]+s.playerPiece.blocks[N][0]);ne(this,_r)[Ee]=be[0],ne(this,_r)[Ee+1]=be[1],ne(this,_r)[Ee+2]=be[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,ne(this,ot)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,ne(this,_r))},Ra=new WeakSet,vn=function(s,S){const k=32-(3+3*S),N=7<<k;return(s&N)>>>k},Fa=new WeakSet,sn=function(s){for(let S=0;S<ne(this,qr).length;S++)ne(this,qr)[S]=0;s.heldPiece!=null&&ar(this,$t,Ja).call(this,s.heldPiece,0);for(let S=0;S<4;S++)ar(this,$t,Ja).call(this,s.pieceQueue[S],24*(1+S));this.gl.bindTexture(this.gl.TEXTURE_2D,ne(this,it)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,ne(this,qr))},$t=new WeakSet,Ja=function(s,S){let k=tt.getBaseShape(s),N=ne(this,Fr).get(ne(this,Ir).get(s));for(let be=0;be<4;be++){let Ee=k[be],u=S+3*(Ee[1]*4+Ee[0]);ne(this,qr)[u]=N[0],ne(this,qr)[u+1]=N[1],ne(this,qr)[u+2]=N[2]}},Ca=new WeakSet,mn=function(s){ne(this,Jt).nodeValue=s.linesCleared};function _n(){let Ge=new En;document.addEventListener("keydown",function(Ee){Ge.setInputState(Ee.key,!0)}),document.addEventListener("keyup",function(Ee){Ge.setInputState(Ee.key,!1)});let s=new Tn,S=new dn,k=0,N=0;function be(Ee){let u=(Ee-N)*.001;N=Ee,k+=u,k>=s.gameTickTime&&(s.runTick(Ge),k=Math.min(k-s.gameTickTime,s.gameTickTime)),s.isStateChanged&&S.updateData(s.gameState),S.renderGame(),requestAnimationFrame(be)}requestAnimationFrame(be)}_n();

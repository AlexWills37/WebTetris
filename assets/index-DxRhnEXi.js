var qa=Object.defineProperty;var Ya=(he,c,l)=>c in he?qa(he,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):he[c]=l;var nr=(he,c,l)=>(Ya(he,typeof c!="symbol"?c+"":c,l),l),Ea=(he,c,l)=>{if(!c.has(he))throw TypeError("Cannot "+l)};var U=(he,c,l)=>(Ea(he,c,"read from private field"),l?l.call(he):c.get(he)),Ee=(he,c,l)=>{if(c.has(he))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(he):c.set(he,l)},ge=(he,c,l,p)=>(Ea(he,c,"write to private field"),p?p.call(he,l):c.set(he,l),l);var Ta=(he,c,l,p)=>({set _(B){ge(he,c,B,l)},get _(){return U(he,c,p)}}),ze=(he,c,l)=>(Ea(he,c,"access private method"),l);(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const B of document.querySelectorAll('link[rel="modulepreload"]'))p(B);new MutationObserver(B=>{for(const G of B)if(G.type==="childList")for(const Q of G.addedNodes)Q.tagName==="LINK"&&Q.rel==="modulepreload"&&p(Q)}).observe(document,{childList:!0,subtree:!0});function l(B){const G={};return B.integrity&&(G.integrity=B.integrity),B.referrerPolicy&&(G.referrerPolicy=B.referrerPolicy),B.crossOrigin==="use-credentials"?G.credentials="include":B.crossOrigin==="anonymous"?G.credentials="omit":G.credentials="same-origin",G}function p(B){if(B.ep)return;B.ep=!0;const G=l(B);fetch(B.href,G)}})();var kt,Qr,Zr,Xn,bt,jt,Mr,Et,Hn,Ba,Kn,Ia,qn,La,Yn,Oa,Vt,Vn,Tt,ln,hn,Aa,zn,Ma,mn,ga,Qn,Na,Wt,Wn,yn,_a;const vn=class vn{constructor(){Ee(this,Hn);Ee(this,Kn);Ee(this,qn);Ee(this,Yn);Ee(this,Vt);Ee(this,Tt);Ee(this,hn);Ee(this,zn);Ee(this,mn);Ee(this,Qn);Ee(this,Wt);Ee(this,yn);nr(this,"input",{moveLeft:!1,moveRight:!1,hardDrop:!1,softDrop:!1,hold:!1,rotClockwise:!1,rotAntiClockwise:!1});nr(this,"numRows",21);nr(this,"graceTimerDuration",.5);nr(this,"gameTickTime",1/30);nr(this,"pieceMap",new Map);nr(this,"gameState",{isPaused:!1,gameOver:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0,speedLevel:1,score:0});Ee(this,kt,15);Ee(this,Qr,!0);Ee(this,Zr,0);Ee(this,Xn,!1);Ee(this,bt,-1);Ee(this,jt,0);Ee(this,Mr,!1);Ee(this,Et,!1);ze(this,Vt,Vn).call(this),ze(this,Tt,ln).call(this),ze(this,Wt,Wn).call(this),ge(this,kt,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7),this.gameState.isPaused=!0}get isStateChanged(){const c=U(this,Qr);return ge(this,Qr,!1),c}runTick(){if(this.gameState.isPaused)return;let c=!1;if(U(this,Et)){this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0?(this.clearRow(0),this.rowCount++,ge(this,Qr,!0)):this.rowCount==this.numRows&&(this.rowCount++,this.gameState.gameOver=!0));return}if(this.input.hardDrop)this.hardDropPlayerPiece(),this.finishWithPiece(),c=!0;else if(this.input.hold)this.holdPiece(),c=!0;else{U(this,Mr)&&ze(this,zn,Ma).call(this,this.gameTickTime),this.input.softDrop&&(c=this.tryMovePiece(0,-1)||c);let l=0;this.input.rotClockwise&&(l+=1),this.input.rotAntiClockwise&&(l-=1),l!=0&&(c=this.tryRotatePiece(l==1)||c);let p=0;if(this.input.moveLeft&&(p-=1),this.input.moveRight&&(p+=1),p!=0&&(c=this.tryMovePiece(p,0)||c),Ta(this,Zr)._++,U(this,Zr)>=U(this,kt)){let B=!this.tryMovePiece(0,-1);c||(c=!B),ge(this,Zr,0),B&&!U(this,Mr)&&ze(this,hn,Aa).call(this)}if(U(this,Mr)&&U(this,bt)<=0){let B=!this.tryMovePiece(0,-1);c=!0,B&&this.finishWithPiece()}else if(!U(this,Mr)){let B=!1;for(const G of this.gameState.playerPiece.blocks)B=B||this.isBlockHere(G[0],G[1]-1);B&&ze(this,hn,Aa).call(this)}}c&&(ze(this,Wt,Wn).call(this),ge(this,Qr,!0)),this.input={moveLeft:!1,moveRight:!1,hardDrop:!1,softDrop:!1,hold:!1,rotClockwise:!1,rotAntiClockwise:!1}}pauseGame(c){this.gameState.isPaused=c}startNewGame(){this.gameState.gameOver=!1,this.gameState.isPaused=!1,ge(this,Et,!1),this.animationCount=null,this.rowCount=null;for(let c=0;c<this.gameState.gridData.length;c++)this.gameState.gridData[c]=0;this.gameState.linesCleared=0,this.gameState.speedLevel=0,this.gameState.score=0,this.gameState.pieceQueue=[],this.gameState.heldPiece=null,ze(this,Vt,Vn).call(this),ze(this,Tt,ln).call(this),ze(this,Wt,Wn).call(this),ze(this,yn,_a).call(this)}tryMovePiece(c,l){let p=!0;for(let B=0;B<4&&p;B++){let G=this.gameState.playerPiece.blocks[B][0]+c,Q=this.gameState.playerPiece.blocks[B][1]+l;this.isBlockHere(G,Q)&&(p=!1)}return p&&(ze(this,Kn,Ia).call(this,c,l),c!=0&&ze(this,mn,ga).call(this),l!=0&&ge(this,Mr,!1)),p}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(c){let l=ze(this,qn,La).call(this,c);return l&&ze(this,mn,ga).call(this),l}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,ze(this,Tt,ln).call(this),ge(this,Qr,!0),ge(this,Zr,0);else if(!this.gameState.playerPiece.wasHeld){let c=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new ot(c),this.gameState.playerPiece.wasHeld=!0,ge(this,Qr,!0),ge(this,Zr,0),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,ge(this,Et,!0))}}finishWithPiece(){const c=this.gameState.linesCleared;this.gameState.playerPiece.shape=="T"&&ge(this,Xn,!0),ze(this,Yn,Oa).call(this),ze(this,Tt,ln).call(this),ge(this,Mr,!1),ze(this,Qn,Na).call(this),this.gameState.linesCleared!=c&&(ze(this,yn,_a).call(this),this.gameState.score+=Math.pow(this.gameState.linesCleared-c,2)*100)}clearRow(c){for(let l=c;l<this.numRows-1;l++)this.gameState.gridData[l]=this.gameState.gridData[l+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(c,l){if(c<0||l<0||c>=10||l>=this.numRows)return!0;const p=this.gameState.gridData[l],B=7<<32-(3+3*c);return(p&B)!=0}getBlockData(c,l){const p=this.gameState.gridData[l],B=32-(3+3*c),G=7<<B;return(p&G)>>>B}isPlayerPieceValid(){let c=!0;for(let l=0;l<4&&c;l++)this.isBlockHere(this.gameState.playerPiece.blocks[l][0],this.gameState.playerPiece.blocks[l][1])&&(c=!1);return c}};kt=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,Xn=new WeakMap,bt=new WeakMap,jt=new WeakMap,Mr=new WeakMap,Et=new WeakMap,Hn=new WeakSet,Ba=function(c,l,p){const G=~(7<<32-(3+3*c));this.gameState.gridData[l]&=G;const Q=p<<32-(3+3*c);this.gameState.gridData[l]|=Q},Kn=new WeakSet,Ia=function(c,l){for(let p=0;p<4;p++)this.gameState.playerPiece.blocks[p][0]+=c,this.gameState.playerPiece.blocks[p][1]+=l},qn=new WeakSet,La=function(c){let l=(this.gameState.playerPiece.rotationIndex+4+(c?1:-1))%4,p=[...this.gameState.playerPiece.blocks[0]],B=[];for(let z=0;z<4;z++)B.push([...this.gameState.playerPiece.blocks[z]]);let G=1,Q=1;c?Q=-1:G=-1;let o;for(let z=0;z<4;z++)B[z][0]-=p[0],B[z][1]-=p[1],o=B[z][0],B[z][0]=G*B[z][1],B[z][1]=Q*o,B[z][0]+=p[0],B[z][1]+=p[1];let q;switch(this.gameState.playerPiece.shape){case"O":q=ot.offsets.O;break;case"I":q=ot.offsets.I;break;default:q=ot.offsets.OTHER;break}let ie,k,Z=!1;for(let z=0;z<5&&!Z;z++){ie=q[z],k=[ie[this.gameState.playerPiece.rotationIndex][0]-ie[l][0],ie[this.gameState.playerPiece.rotationIndex][1]-ie[l][1]],Z=!0;for(let V=0;V<4;V++)B[V][0]+=k[0],B[V][1]+=k[1],this.isBlockHere(B[V][0],B[V][1])&&(Z=!1);if(!Z)for(let V=0;V<4;V++)B[V][0]-=k[0],B[V][1]-=k[1]}if(Z){for(let z=0;z<4;z++)this.gameState.playerPiece.blocks[z]=[...B[z]];this.gameState.playerPiece.rotationIndex=l}return Z},Yn=new WeakSet,Oa=function(){let c,l,p=this.pieceMap.get(this.gameState.playerPiece.shape);for(let B=0;B<4;B++)c=this.gameState.playerPiece.blocks[B][0],l=this.gameState.playerPiece.blocks[B][1],ze(this,Hn,Ba).call(this,c,l,p)},Vt=new WeakSet,Vn=function(){let c=["O","I","T","J","L","S","Z"],l;for(let p=0;p<7;p++)l=Math.floor(Math.random()*c.length),this.gameState.pieceQueue.push(c[l]),c.splice(l,1)},Tt=new WeakSet,ln=function(){let c=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&ze(this,Vt,Vn).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new ot(c),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,ge(this,Et,!0)),ge(this,Zr,0)},hn=new WeakSet,Aa=function(){ge(this,bt,this.graceTimerDuration),ge(this,Mr,!0),ge(this,jt,0)},zn=new WeakSet,Ma=function(c){ge(this,bt,U(this,bt)-c)},mn=new WeakSet,ga=function(){U(this,Mr)&&U(this,jt)<30&&(ge(this,bt,this.graceTimerDuration),Ta(this,jt)._++)},Qn=new WeakSet,Na=function(){for(let c=0;c<this.numRows;c++){let l=!0;for(let p=0;p<10&&l;p++)this.isBlockHere(p,c)||(l=!1);l&&(this.clearRow(c),this.gameState.linesCleared++,c--)}},Wt=new WeakSet,Wn=function(){for(let l=0;l<4;l++)this.gameState.ghostBlocks[l]=[...this.gameState.playerPiece.blocks[l]];let c=!1;for(;!c;){for(let l=0;l<4;l++)this.isBlockHere(this.gameState.ghostBlocks[l][0],this.gameState.ghostBlocks[l][1]-1)&&(c=!0);if(!c)for(let l=0;l<4;l++)this.gameState.ghostBlocks[l][1]-=1}},yn=new WeakSet,_a=function(){this.gameState.speedLevel=Math.min(Math.floor(this.gameState.linesCleared/10)+1,vn.levels.max),ge(this,kt,vn.levels[this.gameState.speedLevel])},nr(vn,"levels",{1:25,2:20,3:16,4:12,5:10,6:8,7:6,8:5,9:4,10:2,11:1,max:11});let Sa=vn;const Br=class Br{constructor(c){this.blocks=[],this.shape=c,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let l=Br.getBaseShape(c);for(let p=0;p<4;p++)this.blocks.push([...l[p]]),this.blocks[p][0]+=3,this.blocks[p][1]+=19}static getBaseShape(c){let l;switch(c){case"O":l=Br.pieces.O;break;case"I":l=Br.pieces.I;break;case"L":l=Br.pieces.L;break;case"J":l=Br.pieces.J;break;case"T":l=Br.pieces.T;break;case"S":l=Br.pieces.S;break;case"Z":l=Br.pieces.Z;break;default:l=[[0,0],[0,0],[0,0],[0,0]]}return l}};nr(Br,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),nr(Br,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let ot=Br;class za{constructor(){nr(this,"selectedKey","");nr(this,"originalKeybind","");nr(this,"selectedAction","");nr(this,"selectedSpan",null);this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.actionStates.set("Pause",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("Escape","Pause"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0),this.counters.set("Pause",0)}keyToState(c){return c.length==1&&(c=c.toUpperCase()),this.inputKeys.get(c)}actionToKey(c){let l="";return this.inputKeys.forEach(function(p,B,G){p==c&&(l=B)}),l}rebindControl(c,l){let p=!1,B="";return this.inputKeys.forEach(function(G,Q,o){G==c&&(B=Q)}),B!=""&&(this.inputKeys.has(l)&&l!=B||(this.inputKeys.delete(B),this.inputKeys.set(l,c),p=!0)),p}setInputState(c,l){let p=this.keyToState(c);p!=null&&this.actionStates.set(p,l)}getInputState(c){return this.actionStates.has(c)?this.actionStates.get(c):(console.log("ERROR: trying to access an input action that doesn't exist ("+c+"). The allowed options are:"),this.actionStates.forEach(function(l,p,B){console.log("    - "+p)}),null)}updateCounters(){for(const[c,l]of this.counters)this.getInputState(c)?this.counters.set(c,l+1):this.counters.set(c,0)}getCounter(c){return this.counters.has(c)?this.counters.get(c):(console.log("ERROR: trying to access input action that doesn't have a counter ("+c+"). The counters are:"),this.counters.forEach(function(l,p,B){console.log("    - "+p+": "+l)}),null)}}var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ua={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(he,c){(function(p,B){he.exports=B()})(typeof self<"u"?self:Qa,()=>(()=>{var l={"./src/attributes.js":(Q,o,q)=>{function ie(v){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ie(v)}o.__esModule=!0,o.createAttribsFromArrays=cr,o.createBufferFromArray=f,o.createBufferFromTypedArray=me,o.createBufferInfoFromArrays=u,o.createBuffersFromArrays=T,o.getArray_=N,o.getNumComponents_=Ce,o.setAttribInfoBufferFromArray=ar,o.setAttributeDefaults_=ur,o.setAttributePrefix=or;var k=V(q("./src/typedarrays.js")),Z=V(q("./src/helper.js"));function z(v){if(typeof WeakMap!="function")return null;var i=new WeakMap,a=new WeakMap;return(z=function(h){return h?a:i})(v)}function V(v,i){if(!i&&v&&v.__esModule)return v;if(v===null||ie(v)!="object"&&typeof v!="function")return{default:v};var a=z(i);if(a&&a.has(v))return a.get(v);var m={__proto__:null},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)){var P=h?Object.getOwnPropertyDescriptor(v,S):null;P&&(P.get||P.set)?Object.defineProperty(m,S,P):m[S]=v[S]}return m.default=v,a&&a.set(v,m),m}var re=35044,J=34962,Te=34963,C=34660,Y=5120,H=5121,R=5122,W=5123,le=5124,Se=5125,Ge=5126,Re={attribPrefix:""};function or(v){Re.attribPrefix=v}function ur(v){Z.copyExistingProperties(v,Re)}function er(v,i,a,m,h){v.bindBuffer(i,a),v.bufferData(i,m,h||re)}function me(v,i,a,m){if(Z.isBuffer(v,i))return i;a=a||J;var h=v.createBuffer();return er(v,a,h,i,m),h}function x(v){return v==="indices"}function I(v){return v===Int8Array||v===Uint8Array}function N(v){return v.length?v:v.data}var _=/coord|texture/i,de=/color|colour/i;function _e(v,i){var a;if(_.test(v)?a=2:de.test(v)?a=4:a=3,i%a>0)throw new Error("Can not guess numComponents for attribute '".concat(v,"'. Tried ").concat(a," but ").concat(i," values is not evenly divisible by ").concat(a,". You should specify it."));return a}function Ce(v,i,a){return v.numComponents||v.size||_e(i,a||N(v).length)}function We(v,i){if(k.isArrayBuffer(v))return v;if(k.isArrayBuffer(v.data))return v.data;Array.isArray(v)&&(v={data:v});var a=v.type?Je(v.type):void 0;return a||(x(i)?a=Uint16Array:a=Float32Array),new a(v.data)}function Ue(v){return typeof v=="number"?v:v?k.getGLTypeForTypedArrayType(v):Ge}function Je(v){return typeof v=="number"?k.getTypedArrayTypeForGLType(v):v||Float32Array}function Ke(v,i){return{buffer:i.buffer,numValues:24,type:Ue(i.type),arrayType:Je(i.type)}}function fr(v,i){var a=i.data||i,m=Je(i.type),h=a*m.BYTES_PER_ELEMENT,S=v.createBuffer();return v.bindBuffer(J,S),v.bufferData(J,h,i.drawType||re),{buffer:S,numValues:a,type:k.getGLTypeForTypedArrayType(m),arrayType:m}}function Tr(v,i,a){var m=We(i,a);return{arrayType:m.constructor,buffer:me(v,m,void 0,i.drawType),type:k.getGLTypeForTypedArray(m),numValues:0}}function cr(v,i){var a={};return Object.keys(i).forEach(function(m){if(!x(m)){var h=i[m],S=h.attrib||h.name||h.attribName||Re.attribPrefix+m;if(h.value){if(!Array.isArray(h.value)&&!k.isArrayBuffer(h.value))throw new Error("array.value is not array or typedarray");a[S]={value:h.value}}else{var P;h.buffer&&h.buffer instanceof WebGLBuffer?P=Ke:typeof h=="number"||typeof h.data=="number"?P=fr:P=Tr;var L=P(v,h,m),O=L.buffer,K=L.type,$=L.numValues,te=L.arrayType,oe=h.normalize!==void 0?h.normalize:I(te),ae=Ce(h,m,$);a[S]={buffer:O,numComponents:ae,type:K,normalize:oe,stride:h.stride||0,offset:h.offset||0,divisor:h.divisor===void 0?void 0:h.divisor,drawType:h.drawType}}}}),v.bindBuffer(J,null),a}function ar(v,i,a,m){a=We(a),m!==void 0?(v.bindBuffer(J,i.buffer),v.bufferSubData(J,m,a)):er(v,J,i.buffer,a,i.drawType)}function vr(v,i){return i===Y||i===H?1:i===R||i===W?2:i===le||i===Se||i===Ge?4:0}var Sr=["position","positions","a_position"];function fe(v){var i,a;for(a=0;a<Sr.length&&(i=Sr[a],!(i in v));++a);a===Sr.length&&(i=Object.keys(v)[0]);var m=v[i],h=N(m).length;if(h===void 0)return 1;var S=Ce(m,i),P=h/S;if(h%S>0)throw new Error("numComponents ".concat(S," not correct for length ").concat(h));return P}function r(v,i){var a,m;for(m=0;m<Sr.length&&(a=Sr[m],!(a in i||(a=Re.attribPrefix+a,a in i)));++m);m===Sr.length&&(a=Object.keys(i)[0]);var h=i[a];if(!h.buffer)return 1;v.bindBuffer(J,h.buffer);var S=v.getBufferParameter(J,C);v.bindBuffer(J,null);var P=vr(v,h.type),L=S/P,O=h.numComponents||h.size,K=L/O;if(K%1!==0)throw new Error("numComponents ".concat(O," not correct for length ").concat(length));return K}function u(v,i,a){var m=cr(v,i),h=Object.assign({},a||{});h.attribs=Object.assign({},a?a.attribs:{},m);var S=i.indices;if(S){var P=We(S,"indices");h.indices=me(v,P,Te),h.numElements=P.length,h.elementType=k.getGLTypeForTypedArray(P)}else h.numElements||(h.numElements=r(v,h.attribs));return h}function f(v,i,a){var m=a==="indices"?Te:J,h=We(i,a);return me(v,h,m)}function T(v,i){var a={};return Object.keys(i).forEach(function(m){a[m]=f(v,i[m],m)}),i.indices?(a.numElements=i.indices.length,a.elementType=k.getGLTypeForTypedArray(We(i.indices),"indices")):a.numElements=fe(i),a}},"./src/draw.js":(Q,o,q)=>{function ie(C){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},ie(C)}o.__esModule=!0,o.drawBufferInfo=J,o.drawObjectList=Te;var k=z(q("./src/programs.js"));function Z(C){if(typeof WeakMap!="function")return null;var Y=new WeakMap,H=new WeakMap;return(Z=function(W){return W?H:Y})(C)}function z(C,Y){if(!Y&&C&&C.__esModule)return C;if(C===null||ie(C)!="object"&&typeof C!="function")return{default:C};var H=Z(Y);if(H&&H.has(C))return H.get(C);var R={__proto__:null},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in C)if(le!=="default"&&Object.prototype.hasOwnProperty.call(C,le)){var Se=W?Object.getOwnPropertyDescriptor(C,le):null;Se&&(Se.get||Se.set)?Object.defineProperty(R,le,Se):R[le]=C[le]}return R.default=C,H&&H.set(C,R),R}var V=4,re=5123;function J(C,Y,H,R,W,le){H=H===void 0?V:H;var Se=Y.indices,Ge=Y.elementType,Re=R===void 0?Y.numElements:R;W=W===void 0?0:W,Ge||Se?le!==void 0?C.drawElementsInstanced(H,Re,Ge===void 0?re:Y.elementType,W,le):C.drawElements(H,Re,Ge===void 0?re:Y.elementType,W):le!==void 0?C.drawArraysInstanced(H,W,Re,le):C.drawArrays(H,W,Re)}function Te(C,Y){var H=null,R=null;Y.forEach(function(W){if(W.active!==!1){var le=W.programInfo,Se=W.vertexArrayInfo||W.bufferInfo,Ge=!1,Re=W.type===void 0?V:W.type;le!==H&&(H=le,C.useProgram(le.program),Ge=!0),(Ge||Se!==R)&&(R&&R.vertexArrayObject&&!Se.vertexArrayObject&&C.bindVertexArray(null),R=Se,k.setBuffersAndAttributes(C,le,Se)),k.setUniforms(le,W.uniforms),J(C,Se,Re,W.count,W.offset,W.instanceCount)}}),R&&R.vertexArrayObject&&C.bindVertexArray(null)}},"./src/framebuffers.js":(Q,o,q)=>{function ie(fe){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ie(fe)}o.__esModule=!0,o.bindFramebufferInfo=Sr,o.createFramebufferInfo=ar,o.resizeFramebufferInfo=vr;var k=V(q("./src/textures.js")),Z=V(q("./src/helper.js"));function z(fe){if(typeof WeakMap!="function")return null;var r=new WeakMap,u=new WeakMap;return(z=function(T){return T?u:r})(fe)}function V(fe,r){if(!r&&fe&&fe.__esModule)return fe;if(fe===null||ie(fe)!="object"&&typeof fe!="function")return{default:fe};var u=z(r);if(u&&u.has(fe))return u.get(fe);var f={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in fe)if(v!=="default"&&Object.prototype.hasOwnProperty.call(fe,v)){var i=T?Object.getOwnPropertyDescriptor(fe,v):null;i&&(i.get||i.set)?Object.defineProperty(f,v,i):f[v]=fe[v]}return f.default=fe,u&&u.set(fe,f),f}var re=36160,J=36161,Te=3553,C=5121,Y=6402,H=6408,R=33190,W=36012,le=35056,Se=36013,Ge=32854,Re=32855,or=36194,ur=33189,er=6401,me=36168,x=34041,I=36064,N=36096,_=36128,de=33306,_e=33071,Ce=9729,We=[{format:H,type:C,min:Ce,wrap:_e},{format:x}],Ue={};Ue[x]=de,Ue[er]=_,Ue[me]=_,Ue[Y]=N,Ue[ur]=N,Ue[R]=N,Ue[W]=N,Ue[le]=de,Ue[Se]=de;function Je(fe,r){return Ue[fe]||Ue[r]}var Ke={};Ke[Ge]=!0,Ke[Re]=!0,Ke[or]=!0,Ke[x]=!0,Ke[ur]=!0,Ke[er]=!0,Ke[me]=!0;function fr(fe){return Ke[fe]}var Tr=32;function cr(fe){return fe>=I&&fe<I+Tr}function ar(fe,r,u,f){var T=re,v=fe.createFramebuffer();fe.bindFramebuffer(T,v),u=u||fe.drawingBufferWidth,f=f||fe.drawingBufferHeight,r=r||We;var i=[],a={framebuffer:v,attachments:[],width:u,height:f};return r.forEach(function(m,h){var S=m.attachment,P=m.samples,L=m.format,O=m.attachmentPoint||Je(L,m.internalFormat);if(O||(O=I+h),cr(O)&&i.push(O),!S)if(P!==void 0||fr(L))S=fe.createRenderbuffer(),fe.bindRenderbuffer(J,S),P>1?fe.renderbufferStorageMultisample(J,P,L,u,f):fe.renderbufferStorage(J,L,u,f);else{var K=Object.assign({},m);K.width=u,K.height=f,K.auto===void 0&&(K.auto=!1,K.min=K.min||K.minMag||Ce,K.mag=K.mag||K.minMag||Ce,K.wrapS=K.wrapS||K.wrap||_e,K.wrapT=K.wrapT||K.wrap||_e),S=k.createTexture(fe,K)}if(Z.isRenderbuffer(fe,S))fe.framebufferRenderbuffer(T,O,J,S);else if(Z.isTexture(fe,S))m.layer!==void 0?fe.framebufferTextureLayer(T,O,S,m.level||0,m.layer):fe.framebufferTexture2D(T,O,m.target||Te,S,m.level||0);else throw new Error("unknown attachment type");a.attachments.push(S)}),fe.drawBuffers&&fe.drawBuffers(i),a}function vr(fe,r,u,f,T){f=f||fe.drawingBufferWidth,T=T||fe.drawingBufferHeight,r.width=f,r.height=T,u=u||We,u.forEach(function(v,i){var a=r.attachments[i],m=v.format,h=v.samples;if(h!==void 0||Z.isRenderbuffer(fe,a))fe.bindRenderbuffer(J,a),h>1?fe.renderbufferStorageMultisample(J,h,m,f,T):fe.renderbufferStorage(J,m,f,T);else if(Z.isTexture(fe,a))k.resizeTexture(fe,a,v,f,T);else throw new Error("unknown attachment type")})}function Sr(fe,r,u){u=u||re,r?(fe.bindFramebuffer(u,r.framebuffer),fe.viewport(0,0,r.width,r.height)):(fe.bindFramebuffer(u,null),fe.viewport(0,0,fe.drawingBufferWidth,fe.drawingBufferHeight))}},"./src/helper.js":(Q,o)=>{o.__esModule=!0,o.copyExistingProperties=k,o.copyNamedProperties=ie,o.error=Z,o.isBuffer=J,o.isRenderbuffer=Te,o.isSampler=H,o.isShader=C,o.isTexture=Y,o.warn=z;function q(R){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},q(R)}function ie(R,W,le){R.forEach(function(Se){var Ge=W[Se];Ge!==void 0&&(le[Se]=Ge)})}function k(R,W){Object.keys(W).forEach(function(le){W.hasOwnProperty(le)&&R.hasOwnProperty(le)&&(W[le]=R[le])})}function Z(){var R;(R=console).error.apply(R,arguments)}function z(){var R;(R=console).warn.apply(R,arguments)}var V=new Map;function re(R,W){if(!R||q(R)!=="object")return!1;var le=V.get(W);le||(le=new WeakMap,V.set(W,le));var Se=le.get(R);if(Se===void 0){var Ge=Object.prototype.toString.call(R);Se=Ge.substring(8,Ge.length-1)===W,le.set(R,Se)}return Se}function J(R,W){return typeof WebGLBuffer<"u"&&re(W,"WebGLBuffer")}function Te(R,W){return typeof WebGLRenderbuffer<"u"&&re(W,"WebGLRenderbuffer")}function C(R,W){return typeof WebGLShader<"u"&&re(W,"WebGLShader")}function Y(R,W){return typeof WebGLTexture<"u"&&re(W,"WebGLTexture")}function H(R,W){return typeof WebGLSampler<"u"&&re(W,"WebGLSampler")}},"./src/m4.js":(Q,o,q)=>{function ie(r){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ie(r)}o.__esModule=!0,o.axisRotate=Tr,o.axisRotation=fr,o.copy=C,o.create=Te,o.frustum=er,o.getAxis=Ge,o.getTranslation=Se,o.identity=Y,o.inverse=R,o.lookAt=N,o.multiply=W,o.negate=J,o.ortho=ur,o.perspective=or,o.rotateX=Ce,o.rotateY=Ue,o.rotateZ=Ke,o.rotationX=_e,o.rotationY=We,o.rotationZ=Je,o.scale=ar,o.scaling=cr,o.setAxis=Re,o.setDefaultType=re,o.setTranslation=le,o.transformDirection=Sr,o.transformNormal=fe,o.transformPoint=vr,o.translate=de,o.translation=_,o.transpose=H;var k=z(q("./src/v3.js"));function Z(r){if(typeof WeakMap!="function")return null;var u=new WeakMap,f=new WeakMap;return(Z=function(v){return v?f:u})(r)}function z(r,u){if(!u&&r&&r.__esModule)return r;if(r===null||ie(r)!="object"&&typeof r!="function")return{default:r};var f=Z(u);if(f&&f.has(r))return f.get(r);var T={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var a=v?Object.getOwnPropertyDescriptor(r,i):null;a&&(a.get||a.set)?Object.defineProperty(T,i,a):T[i]=r[i]}return T.default=r,f&&f.set(r,T),T}var V=Float32Array;function re(r){var u=V;return V=r,u}function J(r,u){return u=u||new V(16),u[0]=-r[0],u[1]=-r[1],u[2]=-r[2],u[3]=-r[3],u[4]=-r[4],u[5]=-r[5],u[6]=-r[6],u[7]=-r[7],u[8]=-r[8],u[9]=-r[9],u[10]=-r[10],u[11]=-r[11],u[12]=-r[12],u[13]=-r[13],u[14]=-r[14],u[15]=-r[15],u}function Te(){return new V(16).fill(0)}function C(r,u){return u=u||new V(16),u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],u[4]=r[4],u[5]=r[5],u[6]=r[6],u[7]=r[7],u[8]=r[8],u[9]=r[9],u[10]=r[10],u[11]=r[11],u[12]=r[12],u[13]=r[13],u[14]=r[14],u[15]=r[15],u}function Y(r){return r=r||new V(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function H(r,u){if(u=u||new V(16),u===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,u}var T=r[0*4+0],v=r[0*4+1],i=r[0*4+2],a=r[0*4+3],m=r[1*4+0],h=r[1*4+1],S=r[1*4+2],P=r[1*4+3],L=r[2*4+0],O=r[2*4+1],K=r[2*4+2],$=r[2*4+3],te=r[3*4+0],oe=r[3*4+1],ae=r[3*4+2],se=r[3*4+3];return u[0]=T,u[1]=m,u[2]=L,u[3]=te,u[4]=v,u[5]=h,u[6]=O,u[7]=oe,u[8]=i,u[9]=S,u[10]=K,u[11]=ae,u[12]=a,u[13]=P,u[14]=$,u[15]=se,u}function R(r,u){u=u||new V(16);var f=r[0*4+0],T=r[0*4+1],v=r[0*4+2],i=r[0*4+3],a=r[1*4+0],m=r[1*4+1],h=r[1*4+2],S=r[1*4+3],P=r[2*4+0],L=r[2*4+1],O=r[2*4+2],K=r[2*4+3],$=r[3*4+0],te=r[3*4+1],oe=r[3*4+2],ae=r[3*4+3],se=O*ae,ve=oe*K,ne=h*ae,pe=oe*S,Oe=h*K,qe=O*S,ke=v*ae,Ve=oe*i,Pe=v*K,De=O*i,Ze=v*S,Xe=h*i,Qe=P*te,He=$*L,$e=a*te,Be=$*m,Ne=a*L,yr=P*m,lr=f*te,Ar=$*T,_r=f*L,Lr=P*T,Ur=f*m,Gr=a*T,et=se*m+pe*L+Oe*te-(ve*m+ne*L+qe*te),gt=ve*T+ke*L+De*te-(se*T+Ve*L+Pe*te),_t=ne*T+Ve*m+Ze*te-(pe*T+ke*m+Xe*te),Pt=qe*T+Pe*m+Xe*L-(Oe*T+De*m+Ze*L),hr=1/(f*et+a*gt+P*_t+$*Pt);return u[0]=hr*et,u[1]=hr*gt,u[2]=hr*_t,u[3]=hr*Pt,u[4]=hr*(ve*a+ne*P+qe*$-(se*a+pe*P+Oe*$)),u[5]=hr*(se*f+Ve*P+Pe*$-(ve*f+ke*P+De*$)),u[6]=hr*(pe*f+ke*a+Xe*$-(ne*f+Ve*a+Ze*$)),u[7]=hr*(Oe*f+De*a+Ze*P-(qe*f+Pe*a+Xe*P)),u[8]=hr*(Qe*S+Be*K+Ne*ae-(He*S+$e*K+yr*ae)),u[9]=hr*(He*i+lr*K+Lr*ae-(Qe*i+Ar*K+_r*ae)),u[10]=hr*($e*i+Ar*S+Ur*ae-(Be*i+lr*S+Gr*ae)),u[11]=hr*(yr*i+_r*S+Gr*K-(Ne*i+Lr*S+Ur*K)),u[12]=hr*($e*O+yr*oe+He*h-(Ne*oe+Qe*h+Be*O)),u[13]=hr*(_r*oe+Qe*v+Ar*O-(lr*O+Lr*oe+He*v)),u[14]=hr*(lr*h+Gr*oe+Be*v-(Ur*oe+$e*v+Ar*h)),u[15]=hr*(Ur*O+Ne*v+Lr*h-(_r*h+Gr*O+yr*v)),u}function W(r,u,f){f=f||new V(16);var T=r[0],v=r[1],i=r[2],a=r[3],m=r[4],h=r[5],S=r[6],P=r[7],L=r[8],O=r[9],K=r[10],$=r[11],te=r[12],oe=r[13],ae=r[14],se=r[15],ve=u[0],ne=u[1],pe=u[2],Oe=u[3],qe=u[4],ke=u[5],Ve=u[6],Pe=u[7],De=u[8],Ze=u[9],Xe=u[10],Qe=u[11],He=u[12],$e=u[13],Be=u[14],Ne=u[15];return f[0]=T*ve+m*ne+L*pe+te*Oe,f[1]=v*ve+h*ne+O*pe+oe*Oe,f[2]=i*ve+S*ne+K*pe+ae*Oe,f[3]=a*ve+P*ne+$*pe+se*Oe,f[4]=T*qe+m*ke+L*Ve+te*Pe,f[5]=v*qe+h*ke+O*Ve+oe*Pe,f[6]=i*qe+S*ke+K*Ve+ae*Pe,f[7]=a*qe+P*ke+$*Ve+se*Pe,f[8]=T*De+m*Ze+L*Xe+te*Qe,f[9]=v*De+h*Ze+O*Xe+oe*Qe,f[10]=i*De+S*Ze+K*Xe+ae*Qe,f[11]=a*De+P*Ze+$*Xe+se*Qe,f[12]=T*He+m*$e+L*Be+te*Ne,f[13]=v*He+h*$e+O*Be+oe*Ne,f[14]=i*He+S*$e+K*Be+ae*Ne,f[15]=a*He+P*$e+$*Be+se*Ne,f}function le(r,u,f){return f=f||Y(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=u[0],f[13]=u[1],f[14]=u[2],f[15]=1,f}function Se(r,u){return u=u||k.create(),u[0]=r[12],u[1]=r[13],u[2]=r[14],u}function Ge(r,u,f){f=f||k.create();var T=u*4;return f[0]=r[T+0],f[1]=r[T+1],f[2]=r[T+2],f}function Re(r,u,f,T){T!==r&&(T=C(r,T));var v=f*4;return T[v+0]=u[0],T[v+1]=u[1],T[v+2]=u[2],T}function or(r,u,f,T,v){v=v||new V(16);var i=Math.tan(Math.PI*.5-.5*r),a=1/(f-T);return v[0]=i/u,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=i,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=(f+T)*a,v[11]=-1,v[12]=0,v[13]=0,v[14]=f*T*a*2,v[15]=0,v}function ur(r,u,f,T,v,i,a){return a=a||new V(16),a[0]=2/(u-r),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(T-f),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(v-i),a[11]=0,a[12]=(u+r)/(r-u),a[13]=(T+f)/(f-T),a[14]=(i+v)/(v-i),a[15]=1,a}function er(r,u,f,T,v,i,a){a=a||new V(16);var m=u-r,h=T-f,S=v-i;return a[0]=2*v/m,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*v/h,a[6]=0,a[7]=0,a[8]=(r+u)/m,a[9]=(T+f)/h,a[10]=i/S,a[11]=-1,a[12]=0,a[13]=0,a[14]=v*i/S,a[15]=0,a}var me,x,I;function N(r,u,f,T){return T=T||new V(16),me=me||k.create(),x=x||k.create(),I=I||k.create(),k.normalize(k.subtract(r,u,I),I),k.normalize(k.cross(f,I,me),me),k.normalize(k.cross(I,me,x),x),T[0]=me[0],T[1]=me[1],T[2]=me[2],T[3]=0,T[4]=x[0],T[5]=x[1],T[6]=x[2],T[7]=0,T[8]=I[0],T[9]=I[1],T[10]=I[2],T[11]=0,T[12]=r[0],T[13]=r[1],T[14]=r[2],T[15]=1,T}function _(r,u){return u=u||new V(16),u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=r[0],u[13]=r[1],u[14]=r[2],u[15]=1,u}function de(r,u,f){f=f||new V(16);var T=u[0],v=u[1],i=u[2],a=r[0],m=r[1],h=r[2],S=r[3],P=r[1*4+0],L=r[1*4+1],O=r[1*4+2],K=r[1*4+3],$=r[2*4+0],te=r[2*4+1],oe=r[2*4+2],ae=r[2*4+3],se=r[3*4+0],ve=r[3*4+1],ne=r[3*4+2],pe=r[3*4+3];return r!==f&&(f[0]=a,f[1]=m,f[2]=h,f[3]=S,f[4]=P,f[5]=L,f[6]=O,f[7]=K,f[8]=$,f[9]=te,f[10]=oe,f[11]=ae),f[12]=a*T+P*v+$*i+se,f[13]=m*T+L*v+te*i+ve,f[14]=h*T+O*v+oe*i+ne,f[15]=S*T+K*v+ae*i+pe,f}function _e(r,u){u=u||new V(16);var f=Math.cos(r),T=Math.sin(r);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=f,u[6]=T,u[7]=0,u[8]=0,u[9]=-T,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ce(r,u,f){f=f||new V(16);var T=r[4],v=r[5],i=r[6],a=r[7],m=r[8],h=r[9],S=r[10],P=r[11],L=Math.cos(u),O=Math.sin(u);return f[4]=L*T+O*m,f[5]=L*v+O*h,f[6]=L*i+O*S,f[7]=L*a+O*P,f[8]=L*m-O*T,f[9]=L*h-O*v,f[10]=L*S-O*i,f[11]=L*P-O*a,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function We(r,u){u=u||new V(16);var f=Math.cos(r),T=Math.sin(r);return u[0]=f,u[1]=0,u[2]=-T,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=T,u[9]=0,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ue(r,u,f){f=f||new V(16);var T=r[0*4+0],v=r[0*4+1],i=r[0*4+2],a=r[0*4+3],m=r[2*4+0],h=r[2*4+1],S=r[2*4+2],P=r[2*4+3],L=Math.cos(u),O=Math.sin(u);return f[0]=L*T-O*m,f[1]=L*v-O*h,f[2]=L*i-O*S,f[3]=L*a-O*P,f[8]=L*m+O*T,f[9]=L*h+O*v,f[10]=L*S+O*i,f[11]=L*P+O*a,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Je(r,u){u=u||new V(16);var f=Math.cos(r),T=Math.sin(r);return u[0]=f,u[1]=T,u[2]=0,u[3]=0,u[4]=-T,u[5]=f,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ke(r,u,f){f=f||new V(16);var T=r[0*4+0],v=r[0*4+1],i=r[0*4+2],a=r[0*4+3],m=r[1*4+0],h=r[1*4+1],S=r[1*4+2],P=r[1*4+3],L=Math.cos(u),O=Math.sin(u);return f[0]=L*T+O*m,f[1]=L*v+O*h,f[2]=L*i+O*S,f[3]=L*a+O*P,f[4]=L*m-O*T,f[5]=L*h-O*v,f[6]=L*S-O*i,f[7]=L*P-O*a,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function fr(r,u,f){f=f||new V(16);var T=r[0],v=r[1],i=r[2],a=Math.sqrt(T*T+v*v+i*i);T/=a,v/=a,i/=a;var m=T*T,h=v*v,S=i*i,P=Math.cos(u),L=Math.sin(u),O=1-P;return f[0]=m+(1-m)*P,f[1]=T*v*O+i*L,f[2]=T*i*O-v*L,f[3]=0,f[4]=T*v*O-i*L,f[5]=h+(1-h)*P,f[6]=v*i*O+T*L,f[7]=0,f[8]=T*i*O+v*L,f[9]=v*i*O-T*L,f[10]=S+(1-S)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,u,f,T){T=T||new V(16);var v=u[0],i=u[1],a=u[2],m=Math.sqrt(v*v+i*i+a*a);v/=m,i/=m,a/=m;var h=v*v,S=i*i,P=a*a,L=Math.cos(f),O=Math.sin(f),K=1-L,$=h+(1-h)*L,te=v*i*K+a*O,oe=v*a*K-i*O,ae=v*i*K-a*O,se=S+(1-S)*L,ve=i*a*K+v*O,ne=v*a*K+i*O,pe=i*a*K-v*O,Oe=P+(1-P)*L,qe=r[0],ke=r[1],Ve=r[2],Pe=r[3],De=r[4],Ze=r[5],Xe=r[6],Qe=r[7],He=r[8],$e=r[9],Be=r[10],Ne=r[11];return T[0]=$*qe+te*De+oe*He,T[1]=$*ke+te*Ze+oe*$e,T[2]=$*Ve+te*Xe+oe*Be,T[3]=$*Pe+te*Qe+oe*Ne,T[4]=ae*qe+se*De+ve*He,T[5]=ae*ke+se*Ze+ve*$e,T[6]=ae*Ve+se*Xe+ve*Be,T[7]=ae*Pe+se*Qe+ve*Ne,T[8]=ne*qe+pe*De+Oe*He,T[9]=ne*ke+pe*Ze+Oe*$e,T[10]=ne*Ve+pe*Xe+Oe*Be,T[11]=ne*Pe+pe*Qe+Oe*Ne,r!==T&&(T[12]=r[12],T[13]=r[13],T[14]=r[14],T[15]=r[15]),T}function cr(r,u){return u=u||new V(16),u[0]=r[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=r[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=r[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function ar(r,u,f){f=f||new V(16);var T=u[0],v=u[1],i=u[2];return f[0]=T*r[0],f[1]=T*r[1],f[2]=T*r[2],f[3]=T*r[3],f[4]=v*r[4],f[5]=v*r[5],f[6]=v*r[6],f[7]=v*r[7],f[8]=i*r[8],f[9]=i*r[9],f[10]=i*r[10],f[11]=i*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function vr(r,u,f){f=f||k.create();var T=u[0],v=u[1],i=u[2],a=T*r[0*4+3]+v*r[1*4+3]+i*r[2*4+3]+r[3*4+3];return f[0]=(T*r[0]+v*r[4]+i*r[8]+r[12])/a,f[1]=(T*r[1]+v*r[5]+i*r[9]+r[13])/a,f[2]=(T*r[2]+v*r[6]+i*r[10]+r[14])/a,f}function Sr(r,u,f){f=f||k.create();var T=u[0],v=u[1],i=u[2];return f[0]=T*r[0]+v*r[4]+i*r[8],f[1]=T*r[1]+v*r[5]+i*r[9],f[2]=T*r[2]+v*r[6]+i*r[10],f}function fe(r,u,f){f=f||k.create();var T=R(r),v=u[0],i=u[1],a=u[2];return f[0]=v*T[0]+i*T[1]+a*T[2],f[1]=v*T[4]+i*T[5]+a*T[6],f[2]=v*T[8]+i*T[9]+a*T[10],f}},"./src/primitives.js":(Q,o,q)=>{function ie(i){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ie(i)}o.__esModule=!0,o.concatVertices=u,o.create3DFBuffers=o.create3DFBufferInfo=void 0,o.create3DFVertices=We,o.createAugmentedTypedArray=R,o.createCrescentBuffers=o.createCrescentBufferInfo=void 0,o.createCrescentVertices=Ue,o.createCubeBuffers=o.createCubeBufferInfo=o.createCresentVertices=o.createCresentBuffers=o.createCresentBufferInfo=void 0,o.createCubeVertices=de,o.createCylinderBuffers=o.createCylinderBufferInfo=void 0,o.createCylinderVertices=Je,o.createDiscBuffers=o.createDiscBufferInfo=void 0,o.createDiscVertices=fr,o.createPlaneBuffers=o.createPlaneBufferInfo=void 0,o.createPlaneVertices=I,o.createSphereBuffers=o.createSphereBufferInfo=void 0,o.createSphereVertices=N,o.createTorusBuffers=o.createTorusBufferInfo=void 0,o.createTorusVertices=Ke,o.createTruncatedConeBuffers=o.createTruncatedConeBufferInfo=void 0,o.createTruncatedConeVertices=_e,o.createXYQuadBuffers=o.createXYQuadBufferInfo=void 0,o.createXYQuadVertices=x,o.deindexVertices=le,o.duplicateVertices=f,o.flattenNormals=Se,o.makeRandomVertexColors=cr,o.reorientDirections=or,o.reorientNormals=ur,o.reorientPositions=er,o.reorientVertices=me;var k=Te(q("./src/attributes.js")),Z=Te(q("./src/helper.js")),z=Te(q("./src/typedarrays.js")),V=Te(q("./src/m4.js")),re=Te(q("./src/v3.js"));function J(i){if(typeof WeakMap!="function")return null;var a=new WeakMap,m=new WeakMap;return(J=function(S){return S?m:a})(i)}function Te(i,a){if(!a&&i&&i.__esModule)return i;if(i===null||ie(i)!="object"&&typeof i!="function")return{default:i};var m=J(a);if(m&&m.has(i))return m.get(i);var h={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in i)if(P!=="default"&&Object.prototype.hasOwnProperty.call(i,P)){var L=S?Object.getOwnPropertyDescriptor(i,P):null;L&&(L.get||L.set)?Object.defineProperty(h,P,L):h[P]=i[P]}return h.default=i,m&&m.set(i,h),h}var C=k.getArray_,Y=k.getNumComponents_;function H(i,a){var m=0;return i.push=function(){for(var h=0;h<arguments.length;++h){var S=arguments[h];if(S instanceof Array||z.isArrayBuffer(S))for(var P=0;P<S.length;++P)i[m++]=S[P];else i[m++]=S}},i.reset=function(h){m=h||0},i.numComponents=a,Object.defineProperty(i,"numElements",{get:function(){return this.length/this.numComponents|0}}),i}function R(i,a,m){var h=m||Float32Array;return H(new h(i*a),i)}function W(i){return i!=="indices"}function le(i){var a=i.indices,m={},h=a.length;function S(P){for(var L=i[P],O=L.numComponents,K=R(O,h,L.constructor),$=0;$<h;++$)for(var te=a[$],oe=te*O,ae=0;ae<O;++ae)K.push(L[oe+ae]);m[P]=K}return Object.keys(i).filter(W).forEach(S),m}function Se(i){if(i.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var a=i.normal,m=a.length,h=0;h<m;h+=9){var S=a[h+0],P=a[h+1],L=a[h+2],O=a[h+3],K=a[h+4],$=a[h+5],te=a[h+6],oe=a[h+7],ae=a[h+8],se=S+O+te,ve=P+K+oe,ne=L+$+ae,pe=Math.sqrt(se*se+ve*ve+ne*ne);se/=pe,ve/=pe,ne/=pe,a[h+0]=se,a[h+1]=ve,a[h+2]=ne,a[h+3]=se,a[h+4]=ve,a[h+5]=ne,a[h+6]=se,a[h+7]=ve,a[h+8]=ne}return i}function Ge(i,a,m){for(var h=i.length,S=new Float32Array(3),P=0;P<h;P+=3)m(a,[i[P],i[P+1],i[P+2]],S),i[P]=S[0],i[P+1]=S[1],i[P+2]=S[2]}function Re(i,a,m){m=m||re.create();var h=a[0],S=a[1],P=a[2];return m[0]=h*i[0]+S*i[1]+P*i[2],m[1]=h*i[4]+S*i[5]+P*i[6],m[2]=h*i[8]+S*i[9]+P*i[10],m}function or(i,a){return Ge(i,a,V.transformDirection),i}function ur(i,a){return Ge(i,V.inverse(a),Re),i}function er(i,a){return Ge(i,a,V.transformPoint),i}function me(i,a){return Object.keys(i).forEach(function(m){var h=i[m];m.indexOf("pos")>=0?er(h,a):m.indexOf("tan")>=0||m.indexOf("binorm")>=0?or(h,a):m.indexOf("norm")>=0&&ur(h,a)}),i}function x(i,a,m){return i=i||2,a=a||0,m=m||0,i*=.5,{position:{numComponents:2,data:[a+-1*i,m+-1*i,a+1*i,m+-1*i,a+-1*i,m+1*i,a+1*i,m+1*i]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function I(i,a,m,h,S){i=i||1,a=a||1,m=m||1,h=h||1,S=S||V.identity();for(var P=(m+1)*(h+1),L=R(3,P),O=R(3,P),K=R(2,P),$=0;$<=h;$++)for(var te=0;te<=m;te++){var oe=te/m,ae=$/h;L.push(i*oe-i*.5,0,a*ae-a*.5),O.push(0,1,0),K.push(oe,ae)}for(var se=m+1,ve=R(3,m*h*2,Uint16Array),ne=0;ne<h;ne++)for(var pe=0;pe<m;pe++)ve.push((ne+0)*se+pe,(ne+1)*se+pe,(ne+0)*se+pe+1),ve.push((ne+1)*se+pe,(ne+1)*se+pe+1,(ne+0)*se+pe+1);var Oe=me({position:L,normal:O,texcoord:K,indices:ve},S);return Oe}function N(i,a,m,h,S,P,L){if(a<=0||m<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");h=h||0,S=S||Math.PI,P=P||0,L=L||Math.PI*2;for(var O=S-h,K=L-P,$=(a+1)*(m+1),te=R(3,$),oe=R(3,$),ae=R(2,$),se=0;se<=m;se++)for(var ve=0;ve<=a;ve++){var ne=ve/a,pe=se/m,Oe=K*ne+P,qe=O*pe+h,ke=Math.sin(Oe),Ve=Math.cos(Oe),Pe=Math.sin(qe),De=Math.cos(qe),Ze=Ve*Pe,Xe=De,Qe=ke*Pe;te.push(i*Ze,i*Xe,i*Qe),oe.push(Ze,Xe,Qe),ae.push(1-ne,pe)}for(var He=a+1,$e=R(3,a*m*2,Uint16Array),Be=0;Be<a;Be++)for(var Ne=0;Ne<m;Ne++)$e.push((Ne+0)*He+Be,(Ne+0)*He+Be+1,(Ne+1)*He+Be),$e.push((Ne+1)*He+Be,(Ne+0)*He+Be+1,(Ne+1)*He+Be+1);return{position:te,normal:oe,texcoord:ae,indices:$e}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function de(i){i=i||1;for(var a=i/2,m=[[-a,-a,-a],[+a,-a,-a],[-a,+a,-a],[+a,+a,-a],[-a,-a,+a],[+a,-a,+a],[-a,+a,+a],[+a,+a,+a]],h=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],S=[[1,0],[0,0],[0,1],[1,1]],P=6*4,L=R(3,P),O=R(3,P),K=R(2,P),$=R(3,6*2,Uint16Array),te=0;te<6;++te){for(var oe=_[te],ae=0;ae<4;++ae){var se=m[oe[ae]],ve=h[te],ne=S[ae];L.push(se),O.push(ve),K.push(ne)}var pe=4*te;$.push(pe+0,pe+1,pe+2),$.push(pe+0,pe+2,pe+3)}return{position:L,normal:O,texcoord:K,indices:$}}function _e(i,a,m,h,S,P,L){if(h<3)throw new Error("radialSubdivisions must be 3 or greater");if(S<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var O=P===void 0?!0:P,K=L===void 0?!0:L,$=(O?2:0)+(K?2:0),te=(h+1)*(S+1+$),oe=R(3,te),ae=R(3,te),se=R(2,te),ve=R(3,h*(S+$/2)*2,Uint16Array),ne=h+1,pe=Math.atan2(i-a,m),Oe=Math.cos(pe),qe=Math.sin(pe),ke=O?-2:0,Ve=S+(K?2:0),Pe=ke;Pe<=Ve;++Pe){var De=Pe/S,Ze=m*De,Xe=void 0;Pe<0?(Ze=0,De=1,Xe=i):Pe>S?(Ze=m,De=1,Xe=a):Xe=i+(a-i)*(Pe/S),(Pe===-2||Pe===S+2)&&(Xe=0,De=0),Ze-=m/2;for(var Qe=0;Qe<ne;++Qe){var He=Math.sin(Qe*Math.PI*2/h),$e=Math.cos(Qe*Math.PI*2/h);oe.push(He*Xe,Ze,$e*Xe),Pe<0?ae.push(0,-1,0):Pe>S?ae.push(0,1,0):Xe===0?ae.push(0,0,0):ae.push(He*Oe,qe,$e*Oe),se.push(Qe/h,1-De)}}for(var Be=0;Be<S+$;++Be)if(!(Be===1&&O||Be===S+$-2&&K))for(var Ne=0;Ne<h;++Ne)ve.push(ne*(Be+0)+0+Ne,ne*(Be+0)+1+Ne,ne*(Be+1)+1+Ne),ve.push(ne*(Be+0)+0+Ne,ne*(Be+1)+1+Ne,ne*(Be+1)+0+Ne);return{position:oe,normal:ae,texcoord:se,indices:ve}}function Ce(i,a){a=a||[];for(var m=[],h=0;h<i.length;h+=4){var S=i[h],P=i.slice(h+1,h+4);P.push.apply(P,a);for(var L=0;L<S;++L)m.push.apply(m,P)}return m}function We(){var i=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],a=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],m=Ce([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),h=Ce([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),S=i.length/3,P={position:R(3,S),texcoord:R(2,S),normal:R(3,S),color:R(4,S,Uint8Array),indices:R(3,S/3,Uint16Array)};P.position.push(i),P.texcoord.push(a),P.normal.push(m),P.color.push(h);for(var L=0;L<S;++L)P.indices.push(L);return P}function Ue(i,a,m,h,S,P,L){if(S<=0)throw new Error("subdivisionDown must be > 0");P=P||0,L=L||1;var O=2,K=L-P,$=(S+1)*2*(2+O),te=R(3,$),oe=R(3,$),ae=R(2,$);function se(Ve,Pe,De){return Ve+(Pe-Ve)*De}function ve(Ve,Pe,De,Ze,Xe,Qe){for(var He=0;He<=S;He++){var $e=Pe/(O-1),Be=He/S,Ne=($e-.5)*2,yr=(P+Be*K)*Math.PI,lr=Math.sin(yr),Ar=Math.cos(yr),_r=se(i,Ve,lr),Lr=Ne*h,Ur=Ar*i,Gr=lr*_r;te.push(Lr,Ur,Gr);var et=re.add(re.multiply([0,lr,Ar],De),Ze);oe.push(et),ae.push($e*Xe+Qe,Be)}}for(var ne=0;ne<O;ne++){var pe=(ne/(O-1)-.5)*2;ve(a,ne,[1,1,1],[0,0,0],1,0),ve(a,ne,[0,0,0],[pe,0,0],0,0),ve(m,ne,[1,1,1],[0,0,0],1,0),ve(m,ne,[0,0,0],[pe,0,0],0,1)}var Oe=R(3,S*2*(2+O),Uint16Array);function qe(Ve,Pe){for(var De=0;De<S;++De)Oe.push(Ve+De+0,Ve+De+1,Pe+De+0),Oe.push(Ve+De+1,Pe+De+1,Pe+De+0)}var ke=S+1;return qe(ke*0,ke*4),qe(ke*5,ke*7),qe(ke*6,ke*2),qe(ke*3,ke*1),{position:te,normal:oe,texcoord:ae,indices:Oe}}function Je(i,a,m,h,S,P){return _e(i,i,a,m,h,S,P)}function Ke(i,a,m,h,S,P){if(m<3)throw new Error("radialSubdivisions must be 3 or greater");if(h<3)throw new Error("verticalSubdivisions must be 3 or greater");S=S||0,P=P||Math.PI*2;for(var L=P-S,O=m+1,K=h+1,$=O*K,te=R(3,$),oe=R(3,$),ae=R(2,$),se=R(3,m*h*2,Uint16Array),ve=0;ve<K;++ve)for(var ne=ve/h,pe=ne*Math.PI*2,Oe=Math.sin(pe),qe=i+Oe*a,ke=Math.cos(pe),Ve=ke*a,Pe=0;Pe<O;++Pe){var De=Pe/m,Ze=S+De*L,Xe=Math.sin(Ze),Qe=Math.cos(Ze),He=Xe*qe,$e=Qe*qe,Be=Xe*Oe,Ne=Qe*Oe;te.push(He,Ve,$e),oe.push(Be,ke,Ne),ae.push(De,1-ne)}for(var yr=0;yr<h;++yr)for(var lr=0;lr<m;++lr){var Ar=1+lr,_r=1+yr;se.push(O*yr+lr,O*_r+lr,O*yr+Ar),se.push(O*_r+lr,O*_r+Ar,O*yr+Ar)}return{position:te,normal:oe,texcoord:ae,indices:se}}function fr(i,a,m,h,S){if(a<3)throw new Error("divisions must be at least 3");m=m||1,S=S||1,h=h||0;for(var P=(a+1)*(m+1),L=R(3,P),O=R(3,P),K=R(2,P),$=R(3,m*a*2,Uint16Array),te=0,oe=i-h,ae=a+1,se=0;se<=m;++se){for(var ve=h+oe*Math.pow(se/m,S),ne=0;ne<=a;++ne){var pe=2*Math.PI*ne/a,Oe=ve*Math.cos(pe),qe=ve*Math.sin(pe);if(L.push(Oe,0,qe),O.push(0,1,0),K.push(1-ne/a,se/m),se>0&&ne!==a){var ke=te+(ne+1),Ve=te+ne,Pe=te+ne-ae,De=te+(ne+1)-ae;$.push(ke,Ve,Pe),$.push(ke,Pe,De)}}te+=a+1}return{position:L,normal:O,texcoord:K,indices:$}}function Tr(i){return Math.random()*i|0}function cr(i,a){a=a||{};var m=i.position.numElements,h=R(4,m,Uint8Array),S=a.rand||function(oe,ae){return ae<3?Tr(256):255};if(i.color=h,i.indices)for(var P=0;P<m;++P)h.push(S(P,0),S(P,1),S(P,2),S(P,3));else for(var L=a.vertsPerColor||3,O=m/L,K=0;K<O;++K)for(var $=[S(K,0),S(K,1),S(K,2),S(K,3)],te=0;te<L;++te)h.push($);return i}function ar(i){return function(a){var m=i.apply(this,Array.prototype.slice.call(arguments,1));return k.createBuffersFromArrays(a,m)}}function vr(i){return function(a){var m=i.apply(null,Array.prototype.slice.call(arguments,1));return k.createBufferInfoFromArrays(a,m)}}var Sr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function fe(i,a,m,h){h=h||0;for(var S=i.length,P=0;P<S;++P)a[m+P]=i[P]+h}function r(i,a){var m=C(i),h=new m.constructor(a),S=h;return m.numComponents&&m.numElements&&H(h,m.numComponents),i.data&&(S={data:h},Z.copyNamedProperties(Sr,i,S)),S}function u(i){for(var a={},m,h=function(){var te=i[S];Object.keys(te).forEach(function(oe){a[oe]||(a[oe]=[]),!m&&oe!=="indices"&&(m=oe);var ae=te[oe],se=Y(ae,oe),ve=C(ae),ne=ve.length/se;a[oe].push(ne)})},S=0;S<i.length;++S)h();function P($){for(var te=0,oe,ae=0;ae<i.length;++ae){var se=i[ae],ve=se[$],ne=C(ve);te+=ne.length,(!oe||ve.data)&&(oe=ve)}return{length:te,spec:oe}}function L($,te,oe){for(var ae=0,se=0,ve=0;ve<i.length;++ve){var ne=i[ve],pe=ne[$],Oe=C(pe);$==="indices"?(fe(Oe,oe,se,ae),ae+=te[ve]):fe(Oe,oe,se),se+=Oe.length}}var O=a[m],K={};return Object.keys(a).forEach(function($){var te=P($),oe=r(te.spec,te.length);L($,O,C(oe)),K[$]=oe}),K}function f(i){var a={};return Object.keys(i).forEach(function(m){var h=i[m],S=C(h),P=r(h,S.length);fe(S,C(P),0),a[m]=P}),a}o.create3DFBufferInfo=vr(We),o.create3DFBuffers=ar(We),o.createCubeBufferInfo=vr(de),o.createCubeBuffers=ar(de),o.createPlaneBufferInfo=vr(I),o.createPlaneBuffers=ar(I),o.createSphereBufferInfo=vr(N),o.createSphereBuffers=ar(N),o.createTruncatedConeBufferInfo=vr(_e),o.createTruncatedConeBuffers=ar(_e),o.createXYQuadBufferInfo=vr(x),o.createXYQuadBuffers=ar(x);var T=o.createCrescentBufferInfo=vr(Ue),v=o.createCrescentBuffers=ar(Ue);o.createCylinderBufferInfo=vr(Je),o.createCylinderBuffers=ar(Je),o.createTorusBufferInfo=vr(Ke),o.createTorusBuffers=ar(Ke),o.createDiscBufferInfo=vr(fr),o.createDiscBuffers=ar(fr),o.createCresentBufferInfo=T,o.createCresentBuffers=v,o.createCresentVertices=Ue},"./src/programs.js":(Q,o,q)=>{function ie(e){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(e)}o.__esModule=!0,o.bindTransformFeedbackInfo=Mt,o.bindUniformBlock=Nt,o.createAttributeSetters=fn,o.createProgram=mt,o.createProgramAsync=void 0,o.createProgramFromScripts=rn,o.createProgramFromSources=tn,o.createProgramInfo=s,o.createProgramInfoAsync=void 0,o.createProgramInfoFromProgram=Gt,o.createProgramInfos=g,o.createProgramInfosAsync=void 0,o.createPrograms=d,o.createProgramsAsync=void 0,o.createTransformFeedback=an,o.createTransformFeedbackInfo=Ot,o.createUniformBlockInfo=un,o.createUniformBlockInfoFromProgram=on,o.createUniformBlockSpecFromProgram=zr,o.createUniformSetters=nt,o.setAttributes=cn,o.setBlockUniforms=ha,o.setBuffersAndAttributes=ma,o.setUniformBlock=Un,o.setUniforms=Ut,o.setUniformsAndBindTextures=void 0;var k=V(q("./src/utils.js")),Z=V(q("./src/helper.js"));function z(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(z=function(E){return E?n:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ie(e)!="object"&&typeof e!="function")return{default:e};var n=z(t);if(n&&n.has(e))return n.get(e);var b={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in e)if(A!=="default"&&Object.prototype.hasOwnProperty.call(e,A)){var F=E?Object.getOwnPropertyDescriptor(e,A):null;F&&(F.get||F.set)?Object.defineProperty(b,A,F):b[A]=e[A]}return b.default=e,n&&n.set(e,b),b}function re(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */re=function(){return t};var e,t={},n=Object.prototype,b=n.hasOwnProperty,E=Object.defineProperty||function(ce,X,ee){ce[X]=ee.value},A=typeof Symbol=="function"?Symbol:{},F=A.iterator||"@@iterator",w=A.asyncIterator||"@@asyncIterator",M=A.toStringTag||"@@toStringTag";function D(ce,X,ee){return Object.defineProperty(ce,X,{value:ee,enumerable:!0,configurable:!0,writable:!0}),ce[X]}try{D({},"")}catch{D=function(ee,Ae,Le){return ee[Ae]=Le}}function j(ce,X,ee,Ae){var Le=X&&X.prototype instanceof je?X:je,xe=Object.create(Le.prototype),sr=new da(Ae||[]);return E(xe,"_invoke",{value:Ha(ce,ee,sr)}),xe}function ue(ce,X,ee){try{return{type:"normal",arg:ce.call(X,ee)}}catch(Ae){return{type:"throw",arg:Ae}}}t.wrap=j;var ye="suspendedStart",be="suspendedYield",Fe="executing",Me="completed",Ie={};function je(){}function Ye(){}function ir(){}var mr={};D(mr,F,function(){return this});var Pr=Object.getPrototypeOf,Or=Pr&&Pr(Pr(ba([])));Or&&Or!==n&&b.call(Or,F)&&(mr=Or);var Vr=ir.prototype=je.prototype=Object.create(mr);function kn(ce){["next","throw","return"].forEach(function(X){D(ce,X,function(ee){return this._invoke(X,ee)})})}function jn(ce,X){function ee(Le,xe,sr,wr){var Rr=ue(ce[Le],ce,xe);if(Rr.type!=="throw"){var pt=Rr.arg,at=pt.value;return at&&ie(at)=="object"&&b.call(at,"__await")?X.resolve(at.__await).then(function(dt){ee("next",dt,sr,wr)},function(dt){ee("throw",dt,sr,wr)}):X.resolve(at).then(function(dt){pt.value=dt,sr(pt)},function(dt){return ee("throw",dt,sr,wr)})}wr(Rr.arg)}var Ae;E(this,"_invoke",{value:function(xe,sr){function wr(){return new X(function(Rr,pt){ee(xe,sr,Rr,pt)})}return Ae=Ae?Ae.then(wr,wr):wr()}})}function Ha(ce,X,ee){var Ae=ye;return function(Le,xe){if(Ae===Fe)throw new Error("Generator is already running");if(Ae===Me){if(Le==="throw")throw xe;return{value:e,done:!0}}for(ee.method=Le,ee.arg=xe;;){var sr=ee.delegate;if(sr){var wr=Da(sr,ee);if(wr){if(wr===Ie)continue;return wr}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(Ae===ye)throw Ae=Me,ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);Ae=Fe;var Rr=ue(ce,X,ee);if(Rr.type==="normal"){if(Ae=ee.done?Me:be,Rr.arg===Ie)continue;return{value:Rr.arg,done:ee.done}}Rr.type==="throw"&&(Ae=Me,ee.method="throw",ee.arg=Rr.arg)}}}function Da(ce,X){var ee=X.method,Ae=ce.iterator[ee];if(Ae===e)return X.delegate=null,ee==="throw"&&ce.iterator.return&&(X.method="return",X.arg=e,Da(ce,X),X.method==="throw")||ee!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),Ie;var Le=ue(Ae,ce.iterator,X.arg);if(Le.type==="throw")return X.method="throw",X.arg=Le.arg,X.delegate=null,Ie;var xe=Le.arg;return xe?xe.done?(X[ce.resultName]=xe.value,X.next=ce.nextLoc,X.method!=="return"&&(X.method="next",X.arg=e),X.delegate=null,Ie):xe:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,Ie)}function Ka(ce){var X={tryLoc:ce[0]};1 in ce&&(X.catchLoc=ce[1]),2 in ce&&(X.finallyLoc=ce[2],X.afterLoc=ce[3]),this.tryEntries.push(X)}function pa(ce){var X=ce.completion||{};X.type="normal",delete X.arg,ce.completion=X}function da(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(Ka,this),this.reset(!0)}function ba(ce){if(ce||ce===""){var X=ce[F];if(X)return X.call(ce);if(typeof ce.next=="function")return ce;if(!isNaN(ce.length)){var ee=-1,Ae=function Le(){for(;++ee<ce.length;)if(b.call(ce,ee))return Le.value=ce[ee],Le.done=!1,Le;return Le.value=e,Le.done=!0,Le};return Ae.next=Ae}}throw new TypeError(ie(ce)+" is not iterable")}return Ye.prototype=ir,E(Vr,"constructor",{value:ir,configurable:!0}),E(ir,"constructor",{value:Ye,configurable:!0}),Ye.displayName=D(ir,M,"GeneratorFunction"),t.isGeneratorFunction=function(ce){var X=typeof ce=="function"&&ce.constructor;return!!X&&(X===Ye||(X.displayName||X.name)==="GeneratorFunction")},t.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,ir):(ce.__proto__=ir,D(ce,M,"GeneratorFunction")),ce.prototype=Object.create(Vr),ce},t.awrap=function(ce){return{__await:ce}},kn(jn.prototype),D(jn.prototype,w,function(){return this}),t.AsyncIterator=jn,t.async=function(ce,X,ee,Ae,Le){Le===void 0&&(Le=Promise);var xe=new jn(j(ce,X,ee,Ae),Le);return t.isGeneratorFunction(X)?xe:xe.next().then(function(sr){return sr.done?sr.value:xe.next()})},kn(Vr),D(Vr,M,"Generator"),D(Vr,F,function(){return this}),D(Vr,"toString",function(){return"[object Generator]"}),t.keys=function(ce){var X=Object(ce),ee=[];for(var Ae in X)ee.push(Ae);return ee.reverse(),function Le(){for(;ee.length;){var xe=ee.pop();if(xe in X)return Le.value=xe,Le.done=!1,Le}return Le.done=!0,Le}},t.values=ba,da.prototype={constructor:da,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(pa),!X)for(var ee in this)ee.charAt(0)==="t"&&b.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=e)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var ee=this;function Ae(pt,at){return sr.type="throw",sr.arg=X,ee.next=pt,at&&(ee.method="next",ee.arg=e),!!at}for(var Le=this.tryEntries.length-1;Le>=0;--Le){var xe=this.tryEntries[Le],sr=xe.completion;if(xe.tryLoc==="root")return Ae("end");if(xe.tryLoc<=this.prev){var wr=b.call(xe,"catchLoc"),Rr=b.call(xe,"finallyLoc");if(wr&&Rr){if(this.prev<xe.catchLoc)return Ae(xe.catchLoc,!0);if(this.prev<xe.finallyLoc)return Ae(xe.finallyLoc)}else if(wr){if(this.prev<xe.catchLoc)return Ae(xe.catchLoc,!0)}else{if(!Rr)throw new Error("try statement without catch or finally");if(this.prev<xe.finallyLoc)return Ae(xe.finallyLoc)}}}},abrupt:function(X,ee){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var Le=this.tryEntries[Ae];if(Le.tryLoc<=this.prev&&b.call(Le,"finallyLoc")&&this.prev<Le.finallyLoc){var xe=Le;break}}xe&&(X==="break"||X==="continue")&&xe.tryLoc<=ee&&ee<=xe.finallyLoc&&(xe=null);var sr=xe?xe.completion:{};return sr.type=X,sr.arg=ee,xe?(this.method="next",this.next=xe.finallyLoc,Ie):this.complete(sr)},complete:function(X,ee){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&ee&&(this.next=ee),Ie},finish:function(X){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var Ae=this.tryEntries[ee];if(Ae.finallyLoc===X)return this.complete(Ae.completion,Ae.afterLoc),pa(Ae),Ie}},catch:function(X){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var Ae=this.tryEntries[ee];if(Ae.tryLoc===X){var Le=Ae.completion;if(Le.type==="throw"){var xe=Le.arg;pa(Ae)}return xe}}throw new Error("illegal catch attempt")},delegateYield:function(X,ee,Ae){return this.delegate={iterator:ba(X),resultName:ee,nextLoc:Ae},this.method==="next"&&(this.arg=e),Ie}},t}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);t&&(b=b.filter(function(E){return Object.getOwnPropertyDescriptor(e,E).enumerable})),n.push.apply(n,b)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(b){C(e,b,n[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(b){Object.defineProperty(e,b,Object.getOwnPropertyDescriptor(n,b))})}return e}function C(e,t,n){return t=Y(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){var t=H(e,"string");return ie(t)=="symbol"?t:String(t)}function H(e,t){if(ie(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var b=n.call(e,t||"default");if(ie(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R(e,t,n,b,E,A,F){try{var w=e[A](F),M=w.value}catch(D){n(D);return}w.done?t(M):Promise.resolve(M).then(b,E)}function W(e){return function(){var t=this,n=arguments;return new Promise(function(b,E){var A=e.apply(t,n);function F(M){R(A,b,E,F,w,"next",M)}function w(M){R(A,b,E,F,w,"throw",M)}F(void 0)})}}function le(e,t){return Re(e)||Ge(e,t)||me(e,t)||Se()}function Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var b,E,A,F,w=[],M=!0,D=!1;try{if(A=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;M=!1}else for(;!(M=(b=A.call(n)).done)&&(w.push(b.value),w.length!==t);M=!0);}catch(j){D=!0,E=j}finally{try{if(!M&&n.return!=null&&(F=n.return(),Object(F)!==F))return}finally{if(D)throw E}}return w}}function Re(e){if(Array.isArray(e))return e}function or(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=me(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var b=0,E=function(){};return{s:E,n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(D){throw D},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,F=!1,w;return{s:function(){n=n.call(e)},n:function(){var D=n.next();return A=D.done,D},e:function(D){F=!0,w=D},f:function(){try{!A&&n.return!=null&&n.return()}finally{if(F)throw w}}}}function ur(e){return I(e)||x(e)||me(e)||er()}function er(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(e,t){if(e){if(typeof e=="string")return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}}function x(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I(e){if(Array.isArray(e))return N(e)}function N(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,b=new Array(t);n<t;n++)b[n]=e[n];return b}var _=Z.error,de=Z.warn;function _e(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var Ce=33984,We=35048,Ue=34962,Je=34963,Ke=35345,fr=35982,Tr=36386,cr=35713,ar=35714,vr=35632,Sr=35633,fe=35981,r=35718,u=35721,f=35971,T=35382,v=35396,i=35398,a=35392,m=35395,h=5126,S=35664,P=35665,L=35666,O=5124,K=35667,$=35668,te=35669,oe=35670,ae=35671,se=35672,ve=35673,ne=35674,pe=35675,Oe=35676,qe=35678,ke=35680,Ve=35679,Pe=35682,De=35685,Ze=35686,Xe=35687,Qe=35688,He=35689,$e=35690,Be=36289,Ne=36292,yr=36293,lr=5125,Ar=36294,_r=36295,Lr=36296,Ur=36298,Gr=36299,et=36300,gt=36303,_t=36306,Pt=36307,hr=36308,ta=36311,wt=3553,xt=34067,zt=32879,Rt=35866,we={};function _n(e,t){return we[t].bindPoint}function na(e,t){return function(n){e.uniform1f(t,n)}}function aa(e,t){return function(n){e.uniform1fv(t,n)}}function ia(e,t){return function(n){e.uniform2fv(t,n)}}function oa(e,t){return function(n){e.uniform3fv(t,n)}}function ua(e,t){return function(n){e.uniform4fv(t,n)}}function Pn(e,t){return function(n){e.uniform1i(t,n)}}function wn(e,t){return function(n){e.uniform1iv(t,n)}}function xn(e,t){return function(n){e.uniform2iv(t,n)}}function Rn(e,t){return function(n){e.uniform3iv(t,n)}}function Fn(e,t){return function(n){e.uniform4iv(t,n)}}function kr(e,t){return function(n){e.uniform1ui(t,n)}}function tr(e,t){return function(n){e.uniform1uiv(t,n)}}function Ft(e,t){return function(n){e.uniform2uiv(t,n)}}function rt(e,t){return function(n){e.uniform3uiv(t,n)}}function Ct(e,t){return function(n){e.uniform4uiv(t,n)}}function Wr(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function pr(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Cn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Dn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Bn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Fr(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function ht(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Qt(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function fa(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function br(e,t,n,b){var E=_n(e,t);return k.isWebGL2(e)?function(A){var F,w;!A||Z.isTexture(e,A)?(F=A,w=null):(F=A.texture,w=A.sampler),e.uniform1i(b,n),e.activeTexture(Ce+n),e.bindTexture(E,F),e.bindSampler(n,w)}:function(A){e.uniform1i(b,n),e.activeTexture(Ce+n),e.bindTexture(E,A)}}function Er(e,t,n,b,E){for(var A=_n(e,t),F=new Int32Array(E),w=0;w<E;++w)F[w]=n+w;return k.isWebGL2(e)?function(M){e.uniform1iv(b,F),M.forEach(function(D,j){e.activeTexture(Ce+F[j]);var ue,ye;!D||Z.isTexture(e,D)?(ue=D,ye=null):(ue=D.texture,ye=D.sampler),e.bindSampler(n,ye),e.bindTexture(A,ue)})}:function(M){e.uniform1iv(b,F),M.forEach(function(D,j){e.activeTexture(Ce+F[j]),e.bindTexture(A,D)})}}we[h]={Type:Float32Array,size:4,setter:na,arraySetter:aa},we[S]={Type:Float32Array,size:8,setter:ia,cols:2},we[P]={Type:Float32Array,size:12,setter:oa,cols:3},we[L]={Type:Float32Array,size:16,setter:ua,cols:4},we[O]={Type:Int32Array,size:4,setter:Pn,arraySetter:wn},we[K]={Type:Int32Array,size:8,setter:xn,cols:2},we[$]={Type:Int32Array,size:12,setter:Rn,cols:3},we[te]={Type:Int32Array,size:16,setter:Fn,cols:4},we[lr]={Type:Uint32Array,size:4,setter:kr,arraySetter:tr},we[Ar]={Type:Uint32Array,size:8,setter:Ft,cols:2},we[_r]={Type:Uint32Array,size:12,setter:rt,cols:3},we[Lr]={Type:Uint32Array,size:16,setter:Ct,cols:4},we[oe]={Type:Uint32Array,size:4,setter:Pn,arraySetter:wn},we[ae]={Type:Uint32Array,size:8,setter:xn,cols:2},we[se]={Type:Uint32Array,size:12,setter:Rn,cols:3},we[ve]={Type:Uint32Array,size:16,setter:Fn,cols:4},we[ne]={Type:Float32Array,size:32,setter:Wr,rows:2,cols:2},we[pe]={Type:Float32Array,size:48,setter:pr,rows:3,cols:3},we[Oe]={Type:Float32Array,size:64,setter:Cn,rows:4,cols:4},we[De]={Type:Float32Array,size:32,setter:Dn,rows:2,cols:3},we[Ze]={Type:Float32Array,size:32,setter:Fr,rows:2,cols:4},we[Xe]={Type:Float32Array,size:48,setter:Bn,rows:3,cols:2},we[Qe]={Type:Float32Array,size:48,setter:Qt,rows:3,cols:4},we[He]={Type:Float32Array,size:64,setter:ht,rows:4,cols:2},we[$e]={Type:Float32Array,size:64,setter:fa,rows:4,cols:3},we[qe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:wt},we[ke]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:xt},we[Ve]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:zt},we[Pe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:wt},we[Be]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Rt},we[Ne]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Rt},we[yr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:xt},we[Ur]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:wt},we[Gr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:zt},we[et]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:xt},we[gt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Rt},we[_t]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:wt},we[Pt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:zt},we[hr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:xt},we[ta]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Rt};function Dt(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Ue,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||h,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function xr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Ue,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||O,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Dr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Ue,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||lr,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Xr(e,t,n){var b=n.size,E=n.count;return function(A){e.bindBuffer(Ue,A.buffer);for(var F=A.size||A.numComponents||b,w=F/E,M=A.type||h,D=we[M],j=D.size*F,ue=A.normalize||!1,ye=A.offset||0,be=j/E,Fe=0;Fe<E;++Fe)e.enableVertexAttribArray(t+Fe),e.vertexAttribPointer(t+Fe,w,M,ue,j,ye+be*Fe),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+Fe,A.divisor||0)}}var rr={};rr[h]={size:4,setter:Dt},rr[S]={size:8,setter:Dt},rr[P]={size:12,setter:Dt},rr[L]={size:16,setter:Dt},rr[O]={size:4,setter:xr},rr[K]={size:8,setter:xr},rr[$]={size:12,setter:xr},rr[te]={size:16,setter:xr},rr[lr]={size:4,setter:Dr},rr[Ar]={size:8,setter:Dr},rr[_r]={size:12,setter:Dr},rr[Lr]={size:16,setter:Dr},rr[oe]={size:4,setter:xr},rr[ae]={size:8,setter:xr},rr[se]={size:12,setter:xr},rr[ve]={size:16,setter:xr},rr[ne]={size:4,setter:Xr,count:2},rr[pe]={size:9,setter:Xr,count:3},rr[Oe]={size:16,setter:Xr,count:4};var Hr=/ERROR:\s*\d+:(\d+)/gi;function jr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=ur(t.matchAll(Hr)),E=new Map(b.map(function(A,F){var w=parseInt(A[1]),M=b[F+1],D=M?M.index:t.length,j=t.substring(A.index,D);return[w-1,j]}));return e.split(`
`).map(function(A,F){var w=E.get(F);return"".concat(F+1+n,": ").concat(A).concat(w?`

^^^ `.concat(w):"")}).join(`
`)}var Zt=/^[ \t]*\n/;function dr(e){var t=0;return Zt.test(e)&&(t=1,e=e.replace(Zt,"")),{lineOffset:t,shaderSource:e}}function Bt(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function It(e,t,n,b){b=b||_;var E=e.getShaderParameter(n,cr);if(!E){var A=e.getShaderInfoLog(n),F=dr(e.getShaderSource(n)),w=F.lineOffset,M=F.shaderSource,D="".concat(jr(M,A,w),`
Error compiling `).concat(k.glEnumToString(e,t),": ").concat(A);return b(D),D}return""}function Kr(e,t,n){var b,E,A;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){var F=e;n=F.errorCallback,e=F.attribLocations,b=F.transformFeedbackVaryings,E=F.transformFeedbackMode,A=F.callback}var w=n||_,M=[],D={errorCallback:function(ye){M.push(ye);for(var be=arguments.length,Fe=new Array(be>1?be-1:0),Me=1;Me<be;Me++)Fe[Me-1]=arguments[Me];w.apply(void 0,[ye].concat(Fe))},transformFeedbackVaryings:b,transformFeedbackMode:E,callback:A,errors:M};{var j={};Array.isArray(e)?e.forEach(function(ue,ye){j[ue]=t?t[ye]:ye}):j=e||{},D.attribLocations=j}return D}var qr=["VERTEX_SHADER","FRAGMENT_SHADER"];function In(e,t){if(t.indexOf("frag")>=0)return vr;if(t.indexOf("vert")>=0)return Sr}function Ln(e,t,n){var b=e.getAttachedShaders(t),E=or(b),A;try{for(E.s();!(A=E.n()).done;){var F=A.value;n.has(F)&&e.deleteShader(F)}}catch(w){E.e(w)}finally{E.f()}e.deleteProgram(t)}var On=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(n){return setTimeout(n,t)})};function Mn(e,t,n){for(var b=e.createProgram(),E=Kr(n),A=E.attribLocations,F=E.transformFeedbackVaryings,w=E.transformFeedbackMode,M=0;M<t.length;++M){var D=t[M];if(typeof D=="string"){var j=_e(D),ue=j?j.text:D,ye=e[qr[M]];j&&j.type&&(ye=In(e,j.type)||ye),D=e.createShader(ye),e.shaderSource(D,dr(ue).shaderSource),e.compileShader(D),e.attachShader(b,D)}}Object.entries(A).forEach(function(Fe){var Me=le(Fe,2),Ie=Me[0],je=Me[1];return e.bindAttribLocation(b,je,Ie)});{var be=F;be&&(be.attribs&&(be=be.attribs),Array.isArray(be)||(be=Object.keys(be)),e.transformFeedbackVaryings(b,be,w||fe))}return e.linkProgram(b),b}function mt(e,t,n,b,E){var A=Kr(n,b,E),F=new Set(t),w=Mn(e,t,A);function M(D,j){var ue=en(D,j,A.errorCallback);return ue&&Ln(D,j,F),ue}if(A.callback){Jt(e,w).then(function(){var D=M(e,w);A.callback(D,D?void 0:w)});return}return M(e,w)?void 0:w}function Yr(e){return function(t,n){for(var b=arguments.length,E=new Array(b>2?b-2:0),A=2;A<b;A++)E[A-2]=arguments[A];return new Promise(function(F,w){var M=Kr.apply(void 0,E);M.callback=function(D,j){D?w(D):F(j)},e(t,n,M)})}}o.createProgramAsync=Yr(mt),o.createProgramInfoAsync=Yr(s);function Jt(e,t){return $t.apply(this,arguments)}function $t(){return $t=W(re().mark(function e(t,n){var b,E,A;return re().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:b=t.getExtension("KHR_parallel_shader_compile"),E=b?function(M,D){return M.getProgramParameter(D,b.COMPLETION_STATUS_KHR)}:function(){return!0},A=0;case 3:return w.next=5,On(A);case 5:A=16.666666666666668;case 6:if(!E(t,n)){w.next=3;break}case 7:case"end":return w.stop()}},e)})),$t.apply(this,arguments)}function tt(e,t){return Lt.apply(this,arguments)}function Lt(){return Lt=W(re().mark(function e(t,n){var b,E,A;return re().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:b=0,E=Object.values(n);case 1:if(!(b<E.length)){w.next=8;break}return A=E[b],w.next=5,Jt(t,A);case 5:b++,w.next=1;break;case 8:case"end":return w.stop()}},e)})),Lt.apply(this,arguments)}function en(e,t,n){n=n||_;var b=e.getProgramParameter(t,ar);if(!b){var E=e.getProgramInfoLog(t);n("Error in program linking: ".concat(E));var A=e.getAttachedShaders(t),F=A.map(function(w){return It(e,e.getShaderParameter(w,e.SHADER_TYPE),w,n)});return"".concat(E,`
`).concat(F.filter(function(w){return w}).join(`
`))}}function rn(e,t,n,b,E){var A=Kr(n,b,E),F=[],w=or(t),M;try{for(w.s();!(M=w.n()).done;){var D=M.value,j=_e(D);if(!j)return Bt(A,"unknown script element: ".concat(D));F.push(j.text)}}catch(ue){w.e(ue)}finally{w.f()}return mt(e,F,A)}function tn(e,t,n,b,E){return mt(e,t,n,b,E)}function nn(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var ca=/(\.|\[|]|\w+)/g,la=function(t){return t>="0"&&t<="9"};function yt(e,t,n,b){for(var E=e.split(ca).filter(function(Fe){return Fe!==""}),A=0,F="";;){var w=E[A++];F+=w;var M=la(w[0]),D=M?parseInt(w):w;M&&(F+=E[A++]);var j=A===E.length;if(j){n[D]=t;break}else{var ue=E[A++],ye=ue==="[",be=n[D]||(ye?[]:{});n[D]=be,n=be,b[F]=b[F]||function(Fe){return function(Me){Gn(Fe,Me)}}(be),F+=ue}}}function nt(e,t){var n=0;function b(ye,be,Fe){var Me=be.name.endsWith("[0]"),Ie=be.type,je=we[Ie];if(!je)throw new Error("unknown type: 0x".concat(Ie.toString(16)));var Ye;if(je.bindPoint){var ir=n;n+=be.size,Me?Ye=je.arraySetter(e,Ie,ir,Fe,be.size):Ye=je.setter(e,Ie,ir,Fe,be.size)}else je.arraySetter&&Me?Ye=je.arraySetter(e,Fe):Ye=je.setter(e,Fe);return Ye.location=Fe,Ye}for(var E={},A={},F=e.getProgramParameter(t,r),w=0;w<F;++w){var M=e.getActiveUniform(t,w);if(!nn(M)){var D=M.name;D.endsWith("[0]")&&(D=D.substr(0,D.length-3));var j=e.getUniformLocation(t,M.name);if(j){var ue=b(t,M,j);E[D]=ue,yt(D,ue,A,E)}}}return E}function Ot(e,t){for(var n={},b=e.getProgramParameter(t,f),E=0;E<b;++E){var A=e.getTransformFeedbackVarying(t,E);n[A.name]={index:E,type:A.type,size:A.size}}return n}function Mt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(var b in n){var E=t[b];if(E){var A=n[b];A.offset?e.bindBufferRange(fr,E.index,A.buffer,A.offset,A.size):e.bindBufferBase(fr,E.index,A.buffer)}}}function an(e,t,n){var b=e.createTransformFeedback();return e.bindTransformFeedback(Tr,b),e.useProgram(t.program),Mt(e,t,n),e.bindTransformFeedback(Tr,null),b}function zr(e,t){for(var n=e.getProgramParameter(t,r),b=[],E=[],A=0;A<n;++A){E.push(A),b.push({});var F=e.getActiveUniform(t,A);b[A].name=F.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ye){var be=ye[0],Fe=ye[1];e.getActiveUniforms(t,E,e[be]).forEach(function(Me,Ie){b[Ie][Fe]=Me})});for(var w={},M=e.getProgramParameter(t,T),D=0;D<M;++D){var j=e.getActiveUniformBlockName(t,D),ue={index:e.getUniformBlockIndex(t,j),usedByVertexShader:e.getActiveUniformBlockParameter(t,D,v),usedByFragmentShader:e.getActiveUniformBlockParameter(t,D,i),size:e.getActiveUniformBlockParameter(t,D,a),uniformIndices:e.getActiveUniformBlockParameter(t,D,m)};ue.used=ue.usedByVertexShader||ue.usedByFragmentShader,w[j]=ue}return{blockSpecs:w,uniformData:b}}var Nn=/\[\d+\]\.$/,sa=function(t,n){return((t+(n-1))/n|0)*n};function va(e,t,n,b){if(t||n){b=b||1;var E=e.length,A=E/4;return function(F){for(var w=0,M=0,D=0;D<A;++D){for(var j=0;j<b;++j)e[w++]=F[M++];w+=4-b}}}else return function(F){F.length?e.set(F):e[0]=F}}function on(e,t,n,b){var E=n.blockSpecs,A=n.uniformData,F=E[b];if(!F)return de("no uniform block object named:",b),{name:b,uniforms:{}};var w=new ArrayBuffer(F.size),M=e.createBuffer(),D=F.index;e.bindBuffer(Ke,M),e.uniformBlockBinding(t,F.index,D);var j=b+".";Nn.test(j)&&(j=j.replace(Nn,"."));var ue={},ye={},be={};return F.uniformIndices.forEach(function(Fe){var Me=A[Fe],Ie=Me.name;Ie.startsWith(j)&&(Ie=Ie.substr(j.length));var je=Ie.endsWith("[0]");je&&(Ie=Ie.substr(0,Ie.length-3));var Ye=we[Me.type],ir=Ye.Type,mr=je?sa(Ye.size,16)*Me.size:Ye.size*Me.size,Pr=new ir(w,Me.offset,mr/ir.BYTES_PER_ELEMENT);ue[Ie]=Pr;var Or=va(Pr,je,Ye.rows,Ye.cols);ye[Ie]=Or,yt(Ie,Or,be,ye)}),{name:b,array:w,asFloat:new Float32Array(w),buffer:M,uniforms:ue,setters:ye}}function un(e,t,n){return on(e,t.program,t.uniformBlockSpec,n)}function Nt(e,t,n){var b=t.uniformBlockSpec||t,E=b.blockSpecs[n.name];if(E){var A=E.index;return e.bindBufferRange(Ke,A,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Un(e,t,n){Nt(e,t,n)&&e.bufferData(Ke,n.array,We)}function ha(e,t){var n=e.setters;for(var b in t){var E=n[b];if(E){var A=t[b];E(A)}}}function Gn(e,t){for(var n in t){var b=e[n];typeof b=="function"?b(t[n]):Gn(e[n],t[n])}}function Ut(e){for(var t=e.uniformSetters||e,n=arguments.length<=1?0:arguments.length-1,b=0;b<n;++b){var E=b+1<1||arguments.length<=b+1?void 0:arguments[b+1];if(Array.isArray(E))for(var A=E.length,F=0;F<A;++F)Ut(t,E[F]);else for(var w in E){var M=t[w];M&&M(E[w])}}}o.setUniformsAndBindTextures=Ut;function fn(e,t){for(var n={},b=e.getProgramParameter(t,u),E=0;E<b;++E){var A=e.getActiveAttrib(t,E);if(!nn(A)){var F=e.getAttribLocation(t,A.name),w=rr[A.type],M=w.setter(e,F,w);M.location=F,n[A.name]=M}}return n}function cn(e,t){for(var n in t){var b=e[n];b&&b(t[n])}}function ma(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(cn(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Je,n.indices))}function Gt(e,t){var n=nt(e,t),b=fn(e,t),E={program:t,uniformSetters:n,attribSetters:b};return k.isWebGL2(e)&&(E.uniformBlockSpec=zr(e,t),E.transformFeedbackInfo=Ot(e,t)),E}var ya=/\s|{|}|;/;function s(e,t,n,b,E){var A=Kr(n,b,E),F=[];if(t=t.map(function(D){if(!ya.test(D)){var j=_e(D);if(j)D=j.text;else{var ue="no element with id: ".concat(D);A.errorCallback(ue),F.push(ue)}}return D}),F.length)return Bt(A,"");var w=A.callback;w&&(A.callback=function(D,j){w(D,D?void 0:Gt(e,j))});var M=tn(e,t,A);return M?Gt(e,M):null}function y(e,t,n,b,E){for(var A=0,F=Object.entries(t);A<F.length;A++){var w=le(F[A],2),M=w[0],D=w[1],j=Te({},E),ue=n[M];Array.isArray(ue)||Object.assign(j,ue);var ye=en(e,D,j.errorCallback);if(ye){for(var be=0,Fe=Object.values(t);be<Fe.length;be++){var Me=Fe[be],Ie=e.getAttachedShaders(Me);e.deleteProgram(Me);var je=or(Ie),Ye;try{for(je.s();!(Ye=je.n()).done;){var ir=Ye.value;b.has(ir)||e.deleteShader(ir)}}catch(mr){je.e(mr)}finally{je.f()}}return ye}}}function d(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=new Set,E=Object.fromEntries(Object.entries(t).map(function(F){var w=le(F,2),M=w[0],D=w[1],j=Te({},n),ue=Array.isArray(D)?D:D.shaders;return Array.isArray(D)||Object.assign(j,D),ue.forEach(b.add,b),[M,Mn(e,ue,j)]}));if(n.callback){tt(e,E).then(function(){var F=y(e,E,t,b,n);n.callback(F,F?void 0:E)});return}var A=y(e,E,t,b,n);return A?void 0:E}function g(e,t,n){n=Kr(n);function b(F,w){return Object.fromEntries(Object.entries(w).map(function(M){var D=le(M,2),j=D[0],ue=D[1];return[j,Gt(F,ue)]}))}var E=n.callback;E&&(n.callback=function(F,w){E(F,F?void 0:b(e,w))});var A=d(e,t,n);if(!(E||!A))return b(e,A)}o.createProgramsAsync=Yr(d),o.createProgramInfosAsync=Yr(g)},"./src/textures.js":(Q,o,q)=>{function ie(s){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},ie(s)}o.__esModule=!0,o.canFilter=On,o.canGenerateMipmap=Ln,o.createSampler=nn,o.createSamplers=ca,o.createTexture=cn,o.createTextures=ya,o.getBytesPerElementForInternalFormat=Kr,o.getFormatAndTypeForInternalFormat=qr,o.getNumComponentsForFormat=Mn,o.loadTextureFromUrl=Un,o.resizeTexture=ma,o.setDefaultTextureColor=Jt,o.setEmptyTexture=fn,o.setSamplerParameters=tn,o.setTextureDefaults_=$t,o.setTextureFilteringForSize=yt,o.setTextureFromArray=Ut,o.setTextureFromElement=an,o.setTextureParameters=rn;var k=re(q("./src/utils.js")),Z=re(q("./src/typedarrays.js")),z=re(q("./src/helper.js"));function V(s){if(typeof WeakMap!="function")return null;var y=new WeakMap,d=new WeakMap;return(V=function(e){return e?d:y})(s)}function re(s,y){if(!y&&s&&s.__esModule)return s;if(s===null||ie(s)!="object"&&typeof s!="function")return{default:s};var d=V(y);if(d&&d.has(s))return d.get(s);var g={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in s)if(t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)){var n=e?Object.getOwnPropertyDescriptor(s,t):null;n&&(n.get||n.set)?Object.defineProperty(g,t,n):g[t]=s[t]}return g.default=s,d&&d.set(s,g),g}var J={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Te=Z.isArrayBuffer,C=function(){var s;return function(){return s=s||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),s}}(),Y=6406,H=6407,R=6408,W=6409,le=6410,Se=6402,Ge=34041,Re=33071,or=9728,ur=9729,er=3553,me=34067,x=32879,I=35866,N=34069,_=34070,de=34071,_e=34072,Ce=34073,We=34074,Ue=10241,Je=10240,Ke=10242,fr=10243,Tr=32882,cr=33082,ar=33083,vr=33084,Sr=33085,fe=34892,r=34893,u=3317,f=3314,T=32878,v=3316,i=3315,a=32877,m=37443,h=37441,S=37440,P=33321,L=36756,O=33325,K=33326,$=33330,te=33329,oe=33338,ae=33337,se=33340,ve=33339,ne=33323,pe=36757,Oe=33327,qe=33328,ke=33336,Ve=33335,Pe=33332,De=33331,Ze=33334,Xe=33333,Qe=32849,He=35905,$e=36194,Be=36758,Ne=35898,yr=35901,lr=34843,Ar=34837,_r=36221,Lr=36239,Ur=36215,Gr=36233,et=36209,gt=36227,_t=32856,Pt=35907,hr=36759,ta=32855,wt=32854,xt=32857,zt=34842,Rt=34836,we=36220,_n=36238,na=36975,aa=36214,ia=36232,oa=36226,ua=36208,Pn=33189,wn=33190,xn=36012,Rn=36013,Fn=35056,kr=5120,tr=5121,Ft=5122,rt=5123,Ct=5124,Wr=5125,pr=5126,Cn=32819,Dn=32820,Bn=33635,Fr=5131,ht=36193,Qt=33640,fa=35899,br=35902,Er=36269,Dt=34042,xr=33319,Dr=33320,Xr=6403,rr=36244,Hr=36248,jr=36249,Zt={};{var dr=Zt;dr[Y]={numColorComponents:1},dr[W]={numColorComponents:1},dr[le]={numColorComponents:2},dr[H]={numColorComponents:3},dr[R]={numColorComponents:4},dr[Xr]={numColorComponents:1},dr[rr]={numColorComponents:1},dr[xr]={numColorComponents:2},dr[Dr]={numColorComponents:2},dr[H]={numColorComponents:3},dr[Hr]={numColorComponents:3},dr[R]={numColorComponents:4},dr[jr]={numColorComponents:4},dr[Se]={numColorComponents:1},dr[Ge]={numColorComponents:2}}var Bt;function It(s){if(!Bt){var y={};y[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tr,Fr,ht,pr]},y[W]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tr,Fr,ht,pr]},y[le]={textureFormat:le,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[tr,Fr,ht,pr]},y[H]={textureFormat:H,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[tr,Fr,ht,pr,Bn]},y[R]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[tr,Fr,ht,pr,Cn,Dn]},y[Se]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Wr,rt]},y[P]={textureFormat:Xr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[tr]},y[L]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[kr]},y[O]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[pr,Fr]},y[K]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[pr]},y[$]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[tr]},y[te]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[kr]},y[Pe]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rt]},y[De]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ft]},y[Ze]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Wr]},y[Xe]={textureFormat:rr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ct]},y[ne]={textureFormat:xr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[tr]},y[pe]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[kr]},y[Oe]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[pr,Fr]},y[qe]={textureFormat:xr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[pr]},y[ke]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[tr]},y[Ve]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[kr]},y[oe]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rt]},y[ae]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ft]},y[se]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Wr]},y[ve]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ct]},y[Qe]={textureFormat:H,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[tr]},y[He]={textureFormat:H,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[tr]},y[$e]={textureFormat:H,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[tr,Bn]},y[Be]={textureFormat:H,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[kr]},y[Ne]={textureFormat:H,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[pr,Fr,fa]},y[yr]={textureFormat:H,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[pr,Fr,br]},y[lr]={textureFormat:H,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[pr,Fr]},y[Ar]={textureFormat:H,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[pr]},y[_r]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[tr]},y[Lr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[kr]},y[Ur]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[rt]},y[Gr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ft]},y[et]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Wr]},y[gt]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ct]},y[_t]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tr]},y[Pt]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tr]},y[hr]={textureFormat:R,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[kr]},y[ta]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[tr,Dn,Qt]},y[wt]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[tr,Cn]},y[xt]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Qt]},y[zt]={textureFormat:R,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[pr,Fr]},y[Rt]={textureFormat:R,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[pr]},y[we]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tr]},y[_n]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kr]},y[na]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qt]},y[aa]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[rt]},y[ia]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ft]},y[oa]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ct]},y[ua]={textureFormat:jr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Wr]},y[Pn]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[rt,Wr]},y[wn]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Wr]},y[xn]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pr]},y[Fn]={textureFormat:Ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Dt]},y[Rn]={textureFormat:Ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(y).forEach(function(d){var g=y[d];g.bytesPerElementMap={},g.bytesPerElement.forEach(function(e,t){var n=g.type[t];g.bytesPerElementMap[n]=e})}),Bt=y}return Bt[s]}function Kr(s,y){var d=It(s);if(!d)throw"unknown internal format";var g=d.bytesPerElementMap[y];if(g===void 0)throw"unknown internal format";return g}function qr(s){var y=It(s);if(!y)throw"unknown internal format";return{format:y.textureFormat,type:y.type[0]}}function In(s){return(s&s-1)===0}function Ln(s,y,d,g){if(!k.isWebGL2(s))return In(y)&&In(d);var e=It(g);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function On(s){var y=It(s);if(!y)throw"unknown internal format";return y.textureFilterable}function Mn(s){var y=Zt[s];if(!y)throw"unknown format: "+s;return y.numColorComponents}function mt(s,y,d){return Te(y)?Z.getGLTypeForTypedArray(y):d||tr}function Yr(s,y,d,g,e){if(e%1!==0)throw"can't guess dimensions";if(!d&&!g){var t=Math.sqrt(e/(y===me?6:1));t%1===0?(d=t,g=t):(d=e,g=1)}else if(g){if(!d&&(d=e/g,d%1))throw"can't guess dimensions"}else if(g=e/d,g%1)throw"can't guess dimensions";return{width:d,height:g}}function Jt(s){J.textureColor=new Uint8Array([s[0]*255,s[1]*255,s[2]*255,s[3]*255])}function $t(s){z.copyExistingProperties(s,J),s.textureColor&&Jt(s.textureColor)}function tt(s,y){y.colorspaceConversion!==void 0&&s.pixelStorei(m,y.colorspaceConversion),y.premultiplyAlpha!==void 0&&s.pixelStorei(h,y.premultiplyAlpha),y.flipY!==void 0&&s.pixelStorei(S,y.flipY)}function Lt(s){s.pixelStorei(u,4),k.isWebGL2(s)&&(s.pixelStorei(f,0),s.pixelStorei(T,0),s.pixelStorei(v,0),s.pixelStorei(i,0),s.pixelStorei(a,0))}function en(s,y,d,g){g.minMag&&(d.call(s,y,Ue,g.minMag),d.call(s,y,Je,g.minMag)),g.min&&d.call(s,y,Ue,g.min),g.mag&&d.call(s,y,Je,g.mag),g.wrap&&(d.call(s,y,Ke,g.wrap),d.call(s,y,fr,g.wrap),(y===x||z.isSampler(s,y))&&d.call(s,y,Tr,g.wrap)),g.wrapR&&d.call(s,y,Tr,g.wrapR),g.wrapS&&d.call(s,y,Ke,g.wrapS),g.wrapT&&d.call(s,y,fr,g.wrapT),g.minLod!==void 0&&d.call(s,y,cr,g.minLod),g.maxLod!==void 0&&d.call(s,y,ar,g.maxLod),g.baseLevel!==void 0&&d.call(s,y,vr,g.baseLevel),g.maxLevel!==void 0&&d.call(s,y,Sr,g.maxLevel),g.compareFunc!==void 0&&d.call(s,y,r,g.compareFunc),g.compareMode!==void 0&&d.call(s,y,fe,g.compareMode)}function rn(s,y,d){var g=d.target||er;s.bindTexture(g,y),en(s,g,s.texParameteri,d)}function tn(s,y,d){en(s,y,s.samplerParameteri,d)}function nn(s,y){var d=s.createSampler();return tn(s,d,y),d}function ca(s,y){var d={};return Object.keys(y).forEach(function(g){d[g]=nn(s,y[g])}),d}function la(s){return s=s||J.textureColor,Te(s)?s:new Uint8Array([s[0]*255,s[1]*255,s[2]*255,s[3]*255])}function yt(s,y,d,g,e,t){d=d||J.textureOptions,t=t||R;var n=d.target||er;if(g=g||d.width,e=e||d.height,s.bindTexture(n,y),Ln(s,g,e,t))s.generateMipmap(n);else{var b=On(t)?ur:or;s.texParameteri(n,Ue,b),s.texParameteri(n,Je,b),s.texParameteri(n,Ke,Re),s.texParameteri(n,fr,Re)}}function nt(s){return s.auto===!0||s.auto===void 0&&s.level===void 0}function Ot(s,y){return y=y||{},y.cubeFaceOrder||[N,_,de,_e,Ce,We]}function Mt(s,y){var d=Ot(s,y),g=d.map(function(e,t){return{face:e,ndx:t}});return g.sort(function(e,t){return e.face-t.face}),g}function an(s,y,d,g){g=g||J.textureOptions;var e=g.target||er,t=g.level||0,n=d.width,b=d.height,E=g.internalFormat||g.format||R,A=qr(E),F=g.format||A.format,w=g.type||A.type;if(tt(s,g),s.bindTexture(e,y),e===me){var M=d.width,D=d.height,j,ue;if(M/6===D)j=D,ue=[0,0,1,0,2,0,3,0,4,0,5,0];else if(D/6===M)j=M,ue=[0,0,0,1,0,2,0,3,0,4,0,5];else if(M/3===D/2)j=M/3,ue=[0,0,1,0,2,0,0,1,1,1,2,1];else if(M/2===D/3)j=M/2,ue=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(d.src?d.src:d.nodeName);var ye=C();ye?(ye.canvas.width=j,ye.canvas.height=j,n=j,b=j,Mt(s,g).forEach(function(Pr){var Or=ue[Pr.ndx*2+0]*j,Vr=ue[Pr.ndx*2+1]*j;ye.drawImage(d,Or,Vr,j,j,0,0,j,j),s.texImage2D(Pr.face,t,E,F,w,ye.canvas)}),ye.canvas.width=1,ye.canvas.height=1):typeof createImageBitmap<"u"&&(n=j,b=j,Mt(s,g).forEach(function(Pr){var Or=ue[Pr.ndx*2+0]*j,Vr=ue[Pr.ndx*2+1]*j;s.texImage2D(Pr.face,t,E,j,j,0,F,w,null),createImageBitmap(d,Or,Vr,j,j,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(kn){tt(s,g),s.bindTexture(e,y),s.texImage2D(Pr.face,t,E,F,w,kn),nt(g)&&yt(s,y,g,n,b,E)})}))}else if(e===x||e===I){var be=Math.min(d.width,d.height),Fe=Math.max(d.width,d.height),Me=Fe/be;if(Me%1!==0)throw"can not compute 3D dimensions of element";var Ie=d.width===Fe?1:0,je=d.height===Fe?1:0;s.pixelStorei(u,1),s.pixelStorei(f,d.width),s.pixelStorei(T,0),s.pixelStorei(a,0),s.texImage3D(e,t,E,be,be,be,0,F,w,null);for(var Ye=0;Ye<Me;++Ye){var ir=Ye*be*Ie,mr=Ye*be*je;s.pixelStorei(v,ir),s.pixelStorei(i,mr),s.texSubImage3D(e,t,0,0,Ye,be,be,1,F,w,d)}Lt(s)}else s.texImage2D(e,t,E,F,w,d);nt(g)&&yt(s,y,g,n,b,E),rn(s,y,g)}function zr(){}function Nn(s){if(typeof document<"u"){var y=document.createElement("a");return y.href=s,y.hostname===location.hostname&&y.port===location.port&&y.protocol===location.protocol}else{var d=new URL(location.href).origin,g=new URL(s,location.href).origin;return g===d}}function sa(s,y){return y===void 0&&!Nn(s)?"anonymous":y}function va(s,y,d){d=d||zr;var g;if(y=y!==void 0?y:J.crossOrigin,y=sa(s,y),typeof Image<"u"){g=new Image,y!==void 0&&(g.crossOrigin=y);var e=function(){g.removeEventListener("error",t),g.removeEventListener("load",n),g=null},t=function(){var M="couldn't load image: "+s;z.error(M),d(M,g),e()},n=function(){d(null,g),e()};return g.addEventListener("error",t),g.addEventListener("load",n),g.src=s,g}else if(typeof ImageBitmap<"u"){var b,E,A=function(){d(b,E)},F={};y&&(F.mode="cors"),fetch(s,F).then(function(w){if(!w.ok)throw w;return w.blob()}).then(function(w){return createImageBitmap(w,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(w){E=w,setTimeout(A)}).catch(function(w){b=w,setTimeout(A)}),g=null}return g}function on(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap||typeof ImageData<"u"&&s instanceof ImageData||typeof HTMLElement<"u"&&s instanceof HTMLElement}function un(s,y,d){return on(s)?(setTimeout(function(){d(null,s)}),s):va(s,y,d)}function Nt(s,y,d){d=d||J.textureOptions;var g=d.target||er;if(s.bindTexture(g,y),d.color!==!1){var e=la(d.color);if(g===me)for(var t=0;t<6;++t)s.texImage2D(N+t,0,R,1,1,0,R,tr,e);else g===x||g===I?s.texImage3D(g,0,R,1,1,1,0,R,tr,e):s.texImage2D(g,0,R,1,1,0,R,tr,e)}}function Un(s,y,d,g){g=g||zr,d=d||J.textureOptions,Nt(s,y,d),d=Object.assign({},d);var e=un(d.src,d.crossOrigin,function(t,n){t?g(t,y,n):(an(s,y,n,d),g(null,y,n))});return e}function ha(s,y,d,g){g=g||zr;var e=d.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=d.level||0,n=d.internalFormat||d.format||R,b=qr(n),E=d.format||b.format,A=d.type||tr,F=d.target||er;if(F!==me)throw"target must be TEXTURE_CUBE_MAP";Nt(s,y,d),d=Object.assign({},d);var w=6,M=[],D=Ot(s,d),j;function ue(ye){return function(be,Fe){--w,be?M.push(be):Fe.width!==Fe.height?M.push("cubemap face img is not a square: "+Fe.src):(tt(s,d),s.bindTexture(F,y),w===5?Ot().forEach(function(Me){s.texImage2D(Me,t,n,E,A,Fe)}):s.texImage2D(ye,t,n,E,A,Fe),nt(d)&&s.generateMipmap(F)),w===0&&g(M.length?M:void 0,y,j)}}j=e.map(function(ye,be){return un(ye,d.crossOrigin,ue(D[be]))})}function Gn(s,y,d,g){g=g||zr;var e=d.src,t=d.internalFormat||d.format||R,n=qr(t),b=d.format||n.format,E=d.type||tr,A=d.target||I;if(A!==x&&A!==I)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Nt(s,y,d),d=Object.assign({},d);var F=e.length,w=[],M,D=d.level||0,j=d.width,ue=d.height,ye=e.length,be=!0;function Fe(Me){return function(Ie,je){if(--F,Ie)w.push(Ie);else{if(tt(s,d),s.bindTexture(A,y),be){be=!1,j=d.width||je.width,ue=d.height||je.height,s.texImage3D(A,D,t,j,ue,ye,0,b,E,null);for(var Ye=0;Ye<ye;++Ye)s.texSubImage3D(A,D,0,0,Ye,j,ue,1,b,E,je)}else{var ir=je,mr;(je.width!==j||je.height!==ue)&&(mr=C(),ir=mr.canvas,mr.canvas.width=j,mr.canvas.height=ue,mr.drawImage(je,0,0,j,ue)),s.texSubImage3D(A,D,0,0,Me,j,ue,1,b,E,ir),mr&&ir===mr.canvas&&(mr.canvas.width=0,mr.canvas.height=0)}nt(d)&&s.generateMipmap(A)}F===0&&g(w.length?w:void 0,y,M)}}M=e.map(function(Me,Ie){return un(Me,d.crossOrigin,Fe(Ie))})}function Ut(s,y,d,g){g=g||J.textureOptions;var e=g.target||er;s.bindTexture(e,y);var t=g.width,n=g.height,b=g.depth,E=g.level||0,A=g.internalFormat||g.format||R,F=qr(A),w=g.format||F.format,M=g.type||mt(s,d,F.type);if(Te(d))d instanceof Uint8ClampedArray&&(d=new Uint8Array(d.buffer));else{var D=Z.getTypedArrayTypeForGLType(M);d=new D(d)}var j=Kr(A,M),ue=d.byteLength/j;if(ue%1)throw"length wrong size for format: "+k.glEnumToString(s,w);var ye;if(e===x||e===I)if(!t&&!n&&!b){var be=Math.cbrt(ue);if(be%1!==0)throw"can't guess cube size of array of numElements: "+ue;t=be,n=be,b=be}else t&&(!n||!b)?(ye=Yr(s,e,n,b,ue/t),n=ye.width,b=ye.height):n&&(!t||!b)?(ye=Yr(s,e,t,b,ue/n),t=ye.width,b=ye.height):(ye=Yr(s,e,t,n,ue/b),t=ye.width,n=ye.height);else ye=Yr(s,e,t,n,ue),t=ye.width,n=ye.height;if(Lt(s),s.pixelStorei(u,g.unpackAlignment||1),tt(s,g),e===me){var Fe=j/d.BYTES_PER_ELEMENT,Me=ue/6*Fe;Mt(s,g).forEach(function(Ie){var je=Me*Ie.ndx,Ye=d.subarray(je,je+Me);s.texImage2D(Ie.face,E,A,t,n,0,w,M,Ye)})}else e===x||e===I?s.texImage3D(e,E,A,t,n,b,0,w,M,d):s.texImage2D(e,E,A,t,n,0,w,M,d);return{width:t,height:n,depth:b,type:M}}function fn(s,y,d){var g=d.target||er;s.bindTexture(g,y);var e=d.level||0,t=d.internalFormat||d.format||R,n=qr(t),b=d.format||n.format,E=d.type||n.type;if(tt(s,d),g===me)for(var A=0;A<6;++A)s.texImage2D(N+A,e,t,d.width,d.height,0,b,E,null);else g===x||g===I?s.texImage3D(g,e,t,d.width,d.height,d.depth,0,b,E,null):s.texImage2D(g,e,t,d.width,d.height,0,b,E,null)}function cn(s,y,d){d=d||zr,y=y||J.textureOptions;var g=s.createTexture(),e=y.target||er,t=y.width||1,n=y.height||1,b=y.internalFormat||R;s.bindTexture(e,g),e===me&&(s.texParameteri(e,Ke,Re),s.texParameteri(e,fr,Re));var E=y.src;if(E)if(typeof E=="function"&&(E=E(s,y)),typeof E=="string")Un(s,g,y,d);else if(Te(E)||Array.isArray(E)&&(typeof E[0]=="number"||Array.isArray(E[0])||Te(E[0]))){var A=Ut(s,g,E,y);t=A.width,n=A.height}else Array.isArray(E)&&(typeof E[0]=="string"||on(E[0]))?e===me?ha(s,g,y,d):Gn(s,g,y,d):(an(s,g,E,y),t=E.width,n=E.height);else fn(s,g,y);return nt(y)&&yt(s,g,y,t,n,b),rn(s,g,y),g}function ma(s,y,d,g,e,t){g=g||d.width,e=e||d.height,t=t||d.depth;var n=d.target||er;s.bindTexture(n,y);var b=d.level||0,E=d.internalFormat||d.format||R,A=qr(E),F=d.format||A.format,w,M=d.src;if(M&&(Te(M)||Array.isArray(M)&&typeof M[0]=="number")?w=d.type||mt(s,M,A.type):w=d.type||A.type,n===me)for(var D=0;D<6;++D)s.texImage2D(N+D,b,E,g,e,0,F,w,null);else n===x||n===I?s.texImage3D(n,b,E,g,e,t,0,F,w,null):s.texImage2D(n,b,E,g,e,0,F,w,null)}function Gt(s){return typeof s=="string"||Array.isArray(s)&&typeof s[0]=="string"}function ya(s,y,d){d=d||zr;var g=0,e=[],t={},n={};function b(){g===0&&setTimeout(function(){d(e.length?e:void 0,t,n)},0)}return Object.keys(y).forEach(function(E){var A=y[E],F;Gt(A.src)&&(F=function(M,D,j){n[E]=j,--g,M&&e.push(M),b()},++g),t[E]=cn(s,A,F)}),b(),t}},"./src/twgl-full.js":(Q,o,q)=>{function ie(C){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},ie(C)}o.__esModule=!0;var k={m4:!0,v3:!0,primitives:!0};o.v3=o.primitives=o.m4=void 0;var Z=Te(q("./src/m4.js"));o.m4=Z;var z=Te(q("./src/v3.js"));o.v3=z;var V=Te(q("./src/primitives.js"));o.primitives=V;var re=q("./src/twgl.js");Object.keys(re).forEach(function(C){C==="default"||C==="__esModule"||Object.prototype.hasOwnProperty.call(k,C)||C in o&&o[C]===re[C]||(o[C]=re[C])});function J(C){if(typeof WeakMap!="function")return null;var Y=new WeakMap,H=new WeakMap;return(J=function(W){return W?H:Y})(C)}function Te(C,Y){if(!Y&&C&&C.__esModule)return C;if(C===null||ie(C)!="object"&&typeof C!="function")return{default:C};var H=J(Y);if(H&&H.has(C))return H.get(C);var R={__proto__:null},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in C)if(le!=="default"&&Object.prototype.hasOwnProperty.call(C,le)){var Se=W?Object.getOwnPropertyDescriptor(C,le):null;Se&&(Se.get||Se.set)?Object.defineProperty(R,le,Se):R[le]=C[le]}return R.default=C,H&&H.set(C,R),R}},"./src/twgl.js":(Q,o,q)=>{function ie(_){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},ie(_)}o.__esModule=!0;var k={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};o.addExtensionsToContext=ur,o.framebuffers=o.draw=o.attributes=void 0,o.getContext=I,o.getWebGLContext=me,o.programs=void 0,o.resizeCanvasToDisplaySize=N,o.setDefaults=Se,o.vertexArrays=o.utils=o.typedarrays=o.textures=void 0;var Z=W(q("./src/attributes.js"));o.attributes=Z,Object.keys(Z).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===Z[_]||(o[_]=Z[_])});var z=W(q("./src/textures.js"));o.textures=z,Object.keys(z).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===z[_]||(o[_]=z[_])});var V=W(q("./src/helper.js")),re=W(q("./src/utils.js"));o.utils=re,Object.keys(re).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===re[_]||(o[_]=re[_])});var J=W(q("./src/draw.js"));o.draw=J,Object.keys(J).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===J[_]||(o[_]=J[_])});var Te=W(q("./src/framebuffers.js"));o.framebuffers=Te,Object.keys(Te).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===Te[_]||(o[_]=Te[_])});var C=W(q("./src/programs.js"));o.programs=C,Object.keys(C).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===C[_]||(o[_]=C[_])});var Y=W(q("./src/typedarrays.js"));o.typedarrays=Y,Object.keys(Y).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===Y[_]||(o[_]=Y[_])});var H=W(q("./src/vertex-arrays.js"));o.vertexArrays=H,Object.keys(H).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in o&&o[_]===H[_]||(o[_]=H[_])});function R(_){if(typeof WeakMap!="function")return null;var de=new WeakMap,_e=new WeakMap;return(R=function(We){return We?_e:de})(_)}function W(_,de){if(!de&&_&&_.__esModule)return _;if(_===null||ie(_)!="object"&&typeof _!="function")return{default:_};var _e=R(de);if(_e&&_e.has(_))return _e.get(_);var Ce={__proto__:null},We=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ue in _)if(Ue!=="default"&&Object.prototype.hasOwnProperty.call(_,Ue)){var Je=We?Object.getOwnPropertyDescriptor(_,Ue):null;Je&&(Je.get||Je.set)?Object.defineProperty(Ce,Ue,Je):Ce[Ue]=_[Ue]}return Ce.default=_,_e&&_e.set(_,Ce),Ce}var le={addExtensionsToContext:!0};function Se(_){V.copyExistingProperties(_,le),Z.setAttributeDefaults_(_),z.setTextureDefaults_(_)}var Ge=/^(.*?)_/;function Re(_,de){re.glEnumToString(_,0);var _e=_.getExtension(de);if(_e){var Ce={},We=Ge.exec(de)[1],Ue="_"+We;for(var Je in _e){var Ke=_e[Je],fr=typeof Ke=="function",Tr=fr?We:Ue,cr=Je;Je.endsWith(Tr)&&(cr=Je.substring(0,Je.length-Tr.length)),_[cr]!==void 0?!fr&&_[cr]!==Ke&&V.warn(cr,_[cr],Ke,Je):fr?_[cr]=function(ar){return function(){return ar.apply(_e,arguments)}}(Ke):(_[cr]=Ke,Ce[cr]=Ke)}Ce.constructor={name:_e.constructor.name},re.glEnumToString(Ce,0)}return _e}var or=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function ur(_){for(var de=0;de<or.length;++de)Re(_,or[de])}function er(_,de){for(var _e=["webgl","experimental-webgl"],Ce=null,We=0;We<_e.length;++We)if(Ce=_.getContext(_e[We],de),Ce){le.addExtensionsToContext&&ur(Ce);break}return Ce}function me(_,de){var _e=er(_,de);return _e}function x(_,de){for(var _e=["webgl2","webgl","experimental-webgl"],Ce=null,We=0;We<_e.length;++We)if(Ce=_.getContext(_e[We],de),Ce){le.addExtensionsToContext&&ur(Ce);break}return Ce}function I(_,de){var _e=x(_,de);return _e}function N(_,de){de=de||1,de=Math.max(0,de);var _e=_.clientWidth*de|0,Ce=_.clientHeight*de|0;return _.width!==_e||_.height!==Ce?(_.width=_e,_.height=Ce,!0):!1}},"./src/typedarrays.js":(Q,o)=>{o.__esModule=!0,o.getGLTypeForTypedArray=or,o.getGLTypeForTypedArrayType=ur,o.getTypedArrayTypeForGLType=er,o.isArrayBuffer=void 0;var q=5120,ie=5121,k=5122,Z=5123,z=5124,V=5125,re=5126,J=32819,Te=32820,C=33635,Y=5131,H=33640,R=35899,W=35902,le=36269,Se=34042,Ge={};{var Re=Ge;Re[q]=Int8Array,Re[ie]=Uint8Array,Re[k]=Int16Array,Re[Z]=Uint16Array,Re[z]=Int32Array,Re[V]=Uint32Array,Re[re]=Float32Array,Re[J]=Uint16Array,Re[Te]=Uint16Array,Re[C]=Uint16Array,Re[Y]=Uint16Array,Re[H]=Uint32Array,Re[R]=Uint32Array,Re[W]=Uint32Array,Re[le]=Uint32Array,Re[Se]=Uint32Array}function or(me){if(me instanceof Int8Array)return q;if(me instanceof Uint8Array||me instanceof Uint8ClampedArray)return ie;if(me instanceof Int16Array)return k;if(me instanceof Uint16Array)return Z;if(me instanceof Int32Array)return z;if(me instanceof Uint32Array)return V;if(me instanceof Float32Array)return re;throw new Error("unsupported typed array type")}function ur(me){if(me===Int8Array)return q;if(me===Uint8Array||me===Uint8ClampedArray)return ie;if(me===Int16Array)return k;if(me===Uint16Array)return Z;if(me===Int32Array)return z;if(me===Uint32Array)return V;if(me===Float32Array)return re;throw new Error("unsupported typed array type")}function er(me){var x=Ge[me];if(!x)throw new Error("unknown gl type");return x}o.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(x){return x&&x.buffer&&(x.buffer instanceof ArrayBuffer||x.buffer instanceof SharedArrayBuffer)}:function(x){return x&&x.buffer&&x.buffer instanceof ArrayBuffer}},"./src/utils.js":(Q,o)=>{o.__esModule=!0,o.glEnumToString=void 0,o.isWebGL1=ie,o.isWebGL2=q;function q(k){return!!k.texStorage2D}function ie(k){return!k.texStorage2D}o.glEnumToString=function(){var k={},Z={};function z(V){var re=V.constructor.name;if(!k[re]){for(var J in V)if(typeof V[J]=="number"){var Te=Z[V[J]];Z[V[J]]=Te?"".concat(Te," | ").concat(J):J}k[re]=!0}}return function(re,J){return z(re),Z[J]||(typeof J=="number"?"0x".concat(J.toString(16)):J)}}()},"./src/v3.js":(Q,o)=>{o.__esModule=!0,o.add=Z,o.copy=ur,o.create=k,o.cross=H,o.distance=Se,o.distanceSq=Ge,o.divScalar=Y,o.divide=me,o.dot=R,o.length=W,o.lengthSq=le,o.lerp=V,o.lerpV=re,o.max=J,o.min=Te,o.mulScalar=C,o.multiply=er,o.negate=or,o.normalize=Re,o.setDefaultType=ie,o.subtract=z;var q=Float32Array;function ie(x){var I=q;return q=x,I}function k(x,I,N){var _=new q(3);return x&&(_[0]=x),I&&(_[1]=I),N&&(_[2]=N),_}function Z(x,I,N){return N=N||new q(3),N[0]=x[0]+I[0],N[1]=x[1]+I[1],N[2]=x[2]+I[2],N}function z(x,I,N){return N=N||new q(3),N[0]=x[0]-I[0],N[1]=x[1]-I[1],N[2]=x[2]-I[2],N}function V(x,I,N,_){return _=_||new q(3),_[0]=x[0]+N*(I[0]-x[0]),_[1]=x[1]+N*(I[1]-x[1]),_[2]=x[2]+N*(I[2]-x[2]),_}function re(x,I,N,_){return _=_||new q(3),_[0]=x[0]+N[0]*(I[0]-x[0]),_[1]=x[1]+N[1]*(I[1]-x[1]),_[2]=x[2]+N[2]*(I[2]-x[2]),_}function J(x,I,N){return N=N||new q(3),N[0]=Math.max(x[0],I[0]),N[1]=Math.max(x[1],I[1]),N[2]=Math.max(x[2],I[2]),N}function Te(x,I,N){return N=N||new q(3),N[0]=Math.min(x[0],I[0]),N[1]=Math.min(x[1],I[1]),N[2]=Math.min(x[2],I[2]),N}function C(x,I,N){return N=N||new q(3),N[0]=x[0]*I,N[1]=x[1]*I,N[2]=x[2]*I,N}function Y(x,I,N){return N=N||new q(3),N[0]=x[0]/I,N[1]=x[1]/I,N[2]=x[2]/I,N}function H(x,I,N){N=N||new q(3);var _=x[2]*I[0]-x[0]*I[2],de=x[0]*I[1]-x[1]*I[0];return N[0]=x[1]*I[2]-x[2]*I[1],N[1]=_,N[2]=de,N}function R(x,I){return x[0]*I[0]+x[1]*I[1]+x[2]*I[2]}function W(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])}function le(x){return x[0]*x[0]+x[1]*x[1]+x[2]*x[2]}function Se(x,I){var N=x[0]-I[0],_=x[1]-I[1],de=x[2]-I[2];return Math.sqrt(N*N+_*_+de*de)}function Ge(x,I){var N=x[0]-I[0],_=x[1]-I[1],de=x[2]-I[2];return N*N+_*_+de*de}function Re(x,I){I=I||new q(3);var N=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],_=Math.sqrt(N);return _>1e-5?(I[0]=x[0]/_,I[1]=x[1]/_,I[2]=x[2]/_):(I[0]=0,I[1]=0,I[2]=0),I}function or(x,I){return I=I||new q(3),I[0]=-x[0],I[1]=-x[1],I[2]=-x[2],I}function ur(x,I){return I=I||new q(3),I[0]=x[0],I[1]=x[1],I[2]=x[2],I}function er(x,I,N){return N=N||new q(3),N[0]=x[0]*I[0],N[1]=x[1]*I[1],N[2]=x[2]*I[2],N}function me(x,I,N){return N=N||new q(3),N[0]=x[0]/I[0],N[1]=x[1]/I[1],N[2]=x[2]/I[2],N}},"./src/vertex-arrays.js":(Q,o,q)=>{function ie(C){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},ie(C)}o.__esModule=!0,o.createVAOAndSetAttributes=J,o.createVAOFromBufferInfo=Te,o.createVertexArrayInfo=re;var k=z(q("./src/programs.js"));function Z(C){if(typeof WeakMap!="function")return null;var Y=new WeakMap,H=new WeakMap;return(Z=function(W){return W?H:Y})(C)}function z(C,Y){if(!Y&&C&&C.__esModule)return C;if(C===null||ie(C)!="object"&&typeof C!="function")return{default:C};var H=Z(Y);if(H&&H.has(C))return H.get(C);var R={__proto__:null},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in C)if(le!=="default"&&Object.prototype.hasOwnProperty.call(C,le)){var Se=W?Object.getOwnPropertyDescriptor(C,le):null;Se&&(Se.get||Se.set)?Object.defineProperty(R,le,Se):R[le]=C[le]}return R.default=C,H&&H.set(C,R),R}var V=34963;function re(C,Y,H){var R=C.createVertexArray();return C.bindVertexArray(R),Y.length||(Y=[Y]),Y.forEach(function(W){k.setBuffersAndAttributes(C,W,H)}),C.bindVertexArray(null),{numElements:H.numElements,elementType:H.elementType,vertexArrayObject:R}}function J(C,Y,H,R){var W=C.createVertexArray();return C.bindVertexArray(W),k.setAttributes(Y,H),R&&C.bindBuffer(V,R),C.bindVertexArray(null),W}function Te(C,Y,H){return J(C,Y.attribSetters||Y,H.attribs,H.indices)}}},p={};function B(Q){var o=p[Q];if(o!==void 0)return o.exports;var q=p[Q]={exports:{}};return l[Q](q,q.exports,B),q.exports}var G=B("./src/twgl-full.js");return G})())})(Ua);var it=Ua.exports,Cr,Ir,ut,Xt,ft,gr,ct,Nr,Ht,pn,dn,bn,Ra,Fa,En,St,Jr,Tn,Zn,Ga,Jn,ka,$n,ja,Sn,Pa,ea,Va,Ca,Ja,An,wa,ra,Wa;class Za{constructor(){Ee(this,Zn);Ee(this,Jn);Ee(this,$n);Ee(this,Sn);Ee(this,ea);Ee(this,Ca);Ee(this,An);Ee(this,ra);nr(this,"canvas",document.querySelector("#canvas"));nr(this,"gl");Ee(this,Cr,new Map);Ee(this,Ir,new Map);Ee(this,ut,void 0);Ee(this,Xt,void 0);Ee(this,ft,void 0);Ee(this,gr,new Uint8Array(600));Ee(this,ct,void 0);Ee(this,Nr,new Uint8Array(3*40));Ee(this,Ht,void 0);Ee(this,pn,document.createTextNode("0"));Ee(this,dn,document.createTextNode("1"));Ee(this,bn,document.createTextNode("0"));Ee(this,Ra,0);Ee(this,Fa,0);Ee(this,En,new Map);Ee(this,St,void 0);Ee(this,Jr,void 0);Ee(this,Tn,document.querySelectorAll("button"));document.querySelector("#linesCleared").appendChild(U(this,pn)),document.querySelector("#speedLevel").appendChild(U(this,dn)),document.querySelector("#score").appendChild(U(this,bn));const c=document.styleSheets;let l=!1;for(let Z=0;Z<c.length&&!l;Z++)c[Z].href.includes("WebTetris")&&(ge(this,St,c[Z].cssRules),l=!0);U(this,Cr).set(1,[255,0,0]),U(this,Cr).set(2,[0,255,0]),U(this,Cr).set(3,[255,255,0]),U(this,Cr).set(4,[0,0,255]),U(this,Cr).set(5,[180,90,246]),U(this,Cr).set(6,[0,255,255]),U(this,Cr).set(7,[255,140,40]),U(this,Ir).set("Z",1),U(this,Ir).set("S",2),U(this,Ir).set("O",3),U(this,Ir).set("J",4),U(this,Ir).set("T",5),U(this,Ir).set("I",6),U(this,Ir).set("L",7);let p=this.canvas.getContext("webgl");this.gl=p,p||document.body.appendChild(document.createTextNode("WebGL is not supported."));function B(Z,z,V,re){return[Z,z+re,Z+V,z+re,Z+V,z,Z,z]}function G(Z,z,V,re){let J=[Z/2,Z],Te=[],C=(500-J[1])/2,Y=(400-J[0])/2;Te.push(...B(Y,C,J[0],J[1])),Te.push(...B(Y-z-re,C,re,re));for(let H=0;H<3;H++)Te.push(...B(Y+z+J[0],C+H*(re+V),re,re));return Te}const Q={a_Position:{numComponents:2,data:G(500,5,0,70)},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16]}};ge(this,Xt,it.createBufferInfoFromArrays(p,Q));let o=document.querySelector("#vertex-shader-2d").text,q=document.querySelector("#fragment-shader-2d").text;ge(this,ut,it.createProgramInfo(p,[o,q]));let ie={src:"textures/block.png",mag:p.LINEAR};ge(this,Ht,it.createTexture(this.gl,ie)),ge(this,ft,p.createTexture()),p.bindTexture(p.TEXTURE_2D,U(this,ft)),p.pixelStorei(p.UNPACK_ALIGNMENT,1),p.texImage2D(p.TEXTURE_2D,0,p.RGB,10,20,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),ge(this,ct,p.createTexture()),p.bindTexture(p.TEXTURE_2D,U(this,ct)),p.pixelStorei(p.UNPACK_ALIGNMENT,1),p.texImage2D(p.TEXTURE_2D,0,p.RGB,4,2*5,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.useProgram(U(this,ut).program),it.setBuffersAndAttributes(p,U(this,ut),U(this,Xt));let k={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:U(this,ft),u_QueueData:U(this,ct),u_BlockTexture:U(this,Ht)};it.setUniforms(U(this,ut),k),ge(this,Jr,ze(this,An,wa).call(this,"button").fontSize),ge(this,Jr,Number(U(this,Jr).substring(0,U(this,Jr).length-2)))}updateData(c){ze(this,Zn,Ga).call(this,c),ze(this,$n,ja).call(this,c),ze(this,ea,Va).call(this,c)}renderGame(){it.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),ze(this,ra,Wa).call(this);let c={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:U(this,ft),u_QueueData:U(this,ct),u_BlockTexture:U(this,Ht)};it.setUniforms(U(this,ut),c),it.drawBufferInfo(this.gl,U(this,Xt))}}Cr=new WeakMap,Ir=new WeakMap,ut=new WeakMap,Xt=new WeakMap,ft=new WeakMap,gr=new WeakMap,ct=new WeakMap,Nr=new WeakMap,Ht=new WeakMap,pn=new WeakMap,dn=new WeakMap,bn=new WeakMap,Ra=new WeakMap,Fa=new WeakMap,En=new WeakMap,St=new WeakMap,Jr=new WeakMap,Tn=new WeakMap,Zn=new WeakSet,Ga=function(c){for(let l=0;l<20;l++){let p=c.gridData[l];for(let B=0;B<10;B++){let G=ze(this,Jn,ka).call(this,p,B),Q=3*(10*l+B);if(G!=0){let o=U(this,Cr).get(G);U(this,gr)[Q]=o[0],U(this,gr)[Q+1]=o[1],U(this,gr)[Q+2]=o[2]}else U(this,gr)[Q]=0,U(this,gr)[Q+1]=0,U(this,gr)[Q+2]=0}}if(c.playerPiece.active){let l=170;for(let B=0;B<4;B++){let G=3*(10*c.ghostBlocks[B][1]+c.ghostBlocks[B][0]);U(this,gr)[G]=l,U(this,gr)[G+1]=l,U(this,gr)[G+2]=l}let p=c.playerPiece.shape;for(let B=0;B<4;B++){let G=U(this,Cr).get(U(this,Ir).get(p)),Q=3*(10*c.playerPiece.blocks[B][1]+c.playerPiece.blocks[B][0]);U(this,gr)[Q]=G[0],U(this,gr)[Q+1]=G[1],U(this,gr)[Q+2]=G[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,U(this,ft)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,U(this,gr))},Jn=new WeakSet,ka=function(c,l){const p=32-(3+3*l),B=7<<p;return(c&B)>>>p},$n=new WeakSet,ja=function(c){for(let l=0;l<U(this,Nr).length;l++)U(this,Nr)[l]=0;c.heldPiece!=null&&ze(this,Sn,Pa).call(this,c.heldPiece,0);for(let l=0;l<4;l++)ze(this,Sn,Pa).call(this,c.pieceQueue[l],24*(1+l));this.gl.bindTexture(this.gl.TEXTURE_2D,U(this,ct)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,U(this,Nr))},Sn=new WeakSet,Pa=function(c,l){let p=ot.getBaseShape(c),B=U(this,Cr).get(U(this,Ir).get(c));for(let G=0;G<4;G++){let Q=p[G],o=l+3*(Q[1]*4+Q[0]);U(this,Nr)[o]=B[0],U(this,Nr)[o+1]=B[1],U(this,Nr)[o+2]=B[2]}if(c!="I"&&c!="O"){let G=l+21;U(this,Nr)[G]=255}else c=="I"&&(U(this,Nr)[l+21+1]=255)},ea=new WeakSet,Va=function(c){U(this,pn).nodeValue=c.linesCleared,U(this,dn).nodeValue=c.speedLevel==11?"MAX":c.speedLevel,U(this,bn).nodeValue=c.score},Ca=new WeakSet,Ja=function(c){const l=document.querySelector(c),p=ze(this,An,wa).call(this,c);p!=null&&U(this,En).set(l,p)},An=new WeakSet,wa=function(c){let l=null;for(let p=0;p<U(this,St).length&&l==null;p++)U(this,St)[p].selectorText==c&&(l=U(this,St)[p].style);return l},ra=new WeakSet,Wa=function(){const c=this.gl.canvas.width,l=this.gl.canvas.height,p=3*c>4*l;U(this,En).forEach(function(G,Q,o){const q=G.left!="",ie=G.top!="";let k=q?G.left:G.right,Z=ie?G.top:G.bottom,z=G.fontSize,V=G.width,re=G.height;k=Number(k.substring(0,k.length-2)),Z=Number(Z.substring(0,Z.length-2)),V=Number(V.substring(0,V.length-2)),re=Number(re.substring(0,re.length-2)),z!=""&&(z=Number(z.substring(0,z.length-2))),p?(k=(4*l*(k-50)+150*c)/(3*c)+"vw",V=V*4*l/(3*c)+"vw",Z=Z+"vh",re=re+"vh"):(Z=Z*3*c/(4*l)+(100*l-75*c)/(2*l)+"vh",re=re*3*c/(4*l)+"vh",k=k+"vw",V=V+"vw",z!=""&&(z=z*3*c/(4*l))),z!=""&&(Q.style.fontSize=z+"vh"),q?Q.style.left=k:Q.style.right=k,ie?Q.style.top=Z:Q.style.bottom=Z,Q.style.width=V,Q.style.height=re});const B=p?U(this,Jr):U(this,Jr)*3*c/(4*l);for(let G=0;G<U(this,Tn).length;G++){let Q=U(this,Tn)[G];Q.style.fontSize=B+"vh"}};var Kt,qt,At,lt,st,vt,$r,Yt,gn;class $a{constructor(c){nr(this,"leftQueue",0);nr(this,"rightQueue",0);nr(this,"moveDown",!1);nr(this,"rotate",{left:!1,right:!1});nr(this,"hardDrop",!1);nr(this,"dragSensitivity",40);nr(this,"slamThreshold",150);nr(this,"slamTimeLimit",400);Ee(this,Kt,void 0);Ee(this,qt,void 0);Ee(this,At,void 0);Ee(this,lt,void 0);Ee(this,st,!1);Ee(this,vt,null);Ee(this,$r,{startTime:0,startY:0,endY:0});Ee(this,Yt,void 0);Ee(this,gn,!1);c.addEventListener("touchmove",l=>{this.dragEvent(l)}),c.addEventListener("touchstart",l=>{this.touchStart(l)}),c.addEventListener("touchend",l=>{this.touchEnd(l)}),c.addEventListener("touchcancel",l=>{this.touchEnd(l)}),ge(this,Kt,c),document.addEventListener("dblclick",function(l){l.preventDefault()},{passive:!1})}touchStart(c){if(U(this,vt)===null&&c.target.closest(".blockGestures")===null){let l=c.touches.item(0);ge(this,vt,l.identifier),ge(this,At,l.pageX),ge(this,lt,l.pageY),ge(this,qt,l.pageX),ge(this,Yt,Date.now()),ge(this,gn,l.clientX<U(this,Kt).getBoundingClientRect().x+U(this,Kt).getBoundingClientRect().width*.5),ge(this,$r,{startTime:Date.now(),startY:l.pageY,endY:l.pageY})}}touchEnd(c){let l=!0;for(let p=0;p<c.touches.length&&l;p++)c.touches.item(p).identifier===U(this,vt)&&(l=!1);l&&(Date.now()-U(this,Yt)<300&&this.leftQueue==0&&this.rightQueue==0&&(U(this,gn)?this.rotate.left=!0:this.rotate.right=!0),Date.now()-U(this,$r).startTime<=this.slamTimeLimit&&U(this,$r).endY-U(this,$r).startY>this.slamThreshold&&(this.hardDrop=!0),ge(this,vt,null),this.leftQueue=0,this.rightQueue=0,this.moveDown=!1)}dragEvent(c){let l=!1,p=null;for(let B=0;B<c.changedTouches.length;B++)if(c.changedTouches.item(B).identifier===U(this,vt)){p=c.changedTouches.item(B);break}p!==null&&((p.pageX-U(this,qt))*(U(this,st)?1:-1)>0&&(ge(this,st,!U(this,st)),ge(this,At,p.pageX+this.dragSensitivity*.5*(U(this,st)?1:-1)),ge(this,lt,p.pageY)),Math.abs(p.pageX-U(this,At))>this.dragSensitivity&&(U(this,st)?(this.leftQueue++,this.rightQueue=0):(this.rightQueue++,this.leftQueue=0),l=!0,U(this,$r).startTime=0,this.moveDown=!1),p.pageY-U(this,lt)>this.dragSensitivity?(this.moveDown=!0,this.leftQueue=0,this.rightQueue=0,l=!0):U(this,lt)-p.pageY>this.dragSensitivity&&(this.moveDown=!1,l=!0),l&&(ge(this,At,p.pageX),ge(this,lt,p.pageY),ge(this,Yt,0)),ge(this,qt,p.pageX),U(this,$r).endY=p.pageY)}}Kt=new WeakMap,qt=new WeakMap,At=new WeakMap,lt=new WeakMap,st=new WeakMap,vt=new WeakMap,$r=new WeakMap,Yt=new WeakMap,gn=new WeakMap;class ei{constructor(c,l,p,B,G,Q,o){nr(this,"inputStates",new Map);nr(this,"frameCounter",{moveLeft:0,moveRight:0,softDrop:0});this.inputStates.set("moveLeft",!1),this.inputStates.set("moveRight",!1),this.inputStates.set("softDrop",!1),this.inputStates.set("hold",!1),this.inputStates.set("hardDrop",!1),this.inputStates.set("rotateClockwise",!1),this.inputStates.set("rotateAnticlockwise",!1),this.addReleasableListeners(l,"moveLeft"),this.addReleasableListeners(p,"moveRight"),this.addReleasableListeners(B,"softDrop"),this.addListeners(G,"hardDrop"),this.addListeners(Q,"rotateClockwise"),this.addListeners(o,"rotateAnticlockwise"),this.addListeners(c,"hold")}addListeners(c,l){c.addEventListener("pointerdown",p=>{this.inputStates.set(l,!0),c.classList.add("pressed")}),c.addEventListener("click",p=>{p.pointerType===""&&this.inputStates.set(l,!0)}),c.addEventListener("pointerup",p=>{c.classList.remove("pressed")}),c.addEventListener("pointerleave",p=>{c.classList.remove("pressed")})}addReleasableListeners(c,l){c.addEventListener("pointerdown",p=>{this.inputStates.set(l,!0),c.classList.add("pressed")}),c.addEventListener("pointerup",p=>{this.inputStates.set(l,!1),c.classList.remove("pressed")}),c.addEventListener("pointerleave",p=>{this.inputStates.set(l,!1),c.classList.remove("pressed")}),c.addEventListener("click",p=>{p.pointerType===""&&(l==="moveLeft"?this.frameCounter.moveLeft++:l==="moveRight"?this.frameCounter.moveRight++:l==="softDrop"&&this.frameCounter.softDrop++)})}countFrame(){this.inputStates.get("moveLeft")&&this.frameCounter.moveLeft++,this.inputStates.get("moveRight")&&this.frameCounter.moveRight++,this.inputStates.get("softDrop")&&this.frameCounter.softDrop++}resetFlags(){this.inputStates.set("hold",!1),this.inputStates.set("hardDrop",!1),this.inputStates.set("rotateClockwise",!1),this.inputStates.set("rotateAnticlockwise",!1),this.inputStates.get("moveLeft")||(this.frameCounter.moveLeft=0),this.inputStates.get("moveRight")||(this.frameCounter.moveRight=0),this.inputStates.get("softDrop")||(this.frameCounter.softDrop=0)}getInput(c){return this.inputStates.get(c)}}let sn=null,xa=new Map,Xa;function ri(he){he.inputKeys.forEach(function(l,p,B){localStorage.setItem(l,p)})}function ti(he){let c=[];he.inputKeys.forEach(function(l,p,B){const G=localStorage.getItem(l);G!=null&&c.push({action:l,oldKey:p,newKey:G})});for(let l=0;l<c.length;l++)he.inputKeys.delete(c[l].oldKey);for(let l=0;l<c.length;l++)he.inputKeys.set(c[l].newKey,c[l].action)}function ni(he,c){const l=document.querySelectorAll(he);for(let G=0;G<l.length;G++){let Q=l[G];Q.classList.add("ready"),Q.addEventListener("click",function(){c.selectedSpan!=null&&(c.selectedKey="Escape",B()),c.originalKeybind=Q.innerText,c.selectedSpan=Q,c.selectedAction=Q.id.substring(2),sn.textContent="Rebinding "+c.selectedAction+" action (press key to rebind)...",document.addEventListener("keydown",p),Q.classList.remove("ready"),Q.classList.add("waiting"),Q.innerText="..."}),Q.innerText=c.actionToKey(Q.id.substring(2)),Q.innerText==" "&&(Q.innerText="Space")}function p(G){c.selectedKey=G.key.length>1?G.key:G.key.toUpperCase(),B()}function B(){c.selectedKey=="Escape"||Xa.classList.contains("hide")?(c.selectedKey=c.originalKeybind,G(),sn.textContent="Rebind canceled.",c.updateCounters()):c.rebindControl(c.selectedAction,c.selectedKey)?(sn.textContent="Rebind successful!",G(),ri(c)):sn.textContent="'"+c.selectedKey+"' is already in use (press another key)...";function G(){document.removeEventListener("keydown",p);const Q=c.selectedKey==" "?"Space":c.selectedKey;c.selectedSpan.innerText=Q,xa.get(c.selectedAction).forEach(function(o,q,ie){o.innerText=Q}),c.selectedAction="",c.selectedKey="",c.selectedSpan.classList.remove("waiting"),c.selectedSpan.classList.add("ready"),c.selectedSpan=null}}}function ai(he,c,l,p){Xa=p,sn=l,ni(he,c),c.actionStates.forEach(function(B,G,Q){xa.set(G,document.querySelectorAll("span.cd_"+G)),xa.get(G).forEach(function(o,q,ie){const k=c.actionToKey(G);o.innerText=k==" "?"Space":k})})}function ii(){let he=document.createTextNode("");document.querySelector("#debug").appendChild(he);const c=document.querySelector("#startButton");let l=new za;ti(l),document.addEventListener("keydown",function(H){l.setInputState(H.key,!0)}),document.addEventListener("keyup",function(H){l.setInputState(H.key,!1)});let p=new $a(document.querySelector("#gameGUI")),B=new ei(document.querySelector("#tib_Hold"),document.querySelector("#tib_MoveLeft"),document.querySelector("#tib_MoveRight"),document.querySelector("#tib_SoftDrop"),document.querySelector("#tib_HardDrop"),document.querySelector("#tib_RotateClockwise"),document.querySelector("#tib_RotateAnticlockwise")),G=new Sa,Q=new Za;const o=document.querySelector("#titleScreen"),q=document.querySelector("#pauseScreen"),ie=document.querySelector("#gameOverScreen"),k=document.querySelector("#settingsScreen");let Z=!0;const z=document.createTextNode("0"),V=document.createTextNode("0");document.querySelector("#finalScore").appendChild(z),document.querySelector("#finalLines").append(V);let re=0,J=0;function Te(H){let R=(H-J)*.001;J=H,re+=R,k.classList.contains("hide")?G.gameState.gameOver?Z||ie.classList.contains("hide")&&(ie.classList.remove("hide"),z.textContent=G.gameState.score,V.textContent=G.gameState.linesCleared):(re>=G.gameTickTime&&(re=Math.min(re-G.gameTickTime,G.gameTickTime),l.updateCounters(),oi(G,l,p,B),G.runTick(),l.getCounter("Pause")==1&&(G.gameState.isPaused?(G.pauseGame(!1),q.classList.add("hide")):(G.pauseGame(!0),q.classList.remove("hide")))),G.isStateChanged&&Q.updateData(G.gameState)):(l.updateCounters(),l.getCounter("Pause")==1&&k.classList.add("hide")),Q.renderGame(),requestAnimationFrame(Te)}function C(){G.startNewGame(),Q.updateData(G.gameState),Q.renderGame(),document.querySelector("#titleScreen").classList.add("hide"),document.querySelector("#gameGUI").classList.remove("hide"),requestAnimationFrame(Te),Z=!1}c.addEventListener("click",C),document.querySelector("#heldPieceOverlay").addEventListener("click",function(){G.holdPiece()}),document.querySelector("#unpauseButton").addEventListener("click",function(){G.gameState.isPaused=!1,q.classList.add("hide")}),document.querySelector("#replayButton").addEventListener("click",function(){G.startNewGame(),Q.updateData(G.gameState),Q.renderGame(),ie.classList.add("hide")}),document.querySelector("#returnToTitleButton").addEventListener("click",function(){o.classList.remove("hide"),ie.classList.add("hide"),Z=!0}),requestAnimationFrame(Te);let Y=document.createTextNode("");document.querySelector("#settingsConsoleText").appendChild(Y),ai(".controlRebind",l,Y,k),document.querySelector("#exitSettingsButton").addEventListener("click",function(){k.classList.add("hide")}),document.querySelectorAll(".settingsButton").forEach(function(H,R,W){H.addEventListener("click",function(){k.classList.remove("hide")})})}function oi(he,c,l,p){let B=5;c.getCounter("HardDrop")==1&&(he.input.hardDrop=!0),c.getCounter("Hold")==1&&(he.input.hold=!0),c.getCounter("RotateClockwise")==1&&(he.input.rotClockwise=!0),c.getCounter("RotateAntiClockwise")==1&&(he.input.rotAntiClockwise=!0),c.getInputState("SoftDrop")&&(he.input.softDrop=!0),(c.getCounter("MoveLeft")==1||c.getCounter("MoveLeft")>B)&&(he.input.moveLeft=!0),(c.getCounter("MoveRight")==1||c.getCounter("MoveRight")>B)&&(he.input.moveRight=!0),l.leftQueue>0&&(he.input.moveLeft=!0,l.leftQueue--),l.rightQueue>0&&(he.input.moveRight=!0,l.rightQueue--),l.moveDown&&(he.input.softDrop=!0),l.rotate.left?he.input.rotAntiClockwise=!0:l.rotate.right&&(he.input.rotClockwise=!0),l.rotate={left:!1,right:!1},l.hardDrop&&(he.input.hardDrop=!0,l.hardDrop=!1),p.countFrame(),(p.frameCounter.moveLeft==1||p.frameCounter.moveLeft>B)&&(he.input.moveLeft=!0),(p.frameCounter.moveRight==1||p.frameCounter.moveRight>B)&&(he.input.moveRight=!0),p.frameCounter.softDrop>=1&&(he.input.softDrop=!0),p.getInput("hold")&&(he.input.hold=!0),p.getInput("rotateClockwise")&&(he.input.rotClockwise=!0),p.getInput("rotateAnticlockwise")&&(he.input.rotAntiClockwise=!0),p.getInput("hardDrop")&&(he.input.hardDrop=!0),p.resetFlags()}ii();

var In=Object.defineProperty;var Mn=(Ye,s,_)=>s in Ye?In(Ye,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):Ye[s]=_;var Or=(Ye,s,_)=>(Mn(Ye,typeof s!="symbol"?s+"":s,_),_),on=(Ye,s,_)=>{if(!s.has(Ye))throw TypeError("Cannot "+_)};var $=(Ye,s,_)=>(on(Ye,s,"read from private field"),_?_.call(Ye):s.get(Ye)),Fe=(Ye,s,_)=>{if(s.has(Ye))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(Ye):s.set(Ye,_)},nr=(Ye,s,_,j)=>(on(Ye,s,"write to private field"),j?j.call(Ye,_):s.set(Ye,_),_);var un=(Ye,s,_,j)=>({set _(L){nr(Ye,s,L,_)},get _(){return $(Ye,s,j)}}),Ke=(Ye,s,_)=>(on(Ye,s,"access private method"),_);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const L of document.querySelectorAll('link[rel="modulepreload"]'))j(L);new MutationObserver(L=>{for(const pe of L)if(pe.type==="childList")for(const Ee of pe.addedNodes)Ee.tagName==="LINK"&&Ee.rel==="modulepreload"&&j(Ee)}).observe(document,{childList:!0,subtree:!0});function _(L){const pe={};return L.integrity&&(pe.integrity=L.integrity),L.referrerPolicy&&(pe.referrerPolicy=L.referrerPolicy),L.crossOrigin==="use-credentials"?pe.credentials="include":L.crossOrigin==="anonymous"?pe.credentials="omit":pe.credentials="same-origin",pe}function j(L){if(L.ep)return;L.ep=!0;const pe=_(L);fetch(L.href,pe)}})();class Dn{constructor(){this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.actionStates.set("Pause",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("Escape","Pause"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0),this.counters.set("Pause",0)}keyToState(s){return s.length==1&&(s=s.toUpperCase()),this.inputKeys.get(s)}setInputState(s,_){let j=this.keyToState(s);j!=null&&this.actionStates.set(j,_)}getInputState(s){return this.actionStates.has(s)?this.actionStates.get(s):(console.log("ERROR: trying to access an input action that doesn't exist ("+s+"). The allowed options are:"),this.actionStates.forEach(function(_,j,L){console.log("    - "+j)}),null)}updateCounters(){for(const[s,_]of this.counters)this.getInputState(s)?this.counters.set(s,_+1):this.counters.set(s,0)}getCounter(s){return this.counters.has(s)?this.counters.get(s):(console.log("ERROR: trying to access input action that doesn't have a counter ("+s+"). The counters are:"),this.counters.forEach(function(_,j,L){console.log("    - "+j+": "+_)}),null)}}var Bt,vt,It,at,Mt,qr,Dt,Ra,yn,Fa,pn,Ca,bn,Ba,En,Ot,wa,mt,ea,Ia,Tn,Ma,dn,ta,cn,Da,An,Nt,xa,aa,ln;const ra=class ra{constructor(){Fe(this,Ra);Fe(this,Fa);Fe(this,Ca);Fe(this,Ba);Fe(this,Ot);Fe(this,mt);Fe(this,Ia);Fe(this,Ma);Fe(this,ta);Fe(this,Da);Fe(this,Nt);Fe(this,aa);Or(this,"numRows",21);Or(this,"graceTimerDuration",.5);Or(this,"gameTickTime",1/30);Or(this,"pieceMap",new Map);Or(this,"gameState",{isPaused:!1,gameOver:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0,speedLevel:1});Fe(this,Bt,15);Fe(this,vt,!0);Fe(this,It,0);Fe(this,at,-1);Fe(this,Mt,0);Fe(this,qr,!1);Fe(this,Dt,!1);Ke(this,Ot,wa).call(this),Ke(this,mt,ea).call(this),Ke(this,Nt,xa).call(this),nr(this,Bt,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7),this.gameState.isPaused=!0}get isStateChanged(){const s=$(this,vt);return nr(this,vt,!1),s}runTick(s){if(s.updateCounters(),!this.gameState.isPaused){let _=!1;if($(this,Dt))this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0?(this.clearRow(0),this.rowCount++,nr(this,vt,!0)):this.rowCount==this.numRows&&(this.rowCount++,this.gameState.gameOver=!0));else if(s.getCounter("HardDrop")==1)this.hardDropPlayerPiece(),this.finishWithPiece(),_=!0;else if(s.getCounter("Hold")==1)this.holdPiece(),_=!0;else{s.getInputState("SoftDrop")&&(_=this.tryMovePiece(0,-1)||_);let j=0;s.getCounter("RotateClockwise")==1&&(j+=1),s.getCounter("RotateAntiClockwise")==1&&(j-=1),j!=0&&(_=this.tryRotatePiece(j==1)||_);let L=0;if((s.getCounter("MoveLeft")==1||s.getCounter("MoveLeft")>5)&&(L-=1),(s.getCounter("MoveRight")==1||s.getCounter("MoveRight")>5)&&(L+=1),L!=0&&(_=this.tryMovePiece(L,0)||_),un(this,It)._++,$(this,It)>=$(this,Bt)){let pe=!this.tryMovePiece(0,-1);_||(_=!pe),nr(this,It,0),pe&&!$(this,qr)&&Ke(this,Ia,Tn).call(this)}if($(this,qr)&&(Ke(this,Ma,dn).call(this,this.gameTickTime),$(this,at)<=0)){let pe=!this.tryMovePiece(0,-1);_=!0,pe&&this.finishWithPiece()}}_&&(Ke(this,Nt,xa).call(this),nr(this,vt,!0))}}pauseGame(s){this.gameState.isPaused=s}startNewGame(){this.gameState.gameOver=!1,this.gameState.isPaused=!1;for(let s=0;s<this.gameState.gridData.length;s++)this.gameState.gridData[s]=0;this.gameState.linesCleared=0,this.gameState.speedLevel=0,this.gameState.pieceQueue=[],Ke(this,Ot,wa).call(this),Ke(this,mt,ea).call(this),Ke(this,Nt,xa).call(this),Ke(this,aa,ln).call(this)}tryMovePiece(s,_){let j=!0;for(let L=0;L<4&&j;L++){let pe=this.gameState.playerPiece.blocks[L][0]+s,Ee=this.gameState.playerPiece.blocks[L][1]+_;this.isBlockHere(pe,Ee)&&(j=!1)}return j&&(Ke(this,Fa,pn).call(this,s,_),s!=0&&Ke(this,ta,cn).call(this),_!=0&&nr(this,qr,!1)),j}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(s){let _=Ke(this,Ca,bn).call(this,s);return _&&Ke(this,ta,cn).call(this),_}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,Ke(this,mt,ea).call(this);else if(!this.gameState.playerPiece.wasHeld){let s=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new tt(s),this.gameState.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,nr(this,Dt,!0))}}finishWithPiece(){const s=this.gameState.linesCleared;Ke(this,Ba,En).call(this),Ke(this,mt,ea).call(this),nr(this,qr,!1),Ke(this,Da,An).call(this),this.gameState.linesCleared!=s&&Ke(this,aa,ln).call(this)}clearRow(s){for(let _=s;_<this.numRows-1;_++)this.gameState.gridData[_]=this.gameState.gridData[_+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(s,_){if(s<0||_<0||s>=10||_>=this.numRows)return!0;const j=this.gameState.gridData[_],L=7<<32-(3+3*s);return(j&L)!=0}getBlockData(s,_){const j=this.gameState.gridData[_],L=32-(3+3*s),pe=7<<L;return(j&pe)>>>L}isPlayerPieceValid(){let s=!0;for(let _=0;_<4&&s;_++)this.isBlockHere(this.gameState.playerPiece.blocks[_][0],this.gameState.playerPiece.blocks[_][1])&&(s=!1);return s}};Bt=new WeakMap,vt=new WeakMap,It=new WeakMap,at=new WeakMap,Mt=new WeakMap,qr=new WeakMap,Dt=new WeakMap,Ra=new WeakSet,yn=function(s,_,j){const pe=~(7<<32-(3+3*s));this.gameState.gridData[_]&=pe;const Ee=j<<32-(3+3*s);this.gameState.gridData[_]|=Ee},Fa=new WeakSet,pn=function(s,_){for(let j=0;j<4;j++)this.gameState.playerPiece.blocks[j][0]+=s,this.gameState.playerPiece.blocks[j][1]+=_},Ca=new WeakSet,bn=function(s){let _=(this.gameState.playerPiece.rotationIndex+4+(s?1:-1))%4,j=[...this.gameState.playerPiece.blocks[0]],L=[];for(let z=0;z<4;z++)L.push([...this.gameState.playerPiece.blocks[z]]);let pe=1,Ee=1;s?Ee=-1:pe=-1;let u;for(let z=0;z<4;z++)L[z][0]-=j[0],L[z][1]-=j[1],u=L[z][0],L[z][0]=pe*L[z][1],L[z][1]=Ee*u,L[z][0]+=j[0],L[z][1]+=j[1];let X;switch(this.gameState.playerPiece.shape){case"O":X=tt.offsets.O;break;case"I":X=tt.offsets.I;break;default:X=tt.offsets.OTHER;break}let H,U,re=!1;for(let z=0;z<5&&!re;z++){H=X[z],U=[H[this.gameState.playerPiece.rotationIndex][0]-H[_][0],H[this.gameState.playerPiece.rotationIndex][1]-H[_][1]],re=!0;for(let N=0;N<4;N++)L[N][0]+=U[0],L[N][1]+=U[1],this.isBlockHere(L[N][0],L[N][1])&&(re=!1);if(!re)for(let N=0;N<4;N++)L[N][0]-=U[0],L[N][1]-=U[1]}if(re){for(let z=0;z<4;z++)this.gameState.playerPiece.blocks[z]=[...L[z]];this.gameState.playerPiece.rotationIndex=_}return re},Ba=new WeakSet,En=function(){let s,_,j=this.pieceMap.get(this.gameState.playerPiece.shape);for(let L=0;L<4;L++)s=this.gameState.playerPiece.blocks[L][0],_=this.gameState.playerPiece.blocks[L][1],Ke(this,Ra,yn).call(this,s,_,j)},Ot=new WeakSet,wa=function(){let s=["O","I","T","J","L","S","Z"],_;for(let j=0;j<7;j++)_=Math.floor(Math.random()*s.length),this.gameState.pieceQueue.push(s[_]),s.splice(_,1)},mt=new WeakSet,ea=function(){let s=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&Ke(this,Ot,wa).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new tt(s),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,nr(this,Dt,!0))},Ia=new WeakSet,Tn=function(){nr(this,at,this.graceTimerDuration),nr(this,qr,!0),nr(this,Mt,0)},Ma=new WeakSet,dn=function(s){nr(this,at,$(this,at)-s)},ta=new WeakSet,cn=function(){$(this,qr)&&$(this,Mt)<30&&(nr(this,at,Math.min($(this,at)+.5,this.graceTimerDuration)),un(this,Mt)._++)},Da=new WeakSet,An=function(){for(let s=0;s<this.numRows;s++){let _=!0;for(let j=0;j<10&&_;j++)this.isBlockHere(j,s)||(_=!1);_&&(this.clearRow(s),this.gameState.linesCleared++,s--)}},Nt=new WeakSet,xa=function(){for(let _=0;_<4;_++)this.gameState.ghostBlocks[_]=[...this.gameState.playerPiece.blocks[_]];let s=!1;for(;!s;){for(let _=0;_<4;_++)this.isBlockHere(this.gameState.ghostBlocks[_][0],this.gameState.ghostBlocks[_][1]-1)&&(s=!0);if(!s)for(let _=0;_<4;_++)this.gameState.ghostBlocks[_][1]-=1}},aa=new WeakSet,ln=function(){this.gameState.speedLevel=Math.min(Math.floor(this.gameState.linesCleared/10)+1,ra.levels.max),nr(this,Bt,ra.levels[this.gameState.speedLevel])},Or(ra,"levels",{1:15,2:14,3:13,4:12,5:11,6:10,7:9,8:7,9:5,10:3,11:1,max:11});let fn=ra;const Br=class Br{constructor(s){this.blocks=[],this.shape=s,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let _=Br.getBaseShape(s);for(let j=0;j<4;j++)this.blocks.push([..._[j]]),this.blocks[j][0]+=3,this.blocks[j][1]+=19}static getBaseShape(s){let _;switch(s){case"O":_=Br.pieces.O;break;case"I":_=Br.pieces.I;break;case"L":_=Br.pieces.L;break;case"J":_=Br.pieces.J;break;case"T":_=Br.pieces.T;break;case"S":_=Br.pieces.S;break;case"Z":_=Br.pieces.Z;break;default:_=[[0,0],[0,0],[0,0],[0,0]]}return _}};Or(Br,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),Or(Br,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let tt=Br;var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sn={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Ye,s){(function(j,L){Ye.exports=L()})(typeof self<"u"?self:On,()=>(()=>{var _={"./src/attributes.js":(Ee,u,X)=>{function H(l){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H(l)}u.__esModule=!0,u.createAttribsFromArrays=fr,u.createBufferFromArray=f,u.createBufferFromTypedArray=se,u.createBufferInfoFromArrays=i,u.createBuffersFromArrays=E,u.getArray_=O,u.getNumComponents_=xe,u.setAttribInfoBufferFromArray=tr,u.setAttributeDefaults_=ir,u.setAttributePrefix=or;var U=N(X("./src/typedarrays.js")),re=N(X("./src/helper.js"));function z(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(z=function(v){return v?n:o})(l)}function N(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||H(l)!="object"&&typeof l!="function")return{default:l};var n=z(o);if(n&&n.has(l))return n.get(l);var m={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in l)if(T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)){var P=v?Object.getOwnPropertyDescriptor(l,T):null;P&&(P.get||P.set)?Object.defineProperty(m,T,P):m[T]=l[T]}return m.default=l,n&&n.set(l,m),m}var le=35044,te=34962,Te=34963,F=34660,Y=5120,Q=5121,x=5122,k=5123,ue=5124,be=5125,Le=5126,ge={attribPrefix:""};function or(l){ge.attribPrefix=l}function ir(l){re.copyExistingProperties(l,ge)}function $e(l,o,n,m,v){l.bindBuffer(o,n),l.bufferData(o,m,v||le)}function se(l,o,n,m){if(re.isBuffer(l,o))return o;n=n||te;var v=l.createBuffer();return $e(l,n,v,o,m),v}function w(l){return l==="indices"}function B(l){return l===Int8Array||l===Uint8Array}function O(l){return l.length?l:l.data}var S=/coord|texture/i,he=/color|colour/i;function Ae(l,o){var n;if(S.test(l)?n=2:he.test(l)?n=4:n=3,o%n>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(n," but ").concat(o," values is not evenly divisible by ").concat(n,". You should specify it."));return n}function xe(l,o,n){return l.numComponents||l.size||Ae(o,n||O(l).length)}function Ve(l,o){if(U.isArrayBuffer(l))return l;if(U.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var n=l.type?Ze(l.type):void 0;return n||(w(o)?n=Uint16Array:n=Float32Array),new n(l.data)}function Ne(l){return typeof l=="number"?l:l?U.getGLTypeForTypedArrayType(l):Le}function Ze(l){return typeof l=="number"?U.getTypedArrayTypeForGLType(l):l||Float32Array}function Xe(l,o){return{buffer:o.buffer,numValues:24,type:Ne(o.type),arrayType:Ze(o.type)}}function ur(l,o){var n=o.data||o,m=Ze(o.type),v=n*m.BYTES_PER_ELEMENT,T=l.createBuffer();return l.bindBuffer(te,T),l.bufferData(te,v,o.drawType||le),{buffer:T,numValues:n,type:U.getGLTypeForTypedArrayType(m),arrayType:m}}function Tr(l,o,n){var m=Ve(o,n);return{arrayType:m.constructor,buffer:se(l,m,void 0,o.drawType),type:U.getGLTypeForTypedArray(m),numValues:0}}function fr(l,o){var n={};return Object.keys(o).forEach(function(m){if(!w(m)){var v=o[m],T=v.attrib||v.name||v.attribName||ge.attribPrefix+m;if(v.value){if(!Array.isArray(v.value)&&!U.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");n[T]={value:v.value}}else{var P;v.buffer&&v.buffer instanceof WebGLBuffer?P=Xe:typeof v=="number"||typeof v.data=="number"?P=ur:P=Tr;var I=P(l,v,m),M=I.buffer,W=I.type,q=I.numValues,Z=I.arrayType,ae=v.normalize!==void 0?v.normalize:B(Z),ee=xe(v,m,q);n[T]={buffer:M,numComponents:ee,type:W,normalize:ae,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),l.bindBuffer(te,null),n}function tr(l,o,n,m){n=Ve(n),m!==void 0?(l.bindBuffer(te,o.buffer),l.bufferSubData(te,m,n)):$e(l,te,o.buffer,n,o.drawType)}function sr(l,o){return o===Y||o===Q?1:o===x||o===k?2:o===ue||o===be||o===Le?4:0}var dr=["position","positions","a_position"];function oe(l){var o,n;for(n=0;n<dr.length&&(o=dr[n],!(o in l));++n);n===dr.length&&(o=Object.keys(l)[0]);var m=l[o],v=O(m).length;if(v===void 0)return 1;var T=xe(m,o),P=v/T;if(v%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(v));return P}function r(l,o){var n,m;for(m=0;m<dr.length&&(n=dr[m],!(n in o||(n=ge.attribPrefix+n,n in o)));++m);m===dr.length&&(n=Object.keys(o)[0]);var v=o[n];if(!v.buffer)return 1;l.bindBuffer(te,v.buffer);var T=l.getBufferParameter(te,F);l.bindBuffer(te,null);var P=sr(l,v.type),I=T/P,M=v.numComponents||v.size,W=I/M;if(W%1!==0)throw new Error("numComponents ".concat(M," not correct for length ").concat(length));return W}function i(l,o,n){var m=fr(l,o),v=Object.assign({},n||{});v.attribs=Object.assign({},n?n.attribs:{},m);var T=o.indices;if(T){var P=Ve(T,"indices");v.indices=se(l,P,Te),v.numElements=P.length,v.elementType=U.getGLTypeForTypedArray(P)}else v.numElements||(v.numElements=r(l,v.attribs));return v}function f(l,o,n){var m=n==="indices"?Te:te,v=Ve(o,n);return se(l,v,m)}function E(l,o){var n={};return Object.keys(o).forEach(function(m){n[m]=f(l,o[m],m)}),o.indices?(n.numElements=o.indices.length,n.elementType=U.getGLTypeForTypedArray(Ve(o.indices),"indices")):n.numElements=oe(o),n}},"./src/draw.js":(Ee,u,X)=>{function H(F){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},H(F)}u.__esModule=!0,u.drawBufferInfo=te,u.drawObjectList=Te;var U=z(X("./src/programs.js"));function re(F){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Q=new WeakMap;return(re=function(k){return k?Q:Y})(F)}function z(F,Y){if(!Y&&F&&F.__esModule)return F;if(F===null||H(F)!="object"&&typeof F!="function")return{default:F};var Q=re(Y);if(Q&&Q.has(F))return Q.get(F);var x={__proto__:null},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=k?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,Q&&Q.set(F,x),x}var N=4,le=5123;function te(F,Y,Q,x,k,ue){Q=Q===void 0?N:Q;var be=Y.indices,Le=Y.elementType,ge=x===void 0?Y.numElements:x;k=k===void 0?0:k,Le||be?ue!==void 0?F.drawElementsInstanced(Q,ge,Le===void 0?le:Y.elementType,k,ue):F.drawElements(Q,ge,Le===void 0?le:Y.elementType,k):ue!==void 0?F.drawArraysInstanced(Q,k,ge,ue):F.drawArrays(Q,k,ge)}function Te(F,Y){var Q=null,x=null;Y.forEach(function(k){if(k.active!==!1){var ue=k.programInfo,be=k.vertexArrayInfo||k.bufferInfo,Le=!1,ge=k.type===void 0?N:k.type;ue!==Q&&(Q=ue,F.useProgram(ue.program),Le=!0),(Le||be!==x)&&(x&&x.vertexArrayObject&&!be.vertexArrayObject&&F.bindVertexArray(null),x=be,U.setBuffersAndAttributes(F,ue,be)),U.setUniforms(ue,k.uniforms),te(F,be,ge,k.count,k.offset,k.instanceCount)}}),x&&x.vertexArrayObject&&F.bindVertexArray(null)}},"./src/framebuffers.js":(Ee,u,X)=>{function H(oe){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H(oe)}u.__esModule=!0,u.bindFramebufferInfo=dr,u.createFramebufferInfo=tr,u.resizeFramebufferInfo=sr;var U=N(X("./src/textures.js")),re=N(X("./src/helper.js"));function z(oe){if(typeof WeakMap!="function")return null;var r=new WeakMap,i=new WeakMap;return(z=function(E){return E?i:r})(oe)}function N(oe,r){if(!r&&oe&&oe.__esModule)return oe;if(oe===null||H(oe)!="object"&&typeof oe!="function")return{default:oe};var i=z(r);if(i&&i.has(oe))return i.get(oe);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in oe)if(l!=="default"&&Object.prototype.hasOwnProperty.call(oe,l)){var o=E?Object.getOwnPropertyDescriptor(oe,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=oe[l]}return f.default=oe,i&&i.set(oe,f),f}var le=36160,te=36161,Te=3553,F=5121,Y=6402,Q=6408,x=33190,k=36012,ue=35056,be=36013,Le=32854,ge=32855,or=36194,ir=33189,$e=6401,se=36168,w=34041,B=36064,O=36096,S=36128,he=33306,Ae=33071,xe=9729,Ve=[{format:Q,type:F,min:xe,wrap:Ae},{format:w}],Ne={};Ne[w]=he,Ne[$e]=S,Ne[se]=S,Ne[Y]=O,Ne[ir]=O,Ne[x]=O,Ne[k]=O,Ne[ue]=he,Ne[be]=he;function Ze(oe,r){return Ne[oe]||Ne[r]}var Xe={};Xe[Le]=!0,Xe[ge]=!0,Xe[or]=!0,Xe[w]=!0,Xe[ir]=!0,Xe[$e]=!0,Xe[se]=!0;function ur(oe){return Xe[oe]}var Tr=32;function fr(oe){return oe>=B&&oe<B+Tr}function tr(oe,r,i,f){var E=le,l=oe.createFramebuffer();oe.bindFramebuffer(E,l),i=i||oe.drawingBufferWidth,f=f||oe.drawingBufferHeight,r=r||Ve;var o=[],n={framebuffer:l,attachments:[],width:i,height:f};return r.forEach(function(m,v){var T=m.attachment,P=m.samples,I=m.format,M=m.attachmentPoint||Ze(I,m.internalFormat);if(M||(M=B+v),fr(M)&&o.push(M),!T)if(P!==void 0||ur(I))T=oe.createRenderbuffer(),oe.bindRenderbuffer(te,T),P>1?oe.renderbufferStorageMultisample(te,P,I,i,f):oe.renderbufferStorage(te,I,i,f);else{var W=Object.assign({},m);W.width=i,W.height=f,W.auto===void 0&&(W.auto=!1,W.min=W.min||W.minMag||xe,W.mag=W.mag||W.minMag||xe,W.wrapS=W.wrapS||W.wrap||Ae,W.wrapT=W.wrapT||W.wrap||Ae),T=U.createTexture(oe,W)}if(re.isRenderbuffer(oe,T))oe.framebufferRenderbuffer(E,M,te,T);else if(re.isTexture(oe,T))m.layer!==void 0?oe.framebufferTextureLayer(E,M,T,m.level||0,m.layer):oe.framebufferTexture2D(E,M,m.target||Te,T,m.level||0);else throw new Error("unknown attachment type");n.attachments.push(T)}),oe.drawBuffers&&oe.drawBuffers(o),n}function sr(oe,r,i,f,E){f=f||oe.drawingBufferWidth,E=E||oe.drawingBufferHeight,r.width=f,r.height=E,i=i||Ve,i.forEach(function(l,o){var n=r.attachments[o],m=l.format,v=l.samples;if(v!==void 0||re.isRenderbuffer(oe,n))oe.bindRenderbuffer(te,n),v>1?oe.renderbufferStorageMultisample(te,v,m,f,E):oe.renderbufferStorage(te,m,f,E);else if(re.isTexture(oe,n))U.resizeTexture(oe,n,l,f,E);else throw new Error("unknown attachment type")})}function dr(oe,r,i){i=i||le,r?(oe.bindFramebuffer(i,r.framebuffer),oe.viewport(0,0,r.width,r.height)):(oe.bindFramebuffer(i,null),oe.viewport(0,0,oe.drawingBufferWidth,oe.drawingBufferHeight))}},"./src/helper.js":(Ee,u)=>{u.__esModule=!0,u.copyExistingProperties=U,u.copyNamedProperties=H,u.error=re,u.isBuffer=te,u.isRenderbuffer=Te,u.isSampler=Q,u.isShader=F,u.isTexture=Y,u.warn=z;function X(x){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},X(x)}function H(x,k,ue){x.forEach(function(be){var Le=k[be];Le!==void 0&&(ue[be]=Le)})}function U(x,k){Object.keys(k).forEach(function(ue){k.hasOwnProperty(ue)&&x.hasOwnProperty(ue)&&(k[ue]=x[ue])})}function re(){var x;(x=console).error.apply(x,arguments)}function z(){var x;(x=console).warn.apply(x,arguments)}var N=new Map;function le(x,k){if(!x||X(x)!=="object")return!1;var ue=N.get(k);ue||(ue=new WeakMap,N.set(k,ue));var be=ue.get(x);if(be===void 0){var Le=Object.prototype.toString.call(x);be=Le.substring(8,Le.length-1)===k,ue.set(x,be)}return be}function te(x,k){return typeof WebGLBuffer<"u"&&le(k,"WebGLBuffer")}function Te(x,k){return typeof WebGLRenderbuffer<"u"&&le(k,"WebGLRenderbuffer")}function F(x,k){return typeof WebGLShader<"u"&&le(k,"WebGLShader")}function Y(x,k){return typeof WebGLTexture<"u"&&le(k,"WebGLTexture")}function Q(x,k){return typeof WebGLSampler<"u"&&le(k,"WebGLSampler")}},"./src/m4.js":(Ee,u,X)=>{function H(r){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H(r)}u.__esModule=!0,u.axisRotate=Tr,u.axisRotation=ur,u.copy=F,u.create=Te,u.frustum=$e,u.getAxis=Le,u.getTranslation=be,u.identity=Y,u.inverse=x,u.lookAt=O,u.multiply=k,u.negate=te,u.ortho=ir,u.perspective=or,u.rotateX=xe,u.rotateY=Ne,u.rotateZ=Xe,u.rotationX=Ae,u.rotationY=Ve,u.rotationZ=Ze,u.scale=tr,u.scaling=fr,u.setAxis=ge,u.setDefaultType=le,u.setTranslation=ue,u.transformDirection=dr,u.transformNormal=oe,u.transformPoint=sr,u.translate=he,u.translation=S,u.transpose=Q;var U=z(X("./src/v3.js"));function re(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(re=function(l){return l?f:i})(r)}function z(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||H(r)!="object"&&typeof r!="function")return{default:r};var f=re(i);if(f&&f.has(r))return f.get(r);var E={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var n=l?Object.getOwnPropertyDescriptor(r,o):null;n&&(n.get||n.set)?Object.defineProperty(E,o,n):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var N=Float32Array;function le(r){var i=N;return N=r,i}function te(r,i){return i=i||new N(16),i[0]=-r[0],i[1]=-r[1],i[2]=-r[2],i[3]=-r[3],i[4]=-r[4],i[5]=-r[5],i[6]=-r[6],i[7]=-r[7],i[8]=-r[8],i[9]=-r[9],i[10]=-r[10],i[11]=-r[11],i[12]=-r[12],i[13]=-r[13],i[14]=-r[14],i[15]=-r[15],i}function Te(){return new N(16).fill(0)}function F(r,i){return i=i||new N(16),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}function Y(r){return r=r||new N(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Q(r,i){if(i=i||new N(16),i===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,i}var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=r[2*4+0],M=r[2*4+1],W=r[2*4+2],q=r[2*4+3],Z=r[3*4+0],ae=r[3*4+1],ee=r[3*4+2],fe=r[3*4+3];return i[0]=E,i[1]=m,i[2]=I,i[3]=Z,i[4]=l,i[5]=v,i[6]=M,i[7]=ae,i[8]=o,i[9]=T,i[10]=W,i[11]=ee,i[12]=n,i[13]=P,i[14]=q,i[15]=fe,i}function x(r,i){i=i||new N(16);var f=r[0*4+0],E=r[0*4+1],l=r[0*4+2],o=r[0*4+3],n=r[1*4+0],m=r[1*4+1],v=r[1*4+2],T=r[1*4+3],P=r[2*4+0],I=r[2*4+1],M=r[2*4+2],W=r[2*4+3],q=r[3*4+0],Z=r[3*4+1],ae=r[3*4+2],ee=r[3*4+3],fe=M*ee,ce=ae*W,J=v*ee,me=ae*T,Me=v*W,He=M*T,Ue=l*ee,je=ae*o,Se=l*W,Re=M*o,Qe=l*T,ke=v*o,qe=P*Z,We=q*I,Je=n*Z,Ce=q*m,Oe=n*I,hr=P*m,cr=f*Z,Ar=q*E,_r=f*I,Mr=P*E,Nr=f*m,Lr=n*E,Qr=fe*m+me*I+Me*Z-(ce*m+J*I+He*Z),ht=ce*E+Ue*I+Re*Z-(fe*E+je*I+Se*Z),yt=J*E+je*m+Qe*Z-(me*E+Ue*m+ke*Z),pt=He*E+Se*m+ke*I-(Me*E+Re*m+Qe*I),vr=1/(f*Qr+n*ht+P*yt+q*pt);return i[0]=vr*Qr,i[1]=vr*ht,i[2]=vr*yt,i[3]=vr*pt,i[4]=vr*(ce*n+J*P+He*q-(fe*n+me*P+Me*q)),i[5]=vr*(fe*f+je*P+Se*q-(ce*f+Ue*P+Re*q)),i[6]=vr*(me*f+Ue*n+ke*q-(J*f+je*n+Qe*q)),i[7]=vr*(Me*f+Re*n+Qe*P-(He*f+Se*n+ke*P)),i[8]=vr*(qe*T+Ce*W+Oe*ee-(We*T+Je*W+hr*ee)),i[9]=vr*(We*o+cr*W+Mr*ee-(qe*o+Ar*W+_r*ee)),i[10]=vr*(Je*o+Ar*T+Nr*ee-(Ce*o+cr*T+Lr*ee)),i[11]=vr*(hr*o+_r*T+Lr*W-(Oe*o+Mr*T+Nr*W)),i[12]=vr*(Je*M+hr*ae+We*v-(Oe*ae+qe*v+Ce*M)),i[13]=vr*(_r*ae+qe*l+Ar*M-(cr*M+Mr*ae+We*l)),i[14]=vr*(cr*v+Lr*ae+Ce*l-(Nr*ae+Je*l+Ar*v)),i[15]=vr*(Nr*M+Oe*l+Mr*v-(_r*v+Lr*M+hr*l)),i}function k(r,i,f){f=f||new N(16);var E=r[0],l=r[1],o=r[2],n=r[3],m=r[4],v=r[5],T=r[6],P=r[7],I=r[8],M=r[9],W=r[10],q=r[11],Z=r[12],ae=r[13],ee=r[14],fe=r[15],ce=i[0],J=i[1],me=i[2],Me=i[3],He=i[4],Ue=i[5],je=i[6],Se=i[7],Re=i[8],Qe=i[9],ke=i[10],qe=i[11],We=i[12],Je=i[13],Ce=i[14],Oe=i[15];return f[0]=E*ce+m*J+I*me+Z*Me,f[1]=l*ce+v*J+M*me+ae*Me,f[2]=o*ce+T*J+W*me+ee*Me,f[3]=n*ce+P*J+q*me+fe*Me,f[4]=E*He+m*Ue+I*je+Z*Se,f[5]=l*He+v*Ue+M*je+ae*Se,f[6]=o*He+T*Ue+W*je+ee*Se,f[7]=n*He+P*Ue+q*je+fe*Se,f[8]=E*Re+m*Qe+I*ke+Z*qe,f[9]=l*Re+v*Qe+M*ke+ae*qe,f[10]=o*Re+T*Qe+W*ke+ee*qe,f[11]=n*Re+P*Qe+q*ke+fe*qe,f[12]=E*We+m*Je+I*Ce+Z*Oe,f[13]=l*We+v*Je+M*Ce+ae*Oe,f[14]=o*We+T*Je+W*Ce+ee*Oe,f[15]=n*We+P*Je+q*Ce+fe*Oe,f}function ue(r,i,f){return f=f||Y(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=i[0],f[13]=i[1],f[14]=i[2],f[15]=1,f}function be(r,i){return i=i||U.create(),i[0]=r[12],i[1]=r[13],i[2]=r[14],i}function Le(r,i,f){f=f||U.create();var E=i*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function ge(r,i,f,E){E!==r&&(E=F(r,E));var l=f*4;return E[l+0]=i[0],E[l+1]=i[1],E[l+2]=i[2],E}function or(r,i,f,E,l){l=l||new N(16);var o=Math.tan(Math.PI*.5-.5*r),n=1/(f-E);return l[0]=o/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+E)*n,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*E*n*2,l[15]=0,l}function ir(r,i,f,E,l,o,n){return n=n||new N(16),n[0]=2/(i-r),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2/(E-f),n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2/(l-o),n[11]=0,n[12]=(i+r)/(r-i),n[13]=(E+f)/(f-E),n[14]=(o+l)/(l-o),n[15]=1,n}function $e(r,i,f,E,l,o,n){n=n||new N(16);var m=i-r,v=E-f,T=l-o;return n[0]=2*l/m,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*l/v,n[6]=0,n[7]=0,n[8]=(r+i)/m,n[9]=(E+f)/v,n[10]=o/T,n[11]=-1,n[12]=0,n[13]=0,n[14]=l*o/T,n[15]=0,n}var se,w,B;function O(r,i,f,E){return E=E||new N(16),se=se||U.create(),w=w||U.create(),B=B||U.create(),U.normalize(U.subtract(r,i,B),B),U.normalize(U.cross(f,B,se),se),U.normalize(U.cross(B,se,w),w),E[0]=se[0],E[1]=se[1],E[2]=se[2],E[3]=0,E[4]=w[0],E[5]=w[1],E[6]=w[2],E[7]=0,E[8]=B[0],E[9]=B[1],E[10]=B[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function S(r,i){return i=i||new N(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}function he(r,i,f){f=f||new N(16);var E=i[0],l=i[1],o=i[2],n=r[0],m=r[1],v=r[2],T=r[3],P=r[1*4+0],I=r[1*4+1],M=r[1*4+2],W=r[1*4+3],q=r[2*4+0],Z=r[2*4+1],ae=r[2*4+2],ee=r[2*4+3],fe=r[3*4+0],ce=r[3*4+1],J=r[3*4+2],me=r[3*4+3];return r!==f&&(f[0]=n,f[1]=m,f[2]=v,f[3]=T,f[4]=P,f[5]=I,f[6]=M,f[7]=W,f[8]=q,f[9]=Z,f[10]=ae,f[11]=ee),f[12]=n*E+P*l+q*o+fe,f[13]=m*E+I*l+Z*o+ce,f[14]=v*E+M*l+ae*o+J,f[15]=T*E+W*l+ee*o+me,f}function Ae(r,i){i=i||new N(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=f,i[6]=E,i[7]=0,i[8]=0,i[9]=-E,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xe(r,i,f){f=f||new N(16);var E=r[4],l=r[5],o=r[6],n=r[7],m=r[8],v=r[9],T=r[10],P=r[11],I=Math.cos(i),M=Math.sin(i);return f[4]=I*E+M*m,f[5]=I*l+M*v,f[6]=I*o+M*T,f[7]=I*n+M*P,f[8]=I*m-M*E,f[9]=I*v-M*l,f[10]=I*T-M*o,f[11]=I*P-M*n,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ve(r,i){i=i||new N(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=0,i[2]=-E,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=E,i[9]=0,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Ne(r,i,f){f=f||new N(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[2*4+0],v=r[2*4+1],T=r[2*4+2],P=r[2*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E-M*m,f[1]=I*l-M*v,f[2]=I*o-M*T,f[3]=I*n-M*P,f[8]=I*m+M*E,f[9]=I*v+M*l,f[10]=I*T+M*o,f[11]=I*P+M*n,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ze(r,i){i=i||new N(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=E,i[2]=0,i[3]=0,i[4]=-E,i[5]=f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Xe(r,i,f){f=f||new N(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E+M*m,f[1]=I*l+M*v,f[2]=I*o+M*T,f[3]=I*n+M*P,f[4]=I*m-M*E,f[5]=I*v-M*l,f[6]=I*T-M*o,f[7]=I*P-M*n,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ur(r,i,f){f=f||new N(16);var E=r[0],l=r[1],o=r[2],n=Math.sqrt(E*E+l*l+o*o);E/=n,l/=n,o/=n;var m=E*E,v=l*l,T=o*o,P=Math.cos(i),I=Math.sin(i),M=1-P;return f[0]=m+(1-m)*P,f[1]=E*l*M+o*I,f[2]=E*o*M-l*I,f[3]=0,f[4]=E*l*M-o*I,f[5]=v+(1-v)*P,f[6]=l*o*M+E*I,f[7]=0,f[8]=E*o*M+l*I,f[9]=l*o*M-E*I,f[10]=T+(1-T)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,i,f,E){E=E||new N(16);var l=i[0],o=i[1],n=i[2],m=Math.sqrt(l*l+o*o+n*n);l/=m,o/=m,n/=m;var v=l*l,T=o*o,P=n*n,I=Math.cos(f),M=Math.sin(f),W=1-I,q=v+(1-v)*I,Z=l*o*W+n*M,ae=l*n*W-o*M,ee=l*o*W-n*M,fe=T+(1-T)*I,ce=o*n*W+l*M,J=l*n*W+o*M,me=o*n*W-l*M,Me=P+(1-P)*I,He=r[0],Ue=r[1],je=r[2],Se=r[3],Re=r[4],Qe=r[5],ke=r[6],qe=r[7],We=r[8],Je=r[9],Ce=r[10],Oe=r[11];return E[0]=q*He+Z*Re+ae*We,E[1]=q*Ue+Z*Qe+ae*Je,E[2]=q*je+Z*ke+ae*Ce,E[3]=q*Se+Z*qe+ae*Oe,E[4]=ee*He+fe*Re+ce*We,E[5]=ee*Ue+fe*Qe+ce*Je,E[6]=ee*je+fe*ke+ce*Ce,E[7]=ee*Se+fe*qe+ce*Oe,E[8]=J*He+me*Re+Me*We,E[9]=J*Ue+me*Qe+Me*Je,E[10]=J*je+me*ke+Me*Ce,E[11]=J*Se+me*qe+Me*Oe,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function fr(r,i){return i=i||new N(16),i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function tr(r,i,f){f=f||new N(16);var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function sr(r,i,f){f=f||U.create();var E=i[0],l=i[1],o=i[2],n=E*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+l*r[4]+o*r[8]+r[12])/n,f[1]=(E*r[1]+l*r[5]+o*r[9]+r[13])/n,f[2]=(E*r[2]+l*r[6]+o*r[10]+r[14])/n,f}function dr(r,i,f){f=f||U.create();var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0]+l*r[4]+o*r[8],f[1]=E*r[1]+l*r[5]+o*r[9],f[2]=E*r[2]+l*r[6]+o*r[10],f}function oe(r,i,f){f=f||U.create();var E=x(r),l=i[0],o=i[1],n=i[2];return f[0]=l*E[0]+o*E[1]+n*E[2],f[1]=l*E[4]+o*E[5]+n*E[6],f[2]=l*E[8]+o*E[9]+n*E[10],f}},"./src/primitives.js":(Ee,u,X)=>{function H(o){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H(o)}u.__esModule=!0,u.concatVertices=i,u.create3DFBuffers=u.create3DFBufferInfo=void 0,u.create3DFVertices=Ve,u.createAugmentedTypedArray=x,u.createCrescentBuffers=u.createCrescentBufferInfo=void 0,u.createCrescentVertices=Ne,u.createCubeBuffers=u.createCubeBufferInfo=u.createCresentVertices=u.createCresentBuffers=u.createCresentBufferInfo=void 0,u.createCubeVertices=he,u.createCylinderBuffers=u.createCylinderBufferInfo=void 0,u.createCylinderVertices=Ze,u.createDiscBuffers=u.createDiscBufferInfo=void 0,u.createDiscVertices=ur,u.createPlaneBuffers=u.createPlaneBufferInfo=void 0,u.createPlaneVertices=B,u.createSphereBuffers=u.createSphereBufferInfo=void 0,u.createSphereVertices=O,u.createTorusBuffers=u.createTorusBufferInfo=void 0,u.createTorusVertices=Xe,u.createTruncatedConeBuffers=u.createTruncatedConeBufferInfo=void 0,u.createTruncatedConeVertices=Ae,u.createXYQuadBuffers=u.createXYQuadBufferInfo=void 0,u.createXYQuadVertices=w,u.deindexVertices=ue,u.duplicateVertices=f,u.flattenNormals=be,u.makeRandomVertexColors=fr,u.reorientDirections=or,u.reorientNormals=ir,u.reorientPositions=$e,u.reorientVertices=se;var U=Te(X("./src/attributes.js")),re=Te(X("./src/helper.js")),z=Te(X("./src/typedarrays.js")),N=Te(X("./src/m4.js")),le=Te(X("./src/v3.js"));function te(o){if(typeof WeakMap!="function")return null;var n=new WeakMap,m=new WeakMap;return(te=function(T){return T?m:n})(o)}function Te(o,n){if(!n&&o&&o.__esModule)return o;if(o===null||H(o)!="object"&&typeof o!="function")return{default:o};var m=te(n);if(m&&m.has(o))return m.get(o);var v={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in o)if(P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)){var I=T?Object.getOwnPropertyDescriptor(o,P):null;I&&(I.get||I.set)?Object.defineProperty(v,P,I):v[P]=o[P]}return v.default=o,m&&m.set(o,v),v}var F=U.getArray_,Y=U.getNumComponents_;function Q(o,n){var m=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var T=arguments[v];if(T instanceof Array||z.isArrayBuffer(T))for(var P=0;P<T.length;++P)o[m++]=T[P];else o[m++]=T}},o.reset=function(v){m=v||0},o.numComponents=n,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function x(o,n,m){var v=m||Float32Array;return Q(new v(o*n),o)}function k(o){return o!=="indices"}function ue(o){var n=o.indices,m={},v=n.length;function T(P){for(var I=o[P],M=I.numComponents,W=x(M,v,I.constructor),q=0;q<v;++q)for(var Z=n[q],ae=Z*M,ee=0;ee<M;++ee)W.push(I[ae+ee]);m[P]=W}return Object.keys(o).filter(k).forEach(T),m}function be(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var n=o.normal,m=n.length,v=0;v<m;v+=9){var T=n[v+0],P=n[v+1],I=n[v+2],M=n[v+3],W=n[v+4],q=n[v+5],Z=n[v+6],ae=n[v+7],ee=n[v+8],fe=T+M+Z,ce=P+W+ae,J=I+q+ee,me=Math.sqrt(fe*fe+ce*ce+J*J);fe/=me,ce/=me,J/=me,n[v+0]=fe,n[v+1]=ce,n[v+2]=J,n[v+3]=fe,n[v+4]=ce,n[v+5]=J,n[v+6]=fe,n[v+7]=ce,n[v+8]=J}return o}function Le(o,n,m){for(var v=o.length,T=new Float32Array(3),P=0;P<v;P+=3)m(n,[o[P],o[P+1],o[P+2]],T),o[P]=T[0],o[P+1]=T[1],o[P+2]=T[2]}function ge(o,n,m){m=m||le.create();var v=n[0],T=n[1],P=n[2];return m[0]=v*o[0]+T*o[1]+P*o[2],m[1]=v*o[4]+T*o[5]+P*o[6],m[2]=v*o[8]+T*o[9]+P*o[10],m}function or(o,n){return Le(o,n,N.transformDirection),o}function ir(o,n){return Le(o,N.inverse(n),ge),o}function $e(o,n){return Le(o,n,N.transformPoint),o}function se(o,n){return Object.keys(o).forEach(function(m){var v=o[m];m.indexOf("pos")>=0?$e(v,n):m.indexOf("tan")>=0||m.indexOf("binorm")>=0?or(v,n):m.indexOf("norm")>=0&&ir(v,n)}),o}function w(o,n,m){return o=o||2,n=n||0,m=m||0,o*=.5,{position:{numComponents:2,data:[n+-1*o,m+-1*o,n+1*o,m+-1*o,n+-1*o,m+1*o,n+1*o,m+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function B(o,n,m,v,T){o=o||1,n=n||1,m=m||1,v=v||1,T=T||N.identity();for(var P=(m+1)*(v+1),I=x(3,P),M=x(3,P),W=x(2,P),q=0;q<=v;q++)for(var Z=0;Z<=m;Z++){var ae=Z/m,ee=q/v;I.push(o*ae-o*.5,0,n*ee-n*.5),M.push(0,1,0),W.push(ae,ee)}for(var fe=m+1,ce=x(3,m*v*2,Uint16Array),J=0;J<v;J++)for(var me=0;me<m;me++)ce.push((J+0)*fe+me,(J+1)*fe+me,(J+0)*fe+me+1),ce.push((J+1)*fe+me,(J+1)*fe+me+1,(J+0)*fe+me+1);var Me=se({position:I,normal:M,texcoord:W,indices:ce},T);return Me}function O(o,n,m,v,T,P,I){if(n<=0||m<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,T=T||Math.PI,P=P||0,I=I||Math.PI*2;for(var M=T-v,W=I-P,q=(n+1)*(m+1),Z=x(3,q),ae=x(3,q),ee=x(2,q),fe=0;fe<=m;fe++)for(var ce=0;ce<=n;ce++){var J=ce/n,me=fe/m,Me=W*J+P,He=M*me+v,Ue=Math.sin(Me),je=Math.cos(Me),Se=Math.sin(He),Re=Math.cos(He),Qe=je*Se,ke=Re,qe=Ue*Se;Z.push(o*Qe,o*ke,o*qe),ae.push(Qe,ke,qe),ee.push(1-J,me)}for(var We=n+1,Je=x(3,n*m*2,Uint16Array),Ce=0;Ce<n;Ce++)for(var Oe=0;Oe<m;Oe++)Je.push((Oe+0)*We+Ce,(Oe+0)*We+Ce+1,(Oe+1)*We+Ce),Je.push((Oe+1)*We+Ce,(Oe+0)*We+Ce+1,(Oe+1)*We+Ce+1);return{position:Z,normal:ae,texcoord:ee,indices:Je}}var S=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function he(o){o=o||1;for(var n=o/2,m=[[-n,-n,-n],[+n,-n,-n],[-n,+n,-n],[+n,+n,-n],[-n,-n,+n],[+n,-n,+n],[-n,+n,+n],[+n,+n,+n]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],P=6*4,I=x(3,P),M=x(3,P),W=x(2,P),q=x(3,6*2,Uint16Array),Z=0;Z<6;++Z){for(var ae=S[Z],ee=0;ee<4;++ee){var fe=m[ae[ee]],ce=v[Z],J=T[ee];I.push(fe),M.push(ce),W.push(J)}var me=4*Z;q.push(me+0,me+1,me+2),q.push(me+0,me+2,me+3)}return{position:I,normal:M,texcoord:W,indices:q}}function Ae(o,n,m,v,T,P,I){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var M=P===void 0?!0:P,W=I===void 0?!0:I,q=(M?2:0)+(W?2:0),Z=(v+1)*(T+1+q),ae=x(3,Z),ee=x(3,Z),fe=x(2,Z),ce=x(3,v*(T+q/2)*2,Uint16Array),J=v+1,me=Math.atan2(o-n,m),Me=Math.cos(me),He=Math.sin(me),Ue=M?-2:0,je=T+(W?2:0),Se=Ue;Se<=je;++Se){var Re=Se/T,Qe=m*Re,ke=void 0;Se<0?(Qe=0,Re=1,ke=o):Se>T?(Qe=m,Re=1,ke=n):ke=o+(n-o)*(Se/T),(Se===-2||Se===T+2)&&(ke=0,Re=0),Qe-=m/2;for(var qe=0;qe<J;++qe){var We=Math.sin(qe*Math.PI*2/v),Je=Math.cos(qe*Math.PI*2/v);ae.push(We*ke,Qe,Je*ke),Se<0?ee.push(0,-1,0):Se>T?ee.push(0,1,0):ke===0?ee.push(0,0,0):ee.push(We*Me,He,Je*Me),fe.push(qe/v,1-Re)}}for(var Ce=0;Ce<T+q;++Ce)if(!(Ce===1&&M||Ce===T+q-2&&W))for(var Oe=0;Oe<v;++Oe)ce.push(J*(Ce+0)+0+Oe,J*(Ce+0)+1+Oe,J*(Ce+1)+1+Oe),ce.push(J*(Ce+0)+0+Oe,J*(Ce+1)+1+Oe,J*(Ce+1)+0+Oe);return{position:ae,normal:ee,texcoord:fe,indices:ce}}function xe(o,n){n=n||[];for(var m=[],v=0;v<o.length;v+=4){var T=o[v],P=o.slice(v+1,v+4);P.push.apply(P,n);for(var I=0;I<T;++I)m.push.apply(m,P)}return m}function Ve(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],n=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],m=xe([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=xe([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,P={position:x(3,T),texcoord:x(2,T),normal:x(3,T),color:x(4,T,Uint8Array),indices:x(3,T/3,Uint16Array)};P.position.push(o),P.texcoord.push(n),P.normal.push(m),P.color.push(v);for(var I=0;I<T;++I)P.indices.push(I);return P}function Ne(o,n,m,v,T,P,I){if(T<=0)throw new Error("subdivisionDown must be > 0");P=P||0,I=I||1;var M=2,W=I-P,q=(T+1)*2*(2+M),Z=x(3,q),ae=x(3,q),ee=x(2,q);function fe(je,Se,Re){return je+(Se-je)*Re}function ce(je,Se,Re,Qe,ke,qe){for(var We=0;We<=T;We++){var Je=Se/(M-1),Ce=We/T,Oe=(Je-.5)*2,hr=(P+Ce*W)*Math.PI,cr=Math.sin(hr),Ar=Math.cos(hr),_r=fe(o,je,cr),Mr=Oe*v,Nr=Ar*o,Lr=cr*_r;Z.push(Mr,Nr,Lr);var Qr=le.add(le.multiply([0,cr,Ar],Re),Qe);ae.push(Qr),ee.push(Je*ke+qe,Ce)}}for(var J=0;J<M;J++){var me=(J/(M-1)-.5)*2;ce(n,J,[1,1,1],[0,0,0],1,0),ce(n,J,[0,0,0],[me,0,0],0,0),ce(m,J,[1,1,1],[0,0,0],1,0),ce(m,J,[0,0,0],[me,0,0],0,1)}var Me=x(3,T*2*(2+M),Uint16Array);function He(je,Se){for(var Re=0;Re<T;++Re)Me.push(je+Re+0,je+Re+1,Se+Re+0),Me.push(je+Re+1,Se+Re+1,Se+Re+0)}var Ue=T+1;return He(Ue*0,Ue*4),He(Ue*5,Ue*7),He(Ue*6,Ue*2),He(Ue*3,Ue*1),{position:Z,normal:ae,texcoord:ee,indices:Me}}function Ze(o,n,m,v,T,P){return Ae(o,o,n,m,v,T,P)}function Xe(o,n,m,v,T,P){if(m<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,P=P||Math.PI*2;for(var I=P-T,M=m+1,W=v+1,q=M*W,Z=x(3,q),ae=x(3,q),ee=x(2,q),fe=x(3,m*v*2,Uint16Array),ce=0;ce<W;++ce)for(var J=ce/v,me=J*Math.PI*2,Me=Math.sin(me),He=o+Me*n,Ue=Math.cos(me),je=Ue*n,Se=0;Se<M;++Se){var Re=Se/m,Qe=T+Re*I,ke=Math.sin(Qe),qe=Math.cos(Qe),We=ke*He,Je=qe*He,Ce=ke*Me,Oe=qe*Me;Z.push(We,je,Je),ae.push(Ce,Ue,Oe),ee.push(Re,1-J)}for(var hr=0;hr<v;++hr)for(var cr=0;cr<m;++cr){var Ar=1+cr,_r=1+hr;fe.push(M*hr+cr,M*_r+cr,M*hr+Ar),fe.push(M*_r+cr,M*_r+Ar,M*hr+Ar)}return{position:Z,normal:ae,texcoord:ee,indices:fe}}function ur(o,n,m,v,T){if(n<3)throw new Error("divisions must be at least 3");m=m||1,T=T||1,v=v||0;for(var P=(n+1)*(m+1),I=x(3,P),M=x(3,P),W=x(2,P),q=x(3,m*n*2,Uint16Array),Z=0,ae=o-v,ee=n+1,fe=0;fe<=m;++fe){for(var ce=v+ae*Math.pow(fe/m,T),J=0;J<=n;++J){var me=2*Math.PI*J/n,Me=ce*Math.cos(me),He=ce*Math.sin(me);if(I.push(Me,0,He),M.push(0,1,0),W.push(1-J/n,fe/m),fe>0&&J!==n){var Ue=Z+(J+1),je=Z+J,Se=Z+J-ee,Re=Z+(J+1)-ee;q.push(Ue,je,Se),q.push(Ue,Se,Re)}}Z+=n+1}return{position:I,normal:M,texcoord:W,indices:q}}function Tr(o){return Math.random()*o|0}function fr(o,n){n=n||{};var m=o.position.numElements,v=x(4,m,Uint8Array),T=n.rand||function(ae,ee){return ee<3?Tr(256):255};if(o.color=v,o.indices)for(var P=0;P<m;++P)v.push(T(P,0),T(P,1),T(P,2),T(P,3));else for(var I=n.vertsPerColor||3,M=m/I,W=0;W<M;++W)for(var q=[T(W,0),T(W,1),T(W,2),T(W,3)],Z=0;Z<I;++Z)v.push(q);return o}function tr(o){return function(n){var m=o.apply(this,Array.prototype.slice.call(arguments,1));return U.createBuffersFromArrays(n,m)}}function sr(o){return function(n){var m=o.apply(null,Array.prototype.slice.call(arguments,1));return U.createBufferInfoFromArrays(n,m)}}var dr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function oe(o,n,m,v){v=v||0;for(var T=o.length,P=0;P<T;++P)n[m+P]=o[P]+v}function r(o,n){var m=F(o),v=new m.constructor(n),T=v;return m.numComponents&&m.numElements&&Q(v,m.numComponents),o.data&&(T={data:v},re.copyNamedProperties(dr,o,T)),T}function i(o){for(var n={},m,v=function(){var Z=o[T];Object.keys(Z).forEach(function(ae){n[ae]||(n[ae]=[]),!m&&ae!=="indices"&&(m=ae);var ee=Z[ae],fe=Y(ee,ae),ce=F(ee),J=ce.length/fe;n[ae].push(J)})},T=0;T<o.length;++T)v();function P(q){for(var Z=0,ae,ee=0;ee<o.length;++ee){var fe=o[ee],ce=fe[q],J=F(ce);Z+=J.length,(!ae||ce.data)&&(ae=ce)}return{length:Z,spec:ae}}function I(q,Z,ae){for(var ee=0,fe=0,ce=0;ce<o.length;++ce){var J=o[ce],me=J[q],Me=F(me);q==="indices"?(oe(Me,ae,fe,ee),ee+=Z[ce]):oe(Me,ae,fe),fe+=Me.length}}var M=n[m],W={};return Object.keys(n).forEach(function(q){var Z=P(q),ae=r(Z.spec,Z.length);I(q,M,F(ae)),W[q]=ae}),W}function f(o){var n={};return Object.keys(o).forEach(function(m){var v=o[m],T=F(v),P=r(v,T.length);oe(T,F(P),0),n[m]=P}),n}u.create3DFBufferInfo=sr(Ve),u.create3DFBuffers=tr(Ve),u.createCubeBufferInfo=sr(he),u.createCubeBuffers=tr(he),u.createPlaneBufferInfo=sr(B),u.createPlaneBuffers=tr(B),u.createSphereBufferInfo=sr(O),u.createSphereBuffers=tr(O),u.createTruncatedConeBufferInfo=sr(Ae),u.createTruncatedConeBuffers=tr(Ae),u.createXYQuadBufferInfo=sr(w),u.createXYQuadBuffers=tr(w);var E=u.createCrescentBufferInfo=sr(Ne),l=u.createCrescentBuffers=tr(Ne);u.createCylinderBufferInfo=sr(Ze),u.createCylinderBuffers=tr(Ze),u.createTorusBufferInfo=sr(Xe),u.createTorusBuffers=tr(Xe),u.createDiscBufferInfo=sr(ur),u.createDiscBuffers=tr(ur),u.createCresentBufferInfo=E,u.createCresentBuffers=l,u.createCresentVertices=Ne},"./src/programs.js":(Ee,u,X)=>{function H(e){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(e)}u.__esModule=!0,u.bindTransformFeedbackInfo=xt,u.bindUniformBlock=Rt,u.createAttributeSetters=Jt,u.createProgram=ft,u.createProgramAsync=void 0,u.createProgramFromScripts=zt,u.createProgramFromSources=Yt,u.createProgramInfo=c,u.createProgramInfoAsync=void 0,u.createProgramInfoFromProgram=Ct,u.createProgramInfos=A,u.createProgramInfosAsync=void 0,u.createPrograms=y,u.createProgramsAsync=void 0,u.createTransformFeedback=Kt,u.createTransformFeedbackInfo=wt,u.createUniformBlockInfo=Zt,u.createUniformBlockInfoFromProgram=Qt,u.createUniformBlockSpecFromProgram=Yr,u.createUniformSetters=$r,u.setAttributes=$t,u.setBlockUniforms=$a,u.setBuffersAndAttributes=en,u.setUniformBlock=Sa,u.setUniforms=Ft,u.setUniformsAndBindTextures=void 0;var U=N(X("./src/utils.js")),re=N(X("./src/helper.js"));function z(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(z=function(b){return b?a:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||H(e)!="object"&&typeof e!="function")return{default:e};var a=z(t);if(a&&a.has(e))return a.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var R=b?Object.getOwnPropertyDescriptor(e,d):null;R&&(R.get||R.set)?Object.defineProperty(p,d,R):p[d]=e[d]}return p.default=e,a&&a.set(e,p),p}function le(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */le=function(){return t};var e,t={},a=Object.prototype,p=a.hasOwnProperty,b=Object.defineProperty||function(ie,V,K){ie[V]=K.value},d=typeof Symbol=="function"?Symbol:{},R=d.iterator||"@@iterator",g=d.asyncIterator||"@@asyncIterator",D=d.toStringTag||"@@toStringTag";function C(ie,V,K){return Object.defineProperty(ie,V,{value:K,enumerable:!0,configurable:!0,writable:!0}),ie[V]}try{C({},"")}catch{C=function(K,de,Ie){return K[de]=Ie}}function G(ie,V,K,de){var Ie=V&&V.prototype instanceof Ge?V:Ge,Pe=Object.create(Ie.prototype),lr=new an(de||[]);return b(Pe,"_invoke",{value:Cn(ie,K,lr)}),Pe}function ne(ie,V,K){try{return{type:"normal",arg:ie.call(V,K)}}catch(de){return{type:"throw",arg:de}}}t.wrap=G;var ve="suspendedStart",ye="suspendedYield",we="executing",De="completed",Be={};function Ge(){}function ze(){}function ar(){}var mr={};C(mr,R,function(){return this});var Pr=Object.getPrototypeOf,Dr=Pr&&Pr(Pr(nn([])));Dr&&Dr!==a&&p.call(Dr,R)&&(mr=Dr);var jr=ar.prototype=Ge.prototype=Object.create(mr);function Pa(ie){["next","throw","return"].forEach(function(V){C(ie,V,function(K){return this._invoke(V,K)})})}function ga(ie,V){function K(Ie,Pe,lr,gr){var xr=ne(ie[Ie],ie,Pe);if(xr.type!=="throw"){var lt=xr.arg,et=lt.value;return et&&H(et)=="object"&&p.call(et,"__await")?V.resolve(et.__await).then(function(st){K("next",st,lr,gr)},function(st){K("throw",st,lr,gr)}):V.resolve(et).then(function(st){lt.value=st,lr(lt)},function(st){return K("throw",st,lr,gr)})}gr(xr.arg)}var de;b(this,"_invoke",{value:function(Pe,lr){function gr(){return new V(function(xr,lt){K(Pe,lr,xr,lt)})}return de=de?de.then(gr,gr):gr()}})}function Cn(ie,V,K){var de=ve;return function(Ie,Pe){if(de===we)throw new Error("Generator is already running");if(de===De){if(Ie==="throw")throw Pe;return{value:e,done:!0}}for(K.method=Ie,K.arg=Pe;;){var lr=K.delegate;if(lr){var gr=hn(lr,K);if(gr){if(gr===Be)continue;return gr}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(de===ve)throw de=De,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);de=we;var xr=ne(ie,V,K);if(xr.type==="normal"){if(de=K.done?De:ye,xr.arg===Be)continue;return{value:xr.arg,done:K.done}}xr.type==="throw"&&(de=De,K.method="throw",K.arg=xr.arg)}}}function hn(ie,V){var K=V.method,de=ie.iterator[K];if(de===e)return V.delegate=null,K==="throw"&&ie.iterator.return&&(V.method="return",V.arg=e,hn(ie,V),V.method==="throw")||K!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+K+"' method")),Be;var Ie=ne(de,ie.iterator,V.arg);if(Ie.type==="throw")return V.method="throw",V.arg=Ie.arg,V.delegate=null,Be;var Pe=Ie.arg;return Pe?Pe.done?(V[ie.resultName]=Pe.value,V.next=ie.nextLoc,V.method!=="return"&&(V.method="next",V.arg=e),V.delegate=null,Be):Pe:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,Be)}function Bn(ie){var V={tryLoc:ie[0]};1 in ie&&(V.catchLoc=ie[1]),2 in ie&&(V.finallyLoc=ie[2],V.afterLoc=ie[3]),this.tryEntries.push(V)}function tn(ie){var V=ie.completion||{};V.type="normal",delete V.arg,ie.completion=V}function an(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(Bn,this),this.reset(!0)}function nn(ie){if(ie||ie===""){var V=ie[R];if(V)return V.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var K=-1,de=function Ie(){for(;++K<ie.length;)if(p.call(ie,K))return Ie.value=ie[K],Ie.done=!1,Ie;return Ie.value=e,Ie.done=!0,Ie};return de.next=de}}throw new TypeError(H(ie)+" is not iterable")}return ze.prototype=ar,b(jr,"constructor",{value:ar,configurable:!0}),b(ar,"constructor",{value:ze,configurable:!0}),ze.displayName=C(ar,D,"GeneratorFunction"),t.isGeneratorFunction=function(ie){var V=typeof ie=="function"&&ie.constructor;return!!V&&(V===ze||(V.displayName||V.name)==="GeneratorFunction")},t.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,ar):(ie.__proto__=ar,C(ie,D,"GeneratorFunction")),ie.prototype=Object.create(jr),ie},t.awrap=function(ie){return{__await:ie}},Pa(ga.prototype),C(ga.prototype,g,function(){return this}),t.AsyncIterator=ga,t.async=function(ie,V,K,de,Ie){Ie===void 0&&(Ie=Promise);var Pe=new ga(G(ie,V,K,de),Ie);return t.isGeneratorFunction(V)?Pe:Pe.next().then(function(lr){return lr.done?lr.value:Pe.next()})},Pa(jr),C(jr,D,"Generator"),C(jr,R,function(){return this}),C(jr,"toString",function(){return"[object Generator]"}),t.keys=function(ie){var V=Object(ie),K=[];for(var de in V)K.push(de);return K.reverse(),function Ie(){for(;K.length;){var Pe=K.pop();if(Pe in V)return Ie.value=Pe,Ie.done=!1,Ie}return Ie.done=!0,Ie}},t.values=nn,an.prototype={constructor:an,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(tn),!V)for(var K in this)K.charAt(0)==="t"&&p.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=e)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var K=this;function de(lt,et){return lr.type="throw",lr.arg=V,K.next=lt,et&&(K.method="next",K.arg=e),!!et}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Pe=this.tryEntries[Ie],lr=Pe.completion;if(Pe.tryLoc==="root")return de("end");if(Pe.tryLoc<=this.prev){var gr=p.call(Pe,"catchLoc"),xr=p.call(Pe,"finallyLoc");if(gr&&xr){if(this.prev<Pe.catchLoc)return de(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return de(Pe.finallyLoc)}else if(gr){if(this.prev<Pe.catchLoc)return de(Pe.catchLoc,!0)}else{if(!xr)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return de(Pe.finallyLoc)}}}},abrupt:function(V,K){for(var de=this.tryEntries.length-1;de>=0;--de){var Ie=this.tryEntries[de];if(Ie.tryLoc<=this.prev&&p.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Pe=Ie;break}}Pe&&(V==="break"||V==="continue")&&Pe.tryLoc<=K&&K<=Pe.finallyLoc&&(Pe=null);var lr=Pe?Pe.completion:{};return lr.type=V,lr.arg=K,Pe?(this.method="next",this.next=Pe.finallyLoc,Be):this.complete(lr)},complete:function(V,K){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&K&&(this.next=K),Be},finish:function(V){for(var K=this.tryEntries.length-1;K>=0;--K){var de=this.tryEntries[K];if(de.finallyLoc===V)return this.complete(de.completion,de.afterLoc),tn(de),Be}},catch:function(V){for(var K=this.tryEntries.length-1;K>=0;--K){var de=this.tryEntries[K];if(de.tryLoc===V){var Ie=de.completion;if(Ie.type==="throw"){var Pe=Ie.arg;tn(de)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(V,K,de){return this.delegate={iterator:nn(V),resultName:K,nextLoc:de},this.method==="next"&&(this.arg=e),Be}},t}function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),a.push.apply(a,p)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?te(Object(a),!0).forEach(function(p){F(e,p,a[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(a,p))})}return e}function F(e,t,a){return t=Y(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Y(e){var t=Q(e,"string");return H(t)=="symbol"?t:String(t)}function Q(e,t){if(H(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var p=a.call(e,t||"default");if(H(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x(e,t,a,p,b,d,R){try{var g=e[d](R),D=g.value}catch(C){a(C);return}g.done?t(D):Promise.resolve(D).then(p,b)}function k(e){return function(){var t=this,a=arguments;return new Promise(function(p,b){var d=e.apply(t,a);function R(D){x(d,p,b,R,g,"next",D)}function g(D){x(d,p,b,R,g,"throw",D)}R(void 0)})}}function ue(e,t){return ge(e)||Le(e,t)||se(e,t)||be()}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var p,b,d,R,g=[],D=!0,C=!1;try{if(d=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;D=!1}else for(;!(D=(p=d.call(a)).done)&&(g.push(p.value),g.length!==t);D=!0);}catch(G){C=!0,b=G}finally{try{if(!D&&a.return!=null&&(R=a.return(),Object(R)!==R))return}finally{if(C)throw b}}return g}}function ge(e){if(Array.isArray(e))return e}function or(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=se(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(C){throw C},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,R=!1,g;return{s:function(){a=a.call(e)},n:function(){var C=a.next();return d=C.done,C},e:function(C){R=!0,g=C},f:function(){try{!d&&a.return!=null&&a.return()}finally{if(R)throw g}}}}function ir(e){return B(e)||w(e)||se(e)||$e()}function $e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){if(e){if(typeof e=="string")return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}}function w(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,p=new Array(t);a<t;a++)p[a]=e[a];return p}var S=re.error,he=re.warn;function Ae(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var xe=33984,Ve=35048,Ne=34962,Ze=34963,Xe=35345,ur=35982,Tr=36386,fr=35713,tr=35714,sr=35632,dr=35633,oe=35981,r=35718,i=35721,f=35971,E=35382,l=35396,o=35398,n=35392,m=35395,v=5126,T=35664,P=35665,I=35666,M=5124,W=35667,q=35668,Z=35669,ae=35670,ee=35671,fe=35672,ce=35673,J=35674,me=35675,Me=35676,He=35678,Ue=35680,je=35679,Se=35682,Re=35685,Qe=35686,ke=35687,qe=35688,We=35689,Je=35690,Ce=36289,Oe=36292,hr=36293,cr=5125,Ar=36294,_r=36295,Mr=36296,Nr=36298,Lr=36299,Qr=36300,ht=36303,yt=36306,pt=36307,vr=36308,ka=36311,bt=3553,Et=34067,jt=32879,Tt=35866,_e={};function fa(e,t){return _e[t].bindPoint}function Wa(e,t){return function(a){e.uniform1f(t,a)}}function Xa(e,t){return function(a){e.uniform1fv(t,a)}}function Ha(e,t){return function(a){e.uniform2fv(t,a)}}function za(e,t){return function(a){e.uniform3fv(t,a)}}function Ya(e,t){return function(a){e.uniform4fv(t,a)}}function ca(e,t){return function(a){e.uniform1i(t,a)}}function la(e,t){return function(a){e.uniform1iv(t,a)}}function sa(e,t){return function(a){e.uniform2iv(t,a)}}function va(e,t){return function(a){e.uniform3iv(t,a)}}function ma(e,t){return function(a){e.uniform4iv(t,a)}}function Ur(e,t){return function(a){e.uniform1ui(t,a)}}function rr(e,t){return function(a){e.uniform1uiv(t,a)}}function dt(e,t){return function(a){e.uniform2uiv(t,a)}}function Zr(e,t){return function(a){e.uniform3uiv(t,a)}}function At(e,t){return function(a){e.uniform4uiv(t,a)}}function Vr(e,t){return function(a){e.uniformMatrix2fv(t,!1,a)}}function yr(e,t){return function(a){e.uniformMatrix3fv(t,!1,a)}}function ha(e,t){return function(a){e.uniformMatrix4fv(t,!1,a)}}function ya(e,t){return function(a){e.uniformMatrix2x3fv(t,!1,a)}}function pa(e,t){return function(a){e.uniformMatrix3x2fv(t,!1,a)}}function Rr(e,t){return function(a){e.uniformMatrix2x4fv(t,!1,a)}}function ut(e,t){return function(a){e.uniformMatrix4x2fv(t,!1,a)}}function Vt(e,t){return function(a){e.uniformMatrix3x4fv(t,!1,a)}}function qa(e,t){return function(a){e.uniformMatrix4x3fv(t,!1,a)}}function br(e,t,a,p){var b=fa(e,t);return U.isWebGL2(e)?function(d){var R,g;!d||re.isTexture(e,d)?(R=d,g=null):(R=d.texture,g=d.sampler),e.uniform1i(p,a),e.activeTexture(xe+a),e.bindTexture(b,R),e.bindSampler(a,g)}:function(d){e.uniform1i(p,a),e.activeTexture(xe+a),e.bindTexture(b,d)}}function Er(e,t,a,p,b){for(var d=fa(e,t),R=new Int32Array(b),g=0;g<b;++g)R[g]=a+g;return U.isWebGL2(e)?function(D){e.uniform1iv(p,R),D.forEach(function(C,G){e.activeTexture(xe+R[G]);var ne,ve;!C||re.isTexture(e,C)?(ne=C,ve=null):(ne=C.texture,ve=C.sampler),e.bindSampler(a,ve),e.bindTexture(d,ne)})}:function(D){e.uniform1iv(p,R),D.forEach(function(C,G){e.activeTexture(xe+R[G]),e.bindTexture(d,C)})}}_e[v]={Type:Float32Array,size:4,setter:Wa,arraySetter:Xa},_e[T]={Type:Float32Array,size:8,setter:Ha,cols:2},_e[P]={Type:Float32Array,size:12,setter:za,cols:3},_e[I]={Type:Float32Array,size:16,setter:Ya,cols:4},_e[M]={Type:Int32Array,size:4,setter:ca,arraySetter:la},_e[W]={Type:Int32Array,size:8,setter:sa,cols:2},_e[q]={Type:Int32Array,size:12,setter:va,cols:3},_e[Z]={Type:Int32Array,size:16,setter:ma,cols:4},_e[cr]={Type:Uint32Array,size:4,setter:Ur,arraySetter:rr},_e[Ar]={Type:Uint32Array,size:8,setter:dt,cols:2},_e[_r]={Type:Uint32Array,size:12,setter:Zr,cols:3},_e[Mr]={Type:Uint32Array,size:16,setter:At,cols:4},_e[ae]={Type:Uint32Array,size:4,setter:ca,arraySetter:la},_e[ee]={Type:Uint32Array,size:8,setter:sa,cols:2},_e[fe]={Type:Uint32Array,size:12,setter:va,cols:3},_e[ce]={Type:Uint32Array,size:16,setter:ma,cols:4},_e[J]={Type:Float32Array,size:32,setter:Vr,rows:2,cols:2},_e[me]={Type:Float32Array,size:48,setter:yr,rows:3,cols:3},_e[Me]={Type:Float32Array,size:64,setter:ha,rows:4,cols:4},_e[Re]={Type:Float32Array,size:32,setter:ya,rows:2,cols:3},_e[Qe]={Type:Float32Array,size:32,setter:Rr,rows:2,cols:4},_e[ke]={Type:Float32Array,size:48,setter:pa,rows:3,cols:2},_e[qe]={Type:Float32Array,size:48,setter:Vt,rows:3,cols:4},_e[We]={Type:Float32Array,size:64,setter:ut,rows:4,cols:2},_e[Je]={Type:Float32Array,size:64,setter:qa,rows:4,cols:3},_e[He]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[Ue]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[je]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},_e[Se]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[Ce]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},_e[Oe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},_e[hr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[Nr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[Lr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},_e[Qr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[ht]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},_e[yt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},_e[pt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},_e[vr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},_e[ka]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt};function St(e,t){return function(a){if(a.value)switch(e.disableVertexAttribArray(t),a.value.length){case 4:e.vertexAttrib4fv(t,a.value);break;case 3:e.vertexAttrib3fv(t,a.value);break;case 2:e.vertexAttrib2fv(t,a.value);break;case 1:e.vertexAttrib1fv(t,a.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Ne,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,a.numComponents||a.size,a.type||v,a.normalize||!1,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function wr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4iv(t,a.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Ne,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||M,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function Cr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4uiv(t,a.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Ne,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||cr,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function kr(e,t,a){var p=a.size,b=a.count;return function(d){e.bindBuffer(Ne,d.buffer);for(var R=d.size||d.numComponents||p,g=R/b,D=d.type||v,C=_e[D],G=C.size*R,ne=d.normalize||!1,ve=d.offset||0,ye=G/b,we=0;we<b;++we)e.enableVertexAttribArray(t+we),e.vertexAttribPointer(t+we,g,D,ne,G,ve+ye*we),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+we,d.divisor||0)}}var er={};er[v]={size:4,setter:St},er[T]={size:8,setter:St},er[P]={size:12,setter:St},er[I]={size:16,setter:St},er[M]={size:4,setter:wr},er[W]={size:8,setter:wr},er[q]={size:12,setter:wr},er[Z]={size:16,setter:wr},er[cr]={size:4,setter:Cr},er[Ar]={size:8,setter:Cr},er[_r]={size:12,setter:Cr},er[Mr]={size:16,setter:Cr},er[ae]={size:4,setter:wr},er[ee]={size:8,setter:wr},er[fe]={size:12,setter:wr},er[ce]={size:16,setter:wr},er[J]={size:4,setter:kr,count:2},er[me]={size:9,setter:kr,count:3},er[Me]={size:16,setter:kr,count:4};var Wr=/ERROR:\s*\d+:(\d+)/gi;function Gr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=ir(t.matchAll(Wr)),b=new Map(p.map(function(d,R){var g=parseInt(d[1]),D=p[R+1],C=D?D.index:t.length,G=t.substring(d.index,C);return[g-1,G]}));return e.split(`
`).map(function(d,R){var g=b.get(R);return"".concat(R+1+a,": ").concat(d).concat(g?`

^^^ `.concat(g):"")}).join(`
`)}var kt=/^[ \t]*\n/;function pr(e){var t=0;return kt.test(e)&&(t=1,e=e.replace(kt,"")),{lineOffset:t,shaderSource:e}}function _t(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function Pt(e,t,a,p){p=p||S;var b=e.getShaderParameter(a,fr);if(!b){var d=e.getShaderInfoLog(a),R=pr(e.getShaderSource(a)),g=R.lineOffset,D=R.shaderSource,C="".concat(Gr(D,d,g),`
Error compiling `).concat(U.glEnumToString(e,t),": ").concat(d);return p(C),C}return""}function Xr(e,t,a){var p,b,d;if(typeof t=="function"&&(a=t,t=void 0),typeof e=="function")a=e,e=void 0;else if(e&&!Array.isArray(e)){var R=e;a=R.errorCallback,e=R.attribLocations,p=R.transformFeedbackVaryings,b=R.transformFeedbackMode,d=R.callback}var g=a||S,D=[],C={errorCallback:function(ve){D.push(ve);for(var ye=arguments.length,we=new Array(ye>1?ye-1:0),De=1;De<ye;De++)we[De-1]=arguments[De];g.apply(void 0,[ve].concat(we))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:d,errors:D};{var G={};Array.isArray(e)?e.forEach(function(ne,ve){G[ne]=t?t[ve]:ve}):G=e||{},C.attribLocations=G}return C}var Hr=["VERTEX_SHADER","FRAGMENT_SHADER"];function ba(e,t){if(t.indexOf("frag")>=0)return sr;if(t.indexOf("vert")>=0)return dr}function Ea(e,t,a){var p=e.getAttachedShaders(t),b=or(p),d;try{for(b.s();!(d=b.n()).done;){var R=d.value;a.has(R)&&e.deleteShader(R)}}catch(g){b.e(g)}finally{b.f()}e.deleteProgram(t)}var Ta=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(a){return setTimeout(a,t)})};function da(e,t,a){for(var p=e.createProgram(),b=Xr(a),d=b.attribLocations,R=b.transformFeedbackVaryings,g=b.transformFeedbackMode,D=0;D<t.length;++D){var C=t[D];if(typeof C=="string"){var G=Ae(C),ne=G?G.text:C,ve=e[Hr[D]];G&&G.type&&(ve=ba(e,G.type)||ve),C=e.createShader(ve),e.shaderSource(C,pr(ne).shaderSource),e.compileShader(C),e.attachShader(p,C)}}Object.entries(d).forEach(function(we){var De=ue(we,2),Be=De[0],Ge=De[1];return e.bindAttribLocation(p,Ge,Be)});{var ye=R;ye&&(ye.attribs&&(ye=ye.attribs),Array.isArray(ye)||(ye=Object.keys(ye)),e.transformFeedbackVaryings(p,ye,g||oe))}return e.linkProgram(p),p}function ft(e,t,a,p,b){var d=Xr(a,p,b),R=new Set(t),g=da(e,t,d);function D(C,G){var ne=Ht(C,G,d.errorCallback);return ne&&Ea(C,G,R),ne}if(d.callback){Wt(e,g).then(function(){var C=D(e,g);d.callback(C,C?void 0:g)});return}return D(e,g)?void 0:g}function zr(e){return function(t,a){for(var p=arguments.length,b=new Array(p>2?p-2:0),d=2;d<p;d++)b[d-2]=arguments[d];return new Promise(function(R,g){var D=Xr.apply(void 0,b);D.callback=function(C,G){C?g(C):R(G)},e(t,a,D)})}}u.createProgramAsync=zr(ft),u.createProgramInfoAsync=zr(c);function Wt(e,t){return Xt.apply(this,arguments)}function Xt(){return Xt=k(le().mark(function e(t,a){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,C){return D.getProgramParameter(C,p.COMPLETION_STATUS_KHR)}:function(){return!0},d=0;case 3:return g.next=5,Ta(d);case 5:d=16.666666666666668;case 6:if(!b(t,a)){g.next=3;break}case 7:case"end":return g.stop()}},e)})),Xt.apply(this,arguments)}function Jr(e,t){return gt.apply(this,arguments)}function gt(){return gt=k(le().mark(function e(t,a){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=0,b=Object.values(a);case 1:if(!(p<b.length)){g.next=8;break}return d=b[p],g.next=5,Wt(t,d);case 5:p++,g.next=1;break;case 8:case"end":return g.stop()}},e)})),gt.apply(this,arguments)}function Ht(e,t,a){a=a||S;var p=e.getProgramParameter(t,tr);if(!p){var b=e.getProgramInfoLog(t);a("Error in program linking: ".concat(b));var d=e.getAttachedShaders(t),R=d.map(function(g){return Pt(e,e.getShaderParameter(g,e.SHADER_TYPE),g,a)});return"".concat(b,`
`).concat(R.filter(function(g){return g}).join(`
`))}}function zt(e,t,a,p,b){var d=Xr(a,p,b),R=[],g=or(t),D;try{for(g.s();!(D=g.n()).done;){var C=D.value,G=Ae(C);if(!G)return _t(d,"unknown script element: ".concat(C));R.push(G.text)}}catch(ne){g.e(ne)}finally{g.f()}return ft(e,R,d)}function Yt(e,t,a,p,b){return ft(e,t,a,p,b)}function qt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var Ka=/(\.|\[|]|\w+)/g,Qa=function(t){return t>="0"&&t<="9"};function ct(e,t,a,p){for(var b=e.split(Ka).filter(function(we){return we!==""}),d=0,R="";;){var g=b[d++];R+=g;var D=Qa(g[0]),C=D?parseInt(g):g;D&&(R+=b[d++]);var G=d===b.length;if(G){a[C]=t;break}else{var ne=b[d++],ve=ne==="[",ye=a[C]||(ve?[]:{});a[C]=ye,a=ye,p[R]=p[R]||function(we){return function(De){_a(we,De)}}(ye),R+=ne}}}function $r(e,t){var a=0;function p(ve,ye,we){var De=ye.name.endsWith("[0]"),Be=ye.type,Ge=_e[Be];if(!Ge)throw new Error("unknown type: 0x".concat(Be.toString(16)));var ze;if(Ge.bindPoint){var ar=a;a+=ye.size,De?ze=Ge.arraySetter(e,Be,ar,we,ye.size):ze=Ge.setter(e,Be,ar,we,ye.size)}else Ge.arraySetter&&De?ze=Ge.arraySetter(e,we):ze=Ge.setter(e,we);return ze.location=we,ze}for(var b={},d={},R=e.getProgramParameter(t,r),g=0;g<R;++g){var D=e.getActiveUniform(t,g);if(!qt(D)){var C=D.name;C.endsWith("[0]")&&(C=C.substr(0,C.length-3));var G=e.getUniformLocation(t,D.name);if(G){var ne=p(t,D,G);b[C]=ne,ct(C,ne,d,b)}}}return b}function wt(e,t){for(var a={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var d=e.getTransformFeedbackVarying(t,b);a[d.name]={index:b,type:d.type,size:d.size}}return a}function xt(e,t,a){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),a.attribs&&(a=a.attribs);for(var p in a){var b=t[p];if(b){var d=a[p];d.offset?e.bindBufferRange(ur,b.index,d.buffer,d.offset,d.size):e.bindBufferBase(ur,b.index,d.buffer)}}}function Kt(e,t,a){var p=e.createTransformFeedback();return e.bindTransformFeedback(Tr,p),e.useProgram(t.program),xt(e,t,a),e.bindTransformFeedback(Tr,null),p}function Yr(e,t){for(var a=e.getProgramParameter(t,r),p=[],b=[],d=0;d<a;++d){b.push(d),p.push({});var R=e.getActiveUniform(t,d);p[d].name=R.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ve){var ye=ve[0],we=ve[1];e.getActiveUniforms(t,b,e[ye]).forEach(function(De,Be){p[Be][we]=De})});for(var g={},D=e.getProgramParameter(t,E),C=0;C<D;++C){var G=e.getActiveUniformBlockName(t,C),ne={index:e.getUniformBlockIndex(t,G),usedByVertexShader:e.getActiveUniformBlockParameter(t,C,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,C,o),size:e.getActiveUniformBlockParameter(t,C,n),uniformIndices:e.getActiveUniformBlockParameter(t,C,m)};ne.used=ne.usedByVertexShader||ne.usedByFragmentShader,g[G]=ne}return{blockSpecs:g,uniformData:p}}var Aa=/\[\d+\]\.$/,Za=function(t,a){return((t+(a-1))/a|0)*a};function Ja(e,t,a,p){if(t||a){p=p||1;var b=e.length,d=b/4;return function(R){for(var g=0,D=0,C=0;C<d;++C){for(var G=0;G<p;++G)e[g++]=R[D++];g+=4-p}}}else return function(R){R.length?e.set(R):e[0]=R}}function Qt(e,t,a,p){var b=a.blockSpecs,d=a.uniformData,R=b[p];if(!R)return he("no uniform block object named:",p),{name:p,uniforms:{}};var g=new ArrayBuffer(R.size),D=e.createBuffer(),C=R.index;e.bindBuffer(Xe,D),e.uniformBlockBinding(t,R.index,C);var G=p+".";Aa.test(G)&&(G=G.replace(Aa,"."));var ne={},ve={},ye={};return R.uniformIndices.forEach(function(we){var De=d[we],Be=De.name;Be.startsWith(G)&&(Be=Be.substr(G.length));var Ge=Be.endsWith("[0]");Ge&&(Be=Be.substr(0,Be.length-3));var ze=_e[De.type],ar=ze.Type,mr=Ge?Za(ze.size,16)*De.size:ze.size*De.size,Pr=new ar(g,De.offset,mr/ar.BYTES_PER_ELEMENT);ne[Be]=Pr;var Dr=Ja(Pr,Ge,ze.rows,ze.cols);ve[Be]=Dr,ct(Be,Dr,ye,ve)}),{name:p,array:g,asFloat:new Float32Array(g),buffer:D,uniforms:ne,setters:ve}}function Zt(e,t,a){return Qt(e,t.program,t.uniformBlockSpec,a)}function Rt(e,t,a){var p=t.uniformBlockSpec||t,b=p.blockSpecs[a.name];if(b){var d=b.index;return e.bindBufferRange(Xe,d,a.buffer,a.offset||0,a.array.byteLength),!0}return!1}function Sa(e,t,a){Rt(e,t,a)&&e.bufferData(Xe,a.array,Ve)}function $a(e,t){var a=e.setters;for(var p in t){var b=a[p];if(b){var d=t[p];b(d)}}}function _a(e,t){for(var a in t){var p=e[a];typeof p=="function"?p(t[a]):_a(e[a],t[a])}}function Ft(e){for(var t=e.uniformSetters||e,a=arguments.length<=1?0:arguments.length-1,p=0;p<a;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var d=b.length,R=0;R<d;++R)Ft(t,b[R]);else for(var g in b){var D=t[g];D&&D(b[g])}}}u.setUniformsAndBindTextures=Ft;function Jt(e,t){for(var a={},p=e.getProgramParameter(t,i),b=0;b<p;++b){var d=e.getActiveAttrib(t,b);if(!qt(d)){var R=e.getAttribLocation(t,d.name),g=er[d.type],D=g.setter(e,R,g);D.location=R,a[d.name]=D}}return a}function $t(e,t){for(var a in t){var p=e[a];p&&p(t[a])}}function en(e,t,a){a.vertexArrayObject?e.bindVertexArray(a.vertexArrayObject):($t(t.attribSetters||t,a.attribs),a.indices&&e.bindBuffer(Ze,a.indices))}function Ct(e,t){var a=$r(e,t),p=Jt(e,t),b={program:t,uniformSetters:a,attribSetters:p};return U.isWebGL2(e)&&(b.uniformBlockSpec=Yr(e,t),b.transformFeedbackInfo=wt(e,t)),b}var rn=/\s|{|}|;/;function c(e,t,a,p,b){var d=Xr(a,p,b),R=[];if(t=t.map(function(C){if(!rn.test(C)){var G=Ae(C);if(G)C=G.text;else{var ne="no element with id: ".concat(C);d.errorCallback(ne),R.push(ne)}}return C}),R.length)return _t(d,"");var g=d.callback;g&&(d.callback=function(C,G){g(C,C?void 0:Ct(e,G))});var D=Yt(e,t,d);return D?Ct(e,D):null}function h(e,t,a,p,b){for(var d=0,R=Object.entries(t);d<R.length;d++){var g=ue(R[d],2),D=g[0],C=g[1],G=Te({},b),ne=a[D];Array.isArray(ne)||Object.assign(G,ne);var ve=Ht(e,C,G.errorCallback);if(ve){for(var ye=0,we=Object.values(t);ye<we.length;ye++){var De=we[ye],Be=e.getAttachedShaders(De);e.deleteProgram(De);var Ge=or(Be),ze;try{for(Ge.s();!(ze=Ge.n()).done;){var ar=ze.value;p.has(ar)||e.deleteShader(ar)}}catch(mr){Ge.e(mr)}finally{Ge.f()}}return ve}}}function y(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(R){var g=ue(R,2),D=g[0],C=g[1],G=Te({},a),ne=Array.isArray(C)?C:C.shaders;return Array.isArray(C)||Object.assign(G,C),ne.forEach(p.add,p),[D,da(e,ne,G)]}));if(a.callback){Jr(e,b).then(function(){var R=h(e,b,t,p,a);a.callback(R,R?void 0:b)});return}var d=h(e,b,t,p,a);return d?void 0:b}function A(e,t,a){a=Xr(a);function p(R,g){return Object.fromEntries(Object.entries(g).map(function(D){var C=ue(D,2),G=C[0],ne=C[1];return[G,Ct(R,ne)]}))}var b=a.callback;b&&(a.callback=function(R,g){b(R,R?void 0:p(e,g))});var d=y(e,t,a);if(!(b||!d))return p(e,d)}u.createProgramsAsync=zr(y),u.createProgramInfosAsync=zr(A)},"./src/textures.js":(Ee,u,X)=>{function H(c){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},H(c)}u.__esModule=!0,u.canFilter=Ta,u.canGenerateMipmap=Ea,u.createSampler=qt,u.createSamplers=Ka,u.createTexture=$t,u.createTextures=rn,u.getBytesPerElementForInternalFormat=Xr,u.getFormatAndTypeForInternalFormat=Hr,u.getNumComponentsForFormat=da,u.loadTextureFromUrl=Sa,u.resizeTexture=en,u.setDefaultTextureColor=Wt,u.setEmptyTexture=Jt,u.setSamplerParameters=Yt,u.setTextureDefaults_=Xt,u.setTextureFilteringForSize=ct,u.setTextureFromArray=Ft,u.setTextureFromElement=Kt,u.setTextureParameters=zt;var U=le(X("./src/utils.js")),re=le(X("./src/typedarrays.js")),z=le(X("./src/helper.js"));function N(c){if(typeof WeakMap!="function")return null;var h=new WeakMap,y=new WeakMap;return(N=function(e){return e?y:h})(c)}function le(c,h){if(!h&&c&&c.__esModule)return c;if(c===null||H(c)!="object"&&typeof c!="function")return{default:c};var y=N(h);if(y&&y.has(c))return y.get(c);var A={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var a=e?Object.getOwnPropertyDescriptor(c,t):null;a&&(a.get||a.set)?Object.defineProperty(A,t,a):A[t]=c[t]}return A.default=c,y&&y.set(c,A),A}var te={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Te=re.isArrayBuffer,F=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),Y=6406,Q=6407,x=6408,k=6409,ue=6410,be=6402,Le=34041,ge=33071,or=9728,ir=9729,$e=3553,se=34067,w=32879,B=35866,O=34069,S=34070,he=34071,Ae=34072,xe=34073,Ve=34074,Ne=10241,Ze=10240,Xe=10242,ur=10243,Tr=32882,fr=33082,tr=33083,sr=33084,dr=33085,oe=34892,r=34893,i=3317,f=3314,E=32878,l=3316,o=3315,n=32877,m=37443,v=37441,T=37440,P=33321,I=36756,M=33325,W=33326,q=33330,Z=33329,ae=33338,ee=33337,fe=33340,ce=33339,J=33323,me=36757,Me=33327,He=33328,Ue=33336,je=33335,Se=33332,Re=33331,Qe=33334,ke=33333,qe=32849,We=35905,Je=36194,Ce=36758,Oe=35898,hr=35901,cr=34843,Ar=34837,_r=36221,Mr=36239,Nr=36215,Lr=36233,Qr=36209,ht=36227,yt=32856,pt=35907,vr=36759,ka=32855,bt=32854,Et=32857,jt=34842,Tt=34836,_e=36220,fa=36238,Wa=36975,Xa=36214,Ha=36232,za=36226,Ya=36208,ca=33189,la=33190,sa=36012,va=36013,ma=35056,Ur=5120,rr=5121,dt=5122,Zr=5123,At=5124,Vr=5125,yr=5126,ha=32819,ya=32820,pa=33635,Rr=5131,ut=36193,Vt=33640,qa=35899,br=35902,Er=36269,St=34042,wr=33319,Cr=33320,kr=6403,er=36244,Wr=36248,Gr=36249,kt={};{var pr=kt;pr[Y]={numColorComponents:1},pr[k]={numColorComponents:1},pr[ue]={numColorComponents:2},pr[Q]={numColorComponents:3},pr[x]={numColorComponents:4},pr[kr]={numColorComponents:1},pr[er]={numColorComponents:1},pr[wr]={numColorComponents:2},pr[Cr]={numColorComponents:2},pr[Q]={numColorComponents:3},pr[Wr]={numColorComponents:3},pr[x]={numColorComponents:4},pr[Gr]={numColorComponents:4},pr[be]={numColorComponents:1},pr[Le]={numColorComponents:2}}var _t;function Pt(c){if(!_t){var h={};h[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[rr,Rr,ut,yr]},h[k]={textureFormat:k,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[rr,Rr,ut,yr]},h[ue]={textureFormat:ue,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[rr,Rr,ut,yr]},h[Q]={textureFormat:Q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[rr,Rr,ut,yr,pa]},h[x]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[rr,Rr,ut,yr,ha,ya]},h[be]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Vr,Zr]},h[P]={textureFormat:kr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[rr]},h[I]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Ur]},h[M]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[yr,Rr]},h[W]={textureFormat:kr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[q]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[rr]},h[Z]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ur]},h[Se]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Zr]},h[Re]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[dt]},h[Qe]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},h[ke]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},h[J]={textureFormat:wr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[rr]},h[me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Ur]},h[Me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[yr,Rr]},h[He]={textureFormat:wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[yr]},h[Ue]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rr]},h[je]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ur]},h[ae]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},h[ee]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dt]},h[fe]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vr]},h[ce]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[At]},h[qe]={textureFormat:Q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[rr]},h[We]={textureFormat:Q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[rr]},h[Je]={textureFormat:Q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[rr,pa]},h[Ce]={textureFormat:Q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ur]},h[Oe]={textureFormat:Q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,qa]},h[hr]={textureFormat:Q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,br]},h[cr]={textureFormat:Q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[yr,Rr]},h[Ar]={textureFormat:Q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},h[_r]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[rr]},h[Mr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ur]},h[Nr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Zr]},h[Lr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[dt]},h[Qr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vr]},h[ht]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[At]},h[yt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rr]},h[pt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rr]},h[vr]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Ur]},h[ka]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[rr,ya,Vt]},h[bt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[rr,ha]},h[Et]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Vt]},h[jt]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[yr,Rr]},h[Tt]={textureFormat:x,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[yr]},h[_e]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rr]},h[fa]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ur]},h[Wa]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vt]},h[Xa]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zr]},h[Ha]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[dt]},h[za]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[At]},h[Ya]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vr]},h[ca]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zr,Vr]},h[la]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},h[sa]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[ma]={textureFormat:Le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[St]},h[va]={textureFormat:Le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(h).forEach(function(y){var A=h[y];A.bytesPerElementMap={},A.bytesPerElement.forEach(function(e,t){var a=A.type[t];A.bytesPerElementMap[a]=e})}),_t=h}return _t[c]}function Xr(c,h){var y=Pt(c);if(!y)throw"unknown internal format";var A=y.bytesPerElementMap[h];if(A===void 0)throw"unknown internal format";return A}function Hr(c){var h=Pt(c);if(!h)throw"unknown internal format";return{format:h.textureFormat,type:h.type[0]}}function ba(c){return(c&c-1)===0}function Ea(c,h,y,A){if(!U.isWebGL2(c))return ba(h)&&ba(y);var e=Pt(A);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function Ta(c){var h=Pt(c);if(!h)throw"unknown internal format";return h.textureFilterable}function da(c){var h=kt[c];if(!h)throw"unknown format: "+c;return h.numColorComponents}function ft(c,h,y){return Te(h)?re.getGLTypeForTypedArray(h):y||rr}function zr(c,h,y,A,e){if(e%1!==0)throw"can't guess dimensions";if(!y&&!A){var t=Math.sqrt(e/(h===se?6:1));t%1===0?(y=t,A=t):(y=e,A=1)}else if(A){if(!y&&(y=e/A,y%1))throw"can't guess dimensions"}else if(A=e/y,A%1)throw"can't guess dimensions";return{width:y,height:A}}function Wt(c){te.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Xt(c){z.copyExistingProperties(c,te),c.textureColor&&Wt(c.textureColor)}function Jr(c,h){h.colorspaceConversion!==void 0&&c.pixelStorei(m,h.colorspaceConversion),h.premultiplyAlpha!==void 0&&c.pixelStorei(v,h.premultiplyAlpha),h.flipY!==void 0&&c.pixelStorei(T,h.flipY)}function gt(c){c.pixelStorei(i,4),U.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(n,0))}function Ht(c,h,y,A){A.minMag&&(y.call(c,h,Ne,A.minMag),y.call(c,h,Ze,A.minMag)),A.min&&y.call(c,h,Ne,A.min),A.mag&&y.call(c,h,Ze,A.mag),A.wrap&&(y.call(c,h,Xe,A.wrap),y.call(c,h,ur,A.wrap),(h===w||z.isSampler(c,h))&&y.call(c,h,Tr,A.wrap)),A.wrapR&&y.call(c,h,Tr,A.wrapR),A.wrapS&&y.call(c,h,Xe,A.wrapS),A.wrapT&&y.call(c,h,ur,A.wrapT),A.minLod!==void 0&&y.call(c,h,fr,A.minLod),A.maxLod!==void 0&&y.call(c,h,tr,A.maxLod),A.baseLevel!==void 0&&y.call(c,h,sr,A.baseLevel),A.maxLevel!==void 0&&y.call(c,h,dr,A.maxLevel),A.compareFunc!==void 0&&y.call(c,h,r,A.compareFunc),A.compareMode!==void 0&&y.call(c,h,oe,A.compareMode)}function zt(c,h,y){var A=y.target||$e;c.bindTexture(A,h),Ht(c,A,c.texParameteri,y)}function Yt(c,h,y){Ht(c,h,c.samplerParameteri,y)}function qt(c,h){var y=c.createSampler();return Yt(c,y,h),y}function Ka(c,h){var y={};return Object.keys(h).forEach(function(A){y[A]=qt(c,h[A])}),y}function Qa(c){return c=c||te.textureColor,Te(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function ct(c,h,y,A,e,t){y=y||te.textureOptions,t=t||x;var a=y.target||$e;if(A=A||y.width,e=e||y.height,c.bindTexture(a,h),Ea(c,A,e,t))c.generateMipmap(a);else{var p=Ta(t)?ir:or;c.texParameteri(a,Ne,p),c.texParameteri(a,Ze,p),c.texParameteri(a,Xe,ge),c.texParameteri(a,ur,ge)}}function $r(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function wt(c,h){return h=h||{},h.cubeFaceOrder||[O,S,he,Ae,xe,Ve]}function xt(c,h){var y=wt(c,h),A=y.map(function(e,t){return{face:e,ndx:t}});return A.sort(function(e,t){return e.face-t.face}),A}function Kt(c,h,y,A){A=A||te.textureOptions;var e=A.target||$e,t=A.level||0,a=y.width,p=y.height,b=A.internalFormat||A.format||x,d=Hr(b),R=A.format||d.format,g=A.type||d.type;if(Jr(c,A),c.bindTexture(e,h),e===se){var D=y.width,C=y.height,G,ne;if(D/6===C)G=C,ne=[0,0,1,0,2,0,3,0,4,0,5,0];else if(C/6===D)G=D,ne=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===C/2)G=D/3,ne=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===C/3)G=D/2,ne=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(y.src?y.src:y.nodeName);var ve=F();ve?(ve.canvas.width=G,ve.canvas.height=G,a=G,p=G,xt(c,A).forEach(function(Pr){var Dr=ne[Pr.ndx*2+0]*G,jr=ne[Pr.ndx*2+1]*G;ve.drawImage(y,Dr,jr,G,G,0,0,G,G),c.texImage2D(Pr.face,t,b,R,g,ve.canvas)}),ve.canvas.width=1,ve.canvas.height=1):typeof createImageBitmap<"u"&&(a=G,p=G,xt(c,A).forEach(function(Pr){var Dr=ne[Pr.ndx*2+0]*G,jr=ne[Pr.ndx*2+1]*G;c.texImage2D(Pr.face,t,b,G,G,0,R,g,null),createImageBitmap(y,Dr,jr,G,G,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(Pa){Jr(c,A),c.bindTexture(e,h),c.texImage2D(Pr.face,t,b,R,g,Pa),$r(A)&&ct(c,h,A,a,p,b)})}))}else if(e===w||e===B){var ye=Math.min(y.width,y.height),we=Math.max(y.width,y.height),De=we/ye;if(De%1!==0)throw"can not compute 3D dimensions of element";var Be=y.width===we?1:0,Ge=y.height===we?1:0;c.pixelStorei(i,1),c.pixelStorei(f,y.width),c.pixelStorei(E,0),c.pixelStorei(n,0),c.texImage3D(e,t,b,ye,ye,ye,0,R,g,null);for(var ze=0;ze<De;++ze){var ar=ze*ye*Be,mr=ze*ye*Ge;c.pixelStorei(l,ar),c.pixelStorei(o,mr),c.texSubImage3D(e,t,0,0,ze,ye,ye,1,R,g,y)}gt(c)}else c.texImage2D(e,t,b,R,g,y);$r(A)&&ct(c,h,A,a,p,b),zt(c,h,A)}function Yr(){}function Aa(c){if(typeof document<"u"){var h=document.createElement("a");return h.href=c,h.hostname===location.hostname&&h.port===location.port&&h.protocol===location.protocol}else{var y=new URL(location.href).origin,A=new URL(c,location.href).origin;return A===y}}function Za(c,h){return h===void 0&&!Aa(c)?"anonymous":h}function Ja(c,h,y){y=y||Yr;var A;if(h=h!==void 0?h:te.crossOrigin,h=Za(c,h),typeof Image<"u"){A=new Image,h!==void 0&&(A.crossOrigin=h);var e=function(){A.removeEventListener("error",t),A.removeEventListener("load",a),A=null},t=function(){var D="couldn't load image: "+c;z.error(D),y(D,A),e()},a=function(){y(null,A),e()};return A.addEventListener("error",t),A.addEventListener("load",a),A.src=c,A}else if(typeof ImageBitmap<"u"){var p,b,d=function(){y(p,b)},R={};h&&(R.mode="cors"),fetch(c,R).then(function(g){if(!g.ok)throw g;return g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){b=g,setTimeout(d)}).catch(function(g){p=g,setTimeout(d)}),A=null}return A}function Qt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function Zt(c,h,y){return Qt(c)?(setTimeout(function(){y(null,c)}),c):Ja(c,h,y)}function Rt(c,h,y){y=y||te.textureOptions;var A=y.target||$e;if(c.bindTexture(A,h),y.color!==!1){var e=Qa(y.color);if(A===se)for(var t=0;t<6;++t)c.texImage2D(O+t,0,x,1,1,0,x,rr,e);else A===w||A===B?c.texImage3D(A,0,x,1,1,1,0,x,rr,e):c.texImage2D(A,0,x,1,1,0,x,rr,e)}}function Sa(c,h,y,A){A=A||Yr,y=y||te.textureOptions,Rt(c,h,y),y=Object.assign({},y);var e=Zt(y.src,y.crossOrigin,function(t,a){t?A(t,h,a):(Kt(c,h,a,y),A(null,h,a))});return e}function $a(c,h,y,A){A=A||Yr;var e=y.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=y.level||0,a=y.internalFormat||y.format||x,p=Hr(a),b=y.format||p.format,d=y.type||rr,R=y.target||$e;if(R!==se)throw"target must be TEXTURE_CUBE_MAP";Rt(c,h,y),y=Object.assign({},y);var g=6,D=[],C=wt(c,y),G;function ne(ve){return function(ye,we){--g,ye?D.push(ye):we.width!==we.height?D.push("cubemap face img is not a square: "+we.src):(Jr(c,y),c.bindTexture(R,h),g===5?wt().forEach(function(De){c.texImage2D(De,t,a,b,d,we)}):c.texImage2D(ve,t,a,b,d,we),$r(y)&&c.generateMipmap(R)),g===0&&A(D.length?D:void 0,h,G)}}G=e.map(function(ve,ye){return Zt(ve,y.crossOrigin,ne(C[ye]))})}function _a(c,h,y,A){A=A||Yr;var e=y.src,t=y.internalFormat||y.format||x,a=Hr(t),p=y.format||a.format,b=y.type||rr,d=y.target||B;if(d!==w&&d!==B)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Rt(c,h,y),y=Object.assign({},y);var R=e.length,g=[],D,C=y.level||0,G=y.width,ne=y.height,ve=e.length,ye=!0;function we(De){return function(Be,Ge){if(--R,Be)g.push(Be);else{if(Jr(c,y),c.bindTexture(d,h),ye){ye=!1,G=y.width||Ge.width,ne=y.height||Ge.height,c.texImage3D(d,C,t,G,ne,ve,0,p,b,null);for(var ze=0;ze<ve;++ze)c.texSubImage3D(d,C,0,0,ze,G,ne,1,p,b,Ge)}else{var ar=Ge,mr;(Ge.width!==G||Ge.height!==ne)&&(mr=F(),ar=mr.canvas,mr.canvas.width=G,mr.canvas.height=ne,mr.drawImage(Ge,0,0,G,ne)),c.texSubImage3D(d,C,0,0,De,G,ne,1,p,b,ar),mr&&ar===mr.canvas&&(mr.canvas.width=0,mr.canvas.height=0)}$r(y)&&c.generateMipmap(d)}R===0&&A(g.length?g:void 0,h,D)}}D=e.map(function(De,Be){return Zt(De,y.crossOrigin,we(Be))})}function Ft(c,h,y,A){A=A||te.textureOptions;var e=A.target||$e;c.bindTexture(e,h);var t=A.width,a=A.height,p=A.depth,b=A.level||0,d=A.internalFormat||A.format||x,R=Hr(d),g=A.format||R.format,D=A.type||ft(c,y,R.type);if(Te(y))y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));else{var C=re.getTypedArrayTypeForGLType(D);y=new C(y)}var G=Xr(d,D),ne=y.byteLength/G;if(ne%1)throw"length wrong size for format: "+U.glEnumToString(c,g);var ve;if(e===w||e===B)if(!t&&!a&&!p){var ye=Math.cbrt(ne);if(ye%1!==0)throw"can't guess cube size of array of numElements: "+ne;t=ye,a=ye,p=ye}else t&&(!a||!p)?(ve=zr(c,e,a,p,ne/t),a=ve.width,p=ve.height):a&&(!t||!p)?(ve=zr(c,e,t,p,ne/a),t=ve.width,p=ve.height):(ve=zr(c,e,t,a,ne/p),t=ve.width,a=ve.height);else ve=zr(c,e,t,a,ne),t=ve.width,a=ve.height;if(gt(c),c.pixelStorei(i,A.unpackAlignment||1),Jr(c,A),e===se){var we=G/y.BYTES_PER_ELEMENT,De=ne/6*we;xt(c,A).forEach(function(Be){var Ge=De*Be.ndx,ze=y.subarray(Ge,Ge+De);c.texImage2D(Be.face,b,d,t,a,0,g,D,ze)})}else e===w||e===B?c.texImage3D(e,b,d,t,a,p,0,g,D,y):c.texImage2D(e,b,d,t,a,0,g,D,y);return{width:t,height:a,depth:p,type:D}}function Jt(c,h,y){var A=y.target||$e;c.bindTexture(A,h);var e=y.level||0,t=y.internalFormat||y.format||x,a=Hr(t),p=y.format||a.format,b=y.type||a.type;if(Jr(c,y),A===se)for(var d=0;d<6;++d)c.texImage2D(O+d,e,t,y.width,y.height,0,p,b,null);else A===w||A===B?c.texImage3D(A,e,t,y.width,y.height,y.depth,0,p,b,null):c.texImage2D(A,e,t,y.width,y.height,0,p,b,null)}function $t(c,h,y){y=y||Yr,h=h||te.textureOptions;var A=c.createTexture(),e=h.target||$e,t=h.width||1,a=h.height||1,p=h.internalFormat||x;c.bindTexture(e,A),e===se&&(c.texParameteri(e,Xe,ge),c.texParameteri(e,ur,ge));var b=h.src;if(b)if(typeof b=="function"&&(b=b(c,h)),typeof b=="string")Sa(c,A,h,y);else if(Te(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||Te(b[0]))){var d=Ft(c,A,b,h);t=d.width,a=d.height}else Array.isArray(b)&&(typeof b[0]=="string"||Qt(b[0]))?e===se?$a(c,A,h,y):_a(c,A,h,y):(Kt(c,A,b,h),t=b.width,a=b.height);else Jt(c,A,h);return $r(h)&&ct(c,A,h,t,a,p),zt(c,A,h),A}function en(c,h,y,A,e,t){A=A||y.width,e=e||y.height,t=t||y.depth;var a=y.target||$e;c.bindTexture(a,h);var p=y.level||0,b=y.internalFormat||y.format||x,d=Hr(b),R=y.format||d.format,g,D=y.src;if(D&&(Te(D)||Array.isArray(D)&&typeof D[0]=="number")?g=y.type||ft(c,D,d.type):g=y.type||d.type,a===se)for(var C=0;C<6;++C)c.texImage2D(O+C,p,b,A,e,0,R,g,null);else a===w||a===B?c.texImage3D(a,p,b,A,e,t,0,R,g,null):c.texImage2D(a,p,b,A,e,0,R,g,null)}function Ct(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function rn(c,h,y){y=y||Yr;var A=0,e=[],t={},a={};function p(){A===0&&setTimeout(function(){y(e.length?e:void 0,t,a)},0)}return Object.keys(h).forEach(function(b){var d=h[b],R;Ct(d.src)&&(R=function(D,C,G){a[b]=G,--A,D&&e.push(D),p()},++A),t[b]=$t(c,d,R)}),p(),t}},"./src/twgl-full.js":(Ee,u,X)=>{function H(F){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},H(F)}u.__esModule=!0;var U={m4:!0,v3:!0,primitives:!0};u.v3=u.primitives=u.m4=void 0;var re=Te(X("./src/m4.js"));u.m4=re;var z=Te(X("./src/v3.js"));u.v3=z;var N=Te(X("./src/primitives.js"));u.primitives=N;var le=X("./src/twgl.js");Object.keys(le).forEach(function(F){F==="default"||F==="__esModule"||Object.prototype.hasOwnProperty.call(U,F)||F in u&&u[F]===le[F]||(u[F]=le[F])});function te(F){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Q=new WeakMap;return(te=function(k){return k?Q:Y})(F)}function Te(F,Y){if(!Y&&F&&F.__esModule)return F;if(F===null||H(F)!="object"&&typeof F!="function")return{default:F};var Q=te(Y);if(Q&&Q.has(F))return Q.get(F);var x={__proto__:null},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=k?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,Q&&Q.set(F,x),x}},"./src/twgl.js":(Ee,u,X)=>{function H(S){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},H(S)}u.__esModule=!0;var U={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};u.addExtensionsToContext=ir,u.framebuffers=u.draw=u.attributes=void 0,u.getContext=B,u.getWebGLContext=se,u.programs=void 0,u.resizeCanvasToDisplaySize=O,u.setDefaults=be,u.vertexArrays=u.utils=u.typedarrays=u.textures=void 0;var re=k(X("./src/attributes.js"));u.attributes=re,Object.keys(re).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===re[S]||(u[S]=re[S])});var z=k(X("./src/textures.js"));u.textures=z,Object.keys(z).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===z[S]||(u[S]=z[S])});var N=k(X("./src/helper.js")),le=k(X("./src/utils.js"));u.utils=le,Object.keys(le).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===le[S]||(u[S]=le[S])});var te=k(X("./src/draw.js"));u.draw=te,Object.keys(te).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===te[S]||(u[S]=te[S])});var Te=k(X("./src/framebuffers.js"));u.framebuffers=Te,Object.keys(Te).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===Te[S]||(u[S]=Te[S])});var F=k(X("./src/programs.js"));u.programs=F,Object.keys(F).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===F[S]||(u[S]=F[S])});var Y=k(X("./src/typedarrays.js"));u.typedarrays=Y,Object.keys(Y).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===Y[S]||(u[S]=Y[S])});var Q=k(X("./src/vertex-arrays.js"));u.vertexArrays=Q,Object.keys(Q).forEach(function(S){S==="default"||S==="__esModule"||Object.prototype.hasOwnProperty.call(U,S)||S in u&&u[S]===Q[S]||(u[S]=Q[S])});function x(S){if(typeof WeakMap!="function")return null;var he=new WeakMap,Ae=new WeakMap;return(x=function(Ve){return Ve?Ae:he})(S)}function k(S,he){if(!he&&S&&S.__esModule)return S;if(S===null||H(S)!="object"&&typeof S!="function")return{default:S};var Ae=x(he);if(Ae&&Ae.has(S))return Ae.get(S);var xe={__proto__:null},Ve=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ne in S)if(Ne!=="default"&&Object.prototype.hasOwnProperty.call(S,Ne)){var Ze=Ve?Object.getOwnPropertyDescriptor(S,Ne):null;Ze&&(Ze.get||Ze.set)?Object.defineProperty(xe,Ne,Ze):xe[Ne]=S[Ne]}return xe.default=S,Ae&&Ae.set(S,xe),xe}var ue={addExtensionsToContext:!0};function be(S){N.copyExistingProperties(S,ue),re.setAttributeDefaults_(S),z.setTextureDefaults_(S)}var Le=/^(.*?)_/;function ge(S,he){le.glEnumToString(S,0);var Ae=S.getExtension(he);if(Ae){var xe={},Ve=Le.exec(he)[1],Ne="_"+Ve;for(var Ze in Ae){var Xe=Ae[Ze],ur=typeof Xe=="function",Tr=ur?Ve:Ne,fr=Ze;Ze.endsWith(Tr)&&(fr=Ze.substring(0,Ze.length-Tr.length)),S[fr]!==void 0?!ur&&S[fr]!==Xe&&N.warn(fr,S[fr],Xe,Ze):ur?S[fr]=function(tr){return function(){return tr.apply(Ae,arguments)}}(Xe):(S[fr]=Xe,xe[fr]=Xe)}xe.constructor={name:Ae.constructor.name},le.glEnumToString(xe,0)}return Ae}var or=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function ir(S){for(var he=0;he<or.length;++he)ge(S,or[he])}function $e(S,he){for(var Ae=["webgl","experimental-webgl"],xe=null,Ve=0;Ve<Ae.length;++Ve)if(xe=S.getContext(Ae[Ve],he),xe){ue.addExtensionsToContext&&ir(xe);break}return xe}function se(S,he){var Ae=$e(S,he);return Ae}function w(S,he){for(var Ae=["webgl2","webgl","experimental-webgl"],xe=null,Ve=0;Ve<Ae.length;++Ve)if(xe=S.getContext(Ae[Ve],he),xe){ue.addExtensionsToContext&&ir(xe);break}return xe}function B(S,he){var Ae=w(S,he);return Ae}function O(S,he){he=he||1,he=Math.max(0,he);var Ae=S.clientWidth*he|0,xe=S.clientHeight*he|0;return S.width!==Ae||S.height!==xe?(S.width=Ae,S.height=xe,!0):!1}},"./src/typedarrays.js":(Ee,u)=>{u.__esModule=!0,u.getGLTypeForTypedArray=or,u.getGLTypeForTypedArrayType=ir,u.getTypedArrayTypeForGLType=$e,u.isArrayBuffer=void 0;var X=5120,H=5121,U=5122,re=5123,z=5124,N=5125,le=5126,te=32819,Te=32820,F=33635,Y=5131,Q=33640,x=35899,k=35902,ue=36269,be=34042,Le={};{var ge=Le;ge[X]=Int8Array,ge[H]=Uint8Array,ge[U]=Int16Array,ge[re]=Uint16Array,ge[z]=Int32Array,ge[N]=Uint32Array,ge[le]=Float32Array,ge[te]=Uint16Array,ge[Te]=Uint16Array,ge[F]=Uint16Array,ge[Y]=Uint16Array,ge[Q]=Uint32Array,ge[x]=Uint32Array,ge[k]=Uint32Array,ge[ue]=Uint32Array,ge[be]=Uint32Array}function or(se){if(se instanceof Int8Array)return X;if(se instanceof Uint8Array||se instanceof Uint8ClampedArray)return H;if(se instanceof Int16Array)return U;if(se instanceof Uint16Array)return re;if(se instanceof Int32Array)return z;if(se instanceof Uint32Array)return N;if(se instanceof Float32Array)return le;throw new Error("unsupported typed array type")}function ir(se){if(se===Int8Array)return X;if(se===Uint8Array||se===Uint8ClampedArray)return H;if(se===Int16Array)return U;if(se===Uint16Array)return re;if(se===Int32Array)return z;if(se===Uint32Array)return N;if(se===Float32Array)return le;throw new Error("unsupported typed array type")}function $e(se){var w=Le[se];if(!w)throw new Error("unknown gl type");return w}u.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(w){return w&&w.buffer&&(w.buffer instanceof ArrayBuffer||w.buffer instanceof SharedArrayBuffer)}:function(w){return w&&w.buffer&&w.buffer instanceof ArrayBuffer}},"./src/utils.js":(Ee,u)=>{u.__esModule=!0,u.glEnumToString=void 0,u.isWebGL1=H,u.isWebGL2=X;function X(U){return!!U.texStorage2D}function H(U){return!U.texStorage2D}u.glEnumToString=function(){var U={},re={};function z(N){var le=N.constructor.name;if(!U[le]){for(var te in N)if(typeof N[te]=="number"){var Te=re[N[te]];re[N[te]]=Te?"".concat(Te," | ").concat(te):te}U[le]=!0}}return function(le,te){return z(le),re[te]||(typeof te=="number"?"0x".concat(te.toString(16)):te)}}()},"./src/v3.js":(Ee,u)=>{u.__esModule=!0,u.add=re,u.copy=ir,u.create=U,u.cross=Q,u.distance=be,u.distanceSq=Le,u.divScalar=Y,u.divide=se,u.dot=x,u.length=k,u.lengthSq=ue,u.lerp=N,u.lerpV=le,u.max=te,u.min=Te,u.mulScalar=F,u.multiply=$e,u.negate=or,u.normalize=ge,u.setDefaultType=H,u.subtract=z;var X=Float32Array;function H(w){var B=X;return X=w,B}function U(w,B,O){var S=new X(3);return w&&(S[0]=w),B&&(S[1]=B),O&&(S[2]=O),S}function re(w,B,O){return O=O||new X(3),O[0]=w[0]+B[0],O[1]=w[1]+B[1],O[2]=w[2]+B[2],O}function z(w,B,O){return O=O||new X(3),O[0]=w[0]-B[0],O[1]=w[1]-B[1],O[2]=w[2]-B[2],O}function N(w,B,O,S){return S=S||new X(3),S[0]=w[0]+O*(B[0]-w[0]),S[1]=w[1]+O*(B[1]-w[1]),S[2]=w[2]+O*(B[2]-w[2]),S}function le(w,B,O,S){return S=S||new X(3),S[0]=w[0]+O[0]*(B[0]-w[0]),S[1]=w[1]+O[1]*(B[1]-w[1]),S[2]=w[2]+O[2]*(B[2]-w[2]),S}function te(w,B,O){return O=O||new X(3),O[0]=Math.max(w[0],B[0]),O[1]=Math.max(w[1],B[1]),O[2]=Math.max(w[2],B[2]),O}function Te(w,B,O){return O=O||new X(3),O[0]=Math.min(w[0],B[0]),O[1]=Math.min(w[1],B[1]),O[2]=Math.min(w[2],B[2]),O}function F(w,B,O){return O=O||new X(3),O[0]=w[0]*B,O[1]=w[1]*B,O[2]=w[2]*B,O}function Y(w,B,O){return O=O||new X(3),O[0]=w[0]/B,O[1]=w[1]/B,O[2]=w[2]/B,O}function Q(w,B,O){O=O||new X(3);var S=w[2]*B[0]-w[0]*B[2],he=w[0]*B[1]-w[1]*B[0];return O[0]=w[1]*B[2]-w[2]*B[1],O[1]=S,O[2]=he,O}function x(w,B){return w[0]*B[0]+w[1]*B[1]+w[2]*B[2]}function k(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])}function ue(w){return w[0]*w[0]+w[1]*w[1]+w[2]*w[2]}function be(w,B){var O=w[0]-B[0],S=w[1]-B[1],he=w[2]-B[2];return Math.sqrt(O*O+S*S+he*he)}function Le(w,B){var O=w[0]-B[0],S=w[1]-B[1],he=w[2]-B[2];return O*O+S*S+he*he}function ge(w,B){B=B||new X(3);var O=w[0]*w[0]+w[1]*w[1]+w[2]*w[2],S=Math.sqrt(O);return S>1e-5?(B[0]=w[0]/S,B[1]=w[1]/S,B[2]=w[2]/S):(B[0]=0,B[1]=0,B[2]=0),B}function or(w,B){return B=B||new X(3),B[0]=-w[0],B[1]=-w[1],B[2]=-w[2],B}function ir(w,B){return B=B||new X(3),B[0]=w[0],B[1]=w[1],B[2]=w[2],B}function $e(w,B,O){return O=O||new X(3),O[0]=w[0]*B[0],O[1]=w[1]*B[1],O[2]=w[2]*B[2],O}function se(w,B,O){return O=O||new X(3),O[0]=w[0]/B[0],O[1]=w[1]/B[1],O[2]=w[2]/B[2],O}},"./src/vertex-arrays.js":(Ee,u,X)=>{function H(F){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},H(F)}u.__esModule=!0,u.createVAOAndSetAttributes=te,u.createVAOFromBufferInfo=Te,u.createVertexArrayInfo=le;var U=z(X("./src/programs.js"));function re(F){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Q=new WeakMap;return(re=function(k){return k?Q:Y})(F)}function z(F,Y){if(!Y&&F&&F.__esModule)return F;if(F===null||H(F)!="object"&&typeof F!="function")return{default:F};var Q=re(Y);if(Q&&Q.has(F))return Q.get(F);var x={__proto__:null},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=k?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,Q&&Q.set(F,x),x}var N=34963;function le(F,Y,Q){var x=F.createVertexArray();return F.bindVertexArray(x),Y.length||(Y=[Y]),Y.forEach(function(k){U.setBuffersAndAttributes(F,k,Q)}),F.bindVertexArray(null),{numElements:Q.numElements,elementType:Q.elementType,vertexArrayObject:x}}function te(F,Y,Q,x){var k=F.createVertexArray();return F.bindVertexArray(k),U.setAttributes(Y,Q),x&&F.bindBuffer(N,x),F.bindVertexArray(null),k}function Te(F,Y,Q){return te(F,Y.attribSetters||Y,Q.attribs,Q.indices)}}},j={};function L(Ee){var u=j[Ee];if(u!==void 0)return u.exports;var X=j[Ee]={exports:{}};return _[Ee](X,X.exports,L),X.exports}var pe=L("./src/twgl-full.js");return pe})())})(Sn);var rt=Sn.exports,Fr,Ir,nt,Lt,ot,Sr,it,Kr,Ut,na,oa,vn,mn,ia,Gt,Oa,_n,Na,Pn,La,gn,ua,sn,Ua,wn,Ga,xn,ja,Rn,Va,Fn;class Nn{constructor(){Fe(this,Oa);Fe(this,Na);Fe(this,La);Fe(this,ua);Fe(this,Ua);Fe(this,Ga);Fe(this,ja);Fe(this,Va);Or(this,"canvas",document.querySelector("#canvas"));Or(this,"gl");Fe(this,Fr,new Map);Fe(this,Ir,new Map);Fe(this,nt,void 0);Fe(this,Lt,void 0);Fe(this,ot,void 0);Fe(this,Sr,new Uint8Array(600));Fe(this,it,void 0);Fe(this,Kr,new Uint8Array(3*40));Fe(this,Ut,void 0);Fe(this,na,document.createTextNode("0"));Fe(this,oa,document.createTextNode("1"));Fe(this,vn,0);Fe(this,mn,0);Fe(this,ia,new Map);Fe(this,Gt,document.styleSheets[0].cssRules);document.querySelector("#linesCleared").appendChild($(this,na)),document.querySelector("#speedLevel").appendChild($(this,oa)),$(this,Fr).set(1,[255,0,0]),$(this,Fr).set(2,[0,255,0]),$(this,Fr).set(3,[255,255,0]),$(this,Fr).set(4,[0,0,255]),$(this,Fr).set(5,[180,90,246]),$(this,Fr).set(6,[0,255,255]),$(this,Fr).set(7,[255,140,40]),$(this,Ir).set("Z",1),$(this,Ir).set("S",2),$(this,Ir).set("O",3),$(this,Ir).set("J",4),$(this,Ir).set("T",5),$(this,Ir).set("I",6),$(this,Ir).set("L",7);let s=this.canvas.getContext("webgl");this.gl=s,s||document.body.appendChild(document.createTextNode("WebGL is not supported."));function _(H,U,re,z){return[H,U+z,H+re,U+z,H+re,U,H,U]}function j(H,U,re,z){let N=[H/2,H],le=[],te=(300-N[1])/2,Te=(400-N[0])/2;le.push(..._(Te,te,N[0],N[1])),le.push(..._(Te-U-z,te,z,z));for(let F=0;F<3;F++)le.push(..._(Te+U+N[0],te+F*(z+re),z,z));return le}const L={a_Position:{numComponents:2,data:j(250,3,0,30)},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16]}};nr(this,Lt,rt.createBufferInfoFromArrays(s,L));let pe=document.querySelector("#vertex-shader-2d").text,Ee=document.querySelector("#fragment-shader-2d").text;nr(this,nt,rt.createProgramInfo(s,[pe,Ee]));let u={src:"textures/block.png",mag:s.LINEAR};nr(this,Ut,rt.createTexture(this.gl,u)),nr(this,ot,s.createTexture()),s.bindTexture(s.TEXTURE_2D,$(this,ot)),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_2D,0,s.RGB,10,20,0,s.RGB,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),nr(this,it,s.createTexture()),s.bindTexture(s.TEXTURE_2D,$(this,it)),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_2D,0,s.RGB,4,2*5,0,s.RGB,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.useProgram($(this,nt).program),rt.setBuffersAndAttributes(s,$(this,nt),$(this,Lt));let X={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:$(this,ot),u_QueueData:$(this,it),u_BlockTexture:$(this,Ut)};rt.setUniforms($(this,nt),X),Ke(this,Ga,xn).call(this,"#gameSpace")}updateData(s){Ke(this,Oa,_n).call(this,s),Ke(this,La,gn).call(this,s),Ke(this,Ua,wn).call(this,s)}renderGame(){rt.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),Ke(this,Va,Fn).call(this);let s={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:$(this,ot),u_QueueData:$(this,it),u_BlockTexture:$(this,Ut)};rt.setUniforms($(this,nt),s),rt.drawBufferInfo(this.gl,$(this,Lt))}}Fr=new WeakMap,Ir=new WeakMap,nt=new WeakMap,Lt=new WeakMap,ot=new WeakMap,Sr=new WeakMap,it=new WeakMap,Kr=new WeakMap,Ut=new WeakMap,na=new WeakMap,oa=new WeakMap,vn=new WeakMap,mn=new WeakMap,ia=new WeakMap,Gt=new WeakMap,Oa=new WeakSet,_n=function(s){for(let _=0;_<20;_++){let j=s.gridData[_];for(let L=0;L<10;L++){let pe=Ke(this,Na,Pn).call(this,j,L),Ee=3*(10*_+L);if(pe!=0){let u=$(this,Fr).get(pe);$(this,Sr)[Ee]=u[0],$(this,Sr)[Ee+1]=u[1],$(this,Sr)[Ee+2]=u[2]}else $(this,Sr)[Ee]=0,$(this,Sr)[Ee+1]=0,$(this,Sr)[Ee+2]=0}}if(s.playerPiece.active){let _=170;for(let L=0;L<4;L++){let pe=3*(10*s.ghostBlocks[L][1]+s.ghostBlocks[L][0]);$(this,Sr)[pe]=_,$(this,Sr)[pe+1]=_,$(this,Sr)[pe+2]=_}let j=s.playerPiece.shape;for(let L=0;L<4;L++){let pe=$(this,Fr).get($(this,Ir).get(j)),Ee=3*(10*s.playerPiece.blocks[L][1]+s.playerPiece.blocks[L][0]);$(this,Sr)[Ee]=pe[0],$(this,Sr)[Ee+1]=pe[1],$(this,Sr)[Ee+2]=pe[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,$(this,ot)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,$(this,Sr))},Na=new WeakSet,Pn=function(s,_){const j=32-(3+3*_),L=7<<j;return(s&L)>>>j},La=new WeakSet,gn=function(s){for(let _=0;_<$(this,Kr).length;_++)$(this,Kr)[_]=0;s.heldPiece!=null&&Ke(this,ua,sn).call(this,s.heldPiece,0);for(let _=0;_<4;_++)Ke(this,ua,sn).call(this,s.pieceQueue[_],24*(1+_));this.gl.bindTexture(this.gl.TEXTURE_2D,$(this,it)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,$(this,Kr))},ua=new WeakSet,sn=function(s,_){let j=tt.getBaseShape(s),L=$(this,Fr).get($(this,Ir).get(s));for(let pe=0;pe<4;pe++){let Ee=j[pe],u=_+3*(Ee[1]*4+Ee[0]);$(this,Kr)[u]=L[0],$(this,Kr)[u+1]=L[1],$(this,Kr)[u+2]=L[2]}},Ua=new WeakSet,wn=function(s){$(this,na).nodeValue=s.linesCleared,$(this,oa).nodeValue=s.speedLevel==11?"MAX":s.speedLevel},Ga=new WeakSet,xn=function(s){const _=document.querySelector(s),j=Ke(this,ja,Rn).call(this,s);j!=null&&$(this,ia).set(_,j)},ja=new WeakSet,Rn=function(s){let _=null;for(let j=0;j<$(this,Gt).length&&_==null;j++)$(this,Gt)[j].selectorText==s&&(_=$(this,Gt)[j].style);return _},Va=new WeakSet,Fn=function(){const s=this.gl.canvas.width,_=this.gl.canvas.height,j=3*s>4*_;$(this,ia).forEach(function(L,pe,Ee){const u=L.left!="",X=L.top!="";let H=u?L.left:L.right,U=X?L.top:L.bottom,re=L.fontSize,z=L.width,N=L.height;H=Number(H.substring(0,H.length-2)),U=Number(U.substring(0,U.length-2)),z=Number(z.substring(0,z.length-2)),N=Number(N.substring(0,N.length-2)),re!=""&&(re=Number(re.substring(0,re.length-2))),j?(H=(4*_*(H-50)+150*s)/(3*s)+"vw",z=z*4*_/(3*s)+"vw",U=U+"vh",N=N+"vh"):(U=U*3*s/(4*_)+(100*_-75*s)/(2*_)+"vh",N=N*3*s/(4*_)+"vh",H=H+"vw",z=z+"vw",re!=""&&(re=re*3*s/(4*_))),re!=""&&(pe.style.fontSize=re+"vh"),u?pe.style.left=H:pe.style.right=H,X?pe.style.top=U:pe.style.bottom=U,pe.style.width=z,pe.style.height=N})};function Ln(){let Ye=document.createTextNode("");document.querySelector("#debug").appendChild(Ye);const s=document.querySelector("#startButton");let _=new Dn;document.addEventListener("keydown",function(N){_.setInputState(N.key,!0)}),document.addEventListener("keyup",function(N){_.setInputState(N.key,!1)});let j=new fn,L=new Nn;const pe=document.querySelector("#titleScreen"),Ee=document.querySelector("#pauseScreen"),u=document.querySelector("#gameOverScreen");let X=!0,H=0,U=0;function re(N){let le=(N-U)*.001;U=N,H+=le,j.gameState.gameOver?X||u.classList.contains("hide")&&u.classList.remove("hide"):(H>=j.gameTickTime&&(H=Math.min(H-j.gameTickTime,j.gameTickTime),j.runTick(_),_.getCounter("Pause")==1&&(j.gameState.isPaused?(j.pauseGame(!1),Ee.classList.add("hide")):(j.pauseGame(!0),Ee.classList.remove("hide")))),j.isStateChanged&&L.updateData(j.gameState)),L.renderGame(),requestAnimationFrame(re)}function z(){j.startNewGame(),L.updateData(j.gameState),L.renderGame(),document.querySelector("#titleScreen").classList.add("hide"),document.querySelector("#gameGUI").classList.remove("hide"),requestAnimationFrame(re),X=!1}s.addEventListener("click",z),document.querySelector("#heldPieceOverlay").addEventListener("click",function(){j.startNewGame()}),document.querySelector("#unpauseButton").addEventListener("click",function(){j.gameState.isPaused=!1,Ee.classList.add("hide")}),document.querySelector("#replayButton").addEventListener("click",function(){j.startNewGame(),L.updateData(j.gameState),L.renderGame(),u.classList.add("hide")}),document.querySelector("#returnToTitleButton").addEventListener("click",function(){pe.classList.remove("hide"),u.classList.add("hide"),X=!0}),requestAnimationFrame(re)}Ln();

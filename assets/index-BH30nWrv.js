var Na=Object.defineProperty;var Ua=(Ye,l,S)=>l in Ye?Na(Ye,l,{enumerable:!0,configurable:!0,writable:!0,value:S}):Ye[l]=S;var Ur=(Ye,l,S)=>(Ua(Ye,typeof l!="symbol"?l+"":l,S),S),ua=(Ye,l,S)=>{if(!l.has(Ye))throw TypeError("Cannot "+S)};var U=(Ye,l,S)=>(ua(Ye,l,"read from private field"),S?S.call(Ye):l.get(Ye)),Ae=(Ye,l,S)=>{if(l.has(Ye))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(Ye):l.set(Ye,S)},ar=(Ye,l,S,X)=>(ua(Ye,l,"write to private field"),X?X.call(Ye,S):l.set(Ye,S),S);var fa=(Ye,l,S,X)=>({set _(j){ar(Ye,l,j,S)},get _(){return U(Ye,l,X)}}),rr=(Ye,l,S)=>(ua(Ye,l,"access private method"),S);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))X(j);new MutationObserver(j=>{for(const Te of j)if(Te.type==="childList")for(const de of Te.addedNodes)de.tagName==="LINK"&&de.rel==="modulepreload"&&X(de)}).observe(document,{childList:!0,subtree:!0});function S(j){const Te={};return j.integrity&&(Te.integrity=j.integrity),j.referrerPolicy&&(Te.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?Te.credentials="include":j.crossOrigin==="anonymous"?Te.credentials="omit":Te.credentials="same-origin",Te}function X(j){if(j.ep)return;j.ep=!0;const Te=S(j);fetch(j.href,Te)}})();class La{constructor(){this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0)}keyToState(l){return l.length==1&&(l=l.toUpperCase()),this.inputKeys.get(l)}setInputState(l,S){let X=this.keyToState(l);X!=null&&this.actionStates.set(X,S)}getInputState(l){return this.actionStates.has(l)?this.actionStates.get(l):(console.log("ERROR: trying to access an input action that doesn't exist ("+l+"). The allowed options are:"),this.actionStates.forEach(function(S,X,j){console.log("    - "+X)}),null)}updateCounters(){for(const[l,S]of this.counters)this.getInputState(l)?this.counters.set(l,S+1):this.counters.set(l,0)}getCounter(l){return this.counters.has(l)?this.counters.get(l):(console.log("ERROR: trying to access input action that doesn't have a counter ("+l+"). The counters are:"),this.counters.forEach(function(S,X,j){console.log("    - "+X+": "+S)}),null)}}var It,ht,Mt,ot,Dt,Qr,Rn,ba,Fn,Ea,Cn,Ta,Bn,da,rn,la,Ot,xn,In,Aa,Mn,_a,tn,sa,Dn,Sa,On,Pa,Nn,ga;const en=class en{constructor(){Ae(this,Rn);Ae(this,Fn);Ae(this,Cn);Ae(this,Bn);Ae(this,rn);Ae(this,Ot);Ae(this,In);Ae(this,Mn);Ae(this,tn);Ae(this,Dn);Ae(this,On);Ae(this,Nn);Ur(this,"numRows",21);Ur(this,"graceTimerDuration",.5);Ur(this,"gameTickTime",1/30);Ur(this,"pieceMap",new Map);Ur(this,"gameState",{gameRunning:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0,speedLevel:1});Ae(this,It,15);Ae(this,ht,!0);Ae(this,Mt,0);Ae(this,ot,-1);Ae(this,Dt,0);Ae(this,Qr,!1);rr(this,rn,la).call(this),rr(this,Ot,xn).call(this),ar(this,It,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7)}get isStateChanged(){let l=U(this,ht);return ar(this,ht,!1),l}runTick(l){let S=!1;if(l.updateCounters(),!this.gameState.gameRunning)this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0&&(this.clearRow(0),this.rowCount++,ar(this,ht,!0)));else if(l.getCounter("HardDrop")==1)this.hardDropPlayerPiece(),this.finishWithPiece(),S=!0;else if(l.getCounter("Hold")==1)this.holdPiece(),S=!0;else{l.getInputState("SoftDrop")&&(S=this.tryMovePiece(0,-1)||S);let X=0;l.getCounter("RotateClockwise")==1&&(X+=1),l.getCounter("RotateAntiClockwise")==1&&(X-=1),X!=0&&(S=this.tryRotatePiece(X==1)||S);let j=0;if((l.getCounter("MoveLeft")==1||l.getCounter("MoveLeft")>5)&&(j-=1),(l.getCounter("MoveRight")==1||l.getCounter("MoveRight")>5)&&(j+=1),j!=0&&(S=this.tryMovePiece(j,0)||S),fa(this,Mt)._++,U(this,Mt)>=U(this,It)){let Te=!this.tryMovePiece(0,-1);S||(S=!Te),ar(this,Mt,0),Te&&!U(this,Qr)&&rr(this,In,Aa).call(this)}if(U(this,Qr)&&(rr(this,Mn,_a).call(this,this.gameTickTime),U(this,ot)<=0)){let Te=!this.tryMovePiece(0,-1);S=!0,Te&&this.finishWithPiece()}}S&&(rr(this,On,Pa).call(this),ar(this,ht,!0))}tryMovePiece(l,S){let X=!0;for(let j=0;j<4&&X;j++){let Te=this.gameState.playerPiece.blocks[j][0]+l,de=this.gameState.playerPiece.blocks[j][1]+S;this.isBlockHere(Te,de)&&(X=!1)}return X&&(rr(this,Fn,Ea).call(this,l,S),l!=0&&rr(this,tn,sa).call(this),S!=0&&ar(this,Qr,!1)),X}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(l){let S=rr(this,Cn,Ta).call(this,l);return S&&rr(this,tn,sa).call(this),S}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,rr(this,Ot,xn).call(this);else if(!this.gameState.playerPiece.wasHeld){let l=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new at(l),this.gameState.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)}}finishWithPiece(){const l=this.gameState.linesCleared;rr(this,Bn,da).call(this),rr(this,Ot,xn).call(this),ar(this,Qr,!1),rr(this,Dn,Sa).call(this),this.gameState.linesCleared!=l&&rr(this,Nn,ga).call(this)}clearRow(l){for(let S=l;S<this.numRows-1;S++)this.gameState.gridData[S]=this.gameState.gridData[S+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(l,S){if(l<0||S<0||l>=10||S>=this.numRows)return!0;const X=this.gameState.gridData[S],j=7<<32-(3+3*l);return(X&j)!=0}getBlockData(l,S){const X=this.gameState.gridData[S],j=32-(3+3*l),Te=7<<j;return(X&Te)>>>j}isPlayerPieceValid(){let l=!0;for(let S=0;S<4&&l;S++)this.isBlockHere(this.gameState.playerPiece.blocks[S][0],this.gameState.playerPiece.blocks[S][1])&&(l=!1);return l}};It=new WeakMap,ht=new WeakMap,Mt=new WeakMap,ot=new WeakMap,Dt=new WeakMap,Qr=new WeakMap,Rn=new WeakSet,ba=function(l,S,X){const Te=~(7<<32-(3+3*l));this.gameState.gridData[S]&=Te;const de=X<<32-(3+3*l);this.gameState.gridData[S]|=de},Fn=new WeakSet,Ea=function(l,S){for(let X=0;X<4;X++)this.gameState.playerPiece.blocks[X][0]+=l,this.gameState.playerPiece.blocks[X][1]+=S},Cn=new WeakSet,Ta=function(l){let S=(this.gameState.playerPiece.rotationIndex+4+(l?1:-1))%4,X=[...this.gameState.playerPiece.blocks[0]],j=[];for(let oe=0;oe<4;oe++)j.push([...this.gameState.playerPiece.blocks[oe]]);let Te=1,de=1;l?de=-1:Te=-1;let u;for(let oe=0;oe<4;oe++)j[oe][0]-=X[0],j[oe][1]-=X[1],u=j[oe][0],j[oe][0]=Te*j[oe][1],j[oe][1]=de*u,j[oe][0]+=X[0],j[oe][1]+=X[1];let z;switch(this.gameState.playerPiece.shape){case"O":z=at.offsets.O;break;case"I":z=at.offsets.I;break;default:z=at.offsets.OTHER;break}let fe,k,ce=!1;for(let oe=0;oe<5&&!ce;oe++){fe=z[oe],k=[fe[this.gameState.playerPiece.rotationIndex][0]-fe[S][0],fe[this.gameState.playerPiece.rotationIndex][1]-fe[S][1]],ce=!0;for(let V=0;V<4;V++)j[V][0]+=k[0],j[V][1]+=k[1],this.isBlockHere(j[V][0],j[V][1])&&(ce=!1);if(!ce)for(let V=0;V<4;V++)j[V][0]-=k[0],j[V][1]-=k[1]}if(ce){for(let oe=0;oe<4;oe++)this.gameState.playerPiece.blocks[oe]=[...j[oe]];this.gameState.playerPiece.rotationIndex=S}return ce},Bn=new WeakSet,da=function(){let l,S,X=this.pieceMap.get(this.gameState.playerPiece.shape);for(let j=0;j<4;j++)l=this.gameState.playerPiece.blocks[j][0],S=this.gameState.playerPiece.blocks[j][1],rr(this,Rn,ba).call(this,l,S,X)},rn=new WeakSet,la=function(){let l=["O","I","T","J","L","S","Z"],S;for(let X=0;X<7;X++)S=Math.floor(Math.random()*l.length),this.gameState.pieceQueue.push(l[S]),l.splice(S,1)},Ot=new WeakSet,xn=function(){let l=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&rr(this,rn,la).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new at(l),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)},In=new WeakSet,Aa=function(){ar(this,ot,this.graceTimerDuration),ar(this,Qr,!0),ar(this,Dt,0)},Mn=new WeakSet,_a=function(l){ar(this,ot,U(this,ot)-l)},tn=new WeakSet,sa=function(){U(this,Qr)&&U(this,Dt)<30&&(ar(this,ot,Math.min(U(this,ot)+.5,this.graceTimerDuration)),fa(this,Dt)._++)},Dn=new WeakSet,Sa=function(){for(let l=0;l<this.numRows;l++){let S=!0;for(let X=0;X<10&&S;X++)this.isBlockHere(X,l)||(S=!1);S&&(this.clearRow(l),this.gameState.linesCleared++,l--)}},On=new WeakSet,Pa=function(){for(let S=0;S<4;S++)this.gameState.ghostBlocks[S]=[...this.gameState.playerPiece.blocks[S]];let l=!1;for(;!l;){for(let S=0;S<4;S++)this.isBlockHere(this.gameState.ghostBlocks[S][0],this.gameState.ghostBlocks[S][1]-1)&&(l=!0);if(!l)for(let S=0;S<4;S++)this.gameState.ghostBlocks[S][1]-=1}},Nn=new WeakSet,ga=function(){this.gameState.speedLevel=Math.min(Math.floor(this.gameState.linesCleared/10)+1,en.levels.max),ar(this,It,en.levels[this.gameState.speedLevel])},Ur(en,"levels",{1:15,2:14,3:13,4:12,5:11,6:10,7:9,8:7,9:5,10:3,11:1,max:11});let ca=en;const Mr=class Mr{constructor(l){this.blocks=[],this.shape=l,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let S=Mr.getBaseShape(l);for(let X=0;X<4;X++)this.blocks.push([...S[X]]),this.blocks[X][0]+=3,this.blocks[X][1]+=19}static getBaseShape(l){let S;switch(l){case"O":S=Mr.pieces.O;break;case"I":S=Mr.pieces.I;break;case"L":S=Mr.pieces.L;break;case"J":S=Mr.pieces.J;break;case"T":S=Mr.pieces.T;break;case"S":S=Mr.pieces.S;break;case"Z":S=Mr.pieces.Z;break;default:S=[[0,0],[0,0],[0,0],[0,0]]}return S}};Ur(Mr,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),Ur(Mr,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let at=Mr;var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wa={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Ye,l){(function(X,j){Ye.exports=j()})(typeof self<"u"?self:Ga,()=>(()=>{var S={"./src/attributes.js":(de,u,z)=>{function fe(s){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fe(s)}u.__esModule=!0,u.createAttribsFromArrays=fr,u.createBufferFromArray=f,u.createBufferFromTypedArray=se,u.createBufferInfoFromArrays=i,u.createBuffersFromArrays=E,u.getArray_=O,u.getNumComponents_=Re,u.setAttribInfoBufferFromArray=tr,u.setAttributeDefaults_=ir,u.setAttributePrefix=or;var k=V(z("./src/typedarrays.js")),ce=V(z("./src/helper.js"));function oe(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(oe=function(v){return v?a:o})(s)}function V(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||fe(s)!="object"&&typeof s!="function")return{default:s};var a=oe(o);if(a&&a.has(s))return a.get(s);var m={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in s)if(T!=="default"&&Object.prototype.hasOwnProperty.call(s,T)){var P=v?Object.getOwnPropertyDescriptor(s,T):null;P&&(P.get||P.set)?Object.defineProperty(m,T,P):m[T]=s[T]}return m.default=s,a&&a.set(s,m),m}var le=35044,$=34962,be=34963,F=34660,H=5120,q=5121,x=5122,G=5123,ae=5124,pe=5125,Ue=5126,we={attribPrefix:""};function or(s){we.attribPrefix=s}function ir(s){ce.copyExistingProperties(s,we)}function Je(s,o,a,m,v){s.bindBuffer(o,a),s.bufferData(o,m,v||le)}function se(s,o,a,m){if(ce.isBuffer(s,o))return o;a=a||$;var v=s.createBuffer();return Je(s,a,v,o,m),v}function w(s){return s==="indices"}function B(s){return s===Int8Array||s===Uint8Array}function O(s){return s.length?s:s.data}var _=/coord|texture/i,he=/color|colour/i;function _e(s,o){var a;if(_.test(s)?a=2:he.test(s)?a=4:a=3,o%a>0)throw new Error("Can not guess numComponents for attribute '".concat(s,"'. Tried ").concat(a," but ").concat(o," values is not evenly divisible by ").concat(a,". You should specify it."));return a}function Re(s,o,a){return s.numComponents||s.size||_e(o,a||O(s).length)}function Ve(s,o){if(k.isArrayBuffer(s))return s;if(k.isArrayBuffer(s.data))return s.data;Array.isArray(s)&&(s={data:s});var a=s.type?Qe(s.type):void 0;return a||(w(o)?a=Uint16Array:a=Float32Array),new a(s.data)}function Ne(s){return typeof s=="number"?s:s?k.getGLTypeForTypedArrayType(s):Ue}function Qe(s){return typeof s=="number"?k.getTypedArrayTypeForGLType(s):s||Float32Array}function Xe(s,o){return{buffer:o.buffer,numValues:24,type:Ne(o.type),arrayType:Qe(o.type)}}function ur(s,o){var a=o.data||o,m=Qe(o.type),v=a*m.BYTES_PER_ELEMENT,T=s.createBuffer();return s.bindBuffer($,T),s.bufferData($,v,o.drawType||le),{buffer:T,numValues:a,type:k.getGLTypeForTypedArrayType(m),arrayType:m}}function Tr(s,o,a){var m=Ve(o,a);return{arrayType:m.constructor,buffer:se(s,m,void 0,o.drawType),type:k.getGLTypeForTypedArray(m),numValues:0}}function fr(s,o){var a={};return Object.keys(o).forEach(function(m){if(!w(m)){var v=o[m],T=v.attrib||v.name||v.attribName||we.attribPrefix+m;if(v.value){if(!Array.isArray(v.value)&&!k.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");a[T]={value:v.value}}else{var P;v.buffer&&v.buffer instanceof WebGLBuffer?P=Xe:typeof v=="number"||typeof v.data=="number"?P=ur:P=Tr;var I=P(s,v,m),M=I.buffer,W=I.type,Y=I.numValues,Q=I.arrayType,ee=v.normalize!==void 0?v.normalize:B(Q),J=Re(v,m,Y);a[T]={buffer:M,numComponents:J,type:W,normalize:ee,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),s.bindBuffer($,null),a}function tr(s,o,a,m){a=Ve(a),m!==void 0?(s.bindBuffer($,o.buffer),s.bufferSubData($,m,a)):Je(s,$,o.buffer,a,o.drawType)}function sr(s,o){return o===H||o===q?1:o===x||o===G?2:o===ae||o===pe||o===Ue?4:0}var dr=["position","positions","a_position"];function te(s){var o,a;for(a=0;a<dr.length&&(o=dr[a],!(o in s));++a);a===dr.length&&(o=Object.keys(s)[0]);var m=s[o],v=O(m).length;if(v===void 0)return 1;var T=Re(m,o),P=v/T;if(v%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(v));return P}function r(s,o){var a,m;for(m=0;m<dr.length&&(a=dr[m],!(a in o||(a=we.attribPrefix+a,a in o)));++m);m===dr.length&&(a=Object.keys(o)[0]);var v=o[a];if(!v.buffer)return 1;s.bindBuffer($,v.buffer);var T=s.getBufferParameter($,F);s.bindBuffer($,null);var P=sr(s,v.type),I=T/P,M=v.numComponents||v.size,W=I/M;if(W%1!==0)throw new Error("numComponents ".concat(M," not correct for length ").concat(length));return W}function i(s,o,a){var m=fr(s,o),v=Object.assign({},a||{});v.attribs=Object.assign({},a?a.attribs:{},m);var T=o.indices;if(T){var P=Ve(T,"indices");v.indices=se(s,P,be),v.numElements=P.length,v.elementType=k.getGLTypeForTypedArray(P)}else v.numElements||(v.numElements=r(s,v.attribs));return v}function f(s,o,a){var m=a==="indices"?be:$,v=Ve(o,a);return se(s,v,m)}function E(s,o){var a={};return Object.keys(o).forEach(function(m){a[m]=f(s,o[m],m)}),o.indices?(a.numElements=o.indices.length,a.elementType=k.getGLTypeForTypedArray(Ve(o.indices),"indices")):a.numElements=te(o),a}},"./src/draw.js":(de,u,z)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},fe(F)}u.__esModule=!0,u.drawBufferInfo=$,u.drawObjectList=be;var k=oe(z("./src/programs.js"));function ce(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,q=new WeakMap;return(ce=function(G){return G?q:H})(F)}function oe(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var q=ce(H);if(q&&q.has(F))return q.get(F);var x={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=G?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(x,ae,pe):x[ae]=F[ae]}return x.default=F,q&&q.set(F,x),x}var V=4,le=5123;function $(F,H,q,x,G,ae){q=q===void 0?V:q;var pe=H.indices,Ue=H.elementType,we=x===void 0?H.numElements:x;G=G===void 0?0:G,Ue||pe?ae!==void 0?F.drawElementsInstanced(q,we,Ue===void 0?le:H.elementType,G,ae):F.drawElements(q,we,Ue===void 0?le:H.elementType,G):ae!==void 0?F.drawArraysInstanced(q,G,we,ae):F.drawArrays(q,G,we)}function be(F,H){var q=null,x=null;H.forEach(function(G){if(G.active!==!1){var ae=G.programInfo,pe=G.vertexArrayInfo||G.bufferInfo,Ue=!1,we=G.type===void 0?V:G.type;ae!==q&&(q=ae,F.useProgram(ae.program),Ue=!0),(Ue||pe!==x)&&(x&&x.vertexArrayObject&&!pe.vertexArrayObject&&F.bindVertexArray(null),x=pe,k.setBuffersAndAttributes(F,ae,pe)),k.setUniforms(ae,G.uniforms),$(F,pe,we,G.count,G.offset,G.instanceCount)}}),x&&x.vertexArrayObject&&F.bindVertexArray(null)}},"./src/framebuffers.js":(de,u,z)=>{function fe(te){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fe(te)}u.__esModule=!0,u.bindFramebufferInfo=dr,u.createFramebufferInfo=tr,u.resizeFramebufferInfo=sr;var k=V(z("./src/textures.js")),ce=V(z("./src/helper.js"));function oe(te){if(typeof WeakMap!="function")return null;var r=new WeakMap,i=new WeakMap;return(oe=function(E){return E?i:r})(te)}function V(te,r){if(!r&&te&&te.__esModule)return te;if(te===null||fe(te)!="object"&&typeof te!="function")return{default:te};var i=oe(r);if(i&&i.has(te))return i.get(te);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in te)if(s!=="default"&&Object.prototype.hasOwnProperty.call(te,s)){var o=E?Object.getOwnPropertyDescriptor(te,s):null;o&&(o.get||o.set)?Object.defineProperty(f,s,o):f[s]=te[s]}return f.default=te,i&&i.set(te,f),f}var le=36160,$=36161,be=3553,F=5121,H=6402,q=6408,x=33190,G=36012,ae=35056,pe=36013,Ue=32854,we=32855,or=36194,ir=33189,Je=6401,se=36168,w=34041,B=36064,O=36096,_=36128,he=33306,_e=33071,Re=9729,Ve=[{format:q,type:F,min:Re,wrap:_e},{format:w}],Ne={};Ne[w]=he,Ne[Je]=_,Ne[se]=_,Ne[H]=O,Ne[ir]=O,Ne[x]=O,Ne[G]=O,Ne[ae]=he,Ne[pe]=he;function Qe(te,r){return Ne[te]||Ne[r]}var Xe={};Xe[Ue]=!0,Xe[we]=!0,Xe[or]=!0,Xe[w]=!0,Xe[ir]=!0,Xe[Je]=!0,Xe[se]=!0;function ur(te){return Xe[te]}var Tr=32;function fr(te){return te>=B&&te<B+Tr}function tr(te,r,i,f){var E=le,s=te.createFramebuffer();te.bindFramebuffer(E,s),i=i||te.drawingBufferWidth,f=f||te.drawingBufferHeight,r=r||Ve;var o=[],a={framebuffer:s,attachments:[],width:i,height:f};return r.forEach(function(m,v){var T=m.attachment,P=m.samples,I=m.format,M=m.attachmentPoint||Qe(I,m.internalFormat);if(M||(M=B+v),fr(M)&&o.push(M),!T)if(P!==void 0||ur(I))T=te.createRenderbuffer(),te.bindRenderbuffer($,T),P>1?te.renderbufferStorageMultisample($,P,I,i,f):te.renderbufferStorage($,I,i,f);else{var W=Object.assign({},m);W.width=i,W.height=f,W.auto===void 0&&(W.auto=!1,W.min=W.min||W.minMag||Re,W.mag=W.mag||W.minMag||Re,W.wrapS=W.wrapS||W.wrap||_e,W.wrapT=W.wrapT||W.wrap||_e),T=k.createTexture(te,W)}if(ce.isRenderbuffer(te,T))te.framebufferRenderbuffer(E,M,$,T);else if(ce.isTexture(te,T))m.layer!==void 0?te.framebufferTextureLayer(E,M,T,m.level||0,m.layer):te.framebufferTexture2D(E,M,m.target||be,T,m.level||0);else throw new Error("unknown attachment type");a.attachments.push(T)}),te.drawBuffers&&te.drawBuffers(o),a}function sr(te,r,i,f,E){f=f||te.drawingBufferWidth,E=E||te.drawingBufferHeight,r.width=f,r.height=E,i=i||Ve,i.forEach(function(s,o){var a=r.attachments[o],m=s.format,v=s.samples;if(v!==void 0||ce.isRenderbuffer(te,a))te.bindRenderbuffer($,a),v>1?te.renderbufferStorageMultisample($,v,m,f,E):te.renderbufferStorage($,m,f,E);else if(ce.isTexture(te,a))k.resizeTexture(te,a,s,f,E);else throw new Error("unknown attachment type")})}function dr(te,r,i){i=i||le,r?(te.bindFramebuffer(i,r.framebuffer),te.viewport(0,0,r.width,r.height)):(te.bindFramebuffer(i,null),te.viewport(0,0,te.drawingBufferWidth,te.drawingBufferHeight))}},"./src/helper.js":(de,u)=>{u.__esModule=!0,u.copyExistingProperties=k,u.copyNamedProperties=fe,u.error=ce,u.isBuffer=$,u.isRenderbuffer=be,u.isSampler=q,u.isShader=F,u.isTexture=H,u.warn=oe;function z(x){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},z(x)}function fe(x,G,ae){x.forEach(function(pe){var Ue=G[pe];Ue!==void 0&&(ae[pe]=Ue)})}function k(x,G){Object.keys(G).forEach(function(ae){G.hasOwnProperty(ae)&&x.hasOwnProperty(ae)&&(G[ae]=x[ae])})}function ce(){var x;(x=console).error.apply(x,arguments)}function oe(){var x;(x=console).warn.apply(x,arguments)}var V=new Map;function le(x,G){if(!x||z(x)!=="object")return!1;var ae=V.get(G);ae||(ae=new WeakMap,V.set(G,ae));var pe=ae.get(x);if(pe===void 0){var Ue=Object.prototype.toString.call(x);pe=Ue.substring(8,Ue.length-1)===G,ae.set(x,pe)}return pe}function $(x,G){return typeof WebGLBuffer<"u"&&le(G,"WebGLBuffer")}function be(x,G){return typeof WebGLRenderbuffer<"u"&&le(G,"WebGLRenderbuffer")}function F(x,G){return typeof WebGLShader<"u"&&le(G,"WebGLShader")}function H(x,G){return typeof WebGLTexture<"u"&&le(G,"WebGLTexture")}function q(x,G){return typeof WebGLSampler<"u"&&le(G,"WebGLSampler")}},"./src/m4.js":(de,u,z)=>{function fe(r){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},fe(r)}u.__esModule=!0,u.axisRotate=Tr,u.axisRotation=ur,u.copy=F,u.create=be,u.frustum=Je,u.getAxis=Ue,u.getTranslation=pe,u.identity=H,u.inverse=x,u.lookAt=O,u.multiply=G,u.negate=$,u.ortho=ir,u.perspective=or,u.rotateX=Re,u.rotateY=Ne,u.rotateZ=Xe,u.rotationX=_e,u.rotationY=Ve,u.rotationZ=Qe,u.scale=tr,u.scaling=fr,u.setAxis=we,u.setDefaultType=le,u.setTranslation=ae,u.transformDirection=dr,u.transformNormal=te,u.transformPoint=sr,u.translate=he,u.translation=_,u.transpose=q;var k=oe(z("./src/v3.js"));function ce(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(ce=function(s){return s?f:i})(r)}function oe(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||fe(r)!="object"&&typeof r!="function")return{default:r};var f=ce(i);if(f&&f.has(r))return f.get(r);var E={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var a=s?Object.getOwnPropertyDescriptor(r,o):null;a&&(a.get||a.set)?Object.defineProperty(E,o,a):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var V=Float32Array;function le(r){var i=V;return V=r,i}function $(r,i){return i=i||new V(16),i[0]=-r[0],i[1]=-r[1],i[2]=-r[2],i[3]=-r[3],i[4]=-r[4],i[5]=-r[5],i[6]=-r[6],i[7]=-r[7],i[8]=-r[8],i[9]=-r[9],i[10]=-r[10],i[11]=-r[11],i[12]=-r[12],i[13]=-r[13],i[14]=-r[14],i[15]=-r[15],i}function be(){return new V(16).fill(0)}function F(r,i){return i=i||new V(16),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}function H(r){return r=r||new V(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function q(r,i){if(i=i||new V(16),i===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,i}var E=r[0*4+0],s=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=r[2*4+0],M=r[2*4+1],W=r[2*4+2],Y=r[2*4+3],Q=r[3*4+0],ee=r[3*4+1],J=r[3*4+2],ie=r[3*4+3];return i[0]=E,i[1]=m,i[2]=I,i[3]=Q,i[4]=s,i[5]=v,i[6]=M,i[7]=ee,i[8]=o,i[9]=T,i[10]=W,i[11]=J,i[12]=a,i[13]=P,i[14]=Y,i[15]=ie,i}function x(r,i){i=i||new V(16);var f=r[0*4+0],E=r[0*4+1],s=r[0*4+2],o=r[0*4+3],a=r[1*4+0],m=r[1*4+1],v=r[1*4+2],T=r[1*4+3],P=r[2*4+0],I=r[2*4+1],M=r[2*4+2],W=r[2*4+3],Y=r[3*4+0],Q=r[3*4+1],ee=r[3*4+2],J=r[3*4+3],ie=M*J,ue=ee*W,Z=v*J,me=ee*T,Me=v*W,He=M*T,Le=s*J,je=ee*o,Se=s*W,Fe=M*o,qe=s*T,ke=v*o,Ke=P*Q,We=Y*I,Ze=a*Q,Ce=Y*m,Oe=a*I,hr=P*m,cr=f*Q,Ar=Y*E,Sr=f*I,Or=P*E,Lr=f*m,Gr=a*E,Jr=ie*m+me*I+Me*Q-(ue*m+Z*I+He*Q),yt=ue*E+Le*I+Fe*Q-(ie*E+je*I+Se*Q),pt=Z*E+je*m+qe*Q-(me*E+Le*m+ke*Q),bt=He*E+Se*m+ke*I-(Me*E+Fe*m+qe*I),vr=1/(f*Jr+a*yt+P*pt+Y*bt);return i[0]=vr*Jr,i[1]=vr*yt,i[2]=vr*pt,i[3]=vr*bt,i[4]=vr*(ue*a+Z*P+He*Y-(ie*a+me*P+Me*Y)),i[5]=vr*(ie*f+je*P+Se*Y-(ue*f+Le*P+Fe*Y)),i[6]=vr*(me*f+Le*a+ke*Y-(Z*f+je*a+qe*Y)),i[7]=vr*(Me*f+Fe*a+qe*P-(He*f+Se*a+ke*P)),i[8]=vr*(Ke*T+Ce*W+Oe*J-(We*T+Ze*W+hr*J)),i[9]=vr*(We*o+cr*W+Or*J-(Ke*o+Ar*W+Sr*J)),i[10]=vr*(Ze*o+Ar*T+Lr*J-(Ce*o+cr*T+Gr*J)),i[11]=vr*(hr*o+Sr*T+Gr*W-(Oe*o+Or*T+Lr*W)),i[12]=vr*(Ze*M+hr*ee+We*v-(Oe*ee+Ke*v+Ce*M)),i[13]=vr*(Sr*ee+Ke*s+Ar*M-(cr*M+Or*ee+We*s)),i[14]=vr*(cr*v+Gr*ee+Ce*s-(Lr*ee+Ze*s+Ar*v)),i[15]=vr*(Lr*M+Oe*s+Or*v-(Sr*v+Gr*M+hr*s)),i}function G(r,i,f){f=f||new V(16);var E=r[0],s=r[1],o=r[2],a=r[3],m=r[4],v=r[5],T=r[6],P=r[7],I=r[8],M=r[9],W=r[10],Y=r[11],Q=r[12],ee=r[13],J=r[14],ie=r[15],ue=i[0],Z=i[1],me=i[2],Me=i[3],He=i[4],Le=i[5],je=i[6],Se=i[7],Fe=i[8],qe=i[9],ke=i[10],Ke=i[11],We=i[12],Ze=i[13],Ce=i[14],Oe=i[15];return f[0]=E*ue+m*Z+I*me+Q*Me,f[1]=s*ue+v*Z+M*me+ee*Me,f[2]=o*ue+T*Z+W*me+J*Me,f[3]=a*ue+P*Z+Y*me+ie*Me,f[4]=E*He+m*Le+I*je+Q*Se,f[5]=s*He+v*Le+M*je+ee*Se,f[6]=o*He+T*Le+W*je+J*Se,f[7]=a*He+P*Le+Y*je+ie*Se,f[8]=E*Fe+m*qe+I*ke+Q*Ke,f[9]=s*Fe+v*qe+M*ke+ee*Ke,f[10]=o*Fe+T*qe+W*ke+J*Ke,f[11]=a*Fe+P*qe+Y*ke+ie*Ke,f[12]=E*We+m*Ze+I*Ce+Q*Oe,f[13]=s*We+v*Ze+M*Ce+ee*Oe,f[14]=o*We+T*Ze+W*Ce+J*Oe,f[15]=a*We+P*Ze+Y*Ce+ie*Oe,f}function ae(r,i,f){return f=f||H(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=i[0],f[13]=i[1],f[14]=i[2],f[15]=1,f}function pe(r,i){return i=i||k.create(),i[0]=r[12],i[1]=r[13],i[2]=r[14],i}function Ue(r,i,f){f=f||k.create();var E=i*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function we(r,i,f,E){E!==r&&(E=F(r,E));var s=f*4;return E[s+0]=i[0],E[s+1]=i[1],E[s+2]=i[2],E}function or(r,i,f,E,s){s=s||new V(16);var o=Math.tan(Math.PI*.5-.5*r),a=1/(f-E);return s[0]=o/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(f+E)*a,s[11]=-1,s[12]=0,s[13]=0,s[14]=f*E*a*2,s[15]=0,s}function ir(r,i,f,E,s,o,a){return a=a||new V(16),a[0]=2/(i-r),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(E-f),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(s-o),a[11]=0,a[12]=(i+r)/(r-i),a[13]=(E+f)/(f-E),a[14]=(o+s)/(s-o),a[15]=1,a}function Je(r,i,f,E,s,o,a){a=a||new V(16);var m=i-r,v=E-f,T=s-o;return a[0]=2*s/m,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*s/v,a[6]=0,a[7]=0,a[8]=(r+i)/m,a[9]=(E+f)/v,a[10]=o/T,a[11]=-1,a[12]=0,a[13]=0,a[14]=s*o/T,a[15]=0,a}var se,w,B;function O(r,i,f,E){return E=E||new V(16),se=se||k.create(),w=w||k.create(),B=B||k.create(),k.normalize(k.subtract(r,i,B),B),k.normalize(k.cross(f,B,se),se),k.normalize(k.cross(B,se,w),w),E[0]=se[0],E[1]=se[1],E[2]=se[2],E[3]=0,E[4]=w[0],E[5]=w[1],E[6]=w[2],E[7]=0,E[8]=B[0],E[9]=B[1],E[10]=B[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function _(r,i){return i=i||new V(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}function he(r,i,f){f=f||new V(16);var E=i[0],s=i[1],o=i[2],a=r[0],m=r[1],v=r[2],T=r[3],P=r[1*4+0],I=r[1*4+1],M=r[1*4+2],W=r[1*4+3],Y=r[2*4+0],Q=r[2*4+1],ee=r[2*4+2],J=r[2*4+3],ie=r[3*4+0],ue=r[3*4+1],Z=r[3*4+2],me=r[3*4+3];return r!==f&&(f[0]=a,f[1]=m,f[2]=v,f[3]=T,f[4]=P,f[5]=I,f[6]=M,f[7]=W,f[8]=Y,f[9]=Q,f[10]=ee,f[11]=J),f[12]=a*E+P*s+Y*o+ie,f[13]=m*E+I*s+Q*o+ue,f[14]=v*E+M*s+ee*o+Z,f[15]=T*E+W*s+J*o+me,f}function _e(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=f,i[6]=E,i[7]=0,i[8]=0,i[9]=-E,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Re(r,i,f){f=f||new V(16);var E=r[4],s=r[5],o=r[6],a=r[7],m=r[8],v=r[9],T=r[10],P=r[11],I=Math.cos(i),M=Math.sin(i);return f[4]=I*E+M*m,f[5]=I*s+M*v,f[6]=I*o+M*T,f[7]=I*a+M*P,f[8]=I*m-M*E,f[9]=I*v-M*s,f[10]=I*T-M*o,f[11]=I*P-M*a,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ve(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=0,i[2]=-E,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=E,i[9]=0,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Ne(r,i,f){f=f||new V(16);var E=r[0*4+0],s=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[2*4+0],v=r[2*4+1],T=r[2*4+2],P=r[2*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E-M*m,f[1]=I*s-M*v,f[2]=I*o-M*T,f[3]=I*a-M*P,f[8]=I*m+M*E,f[9]=I*v+M*s,f[10]=I*T+M*o,f[11]=I*P+M*a,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Qe(r,i){i=i||new V(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=E,i[2]=0,i[3]=0,i[4]=-E,i[5]=f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Xe(r,i,f){f=f||new V(16);var E=r[0*4+0],s=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],I=Math.cos(i),M=Math.sin(i);return f[0]=I*E+M*m,f[1]=I*s+M*v,f[2]=I*o+M*T,f[3]=I*a+M*P,f[4]=I*m-M*E,f[5]=I*v-M*s,f[6]=I*T-M*o,f[7]=I*P-M*a,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ur(r,i,f){f=f||new V(16);var E=r[0],s=r[1],o=r[2],a=Math.sqrt(E*E+s*s+o*o);E/=a,s/=a,o/=a;var m=E*E,v=s*s,T=o*o,P=Math.cos(i),I=Math.sin(i),M=1-P;return f[0]=m+(1-m)*P,f[1]=E*s*M+o*I,f[2]=E*o*M-s*I,f[3]=0,f[4]=E*s*M-o*I,f[5]=v+(1-v)*P,f[6]=s*o*M+E*I,f[7]=0,f[8]=E*o*M+s*I,f[9]=s*o*M-E*I,f[10]=T+(1-T)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,i,f,E){E=E||new V(16);var s=i[0],o=i[1],a=i[2],m=Math.sqrt(s*s+o*o+a*a);s/=m,o/=m,a/=m;var v=s*s,T=o*o,P=a*a,I=Math.cos(f),M=Math.sin(f),W=1-I,Y=v+(1-v)*I,Q=s*o*W+a*M,ee=s*a*W-o*M,J=s*o*W-a*M,ie=T+(1-T)*I,ue=o*a*W+s*M,Z=s*a*W+o*M,me=o*a*W-s*M,Me=P+(1-P)*I,He=r[0],Le=r[1],je=r[2],Se=r[3],Fe=r[4],qe=r[5],ke=r[6],Ke=r[7],We=r[8],Ze=r[9],Ce=r[10],Oe=r[11];return E[0]=Y*He+Q*Fe+ee*We,E[1]=Y*Le+Q*qe+ee*Ze,E[2]=Y*je+Q*ke+ee*Ce,E[3]=Y*Se+Q*Ke+ee*Oe,E[4]=J*He+ie*Fe+ue*We,E[5]=J*Le+ie*qe+ue*Ze,E[6]=J*je+ie*ke+ue*Ce,E[7]=J*Se+ie*Ke+ue*Oe,E[8]=Z*He+me*Fe+Me*We,E[9]=Z*Le+me*qe+Me*Ze,E[10]=Z*je+me*ke+Me*Ce,E[11]=Z*Se+me*Ke+Me*Oe,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function fr(r,i){return i=i||new V(16),i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function tr(r,i,f){f=f||new V(16);var E=i[0],s=i[1],o=i[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=s*r[4],f[5]=s*r[5],f[6]=s*r[6],f[7]=s*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function sr(r,i,f){f=f||k.create();var E=i[0],s=i[1],o=i[2],a=E*r[0*4+3]+s*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+s*r[4]+o*r[8]+r[12])/a,f[1]=(E*r[1]+s*r[5]+o*r[9]+r[13])/a,f[2]=(E*r[2]+s*r[6]+o*r[10]+r[14])/a,f}function dr(r,i,f){f=f||k.create();var E=i[0],s=i[1],o=i[2];return f[0]=E*r[0]+s*r[4]+o*r[8],f[1]=E*r[1]+s*r[5]+o*r[9],f[2]=E*r[2]+s*r[6]+o*r[10],f}function te(r,i,f){f=f||k.create();var E=x(r),s=i[0],o=i[1],a=i[2];return f[0]=s*E[0]+o*E[1]+a*E[2],f[1]=s*E[4]+o*E[5]+a*E[6],f[2]=s*E[8]+o*E[9]+a*E[10],f}},"./src/primitives.js":(de,u,z)=>{function fe(o){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fe(o)}u.__esModule=!0,u.concatVertices=i,u.create3DFBuffers=u.create3DFBufferInfo=void 0,u.create3DFVertices=Ve,u.createAugmentedTypedArray=x,u.createCrescentBuffers=u.createCrescentBufferInfo=void 0,u.createCrescentVertices=Ne,u.createCubeBuffers=u.createCubeBufferInfo=u.createCresentVertices=u.createCresentBuffers=u.createCresentBufferInfo=void 0,u.createCubeVertices=he,u.createCylinderBuffers=u.createCylinderBufferInfo=void 0,u.createCylinderVertices=Qe,u.createDiscBuffers=u.createDiscBufferInfo=void 0,u.createDiscVertices=ur,u.createPlaneBuffers=u.createPlaneBufferInfo=void 0,u.createPlaneVertices=B,u.createSphereBuffers=u.createSphereBufferInfo=void 0,u.createSphereVertices=O,u.createTorusBuffers=u.createTorusBufferInfo=void 0,u.createTorusVertices=Xe,u.createTruncatedConeBuffers=u.createTruncatedConeBufferInfo=void 0,u.createTruncatedConeVertices=_e,u.createXYQuadBuffers=u.createXYQuadBufferInfo=void 0,u.createXYQuadVertices=w,u.deindexVertices=ae,u.duplicateVertices=f,u.flattenNormals=pe,u.makeRandomVertexColors=fr,u.reorientDirections=or,u.reorientNormals=ir,u.reorientPositions=Je,u.reorientVertices=se;var k=be(z("./src/attributes.js")),ce=be(z("./src/helper.js")),oe=be(z("./src/typedarrays.js")),V=be(z("./src/m4.js")),le=be(z("./src/v3.js"));function $(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,m=new WeakMap;return($=function(T){return T?m:a})(o)}function be(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||fe(o)!="object"&&typeof o!="function")return{default:o};var m=$(a);if(m&&m.has(o))return m.get(o);var v={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in o)if(P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)){var I=T?Object.getOwnPropertyDescriptor(o,P):null;I&&(I.get||I.set)?Object.defineProperty(v,P,I):v[P]=o[P]}return v.default=o,m&&m.set(o,v),v}var F=k.getArray_,H=k.getNumComponents_;function q(o,a){var m=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var T=arguments[v];if(T instanceof Array||oe.isArrayBuffer(T))for(var P=0;P<T.length;++P)o[m++]=T[P];else o[m++]=T}},o.reset=function(v){m=v||0},o.numComponents=a,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function x(o,a,m){var v=m||Float32Array;return q(new v(o*a),o)}function G(o){return o!=="indices"}function ae(o){var a=o.indices,m={},v=a.length;function T(P){for(var I=o[P],M=I.numComponents,W=x(M,v,I.constructor),Y=0;Y<v;++Y)for(var Q=a[Y],ee=Q*M,J=0;J<M;++J)W.push(I[ee+J]);m[P]=W}return Object.keys(o).filter(G).forEach(T),m}function pe(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var a=o.normal,m=a.length,v=0;v<m;v+=9){var T=a[v+0],P=a[v+1],I=a[v+2],M=a[v+3],W=a[v+4],Y=a[v+5],Q=a[v+6],ee=a[v+7],J=a[v+8],ie=T+M+Q,ue=P+W+ee,Z=I+Y+J,me=Math.sqrt(ie*ie+ue*ue+Z*Z);ie/=me,ue/=me,Z/=me,a[v+0]=ie,a[v+1]=ue,a[v+2]=Z,a[v+3]=ie,a[v+4]=ue,a[v+5]=Z,a[v+6]=ie,a[v+7]=ue,a[v+8]=Z}return o}function Ue(o,a,m){for(var v=o.length,T=new Float32Array(3),P=0;P<v;P+=3)m(a,[o[P],o[P+1],o[P+2]],T),o[P]=T[0],o[P+1]=T[1],o[P+2]=T[2]}function we(o,a,m){m=m||le.create();var v=a[0],T=a[1],P=a[2];return m[0]=v*o[0]+T*o[1]+P*o[2],m[1]=v*o[4]+T*o[5]+P*o[6],m[2]=v*o[8]+T*o[9]+P*o[10],m}function or(o,a){return Ue(o,a,V.transformDirection),o}function ir(o,a){return Ue(o,V.inverse(a),we),o}function Je(o,a){return Ue(o,a,V.transformPoint),o}function se(o,a){return Object.keys(o).forEach(function(m){var v=o[m];m.indexOf("pos")>=0?Je(v,a):m.indexOf("tan")>=0||m.indexOf("binorm")>=0?or(v,a):m.indexOf("norm")>=0&&ir(v,a)}),o}function w(o,a,m){return o=o||2,a=a||0,m=m||0,o*=.5,{position:{numComponents:2,data:[a+-1*o,m+-1*o,a+1*o,m+-1*o,a+-1*o,m+1*o,a+1*o,m+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function B(o,a,m,v,T){o=o||1,a=a||1,m=m||1,v=v||1,T=T||V.identity();for(var P=(m+1)*(v+1),I=x(3,P),M=x(3,P),W=x(2,P),Y=0;Y<=v;Y++)for(var Q=0;Q<=m;Q++){var ee=Q/m,J=Y/v;I.push(o*ee-o*.5,0,a*J-a*.5),M.push(0,1,0),W.push(ee,J)}for(var ie=m+1,ue=x(3,m*v*2,Uint16Array),Z=0;Z<v;Z++)for(var me=0;me<m;me++)ue.push((Z+0)*ie+me,(Z+1)*ie+me,(Z+0)*ie+me+1),ue.push((Z+1)*ie+me,(Z+1)*ie+me+1,(Z+0)*ie+me+1);var Me=se({position:I,normal:M,texcoord:W,indices:ue},T);return Me}function O(o,a,m,v,T,P,I){if(a<=0||m<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,T=T||Math.PI,P=P||0,I=I||Math.PI*2;for(var M=T-v,W=I-P,Y=(a+1)*(m+1),Q=x(3,Y),ee=x(3,Y),J=x(2,Y),ie=0;ie<=m;ie++)for(var ue=0;ue<=a;ue++){var Z=ue/a,me=ie/m,Me=W*Z+P,He=M*me+v,Le=Math.sin(Me),je=Math.cos(Me),Se=Math.sin(He),Fe=Math.cos(He),qe=je*Se,ke=Fe,Ke=Le*Se;Q.push(o*qe,o*ke,o*Ke),ee.push(qe,ke,Ke),J.push(1-Z,me)}for(var We=a+1,Ze=x(3,a*m*2,Uint16Array),Ce=0;Ce<a;Ce++)for(var Oe=0;Oe<m;Oe++)Ze.push((Oe+0)*We+Ce,(Oe+0)*We+Ce+1,(Oe+1)*We+Ce),Ze.push((Oe+1)*We+Ce,(Oe+0)*We+Ce+1,(Oe+1)*We+Ce+1);return{position:Q,normal:ee,texcoord:J,indices:Ze}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function he(o){o=o||1;for(var a=o/2,m=[[-a,-a,-a],[+a,-a,-a],[-a,+a,-a],[+a,+a,-a],[-a,-a,+a],[+a,-a,+a],[-a,+a,+a],[+a,+a,+a]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],P=6*4,I=x(3,P),M=x(3,P),W=x(2,P),Y=x(3,6*2,Uint16Array),Q=0;Q<6;++Q){for(var ee=_[Q],J=0;J<4;++J){var ie=m[ee[J]],ue=v[Q],Z=T[J];I.push(ie),M.push(ue),W.push(Z)}var me=4*Q;Y.push(me+0,me+1,me+2),Y.push(me+0,me+2,me+3)}return{position:I,normal:M,texcoord:W,indices:Y}}function _e(o,a,m,v,T,P,I){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var M=P===void 0?!0:P,W=I===void 0?!0:I,Y=(M?2:0)+(W?2:0),Q=(v+1)*(T+1+Y),ee=x(3,Q),J=x(3,Q),ie=x(2,Q),ue=x(3,v*(T+Y/2)*2,Uint16Array),Z=v+1,me=Math.atan2(o-a,m),Me=Math.cos(me),He=Math.sin(me),Le=M?-2:0,je=T+(W?2:0),Se=Le;Se<=je;++Se){var Fe=Se/T,qe=m*Fe,ke=void 0;Se<0?(qe=0,Fe=1,ke=o):Se>T?(qe=m,Fe=1,ke=a):ke=o+(a-o)*(Se/T),(Se===-2||Se===T+2)&&(ke=0,Fe=0),qe-=m/2;for(var Ke=0;Ke<Z;++Ke){var We=Math.sin(Ke*Math.PI*2/v),Ze=Math.cos(Ke*Math.PI*2/v);ee.push(We*ke,qe,Ze*ke),Se<0?J.push(0,-1,0):Se>T?J.push(0,1,0):ke===0?J.push(0,0,0):J.push(We*Me,He,Ze*Me),ie.push(Ke/v,1-Fe)}}for(var Ce=0;Ce<T+Y;++Ce)if(!(Ce===1&&M||Ce===T+Y-2&&W))for(var Oe=0;Oe<v;++Oe)ue.push(Z*(Ce+0)+0+Oe,Z*(Ce+0)+1+Oe,Z*(Ce+1)+1+Oe),ue.push(Z*(Ce+0)+0+Oe,Z*(Ce+1)+1+Oe,Z*(Ce+1)+0+Oe);return{position:ee,normal:J,texcoord:ie,indices:ue}}function Re(o,a){a=a||[];for(var m=[],v=0;v<o.length;v+=4){var T=o[v],P=o.slice(v+1,v+4);P.push.apply(P,a);for(var I=0;I<T;++I)m.push.apply(m,P)}return m}function Ve(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],a=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],m=Re([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=Re([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,P={position:x(3,T),texcoord:x(2,T),normal:x(3,T),color:x(4,T,Uint8Array),indices:x(3,T/3,Uint16Array)};P.position.push(o),P.texcoord.push(a),P.normal.push(m),P.color.push(v);for(var I=0;I<T;++I)P.indices.push(I);return P}function Ne(o,a,m,v,T,P,I){if(T<=0)throw new Error("subdivisionDown must be > 0");P=P||0,I=I||1;var M=2,W=I-P,Y=(T+1)*2*(2+M),Q=x(3,Y),ee=x(3,Y),J=x(2,Y);function ie(je,Se,Fe){return je+(Se-je)*Fe}function ue(je,Se,Fe,qe,ke,Ke){for(var We=0;We<=T;We++){var Ze=Se/(M-1),Ce=We/T,Oe=(Ze-.5)*2,hr=(P+Ce*W)*Math.PI,cr=Math.sin(hr),Ar=Math.cos(hr),Sr=ie(o,je,cr),Or=Oe*v,Lr=Ar*o,Gr=cr*Sr;Q.push(Or,Lr,Gr);var Jr=le.add(le.multiply([0,cr,Ar],Fe),qe);ee.push(Jr),J.push(Ze*ke+Ke,Ce)}}for(var Z=0;Z<M;Z++){var me=(Z/(M-1)-.5)*2;ue(a,Z,[1,1,1],[0,0,0],1,0),ue(a,Z,[0,0,0],[me,0,0],0,0),ue(m,Z,[1,1,1],[0,0,0],1,0),ue(m,Z,[0,0,0],[me,0,0],0,1)}var Me=x(3,T*2*(2+M),Uint16Array);function He(je,Se){for(var Fe=0;Fe<T;++Fe)Me.push(je+Fe+0,je+Fe+1,Se+Fe+0),Me.push(je+Fe+1,Se+Fe+1,Se+Fe+0)}var Le=T+1;return He(Le*0,Le*4),He(Le*5,Le*7),He(Le*6,Le*2),He(Le*3,Le*1),{position:Q,normal:ee,texcoord:J,indices:Me}}function Qe(o,a,m,v,T,P){return _e(o,o,a,m,v,T,P)}function Xe(o,a,m,v,T,P){if(m<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,P=P||Math.PI*2;for(var I=P-T,M=m+1,W=v+1,Y=M*W,Q=x(3,Y),ee=x(3,Y),J=x(2,Y),ie=x(3,m*v*2,Uint16Array),ue=0;ue<W;++ue)for(var Z=ue/v,me=Z*Math.PI*2,Me=Math.sin(me),He=o+Me*a,Le=Math.cos(me),je=Le*a,Se=0;Se<M;++Se){var Fe=Se/m,qe=T+Fe*I,ke=Math.sin(qe),Ke=Math.cos(qe),We=ke*He,Ze=Ke*He,Ce=ke*Me,Oe=Ke*Me;Q.push(We,je,Ze),ee.push(Ce,Le,Oe),J.push(Fe,1-Z)}for(var hr=0;hr<v;++hr)for(var cr=0;cr<m;++cr){var Ar=1+cr,Sr=1+hr;ie.push(M*hr+cr,M*Sr+cr,M*hr+Ar),ie.push(M*Sr+cr,M*Sr+Ar,M*hr+Ar)}return{position:Q,normal:ee,texcoord:J,indices:ie}}function ur(o,a,m,v,T){if(a<3)throw new Error("divisions must be at least 3");m=m||1,T=T||1,v=v||0;for(var P=(a+1)*(m+1),I=x(3,P),M=x(3,P),W=x(2,P),Y=x(3,m*a*2,Uint16Array),Q=0,ee=o-v,J=a+1,ie=0;ie<=m;++ie){for(var ue=v+ee*Math.pow(ie/m,T),Z=0;Z<=a;++Z){var me=2*Math.PI*Z/a,Me=ue*Math.cos(me),He=ue*Math.sin(me);if(I.push(Me,0,He),M.push(0,1,0),W.push(1-Z/a,ie/m),ie>0&&Z!==a){var Le=Q+(Z+1),je=Q+Z,Se=Q+Z-J,Fe=Q+(Z+1)-J;Y.push(Le,je,Se),Y.push(Le,Se,Fe)}}Q+=a+1}return{position:I,normal:M,texcoord:W,indices:Y}}function Tr(o){return Math.random()*o|0}function fr(o,a){a=a||{};var m=o.position.numElements,v=x(4,m,Uint8Array),T=a.rand||function(ee,J){return J<3?Tr(256):255};if(o.color=v,o.indices)for(var P=0;P<m;++P)v.push(T(P,0),T(P,1),T(P,2),T(P,3));else for(var I=a.vertsPerColor||3,M=m/I,W=0;W<M;++W)for(var Y=[T(W,0),T(W,1),T(W,2),T(W,3)],Q=0;Q<I;++Q)v.push(Y);return o}function tr(o){return function(a){var m=o.apply(this,Array.prototype.slice.call(arguments,1));return k.createBuffersFromArrays(a,m)}}function sr(o){return function(a){var m=o.apply(null,Array.prototype.slice.call(arguments,1));return k.createBufferInfoFromArrays(a,m)}}var dr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function te(o,a,m,v){v=v||0;for(var T=o.length,P=0;P<T;++P)a[m+P]=o[P]+v}function r(o,a){var m=F(o),v=new m.constructor(a),T=v;return m.numComponents&&m.numElements&&q(v,m.numComponents),o.data&&(T={data:v},ce.copyNamedProperties(dr,o,T)),T}function i(o){for(var a={},m,v=function(){var Q=o[T];Object.keys(Q).forEach(function(ee){a[ee]||(a[ee]=[]),!m&&ee!=="indices"&&(m=ee);var J=Q[ee],ie=H(J,ee),ue=F(J),Z=ue.length/ie;a[ee].push(Z)})},T=0;T<o.length;++T)v();function P(Y){for(var Q=0,ee,J=0;J<o.length;++J){var ie=o[J],ue=ie[Y],Z=F(ue);Q+=Z.length,(!ee||ue.data)&&(ee=ue)}return{length:Q,spec:ee}}function I(Y,Q,ee){for(var J=0,ie=0,ue=0;ue<o.length;++ue){var Z=o[ue],me=Z[Y],Me=F(me);Y==="indices"?(te(Me,ee,ie,J),J+=Q[ue]):te(Me,ee,ie),ie+=Me.length}}var M=a[m],W={};return Object.keys(a).forEach(function(Y){var Q=P(Y),ee=r(Q.spec,Q.length);I(Y,M,F(ee)),W[Y]=ee}),W}function f(o){var a={};return Object.keys(o).forEach(function(m){var v=o[m],T=F(v),P=r(v,T.length);te(T,F(P),0),a[m]=P}),a}u.create3DFBufferInfo=sr(Ve),u.create3DFBuffers=tr(Ve),u.createCubeBufferInfo=sr(he),u.createCubeBuffers=tr(he),u.createPlaneBufferInfo=sr(B),u.createPlaneBuffers=tr(B),u.createSphereBufferInfo=sr(O),u.createSphereBuffers=tr(O),u.createTruncatedConeBufferInfo=sr(_e),u.createTruncatedConeBuffers=tr(_e),u.createXYQuadBufferInfo=sr(w),u.createXYQuadBuffers=tr(w);var E=u.createCrescentBufferInfo=sr(Ne),s=u.createCrescentBuffers=tr(Ne);u.createCylinderBufferInfo=sr(Qe),u.createCylinderBuffers=tr(Qe),u.createTorusBufferInfo=sr(Xe),u.createTorusBuffers=tr(Xe),u.createDiscBufferInfo=sr(ur),u.createDiscBuffers=tr(ur),u.createCresentBufferInfo=E,u.createCresentBuffers=s,u.createCresentVertices=Ne},"./src/programs.js":(de,u,z)=>{function fe(e){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(e)}u.__esModule=!0,u.bindTransformFeedbackInfo=Rt,u.bindUniformBlock=Ft,u.createAttributeSetters=Jt,u.createProgram=lt,u.createProgramAsync=void 0,u.createProgramFromScripts=zt,u.createProgramFromSources=Yt,u.createProgramInfo=c,u.createProgramInfoAsync=void 0,u.createProgramInfoFromProgram=Bt,u.createProgramInfos=A,u.createProgramInfosAsync=void 0,u.createPrograms=y,u.createProgramsAsync=void 0,u.createTransformFeedback=qt,u.createTransformFeedbackInfo=xt,u.createUniformBlockInfo=Zt,u.createUniformBlockInfoFromProgram=Qt,u.createUniformBlockSpecFromProgram=qr,u.createUniformSetters=rt,u.setAttributes=$t,u.setBlockUniforms=ra,u.setBuffersAndAttributes=ta,u.setUniformBlock=Sn,u.setUniforms=Ct,u.setUniformsAndBindTextures=void 0;var k=V(z("./src/utils.js")),ce=V(z("./src/helper.js"));function oe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(oe=function(b){return b?n:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||fe(e)!="object"&&typeof e!="function")return{default:e};var n=oe(t);if(n&&n.has(e))return n.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var R=b?Object.getOwnPropertyDescriptor(e,d):null;R&&(R.get||R.set)?Object.defineProperty(p,d,R):p[d]=e[d]}return p.default=e,n&&n.set(e,p),p}function le(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */le=function(){return t};var e,t={},n=Object.prototype,p=n.hasOwnProperty,b=Object.defineProperty||function(ne,L,K){ne[L]=K.value},d=typeof Symbol=="function"?Symbol:{},R=d.iterator||"@@iterator",g=d.asyncIterator||"@@asyncIterator",D=d.toStringTag||"@@toStringTag";function C(ne,L,K){return Object.defineProperty(ne,L,{value:K,enumerable:!0,configurable:!0,writable:!0}),ne[L]}try{C({},"")}catch{C=function(K,Ee,Ie){return K[Ee]=Ie}}function N(ne,L,K,Ee){var Ie=L&&L.prototype instanceof Ge?L:Ge,ge=Object.create(Ie.prototype),lr=new oa(Ee||[]);return b(ge,"_invoke",{value:Da(ne,K,lr)}),ge}function re(ne,L,K){try{return{type:"normal",arg:ne.call(L,K)}}catch(Ee){return{type:"throw",arg:Ee}}}t.wrap=N;var ve="suspendedStart",ye="suspendedYield",xe="executing",De="completed",Be={};function Ge(){}function ze(){}function nr(){}var mr={};C(mr,R,function(){return this});var Pr=Object.getPrototypeOf,Nr=Pr&&Pr(Pr(ia([])));Nr&&Nr!==n&&p.call(Nr,R)&&(mr=Nr);var kr=nr.prototype=Ge.prototype=Object.create(mr);function gn(ne){["next","throw","return"].forEach(function(L){C(ne,L,function(K){return this._invoke(L,K)})})}function wn(ne,L){function K(Ie,ge,lr,gr){var xr=re(ne[Ie],ne,ge);if(xr.type!=="throw"){var vt=xr.arg,tt=vt.value;return tt&&fe(tt)=="object"&&p.call(tt,"__await")?L.resolve(tt.__await).then(function(mt){K("next",mt,lr,gr)},function(mt){K("throw",mt,lr,gr)}):L.resolve(tt).then(function(mt){vt.value=mt,lr(vt)},function(mt){return K("throw",mt,lr,gr)})}gr(xr.arg)}var Ee;b(this,"_invoke",{value:function(ge,lr){function gr(){return new L(function(xr,vt){K(ge,lr,xr,vt)})}return Ee=Ee?Ee.then(gr,gr):gr()}})}function Da(ne,L,K){var Ee=ve;return function(Ie,ge){if(Ee===xe)throw new Error("Generator is already running");if(Ee===De){if(Ie==="throw")throw ge;return{value:e,done:!0}}for(K.method=Ie,K.arg=ge;;){var lr=K.delegate;if(lr){var gr=pa(lr,K);if(gr){if(gr===Be)continue;return gr}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(Ee===ve)throw Ee=De,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);Ee=xe;var xr=re(ne,L,K);if(xr.type==="normal"){if(Ee=K.done?De:ye,xr.arg===Be)continue;return{value:xr.arg,done:K.done}}xr.type==="throw"&&(Ee=De,K.method="throw",K.arg=xr.arg)}}}function pa(ne,L){var K=L.method,Ee=ne.iterator[K];if(Ee===e)return L.delegate=null,K==="throw"&&ne.iterator.return&&(L.method="return",L.arg=e,pa(ne,L),L.method==="throw")||K!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+K+"' method")),Be;var Ie=re(Ee,ne.iterator,L.arg);if(Ie.type==="throw")return L.method="throw",L.arg=Ie.arg,L.delegate=null,Be;var ge=Ie.arg;return ge?ge.done?(L[ne.resultName]=ge.value,L.next=ne.nextLoc,L.method!=="return"&&(L.method="next",L.arg=e),L.delegate=null,Be):ge:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,Be)}function Oa(ne){var L={tryLoc:ne[0]};1 in ne&&(L.catchLoc=ne[1]),2 in ne&&(L.finallyLoc=ne[2],L.afterLoc=ne[3]),this.tryEntries.push(L)}function aa(ne){var L=ne.completion||{};L.type="normal",delete L.arg,ne.completion=L}function oa(ne){this.tryEntries=[{tryLoc:"root"}],ne.forEach(Oa,this),this.reset(!0)}function ia(ne){if(ne||ne===""){var L=ne[R];if(L)return L.call(ne);if(typeof ne.next=="function")return ne;if(!isNaN(ne.length)){var K=-1,Ee=function Ie(){for(;++K<ne.length;)if(p.call(ne,K))return Ie.value=ne[K],Ie.done=!1,Ie;return Ie.value=e,Ie.done=!0,Ie};return Ee.next=Ee}}throw new TypeError(fe(ne)+" is not iterable")}return ze.prototype=nr,b(kr,"constructor",{value:nr,configurable:!0}),b(nr,"constructor",{value:ze,configurable:!0}),ze.displayName=C(nr,D,"GeneratorFunction"),t.isGeneratorFunction=function(ne){var L=typeof ne=="function"&&ne.constructor;return!!L&&(L===ze||(L.displayName||L.name)==="GeneratorFunction")},t.mark=function(ne){return Object.setPrototypeOf?Object.setPrototypeOf(ne,nr):(ne.__proto__=nr,C(ne,D,"GeneratorFunction")),ne.prototype=Object.create(kr),ne},t.awrap=function(ne){return{__await:ne}},gn(wn.prototype),C(wn.prototype,g,function(){return this}),t.AsyncIterator=wn,t.async=function(ne,L,K,Ee,Ie){Ie===void 0&&(Ie=Promise);var ge=new wn(N(ne,L,K,Ee),Ie);return t.isGeneratorFunction(L)?ge:ge.next().then(function(lr){return lr.done?lr.value:ge.next()})},gn(kr),C(kr,D,"Generator"),C(kr,R,function(){return this}),C(kr,"toString",function(){return"[object Generator]"}),t.keys=function(ne){var L=Object(ne),K=[];for(var Ee in L)K.push(Ee);return K.reverse(),function Ie(){for(;K.length;){var ge=K.pop();if(ge in L)return Ie.value=ge,Ie.done=!1,Ie}return Ie.done=!0,Ie}},t.values=ia,oa.prototype={constructor:oa,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(aa),!L)for(var K in this)K.charAt(0)==="t"&&p.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=e)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var K=this;function Ee(vt,tt){return lr.type="throw",lr.arg=L,K.next=vt,tt&&(K.method="next",K.arg=e),!!tt}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var ge=this.tryEntries[Ie],lr=ge.completion;if(ge.tryLoc==="root")return Ee("end");if(ge.tryLoc<=this.prev){var gr=p.call(ge,"catchLoc"),xr=p.call(ge,"finallyLoc");if(gr&&xr){if(this.prev<ge.catchLoc)return Ee(ge.catchLoc,!0);if(this.prev<ge.finallyLoc)return Ee(ge.finallyLoc)}else if(gr){if(this.prev<ge.catchLoc)return Ee(ge.catchLoc,!0)}else{if(!xr)throw new Error("try statement without catch or finally");if(this.prev<ge.finallyLoc)return Ee(ge.finallyLoc)}}}},abrupt:function(L,K){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ie=this.tryEntries[Ee];if(Ie.tryLoc<=this.prev&&p.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var ge=Ie;break}}ge&&(L==="break"||L==="continue")&&ge.tryLoc<=K&&K<=ge.finallyLoc&&(ge=null);var lr=ge?ge.completion:{};return lr.type=L,lr.arg=K,ge?(this.method="next",this.next=ge.finallyLoc,Be):this.complete(lr)},complete:function(L,K){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&K&&(this.next=K),Be},finish:function(L){for(var K=this.tryEntries.length-1;K>=0;--K){var Ee=this.tryEntries[K];if(Ee.finallyLoc===L)return this.complete(Ee.completion,Ee.afterLoc),aa(Ee),Be}},catch:function(L){for(var K=this.tryEntries.length-1;K>=0;--K){var Ee=this.tryEntries[K];if(Ee.tryLoc===L){var Ie=Ee.completion;if(Ie.type==="throw"){var ge=Ie.arg;aa(Ee)}return ge}}throw new Error("illegal catch attempt")},delegateYield:function(L,K,Ee){return this.delegate={iterator:ia(L),resultName:K,nextLoc:Ee},this.method==="next"&&(this.arg=e),Be}},t}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),n.push.apply(n,p)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(p){F(e,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(n,p))})}return e}function F(e,t,n){return t=H(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=q(e,"string");return fe(t)=="symbol"?t:String(t)}function q(e,t){if(fe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var p=n.call(e,t||"default");if(fe(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x(e,t,n,p,b,d,R){try{var g=e[d](R),D=g.value}catch(C){n(C);return}g.done?t(D):Promise.resolve(D).then(p,b)}function G(e){return function(){var t=this,n=arguments;return new Promise(function(p,b){var d=e.apply(t,n);function R(D){x(d,p,b,R,g,"next",D)}function g(D){x(d,p,b,R,g,"throw",D)}R(void 0)})}}function ae(e,t){return we(e)||Ue(e,t)||se(e,t)||pe()}function pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var p,b,d,R,g=[],D=!0,C=!1;try{if(d=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;D=!1}else for(;!(D=(p=d.call(n)).done)&&(g.push(p.value),g.length!==t);D=!0);}catch(N){C=!0,b=N}finally{try{if(!D&&n.return!=null&&(R=n.return(),Object(R)!==R))return}finally{if(C)throw b}}return g}}function we(e){if(Array.isArray(e))return e}function or(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=se(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(C){throw C},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,R=!1,g;return{s:function(){n=n.call(e)},n:function(){var C=n.next();return d=C.done,C},e:function(C){R=!0,g=C},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(R)throw g}}}}function ir(e){return B(e)||w(e)||se(e)||Je()}function Je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){if(e){if(typeof e=="string")return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}function w(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,p=new Array(t);n<t;n++)p[n]=e[n];return p}var _=ce.error,he=ce.warn;function _e(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var Re=33984,Ve=35048,Ne=34962,Qe=34963,Xe=35345,ur=35982,Tr=36386,fr=35713,tr=35714,sr=35632,dr=35633,te=35981,r=35718,i=35721,f=35971,E=35382,s=35396,o=35398,a=35392,m=35395,v=5126,T=35664,P=35665,I=35666,M=5124,W=35667,Y=35668,Q=35669,ee=35670,J=35671,ie=35672,ue=35673,Z=35674,me=35675,Me=35676,He=35678,Le=35680,je=35679,Se=35682,Fe=35685,qe=35686,ke=35687,Ke=35688,We=35689,Ze=35690,Ce=36289,Oe=36292,hr=36293,cr=5125,Ar=36294,Sr=36295,Or=36296,Lr=36298,Gr=36299,Jr=36300,yt=36303,pt=36306,bt=36307,vr=36308,Xn=36311,Et=3553,Tt=34067,jt=32879,dt=35866,Pe={};function cn(e,t){return Pe[t].bindPoint}function Hn(e,t){return function(n){e.uniform1f(t,n)}}function zn(e,t){return function(n){e.uniform1fv(t,n)}}function Yn(e,t){return function(n){e.uniform2fv(t,n)}}function Kn(e,t){return function(n){e.uniform3fv(t,n)}}function qn(e,t){return function(n){e.uniform4fv(t,n)}}function ln(e,t){return function(n){e.uniform1i(t,n)}}function sn(e,t){return function(n){e.uniform1iv(t,n)}}function vn(e,t){return function(n){e.uniform2iv(t,n)}}function mn(e,t){return function(n){e.uniform3iv(t,n)}}function hn(e,t){return function(n){e.uniform4iv(t,n)}}function jr(e,t){return function(n){e.uniform1ui(t,n)}}function er(e,t){return function(n){e.uniform1uiv(t,n)}}function At(e,t){return function(n){e.uniform2uiv(t,n)}}function $r(e,t){return function(n){e.uniform3uiv(t,n)}}function _t(e,t){return function(n){e.uniform4uiv(t,n)}}function Wr(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function yr(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function yn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function pn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function bn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Fr(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function ct(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Vt(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function Qn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function br(e,t,n,p){var b=cn(e,t);return k.isWebGL2(e)?function(d){var R,g;!d||ce.isTexture(e,d)?(R=d,g=null):(R=d.texture,g=d.sampler),e.uniform1i(p,n),e.activeTexture(Re+n),e.bindTexture(b,R),e.bindSampler(n,g)}:function(d){e.uniform1i(p,n),e.activeTexture(Re+n),e.bindTexture(b,d)}}function Er(e,t,n,p,b){for(var d=cn(e,t),R=new Int32Array(b),g=0;g<b;++g)R[g]=n+g;return k.isWebGL2(e)?function(D){e.uniform1iv(p,R),D.forEach(function(C,N){e.activeTexture(Re+R[N]);var re,ve;!C||ce.isTexture(e,C)?(re=C,ve=null):(re=C.texture,ve=C.sampler),e.bindSampler(n,ve),e.bindTexture(d,re)})}:function(D){e.uniform1iv(p,R),D.forEach(function(C,N){e.activeTexture(Re+R[N]),e.bindTexture(d,C)})}}Pe[v]={Type:Float32Array,size:4,setter:Hn,arraySetter:zn},Pe[T]={Type:Float32Array,size:8,setter:Yn,cols:2},Pe[P]={Type:Float32Array,size:12,setter:Kn,cols:3},Pe[I]={Type:Float32Array,size:16,setter:qn,cols:4},Pe[M]={Type:Int32Array,size:4,setter:ln,arraySetter:sn},Pe[W]={Type:Int32Array,size:8,setter:vn,cols:2},Pe[Y]={Type:Int32Array,size:12,setter:mn,cols:3},Pe[Q]={Type:Int32Array,size:16,setter:hn,cols:4},Pe[cr]={Type:Uint32Array,size:4,setter:jr,arraySetter:er},Pe[Ar]={Type:Uint32Array,size:8,setter:At,cols:2},Pe[Sr]={Type:Uint32Array,size:12,setter:$r,cols:3},Pe[Or]={Type:Uint32Array,size:16,setter:_t,cols:4},Pe[ee]={Type:Uint32Array,size:4,setter:ln,arraySetter:sn},Pe[J]={Type:Uint32Array,size:8,setter:vn,cols:2},Pe[ie]={Type:Uint32Array,size:12,setter:mn,cols:3},Pe[ue]={Type:Uint32Array,size:16,setter:hn,cols:4},Pe[Z]={Type:Float32Array,size:32,setter:Wr,rows:2,cols:2},Pe[me]={Type:Float32Array,size:48,setter:yr,rows:3,cols:3},Pe[Me]={Type:Float32Array,size:64,setter:yn,rows:4,cols:4},Pe[Fe]={Type:Float32Array,size:32,setter:pn,rows:2,cols:3},Pe[qe]={Type:Float32Array,size:32,setter:Fr,rows:2,cols:4},Pe[ke]={Type:Float32Array,size:48,setter:bn,rows:3,cols:2},Pe[Ke]={Type:Float32Array,size:48,setter:Vt,rows:3,cols:4},Pe[We]={Type:Float32Array,size:64,setter:ct,rows:4,cols:2},Pe[Ze]={Type:Float32Array,size:64,setter:Qn,rows:4,cols:3},Pe[He]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Pe[Le]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},Pe[je]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},Pe[Se]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Pe[Ce]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:dt},Pe[Oe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:dt},Pe[hr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},Pe[Lr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Pe[Gr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},Pe[Jr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},Pe[yt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:dt},Pe[pt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Pe[bt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:jt},Pe[vr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Tt},Pe[Xn]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:dt};function St(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||v,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function wr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||M,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Ir(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||cr,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Xr(e,t,n){var p=n.size,b=n.count;return function(d){e.bindBuffer(Ne,d.buffer);for(var R=d.size||d.numComponents||p,g=R/b,D=d.type||v,C=Pe[D],N=C.size*R,re=d.normalize||!1,ve=d.offset||0,ye=N/b,xe=0;xe<b;++xe)e.enableVertexAttribArray(t+xe),e.vertexAttribPointer(t+xe,g,D,re,N,ve+ye*xe),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+xe,d.divisor||0)}}var $e={};$e[v]={size:4,setter:St},$e[T]={size:8,setter:St},$e[P]={size:12,setter:St},$e[I]={size:16,setter:St},$e[M]={size:4,setter:wr},$e[W]={size:8,setter:wr},$e[Y]={size:12,setter:wr},$e[Q]={size:16,setter:wr},$e[cr]={size:4,setter:Ir},$e[Ar]={size:8,setter:Ir},$e[Sr]={size:12,setter:Ir},$e[Or]={size:16,setter:Ir},$e[ee]={size:4,setter:wr},$e[J]={size:8,setter:wr},$e[ie]={size:12,setter:wr},$e[ue]={size:16,setter:wr},$e[Z]={size:4,setter:Xr,count:2},$e[me]={size:9,setter:Xr,count:3},$e[Me]={size:16,setter:Xr,count:4};var Hr=/ERROR:\s*\d+:(\d+)/gi;function Vr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=ir(t.matchAll(Hr)),b=new Map(p.map(function(d,R){var g=parseInt(d[1]),D=p[R+1],C=D?D.index:t.length,N=t.substring(d.index,C);return[g-1,N]}));return e.split(`
`).map(function(d,R){var g=b.get(R);return"".concat(R+1+n,": ").concat(d).concat(g?`

^^^ `.concat(g):"")}).join(`
`)}var kt=/^[ \t]*\n/;function pr(e){var t=0;return kt.test(e)&&(t=1,e=e.replace(kt,"")),{lineOffset:t,shaderSource:e}}function Pt(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function gt(e,t,n,p){p=p||_;var b=e.getShaderParameter(n,fr);if(!b){var d=e.getShaderInfoLog(n),R=pr(e.getShaderSource(n)),g=R.lineOffset,D=R.shaderSource,C="".concat(Vr(D,d,g),`
Error compiling `).concat(k.glEnumToString(e,t),": ").concat(d);return p(C),C}return""}function zr(e,t,n){var p,b,d;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){var R=e;n=R.errorCallback,e=R.attribLocations,p=R.transformFeedbackVaryings,b=R.transformFeedbackMode,d=R.callback}var g=n||_,D=[],C={errorCallback:function(ve){D.push(ve);for(var ye=arguments.length,xe=new Array(ye>1?ye-1:0),De=1;De<ye;De++)xe[De-1]=arguments[De];g.apply(void 0,[ve].concat(xe))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:d,errors:D};{var N={};Array.isArray(e)?e.forEach(function(re,ve){N[re]=t?t[ve]:ve}):N=e||{},C.attribLocations=N}return C}var Yr=["VERTEX_SHADER","FRAGMENT_SHADER"];function En(e,t){if(t.indexOf("frag")>=0)return sr;if(t.indexOf("vert")>=0)return dr}function Tn(e,t,n){var p=e.getAttachedShaders(t),b=or(p),d;try{for(b.s();!(d=b.n()).done;){var R=d.value;n.has(R)&&e.deleteShader(R)}}catch(g){b.e(g)}finally{b.f()}e.deleteProgram(t)}var dn=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(n){return setTimeout(n,t)})};function An(e,t,n){for(var p=e.createProgram(),b=zr(n),d=b.attribLocations,R=b.transformFeedbackVaryings,g=b.transformFeedbackMode,D=0;D<t.length;++D){var C=t[D];if(typeof C=="string"){var N=_e(C),re=N?N.text:C,ve=e[Yr[D]];N&&N.type&&(ve=En(e,N.type)||ve),C=e.createShader(ve),e.shaderSource(C,pr(re).shaderSource),e.compileShader(C),e.attachShader(p,C)}}Object.entries(d).forEach(function(xe){var De=ae(xe,2),Be=De[0],Ge=De[1];return e.bindAttribLocation(p,Ge,Be)});{var ye=R;ye&&(ye.attribs&&(ye=ye.attribs),Array.isArray(ye)||(ye=Object.keys(ye)),e.transformFeedbackVaryings(p,ye,g||te))}return e.linkProgram(p),p}function lt(e,t,n,p,b){var d=zr(n,p,b),R=new Set(t),g=An(e,t,d);function D(C,N){var re=Ht(C,N,d.errorCallback);return re&&Tn(C,N,R),re}if(d.callback){Wt(e,g).then(function(){var C=D(e,g);d.callback(C,C?void 0:g)});return}return D(e,g)?void 0:g}function Kr(e){return function(t,n){for(var p=arguments.length,b=new Array(p>2?p-2:0),d=2;d<p;d++)b[d-2]=arguments[d];return new Promise(function(R,g){var D=zr.apply(void 0,b);D.callback=function(C,N){C?g(C):R(N)},e(t,n,D)})}}u.createProgramAsync=Kr(lt),u.createProgramInfoAsync=Kr(c);function Wt(e,t){return Xt.apply(this,arguments)}function Xt(){return Xt=G(le().mark(function e(t,n){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,C){return D.getProgramParameter(C,p.COMPLETION_STATUS_KHR)}:function(){return!0},d=0;case 3:return g.next=5,dn(d);case 5:d=16.666666666666668;case 6:if(!b(t,n)){g.next=3;break}case 7:case"end":return g.stop()}},e)})),Xt.apply(this,arguments)}function et(e,t){return wt.apply(this,arguments)}function wt(){return wt=G(le().mark(function e(t,n){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=0,b=Object.values(n);case 1:if(!(p<b.length)){g.next=8;break}return d=b[p],g.next=5,Wt(t,d);case 5:p++,g.next=1;break;case 8:case"end":return g.stop()}},e)})),wt.apply(this,arguments)}function Ht(e,t,n){n=n||_;var p=e.getProgramParameter(t,tr);if(!p){var b=e.getProgramInfoLog(t);n("Error in program linking: ".concat(b));var d=e.getAttachedShaders(t),R=d.map(function(g){return gt(e,e.getShaderParameter(g,e.SHADER_TYPE),g,n)});return"".concat(b,`
`).concat(R.filter(function(g){return g}).join(`
`))}}function zt(e,t,n,p,b){var d=zr(n,p,b),R=[],g=or(t),D;try{for(g.s();!(D=g.n()).done;){var C=D.value,N=_e(C);if(!N)return Pt(d,"unknown script element: ".concat(C));R.push(N.text)}}catch(re){g.e(re)}finally{g.f()}return lt(e,R,d)}function Yt(e,t,n,p,b){return lt(e,t,n,p,b)}function Kt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var Zn=/(\.|\[|]|\w+)/g,Jn=function(t){return t>="0"&&t<="9"};function st(e,t,n,p){for(var b=e.split(Zn).filter(function(xe){return xe!==""}),d=0,R="";;){var g=b[d++];R+=g;var D=Jn(g[0]),C=D?parseInt(g):g;D&&(R+=b[d++]);var N=d===b.length;if(N){n[C]=t;break}else{var re=b[d++],ve=re==="[",ye=n[C]||(ve?[]:{});n[C]=ye,n=ye,p[R]=p[R]||function(xe){return function(De){Pn(xe,De)}}(ye),R+=re}}}function rt(e,t){var n=0;function p(ve,ye,xe){var De=ye.name.endsWith("[0]"),Be=ye.type,Ge=Pe[Be];if(!Ge)throw new Error("unknown type: 0x".concat(Be.toString(16)));var ze;if(Ge.bindPoint){var nr=n;n+=ye.size,De?ze=Ge.arraySetter(e,Be,nr,xe,ye.size):ze=Ge.setter(e,Be,nr,xe,ye.size)}else Ge.arraySetter&&De?ze=Ge.arraySetter(e,xe):ze=Ge.setter(e,xe);return ze.location=xe,ze}for(var b={},d={},R=e.getProgramParameter(t,r),g=0;g<R;++g){var D=e.getActiveUniform(t,g);if(!Kt(D)){var C=D.name;C.endsWith("[0]")&&(C=C.substr(0,C.length-3));var N=e.getUniformLocation(t,D.name);if(N){var re=p(t,D,N);b[C]=re,st(C,re,d,b)}}}return b}function xt(e,t){for(var n={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var d=e.getTransformFeedbackVarying(t,b);n[d.name]={index:b,type:d.type,size:d.size}}return n}function Rt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(var p in n){var b=t[p];if(b){var d=n[p];d.offset?e.bindBufferRange(ur,b.index,d.buffer,d.offset,d.size):e.bindBufferBase(ur,b.index,d.buffer)}}}function qt(e,t,n){var p=e.createTransformFeedback();return e.bindTransformFeedback(Tr,p),e.useProgram(t.program),Rt(e,t,n),e.bindTransformFeedback(Tr,null),p}function qr(e,t){for(var n=e.getProgramParameter(t,r),p=[],b=[],d=0;d<n;++d){b.push(d),p.push({});var R=e.getActiveUniform(t,d);p[d].name=R.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ve){var ye=ve[0],xe=ve[1];e.getActiveUniforms(t,b,e[ye]).forEach(function(De,Be){p[Be][xe]=De})});for(var g={},D=e.getProgramParameter(t,E),C=0;C<D;++C){var N=e.getActiveUniformBlockName(t,C),re={index:e.getUniformBlockIndex(t,N),usedByVertexShader:e.getActiveUniformBlockParameter(t,C,s),usedByFragmentShader:e.getActiveUniformBlockParameter(t,C,o),size:e.getActiveUniformBlockParameter(t,C,a),uniformIndices:e.getActiveUniformBlockParameter(t,C,m)};re.used=re.usedByVertexShader||re.usedByFragmentShader,g[N]=re}return{blockSpecs:g,uniformData:p}}var _n=/\[\d+\]\.$/,$n=function(t,n){return((t+(n-1))/n|0)*n};function ea(e,t,n,p){if(t||n){p=p||1;var b=e.length,d=b/4;return function(R){for(var g=0,D=0,C=0;C<d;++C){for(var N=0;N<p;++N)e[g++]=R[D++];g+=4-p}}}else return function(R){R.length?e.set(R):e[0]=R}}function Qt(e,t,n,p){var b=n.blockSpecs,d=n.uniformData,R=b[p];if(!R)return he("no uniform block object named:",p),{name:p,uniforms:{}};var g=new ArrayBuffer(R.size),D=e.createBuffer(),C=R.index;e.bindBuffer(Xe,D),e.uniformBlockBinding(t,R.index,C);var N=p+".";_n.test(N)&&(N=N.replace(_n,"."));var re={},ve={},ye={};return R.uniformIndices.forEach(function(xe){var De=d[xe],Be=De.name;Be.startsWith(N)&&(Be=Be.substr(N.length));var Ge=Be.endsWith("[0]");Ge&&(Be=Be.substr(0,Be.length-3));var ze=Pe[De.type],nr=ze.Type,mr=Ge?$n(ze.size,16)*De.size:ze.size*De.size,Pr=new nr(g,De.offset,mr/nr.BYTES_PER_ELEMENT);re[Be]=Pr;var Nr=ea(Pr,Ge,ze.rows,ze.cols);ve[Be]=Nr,st(Be,Nr,ye,ve)}),{name:p,array:g,asFloat:new Float32Array(g),buffer:D,uniforms:re,setters:ve}}function Zt(e,t,n){return Qt(e,t.program,t.uniformBlockSpec,n)}function Ft(e,t,n){var p=t.uniformBlockSpec||t,b=p.blockSpecs[n.name];if(b){var d=b.index;return e.bindBufferRange(Xe,d,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Sn(e,t,n){Ft(e,t,n)&&e.bufferData(Xe,n.array,Ve)}function ra(e,t){var n=e.setters;for(var p in t){var b=n[p];if(b){var d=t[p];b(d)}}}function Pn(e,t){for(var n in t){var p=e[n];typeof p=="function"?p(t[n]):Pn(e[n],t[n])}}function Ct(e){for(var t=e.uniformSetters||e,n=arguments.length<=1?0:arguments.length-1,p=0;p<n;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var d=b.length,R=0;R<d;++R)Ct(t,b[R]);else for(var g in b){var D=t[g];D&&D(b[g])}}}u.setUniformsAndBindTextures=Ct;function Jt(e,t){for(var n={},p=e.getProgramParameter(t,i),b=0;b<p;++b){var d=e.getActiveAttrib(t,b);if(!Kt(d)){var R=e.getAttribLocation(t,d.name),g=$e[d.type],D=g.setter(e,R,g);D.location=R,n[d.name]=D}}return n}function $t(e,t){for(var n in t){var p=e[n];p&&p(t[n])}}function ta(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):($t(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Qe,n.indices))}function Bt(e,t){var n=rt(e,t),p=Jt(e,t),b={program:t,uniformSetters:n,attribSetters:p};return k.isWebGL2(e)&&(b.uniformBlockSpec=qr(e,t),b.transformFeedbackInfo=xt(e,t)),b}var na=/\s|{|}|;/;function c(e,t,n,p,b){var d=zr(n,p,b),R=[];if(t=t.map(function(C){if(!na.test(C)){var N=_e(C);if(N)C=N.text;else{var re="no element with id: ".concat(C);d.errorCallback(re),R.push(re)}}return C}),R.length)return Pt(d,"");var g=d.callback;g&&(d.callback=function(C,N){g(C,C?void 0:Bt(e,N))});var D=Yt(e,t,d);return D?Bt(e,D):null}function h(e,t,n,p,b){for(var d=0,R=Object.entries(t);d<R.length;d++){var g=ae(R[d],2),D=g[0],C=g[1],N=be({},b),re=n[D];Array.isArray(re)||Object.assign(N,re);var ve=Ht(e,C,N.errorCallback);if(ve){for(var ye=0,xe=Object.values(t);ye<xe.length;ye++){var De=xe[ye],Be=e.getAttachedShaders(De);e.deleteProgram(De);var Ge=or(Be),ze;try{for(Ge.s();!(ze=Ge.n()).done;){var nr=ze.value;p.has(nr)||e.deleteShader(nr)}}catch(mr){Ge.e(mr)}finally{Ge.f()}}return ve}}}function y(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(R){var g=ae(R,2),D=g[0],C=g[1],N=be({},n),re=Array.isArray(C)?C:C.shaders;return Array.isArray(C)||Object.assign(N,C),re.forEach(p.add,p),[D,An(e,re,N)]}));if(n.callback){et(e,b).then(function(){var R=h(e,b,t,p,n);n.callback(R,R?void 0:b)});return}var d=h(e,b,t,p,n);return d?void 0:b}function A(e,t,n){n=zr(n);function p(R,g){return Object.fromEntries(Object.entries(g).map(function(D){var C=ae(D,2),N=C[0],re=C[1];return[N,Bt(R,re)]}))}var b=n.callback;b&&(n.callback=function(R,g){b(R,R?void 0:p(e,g))});var d=y(e,t,n);if(!(b||!d))return p(e,d)}u.createProgramsAsync=Kr(y),u.createProgramInfosAsync=Kr(A)},"./src/textures.js":(de,u,z)=>{function fe(c){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},fe(c)}u.__esModule=!0,u.canFilter=dn,u.canGenerateMipmap=Tn,u.createSampler=Kt,u.createSamplers=Zn,u.createTexture=$t,u.createTextures=na,u.getBytesPerElementForInternalFormat=zr,u.getFormatAndTypeForInternalFormat=Yr,u.getNumComponentsForFormat=An,u.loadTextureFromUrl=Sn,u.resizeTexture=ta,u.setDefaultTextureColor=Wt,u.setEmptyTexture=Jt,u.setSamplerParameters=Yt,u.setTextureDefaults_=Xt,u.setTextureFilteringForSize=st,u.setTextureFromArray=Ct,u.setTextureFromElement=qt,u.setTextureParameters=zt;var k=le(z("./src/utils.js")),ce=le(z("./src/typedarrays.js")),oe=le(z("./src/helper.js"));function V(c){if(typeof WeakMap!="function")return null;var h=new WeakMap,y=new WeakMap;return(V=function(e){return e?y:h})(c)}function le(c,h){if(!h&&c&&c.__esModule)return c;if(c===null||fe(c)!="object"&&typeof c!="function")return{default:c};var y=V(h);if(y&&y.has(c))return y.get(c);var A={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var n=e?Object.getOwnPropertyDescriptor(c,t):null;n&&(n.get||n.set)?Object.defineProperty(A,t,n):A[t]=c[t]}return A.default=c,y&&y.set(c,A),A}var $={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},be=ce.isArrayBuffer,F=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),H=6406,q=6407,x=6408,G=6409,ae=6410,pe=6402,Ue=34041,we=33071,or=9728,ir=9729,Je=3553,se=34067,w=32879,B=35866,O=34069,_=34070,he=34071,_e=34072,Re=34073,Ve=34074,Ne=10241,Qe=10240,Xe=10242,ur=10243,Tr=32882,fr=33082,tr=33083,sr=33084,dr=33085,te=34892,r=34893,i=3317,f=3314,E=32878,s=3316,o=3315,a=32877,m=37443,v=37441,T=37440,P=33321,I=36756,M=33325,W=33326,Y=33330,Q=33329,ee=33338,J=33337,ie=33340,ue=33339,Z=33323,me=36757,Me=33327,He=33328,Le=33336,je=33335,Se=33332,Fe=33331,qe=33334,ke=33333,Ke=32849,We=35905,Ze=36194,Ce=36758,Oe=35898,hr=35901,cr=34843,Ar=34837,Sr=36221,Or=36239,Lr=36215,Gr=36233,Jr=36209,yt=36227,pt=32856,bt=35907,vr=36759,Xn=32855,Et=32854,Tt=32857,jt=34842,dt=34836,Pe=36220,cn=36238,Hn=36975,zn=36214,Yn=36232,Kn=36226,qn=36208,ln=33189,sn=33190,vn=36012,mn=36013,hn=35056,jr=5120,er=5121,At=5122,$r=5123,_t=5124,Wr=5125,yr=5126,yn=32819,pn=32820,bn=33635,Fr=5131,ct=36193,Vt=33640,Qn=35899,br=35902,Er=36269,St=34042,wr=33319,Ir=33320,Xr=6403,$e=36244,Hr=36248,Vr=36249,kt={};{var pr=kt;pr[H]={numColorComponents:1},pr[G]={numColorComponents:1},pr[ae]={numColorComponents:2},pr[q]={numColorComponents:3},pr[x]={numColorComponents:4},pr[Xr]={numColorComponents:1},pr[$e]={numColorComponents:1},pr[wr]={numColorComponents:2},pr[Ir]={numColorComponents:2},pr[q]={numColorComponents:3},pr[Hr]={numColorComponents:3},pr[x]={numColorComponents:4},pr[Vr]={numColorComponents:4},pr[pe]={numColorComponents:1},pr[Ue]={numColorComponents:2}}var Pt;function gt(c){if(!Pt){var h={};h[H]={textureFormat:H,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Fr,ct,yr]},h[G]={textureFormat:G,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Fr,ct,yr]},h[ae]={textureFormat:ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[er,Fr,ct,yr]},h[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[er,Fr,ct,yr,bn]},h[x]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[er,Fr,ct,yr,yn,pn]},h[pe]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Wr,$r]},h[P]={textureFormat:Xr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[er]},h[I]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[jr]},h[M]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[yr,Fr]},h[W]={textureFormat:Xr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[Y]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[er]},h[Q]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[jr]},h[Se]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[$r]},h[Fe]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[At]},h[qe]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Wr]},h[ke]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_t]},h[Z]={textureFormat:wr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[er]},h[me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[jr]},h[Me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[yr,Fr]},h[He]={textureFormat:wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[yr]},h[Le]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[er]},h[je]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[jr]},h[ee]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$r]},h[J]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},h[ie]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Wr]},h[ue]={textureFormat:Ir,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[_t]},h[Ke]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[er]},h[We]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[er]},h[Ze]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[er,bn]},h[Ce]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[jr]},h[Oe]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Fr,Qn]},h[hr]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Fr,br]},h[cr]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[yr,Fr]},h[Ar]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},h[Sr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[er]},h[Or]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[jr]},h[Lr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[$r]},h[Gr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[At]},h[Jr]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Wr]},h[yt]={textureFormat:Hr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[_t]},h[pt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},h[bt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},h[vr]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[jr]},h[Xn]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[er,pn,Vt]},h[Et]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[er,yn]},h[Tt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Vt]},h[jt]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[yr,Fr]},h[dt]={textureFormat:x,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[yr]},h[Pe]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[er]},h[cn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jr]},h[Hn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vt]},h[zn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[$r]},h[Yn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[At]},h[Kn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[_t]},h[qn]={textureFormat:Vr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Wr]},h[ln]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[$r,Wr]},h[sn]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Wr]},h[vn]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[hn]={textureFormat:Ue,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[St]},h[mn]={textureFormat:Ue,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(h).forEach(function(y){var A=h[y];A.bytesPerElementMap={},A.bytesPerElement.forEach(function(e,t){var n=A.type[t];A.bytesPerElementMap[n]=e})}),Pt=h}return Pt[c]}function zr(c,h){var y=gt(c);if(!y)throw"unknown internal format";var A=y.bytesPerElementMap[h];if(A===void 0)throw"unknown internal format";return A}function Yr(c){var h=gt(c);if(!h)throw"unknown internal format";return{format:h.textureFormat,type:h.type[0]}}function En(c){return(c&c-1)===0}function Tn(c,h,y,A){if(!k.isWebGL2(c))return En(h)&&En(y);var e=gt(A);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function dn(c){var h=gt(c);if(!h)throw"unknown internal format";return h.textureFilterable}function An(c){var h=kt[c];if(!h)throw"unknown format: "+c;return h.numColorComponents}function lt(c,h,y){return be(h)?ce.getGLTypeForTypedArray(h):y||er}function Kr(c,h,y,A,e){if(e%1!==0)throw"can't guess dimensions";if(!y&&!A){var t=Math.sqrt(e/(h===se?6:1));t%1===0?(y=t,A=t):(y=e,A=1)}else if(A){if(!y&&(y=e/A,y%1))throw"can't guess dimensions"}else if(A=e/y,A%1)throw"can't guess dimensions";return{width:y,height:A}}function Wt(c){$.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Xt(c){oe.copyExistingProperties(c,$),c.textureColor&&Wt(c.textureColor)}function et(c,h){h.colorspaceConversion!==void 0&&c.pixelStorei(m,h.colorspaceConversion),h.premultiplyAlpha!==void 0&&c.pixelStorei(v,h.premultiplyAlpha),h.flipY!==void 0&&c.pixelStorei(T,h.flipY)}function wt(c){c.pixelStorei(i,4),k.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(s,0),c.pixelStorei(o,0),c.pixelStorei(a,0))}function Ht(c,h,y,A){A.minMag&&(y.call(c,h,Ne,A.minMag),y.call(c,h,Qe,A.minMag)),A.min&&y.call(c,h,Ne,A.min),A.mag&&y.call(c,h,Qe,A.mag),A.wrap&&(y.call(c,h,Xe,A.wrap),y.call(c,h,ur,A.wrap),(h===w||oe.isSampler(c,h))&&y.call(c,h,Tr,A.wrap)),A.wrapR&&y.call(c,h,Tr,A.wrapR),A.wrapS&&y.call(c,h,Xe,A.wrapS),A.wrapT&&y.call(c,h,ur,A.wrapT),A.minLod!==void 0&&y.call(c,h,fr,A.minLod),A.maxLod!==void 0&&y.call(c,h,tr,A.maxLod),A.baseLevel!==void 0&&y.call(c,h,sr,A.baseLevel),A.maxLevel!==void 0&&y.call(c,h,dr,A.maxLevel),A.compareFunc!==void 0&&y.call(c,h,r,A.compareFunc),A.compareMode!==void 0&&y.call(c,h,te,A.compareMode)}function zt(c,h,y){var A=y.target||Je;c.bindTexture(A,h),Ht(c,A,c.texParameteri,y)}function Yt(c,h,y){Ht(c,h,c.samplerParameteri,y)}function Kt(c,h){var y=c.createSampler();return Yt(c,y,h),y}function Zn(c,h){var y={};return Object.keys(h).forEach(function(A){y[A]=Kt(c,h[A])}),y}function Jn(c){return c=c||$.textureColor,be(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function st(c,h,y,A,e,t){y=y||$.textureOptions,t=t||x;var n=y.target||Je;if(A=A||y.width,e=e||y.height,c.bindTexture(n,h),Tn(c,A,e,t))c.generateMipmap(n);else{var p=dn(t)?ir:or;c.texParameteri(n,Ne,p),c.texParameteri(n,Qe,p),c.texParameteri(n,Xe,we),c.texParameteri(n,ur,we)}}function rt(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function xt(c,h){return h=h||{},h.cubeFaceOrder||[O,_,he,_e,Re,Ve]}function Rt(c,h){var y=xt(c,h),A=y.map(function(e,t){return{face:e,ndx:t}});return A.sort(function(e,t){return e.face-t.face}),A}function qt(c,h,y,A){A=A||$.textureOptions;var e=A.target||Je,t=A.level||0,n=y.width,p=y.height,b=A.internalFormat||A.format||x,d=Yr(b),R=A.format||d.format,g=A.type||d.type;if(et(c,A),c.bindTexture(e,h),e===se){var D=y.width,C=y.height,N,re;if(D/6===C)N=C,re=[0,0,1,0,2,0,3,0,4,0,5,0];else if(C/6===D)N=D,re=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===C/2)N=D/3,re=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===C/3)N=D/2,re=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(y.src?y.src:y.nodeName);var ve=F();ve?(ve.canvas.width=N,ve.canvas.height=N,n=N,p=N,Rt(c,A).forEach(function(Pr){var Nr=re[Pr.ndx*2+0]*N,kr=re[Pr.ndx*2+1]*N;ve.drawImage(y,Nr,kr,N,N,0,0,N,N),c.texImage2D(Pr.face,t,b,R,g,ve.canvas)}),ve.canvas.width=1,ve.canvas.height=1):typeof createImageBitmap<"u"&&(n=N,p=N,Rt(c,A).forEach(function(Pr){var Nr=re[Pr.ndx*2+0]*N,kr=re[Pr.ndx*2+1]*N;c.texImage2D(Pr.face,t,b,N,N,0,R,g,null),createImageBitmap(y,Nr,kr,N,N,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(gn){et(c,A),c.bindTexture(e,h),c.texImage2D(Pr.face,t,b,R,g,gn),rt(A)&&st(c,h,A,n,p,b)})}))}else if(e===w||e===B){var ye=Math.min(y.width,y.height),xe=Math.max(y.width,y.height),De=xe/ye;if(De%1!==0)throw"can not compute 3D dimensions of element";var Be=y.width===xe?1:0,Ge=y.height===xe?1:0;c.pixelStorei(i,1),c.pixelStorei(f,y.width),c.pixelStorei(E,0),c.pixelStorei(a,0),c.texImage3D(e,t,b,ye,ye,ye,0,R,g,null);for(var ze=0;ze<De;++ze){var nr=ze*ye*Be,mr=ze*ye*Ge;c.pixelStorei(s,nr),c.pixelStorei(o,mr),c.texSubImage3D(e,t,0,0,ze,ye,ye,1,R,g,y)}wt(c)}else c.texImage2D(e,t,b,R,g,y);rt(A)&&st(c,h,A,n,p,b),zt(c,h,A)}function qr(){}function _n(c){if(typeof document<"u"){var h=document.createElement("a");return h.href=c,h.hostname===location.hostname&&h.port===location.port&&h.protocol===location.protocol}else{var y=new URL(location.href).origin,A=new URL(c,location.href).origin;return A===y}}function $n(c,h){return h===void 0&&!_n(c)?"anonymous":h}function ea(c,h,y){y=y||qr;var A;if(h=h!==void 0?h:$.crossOrigin,h=$n(c,h),typeof Image<"u"){A=new Image,h!==void 0&&(A.crossOrigin=h);var e=function(){A.removeEventListener("error",t),A.removeEventListener("load",n),A=null},t=function(){var D="couldn't load image: "+c;oe.error(D),y(D,A),e()},n=function(){y(null,A),e()};return A.addEventListener("error",t),A.addEventListener("load",n),A.src=c,A}else if(typeof ImageBitmap<"u"){var p,b,d=function(){y(p,b)},R={};h&&(R.mode="cors"),fetch(c,R).then(function(g){if(!g.ok)throw g;return g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){b=g,setTimeout(d)}).catch(function(g){p=g,setTimeout(d)}),A=null}return A}function Qt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function Zt(c,h,y){return Qt(c)?(setTimeout(function(){y(null,c)}),c):ea(c,h,y)}function Ft(c,h,y){y=y||$.textureOptions;var A=y.target||Je;if(c.bindTexture(A,h),y.color!==!1){var e=Jn(y.color);if(A===se)for(var t=0;t<6;++t)c.texImage2D(O+t,0,x,1,1,0,x,er,e);else A===w||A===B?c.texImage3D(A,0,x,1,1,1,0,x,er,e):c.texImage2D(A,0,x,1,1,0,x,er,e)}}function Sn(c,h,y,A){A=A||qr,y=y||$.textureOptions,Ft(c,h,y),y=Object.assign({},y);var e=Zt(y.src,y.crossOrigin,function(t,n){t?A(t,h,n):(qt(c,h,n,y),A(null,h,n))});return e}function ra(c,h,y,A){A=A||qr;var e=y.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=y.level||0,n=y.internalFormat||y.format||x,p=Yr(n),b=y.format||p.format,d=y.type||er,R=y.target||Je;if(R!==se)throw"target must be TEXTURE_CUBE_MAP";Ft(c,h,y),y=Object.assign({},y);var g=6,D=[],C=xt(c,y),N;function re(ve){return function(ye,xe){--g,ye?D.push(ye):xe.width!==xe.height?D.push("cubemap face img is not a square: "+xe.src):(et(c,y),c.bindTexture(R,h),g===5?xt().forEach(function(De){c.texImage2D(De,t,n,b,d,xe)}):c.texImage2D(ve,t,n,b,d,xe),rt(y)&&c.generateMipmap(R)),g===0&&A(D.length?D:void 0,h,N)}}N=e.map(function(ve,ye){return Zt(ve,y.crossOrigin,re(C[ye]))})}function Pn(c,h,y,A){A=A||qr;var e=y.src,t=y.internalFormat||y.format||x,n=Yr(t),p=y.format||n.format,b=y.type||er,d=y.target||B;if(d!==w&&d!==B)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Ft(c,h,y),y=Object.assign({},y);var R=e.length,g=[],D,C=y.level||0,N=y.width,re=y.height,ve=e.length,ye=!0;function xe(De){return function(Be,Ge){if(--R,Be)g.push(Be);else{if(et(c,y),c.bindTexture(d,h),ye){ye=!1,N=y.width||Ge.width,re=y.height||Ge.height,c.texImage3D(d,C,t,N,re,ve,0,p,b,null);for(var ze=0;ze<ve;++ze)c.texSubImage3D(d,C,0,0,ze,N,re,1,p,b,Ge)}else{var nr=Ge,mr;(Ge.width!==N||Ge.height!==re)&&(mr=F(),nr=mr.canvas,mr.canvas.width=N,mr.canvas.height=re,mr.drawImage(Ge,0,0,N,re)),c.texSubImage3D(d,C,0,0,De,N,re,1,p,b,nr),mr&&nr===mr.canvas&&(mr.canvas.width=0,mr.canvas.height=0)}rt(y)&&c.generateMipmap(d)}R===0&&A(g.length?g:void 0,h,D)}}D=e.map(function(De,Be){return Zt(De,y.crossOrigin,xe(Be))})}function Ct(c,h,y,A){A=A||$.textureOptions;var e=A.target||Je;c.bindTexture(e,h);var t=A.width,n=A.height,p=A.depth,b=A.level||0,d=A.internalFormat||A.format||x,R=Yr(d),g=A.format||R.format,D=A.type||lt(c,y,R.type);if(be(y))y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));else{var C=ce.getTypedArrayTypeForGLType(D);y=new C(y)}var N=zr(d,D),re=y.byteLength/N;if(re%1)throw"length wrong size for format: "+k.glEnumToString(c,g);var ve;if(e===w||e===B)if(!t&&!n&&!p){var ye=Math.cbrt(re);if(ye%1!==0)throw"can't guess cube size of array of numElements: "+re;t=ye,n=ye,p=ye}else t&&(!n||!p)?(ve=Kr(c,e,n,p,re/t),n=ve.width,p=ve.height):n&&(!t||!p)?(ve=Kr(c,e,t,p,re/n),t=ve.width,p=ve.height):(ve=Kr(c,e,t,n,re/p),t=ve.width,n=ve.height);else ve=Kr(c,e,t,n,re),t=ve.width,n=ve.height;if(wt(c),c.pixelStorei(i,A.unpackAlignment||1),et(c,A),e===se){var xe=N/y.BYTES_PER_ELEMENT,De=re/6*xe;Rt(c,A).forEach(function(Be){var Ge=De*Be.ndx,ze=y.subarray(Ge,Ge+De);c.texImage2D(Be.face,b,d,t,n,0,g,D,ze)})}else e===w||e===B?c.texImage3D(e,b,d,t,n,p,0,g,D,y):c.texImage2D(e,b,d,t,n,0,g,D,y);return{width:t,height:n,depth:p,type:D}}function Jt(c,h,y){var A=y.target||Je;c.bindTexture(A,h);var e=y.level||0,t=y.internalFormat||y.format||x,n=Yr(t),p=y.format||n.format,b=y.type||n.type;if(et(c,y),A===se)for(var d=0;d<6;++d)c.texImage2D(O+d,e,t,y.width,y.height,0,p,b,null);else A===w||A===B?c.texImage3D(A,e,t,y.width,y.height,y.depth,0,p,b,null):c.texImage2D(A,e,t,y.width,y.height,0,p,b,null)}function $t(c,h,y){y=y||qr,h=h||$.textureOptions;var A=c.createTexture(),e=h.target||Je,t=h.width||1,n=h.height||1,p=h.internalFormat||x;c.bindTexture(e,A),e===se&&(c.texParameteri(e,Xe,we),c.texParameteri(e,ur,we));var b=h.src;if(b)if(typeof b=="function"&&(b=b(c,h)),typeof b=="string")Sn(c,A,h,y);else if(be(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||be(b[0]))){var d=Ct(c,A,b,h);t=d.width,n=d.height}else Array.isArray(b)&&(typeof b[0]=="string"||Qt(b[0]))?e===se?ra(c,A,h,y):Pn(c,A,h,y):(qt(c,A,b,h),t=b.width,n=b.height);else Jt(c,A,h);return rt(h)&&st(c,A,h,t,n,p),zt(c,A,h),A}function ta(c,h,y,A,e,t){A=A||y.width,e=e||y.height,t=t||y.depth;var n=y.target||Je;c.bindTexture(n,h);var p=y.level||0,b=y.internalFormat||y.format||x,d=Yr(b),R=y.format||d.format,g,D=y.src;if(D&&(be(D)||Array.isArray(D)&&typeof D[0]=="number")?g=y.type||lt(c,D,d.type):g=y.type||d.type,n===se)for(var C=0;C<6;++C)c.texImage2D(O+C,p,b,A,e,0,R,g,null);else n===w||n===B?c.texImage3D(n,p,b,A,e,t,0,R,g,null):c.texImage2D(n,p,b,A,e,0,R,g,null)}function Bt(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function na(c,h,y){y=y||qr;var A=0,e=[],t={},n={};function p(){A===0&&setTimeout(function(){y(e.length?e:void 0,t,n)},0)}return Object.keys(h).forEach(function(b){var d=h[b],R;Bt(d.src)&&(R=function(D,C,N){n[b]=N,--A,D&&e.push(D),p()},++A),t[b]=$t(c,d,R)}),p(),t}},"./src/twgl-full.js":(de,u,z)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},fe(F)}u.__esModule=!0;var k={m4:!0,v3:!0,primitives:!0};u.v3=u.primitives=u.m4=void 0;var ce=be(z("./src/m4.js"));u.m4=ce;var oe=be(z("./src/v3.js"));u.v3=oe;var V=be(z("./src/primitives.js"));u.primitives=V;var le=z("./src/twgl.js");Object.keys(le).forEach(function(F){F==="default"||F==="__esModule"||Object.prototype.hasOwnProperty.call(k,F)||F in u&&u[F]===le[F]||(u[F]=le[F])});function $(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,q=new WeakMap;return($=function(G){return G?q:H})(F)}function be(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var q=$(H);if(q&&q.has(F))return q.get(F);var x={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=G?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(x,ae,pe):x[ae]=F[ae]}return x.default=F,q&&q.set(F,x),x}},"./src/twgl.js":(de,u,z)=>{function fe(_){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},fe(_)}u.__esModule=!0;var k={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};u.addExtensionsToContext=ir,u.framebuffers=u.draw=u.attributes=void 0,u.getContext=B,u.getWebGLContext=se,u.programs=void 0,u.resizeCanvasToDisplaySize=O,u.setDefaults=pe,u.vertexArrays=u.utils=u.typedarrays=u.textures=void 0;var ce=G(z("./src/attributes.js"));u.attributes=ce,Object.keys(ce).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===ce[_]||(u[_]=ce[_])});var oe=G(z("./src/textures.js"));u.textures=oe,Object.keys(oe).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===oe[_]||(u[_]=oe[_])});var V=G(z("./src/helper.js")),le=G(z("./src/utils.js"));u.utils=le,Object.keys(le).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===le[_]||(u[_]=le[_])});var $=G(z("./src/draw.js"));u.draw=$,Object.keys($).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===$[_]||(u[_]=$[_])});var be=G(z("./src/framebuffers.js"));u.framebuffers=be,Object.keys(be).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===be[_]||(u[_]=be[_])});var F=G(z("./src/programs.js"));u.programs=F,Object.keys(F).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===F[_]||(u[_]=F[_])});var H=G(z("./src/typedarrays.js"));u.typedarrays=H,Object.keys(H).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===H[_]||(u[_]=H[_])});var q=G(z("./src/vertex-arrays.js"));u.vertexArrays=q,Object.keys(q).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===q[_]||(u[_]=q[_])});function x(_){if(typeof WeakMap!="function")return null;var he=new WeakMap,_e=new WeakMap;return(x=function(Ve){return Ve?_e:he})(_)}function G(_,he){if(!he&&_&&_.__esModule)return _;if(_===null||fe(_)!="object"&&typeof _!="function")return{default:_};var _e=x(he);if(_e&&_e.has(_))return _e.get(_);var Re={__proto__:null},Ve=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ne in _)if(Ne!=="default"&&Object.prototype.hasOwnProperty.call(_,Ne)){var Qe=Ve?Object.getOwnPropertyDescriptor(_,Ne):null;Qe&&(Qe.get||Qe.set)?Object.defineProperty(Re,Ne,Qe):Re[Ne]=_[Ne]}return Re.default=_,_e&&_e.set(_,Re),Re}var ae={addExtensionsToContext:!0};function pe(_){V.copyExistingProperties(_,ae),ce.setAttributeDefaults_(_),oe.setTextureDefaults_(_)}var Ue=/^(.*?)_/;function we(_,he){le.glEnumToString(_,0);var _e=_.getExtension(he);if(_e){var Re={},Ve=Ue.exec(he)[1],Ne="_"+Ve;for(var Qe in _e){var Xe=_e[Qe],ur=typeof Xe=="function",Tr=ur?Ve:Ne,fr=Qe;Qe.endsWith(Tr)&&(fr=Qe.substring(0,Qe.length-Tr.length)),_[fr]!==void 0?!ur&&_[fr]!==Xe&&V.warn(fr,_[fr],Xe,Qe):ur?_[fr]=function(tr){return function(){return tr.apply(_e,arguments)}}(Xe):(_[fr]=Xe,Re[fr]=Xe)}Re.constructor={name:_e.constructor.name},le.glEnumToString(Re,0)}return _e}var or=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function ir(_){for(var he=0;he<or.length;++he)we(_,or[he])}function Je(_,he){for(var _e=["webgl","experimental-webgl"],Re=null,Ve=0;Ve<_e.length;++Ve)if(Re=_.getContext(_e[Ve],he),Re){ae.addExtensionsToContext&&ir(Re);break}return Re}function se(_,he){var _e=Je(_,he);return _e}function w(_,he){for(var _e=["webgl2","webgl","experimental-webgl"],Re=null,Ve=0;Ve<_e.length;++Ve)if(Re=_.getContext(_e[Ve],he),Re){ae.addExtensionsToContext&&ir(Re);break}return Re}function B(_,he){var _e=w(_,he);return _e}function O(_,he){he=he||1,he=Math.max(0,he);var _e=_.clientWidth*he|0,Re=_.clientHeight*he|0;return _.width!==_e||_.height!==Re?(_.width=_e,_.height=Re,!0):!1}},"./src/typedarrays.js":(de,u)=>{u.__esModule=!0,u.getGLTypeForTypedArray=or,u.getGLTypeForTypedArrayType=ir,u.getTypedArrayTypeForGLType=Je,u.isArrayBuffer=void 0;var z=5120,fe=5121,k=5122,ce=5123,oe=5124,V=5125,le=5126,$=32819,be=32820,F=33635,H=5131,q=33640,x=35899,G=35902,ae=36269,pe=34042,Ue={};{var we=Ue;we[z]=Int8Array,we[fe]=Uint8Array,we[k]=Int16Array,we[ce]=Uint16Array,we[oe]=Int32Array,we[V]=Uint32Array,we[le]=Float32Array,we[$]=Uint16Array,we[be]=Uint16Array,we[F]=Uint16Array,we[H]=Uint16Array,we[q]=Uint32Array,we[x]=Uint32Array,we[G]=Uint32Array,we[ae]=Uint32Array,we[pe]=Uint32Array}function or(se){if(se instanceof Int8Array)return z;if(se instanceof Uint8Array||se instanceof Uint8ClampedArray)return fe;if(se instanceof Int16Array)return k;if(se instanceof Uint16Array)return ce;if(se instanceof Int32Array)return oe;if(se instanceof Uint32Array)return V;if(se instanceof Float32Array)return le;throw new Error("unsupported typed array type")}function ir(se){if(se===Int8Array)return z;if(se===Uint8Array||se===Uint8ClampedArray)return fe;if(se===Int16Array)return k;if(se===Uint16Array)return ce;if(se===Int32Array)return oe;if(se===Uint32Array)return V;if(se===Float32Array)return le;throw new Error("unsupported typed array type")}function Je(se){var w=Ue[se];if(!w)throw new Error("unknown gl type");return w}u.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(w){return w&&w.buffer&&(w.buffer instanceof ArrayBuffer||w.buffer instanceof SharedArrayBuffer)}:function(w){return w&&w.buffer&&w.buffer instanceof ArrayBuffer}},"./src/utils.js":(de,u)=>{u.__esModule=!0,u.glEnumToString=void 0,u.isWebGL1=fe,u.isWebGL2=z;function z(k){return!!k.texStorage2D}function fe(k){return!k.texStorage2D}u.glEnumToString=function(){var k={},ce={};function oe(V){var le=V.constructor.name;if(!k[le]){for(var $ in V)if(typeof V[$]=="number"){var be=ce[V[$]];ce[V[$]]=be?"".concat(be," | ").concat($):$}k[le]=!0}}return function(le,$){return oe(le),ce[$]||(typeof $=="number"?"0x".concat($.toString(16)):$)}}()},"./src/v3.js":(de,u)=>{u.__esModule=!0,u.add=ce,u.copy=ir,u.create=k,u.cross=q,u.distance=pe,u.distanceSq=Ue,u.divScalar=H,u.divide=se,u.dot=x,u.length=G,u.lengthSq=ae,u.lerp=V,u.lerpV=le,u.max=$,u.min=be,u.mulScalar=F,u.multiply=Je,u.negate=or,u.normalize=we,u.setDefaultType=fe,u.subtract=oe;var z=Float32Array;function fe(w){var B=z;return z=w,B}function k(w,B,O){var _=new z(3);return w&&(_[0]=w),B&&(_[1]=B),O&&(_[2]=O),_}function ce(w,B,O){return O=O||new z(3),O[0]=w[0]+B[0],O[1]=w[1]+B[1],O[2]=w[2]+B[2],O}function oe(w,B,O){return O=O||new z(3),O[0]=w[0]-B[0],O[1]=w[1]-B[1],O[2]=w[2]-B[2],O}function V(w,B,O,_){return _=_||new z(3),_[0]=w[0]+O*(B[0]-w[0]),_[1]=w[1]+O*(B[1]-w[1]),_[2]=w[2]+O*(B[2]-w[2]),_}function le(w,B,O,_){return _=_||new z(3),_[0]=w[0]+O[0]*(B[0]-w[0]),_[1]=w[1]+O[1]*(B[1]-w[1]),_[2]=w[2]+O[2]*(B[2]-w[2]),_}function $(w,B,O){return O=O||new z(3),O[0]=Math.max(w[0],B[0]),O[1]=Math.max(w[1],B[1]),O[2]=Math.max(w[2],B[2]),O}function be(w,B,O){return O=O||new z(3),O[0]=Math.min(w[0],B[0]),O[1]=Math.min(w[1],B[1]),O[2]=Math.min(w[2],B[2]),O}function F(w,B,O){return O=O||new z(3),O[0]=w[0]*B,O[1]=w[1]*B,O[2]=w[2]*B,O}function H(w,B,O){return O=O||new z(3),O[0]=w[0]/B,O[1]=w[1]/B,O[2]=w[2]/B,O}function q(w,B,O){O=O||new z(3);var _=w[2]*B[0]-w[0]*B[2],he=w[0]*B[1]-w[1]*B[0];return O[0]=w[1]*B[2]-w[2]*B[1],O[1]=_,O[2]=he,O}function x(w,B){return w[0]*B[0]+w[1]*B[1]+w[2]*B[2]}function G(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])}function ae(w){return w[0]*w[0]+w[1]*w[1]+w[2]*w[2]}function pe(w,B){var O=w[0]-B[0],_=w[1]-B[1],he=w[2]-B[2];return Math.sqrt(O*O+_*_+he*he)}function Ue(w,B){var O=w[0]-B[0],_=w[1]-B[1],he=w[2]-B[2];return O*O+_*_+he*he}function we(w,B){B=B||new z(3);var O=w[0]*w[0]+w[1]*w[1]+w[2]*w[2],_=Math.sqrt(O);return _>1e-5?(B[0]=w[0]/_,B[1]=w[1]/_,B[2]=w[2]/_):(B[0]=0,B[1]=0,B[2]=0),B}function or(w,B){return B=B||new z(3),B[0]=-w[0],B[1]=-w[1],B[2]=-w[2],B}function ir(w,B){return B=B||new z(3),B[0]=w[0],B[1]=w[1],B[2]=w[2],B}function Je(w,B,O){return O=O||new z(3),O[0]=w[0]*B[0],O[1]=w[1]*B[1],O[2]=w[2]*B[2],O}function se(w,B,O){return O=O||new z(3),O[0]=w[0]/B[0],O[1]=w[1]/B[1],O[2]=w[2]/B[2],O}},"./src/vertex-arrays.js":(de,u,z)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},fe(F)}u.__esModule=!0,u.createVAOAndSetAttributes=$,u.createVAOFromBufferInfo=be,u.createVertexArrayInfo=le;var k=oe(z("./src/programs.js"));function ce(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,q=new WeakMap;return(ce=function(G){return G?q:H})(F)}function oe(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var q=ce(H);if(q&&q.has(F))return q.get(F);var x={__proto__:null},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=G?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(x,ae,pe):x[ae]=F[ae]}return x.default=F,q&&q.set(F,x),x}var V=34963;function le(F,H,q){var x=F.createVertexArray();return F.bindVertexArray(x),H.length||(H=[H]),H.forEach(function(G){k.setBuffersAndAttributes(F,G,q)}),F.bindVertexArray(null),{numElements:q.numElements,elementType:q.elementType,vertexArrayObject:x}}function $(F,H,q,x){var G=F.createVertexArray();return F.bindVertexArray(G),k.setAttributes(H,q),x&&F.bindBuffer(V,x),F.bindVertexArray(null),G}function be(F,H,q){return $(F,H.attribSetters||H,q.attribs,q.indices)}}},X={};function j(de){var u=X[de];if(u!==void 0)return u.exports;var z=X[de]={exports:{}};return S[de](z,z.exports,j),z.exports}var Te=j("./src/twgl-full.js");return Te})())})(wa);var nt=wa.exports,Cr,Rr,Br,Dr,it,Nt,ut,_r,ft,Zr,Ut,nn,an,on,un,Lt,Gt,Un,xa,Ln,Ra,ma,Va,ha,ka,Gn,Fa,jn,Ca,Vn,Ba,fn,va,kn,Ia,Wn,Ma,ya,Wa;class ja{constructor(){Ae(this,Un);Ae(this,Ln);Ae(this,ma);Ae(this,ha);Ae(this,Gn);Ae(this,jn);Ae(this,Vn);Ae(this,fn);Ae(this,kn);Ae(this,Wn);Ae(this,ya);Ur(this,"canvas",document.querySelector("#canvas"));Ur(this,"gl");Ae(this,Cr,document.querySelector("#scoreOverlay"));Ae(this,Rr,[67,70,17,21,3.5]);Ae(this,Br,new Map);Ae(this,Dr,new Map);Ae(this,it,void 0);Ae(this,Nt,void 0);Ae(this,ut,void 0);Ae(this,_r,new Uint8Array(600));Ae(this,ft,void 0);Ae(this,Zr,new Uint8Array(3*40));Ae(this,Ut,void 0);Ae(this,nn,document.createTextNode("0"));Ae(this,an,document.createTextNode("1"));Ae(this,on,0);Ae(this,un,0);Ae(this,Lt,new Map);Ae(this,Gt,document.styleSheets[0].cssRules);document.querySelector("#linesCleared").appendChild(U(this,nn)),document.querySelector("#speedLevel").appendChild(U(this,an)),console.log(U(this,Rr)),U(this,Br).set(1,[255,0,0]),U(this,Br).set(2,[0,255,0]),U(this,Br).set(3,[255,255,0]),U(this,Br).set(4,[0,0,255]),U(this,Br).set(5,[180,90,246]),U(this,Br).set(6,[0,255,255]),U(this,Br).set(7,[255,140,40]),U(this,Dr).set("Z",1),U(this,Dr).set("S",2),U(this,Dr).set("O",3),U(this,Dr).set("J",4),U(this,Dr).set("T",5),U(this,Dr).set("I",6),U(this,Dr).set("L",7);let l=this.canvas.getContext("webgl");this.gl=l,l||document.body.appendChild(document.createTextNode("WebGL is not supported."));function S(k,ce,oe,V){return[k,ce+V,k+oe,ce+V,k+oe,ce,k,ce]}function X(k,ce,oe,V){let le=[k/2,k],$=[],be=(300-le[1])/2,F=(400-le[0])/2;$.push(...S(F,be,le[0],le[1])),$.push(...S(F-ce-V,be,V,V));for(let H=0;H<3;H++)$.push(...S(F+ce+le[0],be+H*(V+oe),V,V));return $}const j={a_Position:{numComponents:2,data:X(250,3,0,30)},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16]}};ar(this,Nt,nt.createBufferInfoFromArrays(l,j));let Te=document.querySelector("#vertex-shader-2d").text,de=document.querySelector("#fragment-shader-2d").text;ar(this,it,nt.createProgramInfo(l,[Te,de]));let u={src:"textures/block.png",mag:l.LINEAR};ar(this,Ut,nt.createTexture(this.gl,u)),ar(this,ut,l.createTexture()),l.bindTexture(l.TEXTURE_2D,U(this,ut)),l.pixelStorei(l.UNPACK_ALIGNMENT,1),l.texImage2D(l.TEXTURE_2D,0,l.RGB,10,20,0,l.RGB,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),ar(this,ft,l.createTexture()),l.bindTexture(l.TEXTURE_2D,U(this,ft)),l.pixelStorei(l.UNPACK_ALIGNMENT,1),l.texImage2D(l.TEXTURE_2D,0,l.RGB,4,2*5,0,l.RGB,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.useProgram(U(this,it).program),nt.setBuffersAndAttributes(l,U(this,it),U(this,Nt));let z={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:U(this,ut),u_QueueData:U(this,ft),u_BlockTexture:U(this,Ut)};nt.setUniforms(U(this,it),z);const fe=document.styleSheets[0].cssRules[3];console.log(fe),rr(this,Un,xa).call(this,"#scoreOverlay"),U(this,Lt).forEach(function(k,ce,oe){console.log(k)})}updateData(l){rr(this,Gn,Fa).call(this,l),rr(this,Vn,Ba).call(this,l),rr(this,kn,Ia).call(this,l)}renderGame(){nt.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),rr(this,Wn,Ma).call(this);let l={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:U(this,ut),u_QueueData:U(this,ft),u_BlockTexture:U(this,Ut)};nt.setUniforms(U(this,it),l),nt.drawBufferInfo(this.gl,U(this,Nt))}}Cr=new WeakMap,Rr=new WeakMap,Br=new WeakMap,Dr=new WeakMap,it=new WeakMap,Nt=new WeakMap,ut=new WeakMap,_r=new WeakMap,ft=new WeakMap,Zr=new WeakMap,Ut=new WeakMap,nn=new WeakMap,an=new WeakMap,on=new WeakMap,un=new WeakMap,Lt=new WeakMap,Gt=new WeakMap,Un=new WeakSet,xa=function(l){const S=document.querySelector(l),X=rr(this,Ln,Ra).call(this,l);X!=null&&U(this,Lt).set(S,X)},Ln=new WeakSet,Ra=function(l){let S=null;for(let X=0;X<U(this,Gt).length&&S==null;X++)U(this,Gt)[X].selectorText==l&&(S=U(this,Gt)[X].style);return S},ma=new WeakSet,Va=function(){U(this,Lt).forEach(function(l,S,X){S.left!="",S.top!=""})},ha=new WeakSet,ka=function(l,S,X){l.width,l.height},Gn=new WeakSet,Fa=function(l){for(let S=0;S<20;S++){let X=l.gridData[S];for(let j=0;j<10;j++){let Te=rr(this,jn,Ca).call(this,X,j),de=3*(10*S+j);if(Te!=0){let u=U(this,Br).get(Te);U(this,_r)[de]=u[0],U(this,_r)[de+1]=u[1],U(this,_r)[de+2]=u[2]}else U(this,_r)[de]=0,U(this,_r)[de+1]=0,U(this,_r)[de+2]=0}}if(l.playerPiece.active){let S=170;for(let j=0;j<4;j++){let Te=3*(10*l.ghostBlocks[j][1]+l.ghostBlocks[j][0]);U(this,_r)[Te]=S,U(this,_r)[Te+1]=S,U(this,_r)[Te+2]=S}let X=l.playerPiece.shape;for(let j=0;j<4;j++){let Te=U(this,Br).get(U(this,Dr).get(X)),de=3*(10*l.playerPiece.blocks[j][1]+l.playerPiece.blocks[j][0]);U(this,_r)[de]=Te[0],U(this,_r)[de+1]=Te[1],U(this,_r)[de+2]=Te[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,U(this,ut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,U(this,_r))},jn=new WeakSet,Ca=function(l,S){const X=32-(3+3*S),j=7<<X;return(l&j)>>>X},Vn=new WeakSet,Ba=function(l){for(let S=0;S<U(this,Zr).length;S++)U(this,Zr)[S]=0;l.heldPiece!=null&&rr(this,fn,va).call(this,l.heldPiece,0);for(let S=0;S<4;S++)rr(this,fn,va).call(this,l.pieceQueue[S],24*(1+S));this.gl.bindTexture(this.gl.TEXTURE_2D,U(this,ft)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,U(this,Zr))},fn=new WeakSet,va=function(l,S){let X=at.getBaseShape(l),j=U(this,Br).get(U(this,Dr).get(l));for(let Te=0;Te<4;Te++){let de=X[Te],u=S+3*(de[1]*4+de[0]);U(this,Zr)[u]=j[0],U(this,Zr)[u+1]=j[1],U(this,Zr)[u+2]=j[2]}},kn=new WeakSet,Ia=function(l){U(this,nn).nodeValue=l.linesCleared,U(this,an).nodeValue=l.speedLevel==11?"MAX":l.speedLevel},Wn=new WeakSet,Ma=function(){let l=this.gl.canvas.width,S=this.gl.canvas.height;(l!=U(this,on)||S!=U(this,un))&&(this.gl.canvas.width*3>=this.gl.canvas.height*4?(U(this,Cr).style.right=(4*S*(U(this,Rr)[0]-50)+150*l)/(3*l)+"vw",U(this,Cr).style.width=U(this,Rr)[2]*4*S/(3*l)+"vw",U(this,Cr).style.top=U(this,Rr)[1]+"vh",U(this,Cr).style.height=U(this,Rr)[3]+"vh",U(this,Cr).style.fontSize=U(this,Rr)[4]+"vh"):(U(this,Cr).style.top=U(this,Rr)[1]*3*l/(4*S)+(100*S-75*l)/(2*S)+"vh",U(this,Cr).style.height=U(this,Rr)[3]*3*l/(4*S)+"vh",U(this,Cr).style.right=U(this,Rr)[0]+"vw",U(this,Cr).style.width=U(this,Rr)[2]+"vw",U(this,Cr).style.fontSize=U(this,Rr)[4]*3*l/(4*S)+"vh"),ar(this,un,S),ar(this,on,l))},ya=new WeakSet,Wa=function(l){getComputedStyle(l),this.gl.canvas.width,this.gl.canvas.height};function Xa(){let Ye=document.createTextNode("");document.querySelector("#debug").appendChild(Ye);let l=new La;document.addEventListener("keydown",function(u){l.setInputState(u.key,!0)}),document.addEventListener("keyup",function(u){l.setInputState(u.key,!1)});let S=new ca,X=new ja,j=0,Te=0;function de(u){let z=(u-Te)*.001;Te=u,j+=z,j>=S.gameTickTime&&(S.runTick(l),j=Math.min(j-S.gameTickTime,S.gameTickTime)),S.isStateChanged&&X.updateData(S.gameState),X.renderGame(),requestAnimationFrame(de)}requestAnimationFrame(de)}Xa();

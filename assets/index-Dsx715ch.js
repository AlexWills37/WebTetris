var Ia=Object.defineProperty;var Ba=(ze,v,S)=>v in ze?Ia(ze,v,{enumerable:!0,configurable:!0,writable:!0,value:S}):ze[v]=S;var Or=(ze,v,S)=>(Ba(ze,typeof v!="symbol"?v+"":v,S),S),aa=(ze,v,S)=>{if(!v.has(ze))throw TypeError("Cannot "+S)};var $=(ze,v,S)=>(aa(ze,v,"read from private field"),S?S.call(ze):v.get(ze)),Be=(ze,v,S)=>{if(v.has(ze))throw TypeError("Cannot add the same private member more than once");v instanceof WeakSet?v.add(ze):v.set(ze,S)},sr=(ze,v,S,W)=>(aa(ze,v,"write to private field"),W?W.call(ze,S):v.set(ze,S),S);var oa=(ze,v,S,W)=>({set _(U){sr(ze,v,U,S)},get _(){return $(ze,v,W)}}),er=(ze,v,S)=>(aa(ze,v,"access private method"),S);(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const U of document.querySelectorAll('link[rel="modulepreload"]'))W(U);new MutationObserver(U=>{for(const pe of U)if(pe.type==="childList")for(const Te of pe.addedNodes)Te.tagName==="LINK"&&Te.rel==="modulepreload"&&W(Te)}).observe(document,{childList:!0,subtree:!0});function S(U){const pe={};return U.integrity&&(pe.integrity=U.integrity),U.referrerPolicy&&(pe.referrerPolicy=U.referrerPolicy),U.crossOrigin==="use-credentials"?pe.credentials="include":U.crossOrigin==="anonymous"?pe.credentials="omit":pe.credentials="same-origin",pe}function W(U){if(U.ep)return;U.ep=!0;const pe=S(U);fetch(U.href,pe)}})();class Ma{constructor(){this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0)}keyToState(v){return v.length==1&&(v=v.toUpperCase()),this.inputKeys.get(v)}setInputState(v,S){let W=this.keyToState(v);W!=null&&this.actionStates.set(W,S)}getInputState(v){return this.actionStates.has(v)?this.actionStates.get(v):(console.log("ERROR: trying to access an input action that doesn't exist ("+v+"). The allowed options are:"),this.actionStates.forEach(function(S,W,U){console.log("    - "+W)}),null)}updateCounters(){for(const[v,S]of this.counters)this.getInputState(v)?this.counters.set(v,S+1):this.counters.set(v,0)}getCounter(v){return this.counters.has(v)?this.counters.get(v):(console.log("ERROR: trying to access input action that doesn't have a counter ("+v+"). The counters are:"),this.counters.forEach(function(S,W,U){console.log("    - "+W+": "+S)}),null)}}var Ct,st,It,nt,Bt,Kr,wn,ma,xn,ha,Rn,ya,Fn,pa,$t,ua,Mt,Pn,Cn,ba,In,Ea,en,fa,Bn,Ta,Mn,da,Dn,Aa;const Jt=class Jt{constructor(){Be(this,wn);Be(this,xn);Be(this,Rn);Be(this,Fn);Be(this,$t);Be(this,Mt);Be(this,Cn);Be(this,In);Be(this,en);Be(this,Bn);Be(this,Mn);Be(this,Dn);Or(this,"numRows",21);Or(this,"graceTimerDuration",.5);Or(this,"gameTickTime",1/30);Or(this,"pieceMap",new Map);Or(this,"gameState",{gameRunning:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0,speedLevel:1});Be(this,Ct,15);Be(this,st,!0);Be(this,It,0);Be(this,nt,-1);Be(this,Bt,0);Be(this,Kr,!1);er(this,$t,ua).call(this),er(this,Mt,Pn).call(this),sr(this,Ct,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7)}get isStateChanged(){const v=$(this,st);return sr(this,st,!1),v}runTick(v){let S=!1;if(v.updateCounters(),!this.gameState.gameRunning)this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0&&(this.clearRow(0),this.rowCount++,sr(this,st,!0)));else if(v.getCounter("HardDrop")==1)this.hardDropPlayerPiece(),this.finishWithPiece(),S=!0;else if(v.getCounter("Hold")==1)this.holdPiece(),S=!0;else{v.getInputState("SoftDrop")&&(S=this.tryMovePiece(0,-1)||S);let W=0;v.getCounter("RotateClockwise")==1&&(W+=1),v.getCounter("RotateAntiClockwise")==1&&(W-=1),W!=0&&(S=this.tryRotatePiece(W==1)||S);let U=0;if((v.getCounter("MoveLeft")==1||v.getCounter("MoveLeft")>5)&&(U-=1),(v.getCounter("MoveRight")==1||v.getCounter("MoveRight")>5)&&(U+=1),U!=0&&(S=this.tryMovePiece(U,0)||S),oa(this,It)._++,$(this,It)>=$(this,Ct)){let pe=!this.tryMovePiece(0,-1);S||(S=!pe),sr(this,It,0),pe&&!$(this,Kr)&&er(this,Cn,ba).call(this)}if($(this,Kr)&&(er(this,In,Ea).call(this,this.gameTickTime),$(this,nt)<=0)){let pe=!this.tryMovePiece(0,-1);S=!0,pe&&this.finishWithPiece()}}S&&(er(this,Mn,da).call(this),sr(this,st,!0))}tryMovePiece(v,S){let W=!0;for(let U=0;U<4&&W;U++){let pe=this.gameState.playerPiece.blocks[U][0]+v,Te=this.gameState.playerPiece.blocks[U][1]+S;this.isBlockHere(pe,Te)&&(W=!1)}return W&&(er(this,xn,ha).call(this,v,S),v!=0&&er(this,en,fa).call(this),S!=0&&sr(this,Kr,!1)),W}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(v){let S=er(this,Rn,ya).call(this,v);return S&&er(this,en,fa).call(this),S}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,er(this,Mt,Pn).call(this);else if(!this.gameState.playerPiece.wasHeld){let v=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new tt(v),this.gameState.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)}}finishWithPiece(){const v=this.gameState.linesCleared;er(this,Fn,pa).call(this),er(this,Mt,Pn).call(this),sr(this,Kr,!1),er(this,Bn,Ta).call(this),this.gameState.linesCleared!=v&&er(this,Dn,Aa).call(this)}clearRow(v){for(let S=v;S<this.numRows-1;S++)this.gameState.gridData[S]=this.gameState.gridData[S+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(v,S){if(v<0||S<0||v>=10||S>=this.numRows)return!0;const W=this.gameState.gridData[S],U=7<<32-(3+3*v);return(W&U)!=0}getBlockData(v,S){const W=this.gameState.gridData[S],U=32-(3+3*v),pe=7<<U;return(W&pe)>>>U}isPlayerPieceValid(){let v=!0;for(let S=0;S<4&&v;S++)this.isBlockHere(this.gameState.playerPiece.blocks[S][0],this.gameState.playerPiece.blocks[S][1])&&(v=!1);return v}};Ct=new WeakMap,st=new WeakMap,It=new WeakMap,nt=new WeakMap,Bt=new WeakMap,Kr=new WeakMap,wn=new WeakSet,ma=function(v,S,W){const pe=~(7<<32-(3+3*v));this.gameState.gridData[S]&=pe;const Te=W<<32-(3+3*v);this.gameState.gridData[S]|=Te},xn=new WeakSet,ha=function(v,S){for(let W=0;W<4;W++)this.gameState.playerPiece.blocks[W][0]+=v,this.gameState.playerPiece.blocks[W][1]+=S},Rn=new WeakSet,ya=function(v){let S=(this.gameState.playerPiece.rotationIndex+4+(v?1:-1))%4,W=[...this.gameState.playerPiece.blocks[0]],U=[];for(let Z=0;Z<4;Z++)U.push([...this.gameState.playerPiece.blocks[Z]]);let pe=1,Te=1;v?Te=-1:pe=-1;let i;for(let Z=0;Z<4;Z++)U[Z][0]-=W[0],U[Z][1]-=W[1],i=U[Z][0],U[Z][0]=pe*U[Z][1],U[Z][1]=Te*i,U[Z][0]+=W[0],U[Z][1]+=W[1];let X;switch(this.gameState.playerPiece.shape){case"O":X=tt.offsets.O;break;case"I":X=tt.offsets.I;break;default:X=tt.offsets.OTHER;break}let ee,G,te=!1;for(let Z=0;Z<5&&!te;Z++){ee=X[Z],G=[ee[this.gameState.playerPiece.rotationIndex][0]-ee[S][0],ee[this.gameState.playerPiece.rotationIndex][1]-ee[S][1]],te=!0;for(let N=0;N<4;N++)U[N][0]+=G[0],U[N][1]+=G[1],this.isBlockHere(U[N][0],U[N][1])&&(te=!1);if(!te)for(let N=0;N<4;N++)U[N][0]-=G[0],U[N][1]-=G[1]}if(te){for(let Z=0;Z<4;Z++)this.gameState.playerPiece.blocks[Z]=[...U[Z]];this.gameState.playerPiece.rotationIndex=S}return te},Fn=new WeakSet,pa=function(){let v,S,W=this.pieceMap.get(this.gameState.playerPiece.shape);for(let U=0;U<4;U++)v=this.gameState.playerPiece.blocks[U][0],S=this.gameState.playerPiece.blocks[U][1],er(this,wn,ma).call(this,v,S,W)},$t=new WeakSet,ua=function(){let v=["O","I","T","J","L","S","Z"],S;for(let W=0;W<7;W++)S=Math.floor(Math.random()*v.length),this.gameState.pieceQueue.push(v[S]),v.splice(S,1)},Mt=new WeakSet,Pn=function(){let v=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&er(this,$t,ua).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new tt(v),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)},Cn=new WeakSet,ba=function(){sr(this,nt,this.graceTimerDuration),sr(this,Kr,!0),sr(this,Bt,0)},In=new WeakSet,Ea=function(v){sr(this,nt,$(this,nt)-v)},en=new WeakSet,fa=function(){$(this,Kr)&&$(this,Bt)<30&&(sr(this,nt,Math.min($(this,nt)+.5,this.graceTimerDuration)),oa(this,Bt)._++)},Bn=new WeakSet,Ta=function(){for(let v=0;v<this.numRows;v++){let S=!0;for(let W=0;W<10&&S;W++)this.isBlockHere(W,v)||(S=!1);S&&(this.clearRow(v),this.gameState.linesCleared++,v--)}},Mn=new WeakSet,da=function(){for(let S=0;S<4;S++)this.gameState.ghostBlocks[S]=[...this.gameState.playerPiece.blocks[S]];let v=!1;for(;!v;){for(let S=0;S<4;S++)this.isBlockHere(this.gameState.ghostBlocks[S][0],this.gameState.ghostBlocks[S][1]-1)&&(v=!0);if(!v)for(let S=0;S<4;S++)this.gameState.ghostBlocks[S][1]-=1}},Dn=new WeakSet,Aa=function(){this.gameState.speedLevel=Math.min(Math.floor(this.gameState.linesCleared/10)+1,Jt.levels.max),sr(this,Ct,Jt.levels[this.gameState.speedLevel])},Or(Jt,"levels",{1:15,2:14,3:13,4:12,5:11,6:10,7:9,8:7,9:5,10:3,11:1,max:11});let ia=Jt;const Ir=class Ir{constructor(v){this.blocks=[],this.shape=v,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let S=Ir.getBaseShape(v);for(let W=0;W<4;W++)this.blocks.push([...S[W]]),this.blocks[W][0]+=3,this.blocks[W][1]+=19}static getBaseShape(v){let S;switch(v){case"O":S=Ir.pieces.O;break;case"I":S=Ir.pieces.I;break;case"L":S=Ir.pieces.L;break;case"J":S=Ir.pieces.J;break;case"T":S=Ir.pieces.T;break;case"S":S=Ir.pieces.S;break;case"Z":S=Ir.pieces.Z;break;default:S=[[0,0],[0,0],[0,0],[0,0]]}return S}};Or(Ir,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),Or(Ir,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let tt=Ir;var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_a={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(ze,v){(function(W,U){ze.exports=U()})(typeof self<"u"?self:Da,()=>(()=>{var S={"./src/attributes.js":(Te,i,X)=>{function ee(l){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ee(l)}i.__esModule=!0,i.createAttribsFromArrays=ur,i.createBufferFromArray=f,i.createBufferFromTypedArray=ve,i.createBufferInfoFromArrays=u,i.createBuffersFromArrays=E,i.getArray_=O,i.getNumComponents_=xe,i.setAttribInfoBufferFromArray=tr,i.setAttributeDefaults_=or,i.setAttributePrefix=ar;var G=N(X("./src/typedarrays.js")),te=N(X("./src/helper.js"));function Z(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(Z=function(s){return s?a:o})(l)}function N(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||ee(l)!="object"&&typeof l!="function")return{default:l};var a=Z(o);if(a&&a.has(l))return a.get(l);var m={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in l)if(T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)){var P=s?Object.getOwnPropertyDescriptor(l,T):null;P&&(P.get||P.set)?Object.defineProperty(m,T,P):m[T]=l[T]}return m.default=l,a&&a.set(l,m),m}var le=35044,re=34962,Ee=34963,F=34660,H=5120,K=5121,x=5122,V=5123,ue=5124,be=5125,Ue=5126,ge={attribPrefix:""};function ar(l){ge.attribPrefix=l}function or(l){te.copyExistingProperties(l,ge)}function Je(l,o,a,m,s){l.bindBuffer(o,a),l.bufferData(o,m,s||le)}function ve(l,o,a,m){if(te.isBuffer(l,o))return o;a=a||re;var s=l.createBuffer();return Je(l,a,s,o,m),s}function w(l){return l==="indices"}function I(l){return l===Int8Array||l===Uint8Array}function O(l){return l.length?l:l.data}var _=/coord|texture/i,he=/color|colour/i;function Ae(l,o){var a;if(_.test(l)?a=2:he.test(l)?a=4:a=3,o%a>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(a," but ").concat(o," values is not evenly divisible by ").concat(a,". You should specify it."));return a}function xe(l,o,a){return l.numComponents||l.size||Ae(o,a||O(l).length)}function Ve(l,o){if(G.isArrayBuffer(l))return l;if(G.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var a=l.type?Qe(l.type):void 0;return a||(w(o)?a=Uint16Array:a=Float32Array),new a(l.data)}function Ne(l){return typeof l=="number"?l:l?G.getGLTypeForTypedArrayType(l):Ue}function Qe(l){return typeof l=="number"?G.getTypedArrayTypeForGLType(l):l||Float32Array}function Xe(l,o){return{buffer:o.buffer,numValues:24,type:Ne(o.type),arrayType:Qe(o.type)}}function ir(l,o){var a=o.data||o,m=Qe(o.type),s=a*m.BYTES_PER_ELEMENT,T=l.createBuffer();return l.bindBuffer(re,T),l.bufferData(re,s,o.drawType||le),{buffer:T,numValues:a,type:G.getGLTypeForTypedArrayType(m),arrayType:m}}function Tr(l,o,a){var m=Ve(o,a);return{arrayType:m.constructor,buffer:ve(l,m,void 0,o.drawType),type:G.getGLTypeForTypedArray(m),numValues:0}}function ur(l,o){var a={};return Object.keys(o).forEach(function(m){if(!w(m)){var s=o[m],T=s.attrib||s.name||s.attribName||ge.attribPrefix+m;if(s.value){if(!Array.isArray(s.value)&&!G.isArrayBuffer(s.value))throw new Error("array.value is not array or typedarray");a[T]={value:s.value}}else{var P;s.buffer&&s.buffer instanceof WebGLBuffer?P=Xe:typeof s=="number"||typeof s.data=="number"?P=ir:P=Tr;var B=P(l,s,m),M=B.buffer,k=B.type,Y=B.numValues,q=B.arrayType,ne=s.normalize!==void 0?s.normalize:I(q),J=xe(s,m,Y);a[T]={buffer:M,numComponents:J,type:k,normalize:ne,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),l.bindBuffer(re,null),a}function tr(l,o,a,m){a=Ve(a),m!==void 0?(l.bindBuffer(re,o.buffer),l.bufferSubData(re,m,a)):Je(l,re,o.buffer,a,o.drawType)}function lr(l,o){return o===H||o===K?1:o===x||o===V?2:o===ue||o===be||o===Ue?4:0}var dr=["position","positions","a_position"];function oe(l){var o,a;for(a=0;a<dr.length&&(o=dr[a],!(o in l));++a);a===dr.length&&(o=Object.keys(l)[0]);var m=l[o],s=O(m).length;if(s===void 0)return 1;var T=xe(m,o),P=s/T;if(s%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(s));return P}function r(l,o){var a,m;for(m=0;m<dr.length&&(a=dr[m],!(a in o||(a=ge.attribPrefix+a,a in o)));++m);m===dr.length&&(a=Object.keys(o)[0]);var s=o[a];if(!s.buffer)return 1;l.bindBuffer(re,s.buffer);var T=l.getBufferParameter(re,F);l.bindBuffer(re,null);var P=lr(l,s.type),B=T/P,M=s.numComponents||s.size,k=B/M;if(k%1!==0)throw new Error("numComponents ".concat(M," not correct for length ").concat(length));return k}function u(l,o,a){var m=ur(l,o),s=Object.assign({},a||{});s.attribs=Object.assign({},a?a.attribs:{},m);var T=o.indices;if(T){var P=Ve(T,"indices");s.indices=ve(l,P,Ee),s.numElements=P.length,s.elementType=G.getGLTypeForTypedArray(P)}else s.numElements||(s.numElements=r(l,s.attribs));return s}function f(l,o,a){var m=a==="indices"?Ee:re,s=Ve(o,a);return ve(l,s,m)}function E(l,o){var a={};return Object.keys(o).forEach(function(m){a[m]=f(l,o[m],m)}),o.indices?(a.numElements=o.indices.length,a.elementType=G.getGLTypeForTypedArray(Ve(o.indices),"indices")):a.numElements=oe(o),a}},"./src/draw.js":(Te,i,X)=>{function ee(F){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},ee(F)}i.__esModule=!0,i.drawBufferInfo=re,i.drawObjectList=Ee;var G=Z(X("./src/programs.js"));function te(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,K=new WeakMap;return(te=function(V){return V?K:H})(F)}function Z(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||ee(F)!="object"&&typeof F!="function")return{default:F};var K=te(H);if(K&&K.has(F))return K.get(F);var x={__proto__:null},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=V?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,K&&K.set(F,x),x}var N=4,le=5123;function re(F,H,K,x,V,ue){K=K===void 0?N:K;var be=H.indices,Ue=H.elementType,ge=x===void 0?H.numElements:x;V=V===void 0?0:V,Ue||be?ue!==void 0?F.drawElementsInstanced(K,ge,Ue===void 0?le:H.elementType,V,ue):F.drawElements(K,ge,Ue===void 0?le:H.elementType,V):ue!==void 0?F.drawArraysInstanced(K,V,ge,ue):F.drawArrays(K,V,ge)}function Ee(F,H){var K=null,x=null;H.forEach(function(V){if(V.active!==!1){var ue=V.programInfo,be=V.vertexArrayInfo||V.bufferInfo,Ue=!1,ge=V.type===void 0?N:V.type;ue!==K&&(K=ue,F.useProgram(ue.program),Ue=!0),(Ue||be!==x)&&(x&&x.vertexArrayObject&&!be.vertexArrayObject&&F.bindVertexArray(null),x=be,G.setBuffersAndAttributes(F,ue,be)),G.setUniforms(ue,V.uniforms),re(F,be,ge,V.count,V.offset,V.instanceCount)}}),x&&x.vertexArrayObject&&F.bindVertexArray(null)}},"./src/framebuffers.js":(Te,i,X)=>{function ee(oe){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ee(oe)}i.__esModule=!0,i.bindFramebufferInfo=dr,i.createFramebufferInfo=tr,i.resizeFramebufferInfo=lr;var G=N(X("./src/textures.js")),te=N(X("./src/helper.js"));function Z(oe){if(typeof WeakMap!="function")return null;var r=new WeakMap,u=new WeakMap;return(Z=function(E){return E?u:r})(oe)}function N(oe,r){if(!r&&oe&&oe.__esModule)return oe;if(oe===null||ee(oe)!="object"&&typeof oe!="function")return{default:oe};var u=Z(r);if(u&&u.has(oe))return u.get(oe);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in oe)if(l!=="default"&&Object.prototype.hasOwnProperty.call(oe,l)){var o=E?Object.getOwnPropertyDescriptor(oe,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=oe[l]}return f.default=oe,u&&u.set(oe,f),f}var le=36160,re=36161,Ee=3553,F=5121,H=6402,K=6408,x=33190,V=36012,ue=35056,be=36013,Ue=32854,ge=32855,ar=36194,or=33189,Je=6401,ve=36168,w=34041,I=36064,O=36096,_=36128,he=33306,Ae=33071,xe=9729,Ve=[{format:K,type:F,min:xe,wrap:Ae},{format:w}],Ne={};Ne[w]=he,Ne[Je]=_,Ne[ve]=_,Ne[H]=O,Ne[or]=O,Ne[x]=O,Ne[V]=O,Ne[ue]=he,Ne[be]=he;function Qe(oe,r){return Ne[oe]||Ne[r]}var Xe={};Xe[Ue]=!0,Xe[ge]=!0,Xe[ar]=!0,Xe[w]=!0,Xe[or]=!0,Xe[Je]=!0,Xe[ve]=!0;function ir(oe){return Xe[oe]}var Tr=32;function ur(oe){return oe>=I&&oe<I+Tr}function tr(oe,r,u,f){var E=le,l=oe.createFramebuffer();oe.bindFramebuffer(E,l),u=u||oe.drawingBufferWidth,f=f||oe.drawingBufferHeight,r=r||Ve;var o=[],a={framebuffer:l,attachments:[],width:u,height:f};return r.forEach(function(m,s){var T=m.attachment,P=m.samples,B=m.format,M=m.attachmentPoint||Qe(B,m.internalFormat);if(M||(M=I+s),ur(M)&&o.push(M),!T)if(P!==void 0||ir(B))T=oe.createRenderbuffer(),oe.bindRenderbuffer(re,T),P>1?oe.renderbufferStorageMultisample(re,P,B,u,f):oe.renderbufferStorage(re,B,u,f);else{var k=Object.assign({},m);k.width=u,k.height=f,k.auto===void 0&&(k.auto=!1,k.min=k.min||k.minMag||xe,k.mag=k.mag||k.minMag||xe,k.wrapS=k.wrapS||k.wrap||Ae,k.wrapT=k.wrapT||k.wrap||Ae),T=G.createTexture(oe,k)}if(te.isRenderbuffer(oe,T))oe.framebufferRenderbuffer(E,M,re,T);else if(te.isTexture(oe,T))m.layer!==void 0?oe.framebufferTextureLayer(E,M,T,m.level||0,m.layer):oe.framebufferTexture2D(E,M,m.target||Ee,T,m.level||0);else throw new Error("unknown attachment type");a.attachments.push(T)}),oe.drawBuffers&&oe.drawBuffers(o),a}function lr(oe,r,u,f,E){f=f||oe.drawingBufferWidth,E=E||oe.drawingBufferHeight,r.width=f,r.height=E,u=u||Ve,u.forEach(function(l,o){var a=r.attachments[o],m=l.format,s=l.samples;if(s!==void 0||te.isRenderbuffer(oe,a))oe.bindRenderbuffer(re,a),s>1?oe.renderbufferStorageMultisample(re,s,m,f,E):oe.renderbufferStorage(re,m,f,E);else if(te.isTexture(oe,a))G.resizeTexture(oe,a,l,f,E);else throw new Error("unknown attachment type")})}function dr(oe,r,u){u=u||le,r?(oe.bindFramebuffer(u,r.framebuffer),oe.viewport(0,0,r.width,r.height)):(oe.bindFramebuffer(u,null),oe.viewport(0,0,oe.drawingBufferWidth,oe.drawingBufferHeight))}},"./src/helper.js":(Te,i)=>{i.__esModule=!0,i.copyExistingProperties=G,i.copyNamedProperties=ee,i.error=te,i.isBuffer=re,i.isRenderbuffer=Ee,i.isSampler=K,i.isShader=F,i.isTexture=H,i.warn=Z;function X(x){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},X(x)}function ee(x,V,ue){x.forEach(function(be){var Ue=V[be];Ue!==void 0&&(ue[be]=Ue)})}function G(x,V){Object.keys(V).forEach(function(ue){V.hasOwnProperty(ue)&&x.hasOwnProperty(ue)&&(V[ue]=x[ue])})}function te(){var x;(x=console).error.apply(x,arguments)}function Z(){var x;(x=console).warn.apply(x,arguments)}var N=new Map;function le(x,V){if(!x||X(x)!=="object")return!1;var ue=N.get(V);ue||(ue=new WeakMap,N.set(V,ue));var be=ue.get(x);if(be===void 0){var Ue=Object.prototype.toString.call(x);be=Ue.substring(8,Ue.length-1)===V,ue.set(x,be)}return be}function re(x,V){return typeof WebGLBuffer<"u"&&le(V,"WebGLBuffer")}function Ee(x,V){return typeof WebGLRenderbuffer<"u"&&le(V,"WebGLRenderbuffer")}function F(x,V){return typeof WebGLShader<"u"&&le(V,"WebGLShader")}function H(x,V){return typeof WebGLTexture<"u"&&le(V,"WebGLTexture")}function K(x,V){return typeof WebGLSampler<"u"&&le(V,"WebGLSampler")}},"./src/m4.js":(Te,i,X)=>{function ee(r){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ee(r)}i.__esModule=!0,i.axisRotate=Tr,i.axisRotation=ir,i.copy=F,i.create=Ee,i.frustum=Je,i.getAxis=Ue,i.getTranslation=be,i.identity=H,i.inverse=x,i.lookAt=O,i.multiply=V,i.negate=re,i.ortho=or,i.perspective=ar,i.rotateX=xe,i.rotateY=Ne,i.rotateZ=Xe,i.rotationX=Ae,i.rotationY=Ve,i.rotationZ=Qe,i.scale=tr,i.scaling=ur,i.setAxis=ge,i.setDefaultType=le,i.setTranslation=ue,i.transformDirection=dr,i.transformNormal=oe,i.transformPoint=lr,i.translate=he,i.translation=_,i.transpose=K;var G=Z(X("./src/v3.js"));function te(r){if(typeof WeakMap!="function")return null;var u=new WeakMap,f=new WeakMap;return(te=function(l){return l?f:u})(r)}function Z(r,u){if(!u&&r&&r.__esModule)return r;if(r===null||ee(r)!="object"&&typeof r!="function")return{default:r};var f=te(u);if(f&&f.has(r))return f.get(r);var E={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var a=l?Object.getOwnPropertyDescriptor(r,o):null;a&&(a.get||a.set)?Object.defineProperty(E,o,a):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var N=Float32Array;function le(r){var u=N;return N=r,u}function re(r,u){return u=u||new N(16),u[0]=-r[0],u[1]=-r[1],u[2]=-r[2],u[3]=-r[3],u[4]=-r[4],u[5]=-r[5],u[6]=-r[6],u[7]=-r[7],u[8]=-r[8],u[9]=-r[9],u[10]=-r[10],u[11]=-r[11],u[12]=-r[12],u[13]=-r[13],u[14]=-r[14],u[15]=-r[15],u}function Ee(){return new N(16).fill(0)}function F(r,u){return u=u||new N(16),u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],u[4]=r[4],u[5]=r[5],u[6]=r[6],u[7]=r[7],u[8]=r[8],u[9]=r[9],u[10]=r[10],u[11]=r[11],u[12]=r[12],u[13]=r[13],u[14]=r[14],u[15]=r[15],u}function H(r){return r=r||new N(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function K(r,u){if(u=u||new N(16),u===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,u}var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[1*4+0],s=r[1*4+1],T=r[1*4+2],P=r[1*4+3],B=r[2*4+0],M=r[2*4+1],k=r[2*4+2],Y=r[2*4+3],q=r[3*4+0],ne=r[3*4+1],J=r[3*4+2],fe=r[3*4+3];return u[0]=E,u[1]=m,u[2]=B,u[3]=q,u[4]=l,u[5]=s,u[6]=M,u[7]=ne,u[8]=o,u[9]=T,u[10]=k,u[11]=J,u[12]=a,u[13]=P,u[14]=Y,u[15]=fe,u}function x(r,u){u=u||new N(16);var f=r[0*4+0],E=r[0*4+1],l=r[0*4+2],o=r[0*4+3],a=r[1*4+0],m=r[1*4+1],s=r[1*4+2],T=r[1*4+3],P=r[2*4+0],B=r[2*4+1],M=r[2*4+2],k=r[2*4+3],Y=r[3*4+0],q=r[3*4+1],ne=r[3*4+2],J=r[3*4+3],fe=M*J,ce=ne*k,Q=s*J,me=ne*T,Me=s*k,He=M*T,Le=l*J,je=ne*o,_e=l*k,Re=M*o,qe=l*T,ke=s*o,Ke=P*q,We=Y*B,Ze=a*q,Fe=Y*m,Oe=a*B,hr=P*m,fr=f*q,Ar=Y*E,Sr=f*B,Mr=P*E,Nr=f*m,Ur=a*E,Qr=fe*m+me*B+Me*q-(ce*m+Q*B+He*q),mt=ce*E+Le*B+Re*q-(fe*E+je*B+_e*q),ht=Q*E+je*m+qe*q-(me*E+Le*m+ke*q),yt=He*E+_e*m+ke*B-(Me*E+Re*m+qe*B),vr=1/(f*Qr+a*mt+P*ht+Y*yt);return u[0]=vr*Qr,u[1]=vr*mt,u[2]=vr*ht,u[3]=vr*yt,u[4]=vr*(ce*a+Q*P+He*Y-(fe*a+me*P+Me*Y)),u[5]=vr*(fe*f+je*P+_e*Y-(ce*f+Le*P+Re*Y)),u[6]=vr*(me*f+Le*a+ke*Y-(Q*f+je*a+qe*Y)),u[7]=vr*(Me*f+Re*a+qe*P-(He*f+_e*a+ke*P)),u[8]=vr*(Ke*T+Fe*k+Oe*J-(We*T+Ze*k+hr*J)),u[9]=vr*(We*o+fr*k+Mr*J-(Ke*o+Ar*k+Sr*J)),u[10]=vr*(Ze*o+Ar*T+Nr*J-(Fe*o+fr*T+Ur*J)),u[11]=vr*(hr*o+Sr*T+Ur*k-(Oe*o+Mr*T+Nr*k)),u[12]=vr*(Ze*M+hr*ne+We*s-(Oe*ne+Ke*s+Fe*M)),u[13]=vr*(Sr*ne+Ke*l+Ar*M-(fr*M+Mr*ne+We*l)),u[14]=vr*(fr*s+Ur*ne+Fe*l-(Nr*ne+Ze*l+Ar*s)),u[15]=vr*(Nr*M+Oe*l+Mr*s-(Sr*s+Ur*M+hr*l)),u}function V(r,u,f){f=f||new N(16);var E=r[0],l=r[1],o=r[2],a=r[3],m=r[4],s=r[5],T=r[6],P=r[7],B=r[8],M=r[9],k=r[10],Y=r[11],q=r[12],ne=r[13],J=r[14],fe=r[15],ce=u[0],Q=u[1],me=u[2],Me=u[3],He=u[4],Le=u[5],je=u[6],_e=u[7],Re=u[8],qe=u[9],ke=u[10],Ke=u[11],We=u[12],Ze=u[13],Fe=u[14],Oe=u[15];return f[0]=E*ce+m*Q+B*me+q*Me,f[1]=l*ce+s*Q+M*me+ne*Me,f[2]=o*ce+T*Q+k*me+J*Me,f[3]=a*ce+P*Q+Y*me+fe*Me,f[4]=E*He+m*Le+B*je+q*_e,f[5]=l*He+s*Le+M*je+ne*_e,f[6]=o*He+T*Le+k*je+J*_e,f[7]=a*He+P*Le+Y*je+fe*_e,f[8]=E*Re+m*qe+B*ke+q*Ke,f[9]=l*Re+s*qe+M*ke+ne*Ke,f[10]=o*Re+T*qe+k*ke+J*Ke,f[11]=a*Re+P*qe+Y*ke+fe*Ke,f[12]=E*We+m*Ze+B*Fe+q*Oe,f[13]=l*We+s*Ze+M*Fe+ne*Oe,f[14]=o*We+T*Ze+k*Fe+J*Oe,f[15]=a*We+P*Ze+Y*Fe+fe*Oe,f}function ue(r,u,f){return f=f||H(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=u[0],f[13]=u[1],f[14]=u[2],f[15]=1,f}function be(r,u){return u=u||G.create(),u[0]=r[12],u[1]=r[13],u[2]=r[14],u}function Ue(r,u,f){f=f||G.create();var E=u*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function ge(r,u,f,E){E!==r&&(E=F(r,E));var l=f*4;return E[l+0]=u[0],E[l+1]=u[1],E[l+2]=u[2],E}function ar(r,u,f,E,l){l=l||new N(16);var o=Math.tan(Math.PI*.5-.5*r),a=1/(f-E);return l[0]=o/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+E)*a,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*E*a*2,l[15]=0,l}function or(r,u,f,E,l,o,a){return a=a||new N(16),a[0]=2/(u-r),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(E-f),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(l-o),a[11]=0,a[12]=(u+r)/(r-u),a[13]=(E+f)/(f-E),a[14]=(o+l)/(l-o),a[15]=1,a}function Je(r,u,f,E,l,o,a){a=a||new N(16);var m=u-r,s=E-f,T=l-o;return a[0]=2*l/m,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l/s,a[6]=0,a[7]=0,a[8]=(r+u)/m,a[9]=(E+f)/s,a[10]=o/T,a[11]=-1,a[12]=0,a[13]=0,a[14]=l*o/T,a[15]=0,a}var ve,w,I;function O(r,u,f,E){return E=E||new N(16),ve=ve||G.create(),w=w||G.create(),I=I||G.create(),G.normalize(G.subtract(r,u,I),I),G.normalize(G.cross(f,I,ve),ve),G.normalize(G.cross(I,ve,w),w),E[0]=ve[0],E[1]=ve[1],E[2]=ve[2],E[3]=0,E[4]=w[0],E[5]=w[1],E[6]=w[2],E[7]=0,E[8]=I[0],E[9]=I[1],E[10]=I[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function _(r,u){return u=u||new N(16),u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=r[0],u[13]=r[1],u[14]=r[2],u[15]=1,u}function he(r,u,f){f=f||new N(16);var E=u[0],l=u[1],o=u[2],a=r[0],m=r[1],s=r[2],T=r[3],P=r[1*4+0],B=r[1*4+1],M=r[1*4+2],k=r[1*4+3],Y=r[2*4+0],q=r[2*4+1],ne=r[2*4+2],J=r[2*4+3],fe=r[3*4+0],ce=r[3*4+1],Q=r[3*4+2],me=r[3*4+3];return r!==f&&(f[0]=a,f[1]=m,f[2]=s,f[3]=T,f[4]=P,f[5]=B,f[6]=M,f[7]=k,f[8]=Y,f[9]=q,f[10]=ne,f[11]=J),f[12]=a*E+P*l+Y*o+fe,f[13]=m*E+B*l+q*o+ce,f[14]=s*E+M*l+ne*o+Q,f[15]=T*E+k*l+J*o+me,f}function Ae(r,u){u=u||new N(16);var f=Math.cos(r),E=Math.sin(r);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=f,u[6]=E,u[7]=0,u[8]=0,u[9]=-E,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function xe(r,u,f){f=f||new N(16);var E=r[4],l=r[5],o=r[6],a=r[7],m=r[8],s=r[9],T=r[10],P=r[11],B=Math.cos(u),M=Math.sin(u);return f[4]=B*E+M*m,f[5]=B*l+M*s,f[6]=B*o+M*T,f[7]=B*a+M*P,f[8]=B*m-M*E,f[9]=B*s-M*l,f[10]=B*T-M*o,f[11]=B*P-M*a,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ve(r,u){u=u||new N(16);var f=Math.cos(r),E=Math.sin(r);return u[0]=f,u[1]=0,u[2]=-E,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=E,u[9]=0,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ne(r,u,f){f=f||new N(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[2*4+0],s=r[2*4+1],T=r[2*4+2],P=r[2*4+3],B=Math.cos(u),M=Math.sin(u);return f[0]=B*E-M*m,f[1]=B*l-M*s,f[2]=B*o-M*T,f[3]=B*a-M*P,f[8]=B*m+M*E,f[9]=B*s+M*l,f[10]=B*T+M*o,f[11]=B*P+M*a,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Qe(r,u){u=u||new N(16);var f=Math.cos(r),E=Math.sin(r);return u[0]=f,u[1]=E,u[2]=0,u[3]=0,u[4]=-E,u[5]=f,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Xe(r,u,f){f=f||new N(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],m=r[1*4+0],s=r[1*4+1],T=r[1*4+2],P=r[1*4+3],B=Math.cos(u),M=Math.sin(u);return f[0]=B*E+M*m,f[1]=B*l+M*s,f[2]=B*o+M*T,f[3]=B*a+M*P,f[4]=B*m-M*E,f[5]=B*s-M*l,f[6]=B*T-M*o,f[7]=B*P-M*a,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ir(r,u,f){f=f||new N(16);var E=r[0],l=r[1],o=r[2],a=Math.sqrt(E*E+l*l+o*o);E/=a,l/=a,o/=a;var m=E*E,s=l*l,T=o*o,P=Math.cos(u),B=Math.sin(u),M=1-P;return f[0]=m+(1-m)*P,f[1]=E*l*M+o*B,f[2]=E*o*M-l*B,f[3]=0,f[4]=E*l*M-o*B,f[5]=s+(1-s)*P,f[6]=l*o*M+E*B,f[7]=0,f[8]=E*o*M+l*B,f[9]=l*o*M-E*B,f[10]=T+(1-T)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,u,f,E){E=E||new N(16);var l=u[0],o=u[1],a=u[2],m=Math.sqrt(l*l+o*o+a*a);l/=m,o/=m,a/=m;var s=l*l,T=o*o,P=a*a,B=Math.cos(f),M=Math.sin(f),k=1-B,Y=s+(1-s)*B,q=l*o*k+a*M,ne=l*a*k-o*M,J=l*o*k-a*M,fe=T+(1-T)*B,ce=o*a*k+l*M,Q=l*a*k+o*M,me=o*a*k-l*M,Me=P+(1-P)*B,He=r[0],Le=r[1],je=r[2],_e=r[3],Re=r[4],qe=r[5],ke=r[6],Ke=r[7],We=r[8],Ze=r[9],Fe=r[10],Oe=r[11];return E[0]=Y*He+q*Re+ne*We,E[1]=Y*Le+q*qe+ne*Ze,E[2]=Y*je+q*ke+ne*Fe,E[3]=Y*_e+q*Ke+ne*Oe,E[4]=J*He+fe*Re+ce*We,E[5]=J*Le+fe*qe+ce*Ze,E[6]=J*je+fe*ke+ce*Fe,E[7]=J*_e+fe*Ke+ce*Oe,E[8]=Q*He+me*Re+Me*We,E[9]=Q*Le+me*qe+Me*Ze,E[10]=Q*je+me*ke+Me*Fe,E[11]=Q*_e+me*Ke+Me*Oe,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function ur(r,u){return u=u||new N(16),u[0]=r[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=r[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=r[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function tr(r,u,f){f=f||new N(16);var E=u[0],l=u[1],o=u[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function lr(r,u,f){f=f||G.create();var E=u[0],l=u[1],o=u[2],a=E*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+l*r[4]+o*r[8]+r[12])/a,f[1]=(E*r[1]+l*r[5]+o*r[9]+r[13])/a,f[2]=(E*r[2]+l*r[6]+o*r[10]+r[14])/a,f}function dr(r,u,f){f=f||G.create();var E=u[0],l=u[1],o=u[2];return f[0]=E*r[0]+l*r[4]+o*r[8],f[1]=E*r[1]+l*r[5]+o*r[9],f[2]=E*r[2]+l*r[6]+o*r[10],f}function oe(r,u,f){f=f||G.create();var E=x(r),l=u[0],o=u[1],a=u[2];return f[0]=l*E[0]+o*E[1]+a*E[2],f[1]=l*E[4]+o*E[5]+a*E[6],f[2]=l*E[8]+o*E[9]+a*E[10],f}},"./src/primitives.js":(Te,i,X)=>{function ee(o){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ee(o)}i.__esModule=!0,i.concatVertices=u,i.create3DFBuffers=i.create3DFBufferInfo=void 0,i.create3DFVertices=Ve,i.createAugmentedTypedArray=x,i.createCrescentBuffers=i.createCrescentBufferInfo=void 0,i.createCrescentVertices=Ne,i.createCubeBuffers=i.createCubeBufferInfo=i.createCresentVertices=i.createCresentBuffers=i.createCresentBufferInfo=void 0,i.createCubeVertices=he,i.createCylinderBuffers=i.createCylinderBufferInfo=void 0,i.createCylinderVertices=Qe,i.createDiscBuffers=i.createDiscBufferInfo=void 0,i.createDiscVertices=ir,i.createPlaneBuffers=i.createPlaneBufferInfo=void 0,i.createPlaneVertices=I,i.createSphereBuffers=i.createSphereBufferInfo=void 0,i.createSphereVertices=O,i.createTorusBuffers=i.createTorusBufferInfo=void 0,i.createTorusVertices=Xe,i.createTruncatedConeBuffers=i.createTruncatedConeBufferInfo=void 0,i.createTruncatedConeVertices=Ae,i.createXYQuadBuffers=i.createXYQuadBufferInfo=void 0,i.createXYQuadVertices=w,i.deindexVertices=ue,i.duplicateVertices=f,i.flattenNormals=be,i.makeRandomVertexColors=ur,i.reorientDirections=ar,i.reorientNormals=or,i.reorientPositions=Je,i.reorientVertices=ve;var G=Ee(X("./src/attributes.js")),te=Ee(X("./src/helper.js")),Z=Ee(X("./src/typedarrays.js")),N=Ee(X("./src/m4.js")),le=Ee(X("./src/v3.js"));function re(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,m=new WeakMap;return(re=function(T){return T?m:a})(o)}function Ee(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||ee(o)!="object"&&typeof o!="function")return{default:o};var m=re(a);if(m&&m.has(o))return m.get(o);var s={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in o)if(P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)){var B=T?Object.getOwnPropertyDescriptor(o,P):null;B&&(B.get||B.set)?Object.defineProperty(s,P,B):s[P]=o[P]}return s.default=o,m&&m.set(o,s),s}var F=G.getArray_,H=G.getNumComponents_;function K(o,a){var m=0;return o.push=function(){for(var s=0;s<arguments.length;++s){var T=arguments[s];if(T instanceof Array||Z.isArrayBuffer(T))for(var P=0;P<T.length;++P)o[m++]=T[P];else o[m++]=T}},o.reset=function(s){m=s||0},o.numComponents=a,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function x(o,a,m){var s=m||Float32Array;return K(new s(o*a),o)}function V(o){return o!=="indices"}function ue(o){var a=o.indices,m={},s=a.length;function T(P){for(var B=o[P],M=B.numComponents,k=x(M,s,B.constructor),Y=0;Y<s;++Y)for(var q=a[Y],ne=q*M,J=0;J<M;++J)k.push(B[ne+J]);m[P]=k}return Object.keys(o).filter(V).forEach(T),m}function be(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var a=o.normal,m=a.length,s=0;s<m;s+=9){var T=a[s+0],P=a[s+1],B=a[s+2],M=a[s+3],k=a[s+4],Y=a[s+5],q=a[s+6],ne=a[s+7],J=a[s+8],fe=T+M+q,ce=P+k+ne,Q=B+Y+J,me=Math.sqrt(fe*fe+ce*ce+Q*Q);fe/=me,ce/=me,Q/=me,a[s+0]=fe,a[s+1]=ce,a[s+2]=Q,a[s+3]=fe,a[s+4]=ce,a[s+5]=Q,a[s+6]=fe,a[s+7]=ce,a[s+8]=Q}return o}function Ue(o,a,m){for(var s=o.length,T=new Float32Array(3),P=0;P<s;P+=3)m(a,[o[P],o[P+1],o[P+2]],T),o[P]=T[0],o[P+1]=T[1],o[P+2]=T[2]}function ge(o,a,m){m=m||le.create();var s=a[0],T=a[1],P=a[2];return m[0]=s*o[0]+T*o[1]+P*o[2],m[1]=s*o[4]+T*o[5]+P*o[6],m[2]=s*o[8]+T*o[9]+P*o[10],m}function ar(o,a){return Ue(o,a,N.transformDirection),o}function or(o,a){return Ue(o,N.inverse(a),ge),o}function Je(o,a){return Ue(o,a,N.transformPoint),o}function ve(o,a){return Object.keys(o).forEach(function(m){var s=o[m];m.indexOf("pos")>=0?Je(s,a):m.indexOf("tan")>=0||m.indexOf("binorm")>=0?ar(s,a):m.indexOf("norm")>=0&&or(s,a)}),o}function w(o,a,m){return o=o||2,a=a||0,m=m||0,o*=.5,{position:{numComponents:2,data:[a+-1*o,m+-1*o,a+1*o,m+-1*o,a+-1*o,m+1*o,a+1*o,m+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function I(o,a,m,s,T){o=o||1,a=a||1,m=m||1,s=s||1,T=T||N.identity();for(var P=(m+1)*(s+1),B=x(3,P),M=x(3,P),k=x(2,P),Y=0;Y<=s;Y++)for(var q=0;q<=m;q++){var ne=q/m,J=Y/s;B.push(o*ne-o*.5,0,a*J-a*.5),M.push(0,1,0),k.push(ne,J)}for(var fe=m+1,ce=x(3,m*s*2,Uint16Array),Q=0;Q<s;Q++)for(var me=0;me<m;me++)ce.push((Q+0)*fe+me,(Q+1)*fe+me,(Q+0)*fe+me+1),ce.push((Q+1)*fe+me,(Q+1)*fe+me+1,(Q+0)*fe+me+1);var Me=ve({position:B,normal:M,texcoord:k,indices:ce},T);return Me}function O(o,a,m,s,T,P,B){if(a<=0||m<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");s=s||0,T=T||Math.PI,P=P||0,B=B||Math.PI*2;for(var M=T-s,k=B-P,Y=(a+1)*(m+1),q=x(3,Y),ne=x(3,Y),J=x(2,Y),fe=0;fe<=m;fe++)for(var ce=0;ce<=a;ce++){var Q=ce/a,me=fe/m,Me=k*Q+P,He=M*me+s,Le=Math.sin(Me),je=Math.cos(Me),_e=Math.sin(He),Re=Math.cos(He),qe=je*_e,ke=Re,Ke=Le*_e;q.push(o*qe,o*ke,o*Ke),ne.push(qe,ke,Ke),J.push(1-Q,me)}for(var We=a+1,Ze=x(3,a*m*2,Uint16Array),Fe=0;Fe<a;Fe++)for(var Oe=0;Oe<m;Oe++)Ze.push((Oe+0)*We+Fe,(Oe+0)*We+Fe+1,(Oe+1)*We+Fe),Ze.push((Oe+1)*We+Fe,(Oe+0)*We+Fe+1,(Oe+1)*We+Fe+1);return{position:q,normal:ne,texcoord:J,indices:Ze}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function he(o){o=o||1;for(var a=o/2,m=[[-a,-a,-a],[+a,-a,-a],[-a,+a,-a],[+a,+a,-a],[-a,-a,+a],[+a,-a,+a],[-a,+a,+a],[+a,+a,+a]],s=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],P=6*4,B=x(3,P),M=x(3,P),k=x(2,P),Y=x(3,6*2,Uint16Array),q=0;q<6;++q){for(var ne=_[q],J=0;J<4;++J){var fe=m[ne[J]],ce=s[q],Q=T[J];B.push(fe),M.push(ce),k.push(Q)}var me=4*q;Y.push(me+0,me+1,me+2),Y.push(me+0,me+2,me+3)}return{position:B,normal:M,texcoord:k,indices:Y}}function Ae(o,a,m,s,T,P,B){if(s<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var M=P===void 0?!0:P,k=B===void 0?!0:B,Y=(M?2:0)+(k?2:0),q=(s+1)*(T+1+Y),ne=x(3,q),J=x(3,q),fe=x(2,q),ce=x(3,s*(T+Y/2)*2,Uint16Array),Q=s+1,me=Math.atan2(o-a,m),Me=Math.cos(me),He=Math.sin(me),Le=M?-2:0,je=T+(k?2:0),_e=Le;_e<=je;++_e){var Re=_e/T,qe=m*Re,ke=void 0;_e<0?(qe=0,Re=1,ke=o):_e>T?(qe=m,Re=1,ke=a):ke=o+(a-o)*(_e/T),(_e===-2||_e===T+2)&&(ke=0,Re=0),qe-=m/2;for(var Ke=0;Ke<Q;++Ke){var We=Math.sin(Ke*Math.PI*2/s),Ze=Math.cos(Ke*Math.PI*2/s);ne.push(We*ke,qe,Ze*ke),_e<0?J.push(0,-1,0):_e>T?J.push(0,1,0):ke===0?J.push(0,0,0):J.push(We*Me,He,Ze*Me),fe.push(Ke/s,1-Re)}}for(var Fe=0;Fe<T+Y;++Fe)if(!(Fe===1&&M||Fe===T+Y-2&&k))for(var Oe=0;Oe<s;++Oe)ce.push(Q*(Fe+0)+0+Oe,Q*(Fe+0)+1+Oe,Q*(Fe+1)+1+Oe),ce.push(Q*(Fe+0)+0+Oe,Q*(Fe+1)+1+Oe,Q*(Fe+1)+0+Oe);return{position:ne,normal:J,texcoord:fe,indices:ce}}function xe(o,a){a=a||[];for(var m=[],s=0;s<o.length;s+=4){var T=o[s],P=o.slice(s+1,s+4);P.push.apply(P,a);for(var B=0;B<T;++B)m.push.apply(m,P)}return m}function Ve(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],a=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],m=xe([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),s=xe([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,P={position:x(3,T),texcoord:x(2,T),normal:x(3,T),color:x(4,T,Uint8Array),indices:x(3,T/3,Uint16Array)};P.position.push(o),P.texcoord.push(a),P.normal.push(m),P.color.push(s);for(var B=0;B<T;++B)P.indices.push(B);return P}function Ne(o,a,m,s,T,P,B){if(T<=0)throw new Error("subdivisionDown must be > 0");P=P||0,B=B||1;var M=2,k=B-P,Y=(T+1)*2*(2+M),q=x(3,Y),ne=x(3,Y),J=x(2,Y);function fe(je,_e,Re){return je+(_e-je)*Re}function ce(je,_e,Re,qe,ke,Ke){for(var We=0;We<=T;We++){var Ze=_e/(M-1),Fe=We/T,Oe=(Ze-.5)*2,hr=(P+Fe*k)*Math.PI,fr=Math.sin(hr),Ar=Math.cos(hr),Sr=fe(o,je,fr),Mr=Oe*s,Nr=Ar*o,Ur=fr*Sr;q.push(Mr,Nr,Ur);var Qr=le.add(le.multiply([0,fr,Ar],Re),qe);ne.push(Qr),J.push(Ze*ke+Ke,Fe)}}for(var Q=0;Q<M;Q++){var me=(Q/(M-1)-.5)*2;ce(a,Q,[1,1,1],[0,0,0],1,0),ce(a,Q,[0,0,0],[me,0,0],0,0),ce(m,Q,[1,1,1],[0,0,0],1,0),ce(m,Q,[0,0,0],[me,0,0],0,1)}var Me=x(3,T*2*(2+M),Uint16Array);function He(je,_e){for(var Re=0;Re<T;++Re)Me.push(je+Re+0,je+Re+1,_e+Re+0),Me.push(je+Re+1,_e+Re+1,_e+Re+0)}var Le=T+1;return He(Le*0,Le*4),He(Le*5,Le*7),He(Le*6,Le*2),He(Le*3,Le*1),{position:q,normal:ne,texcoord:J,indices:Me}}function Qe(o,a,m,s,T,P){return Ae(o,o,a,m,s,T,P)}function Xe(o,a,m,s,T,P){if(m<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,P=P||Math.PI*2;for(var B=P-T,M=m+1,k=s+1,Y=M*k,q=x(3,Y),ne=x(3,Y),J=x(2,Y),fe=x(3,m*s*2,Uint16Array),ce=0;ce<k;++ce)for(var Q=ce/s,me=Q*Math.PI*2,Me=Math.sin(me),He=o+Me*a,Le=Math.cos(me),je=Le*a,_e=0;_e<M;++_e){var Re=_e/m,qe=T+Re*B,ke=Math.sin(qe),Ke=Math.cos(qe),We=ke*He,Ze=Ke*He,Fe=ke*Me,Oe=Ke*Me;q.push(We,je,Ze),ne.push(Fe,Le,Oe),J.push(Re,1-Q)}for(var hr=0;hr<s;++hr)for(var fr=0;fr<m;++fr){var Ar=1+fr,Sr=1+hr;fe.push(M*hr+fr,M*Sr+fr,M*hr+Ar),fe.push(M*Sr+fr,M*Sr+Ar,M*hr+Ar)}return{position:q,normal:ne,texcoord:J,indices:fe}}function ir(o,a,m,s,T){if(a<3)throw new Error("divisions must be at least 3");m=m||1,T=T||1,s=s||0;for(var P=(a+1)*(m+1),B=x(3,P),M=x(3,P),k=x(2,P),Y=x(3,m*a*2,Uint16Array),q=0,ne=o-s,J=a+1,fe=0;fe<=m;++fe){for(var ce=s+ne*Math.pow(fe/m,T),Q=0;Q<=a;++Q){var me=2*Math.PI*Q/a,Me=ce*Math.cos(me),He=ce*Math.sin(me);if(B.push(Me,0,He),M.push(0,1,0),k.push(1-Q/a,fe/m),fe>0&&Q!==a){var Le=q+(Q+1),je=q+Q,_e=q+Q-J,Re=q+(Q+1)-J;Y.push(Le,je,_e),Y.push(Le,_e,Re)}}q+=a+1}return{position:B,normal:M,texcoord:k,indices:Y}}function Tr(o){return Math.random()*o|0}function ur(o,a){a=a||{};var m=o.position.numElements,s=x(4,m,Uint8Array),T=a.rand||function(ne,J){return J<3?Tr(256):255};if(o.color=s,o.indices)for(var P=0;P<m;++P)s.push(T(P,0),T(P,1),T(P,2),T(P,3));else for(var B=a.vertsPerColor||3,M=m/B,k=0;k<M;++k)for(var Y=[T(k,0),T(k,1),T(k,2),T(k,3)],q=0;q<B;++q)s.push(Y);return o}function tr(o){return function(a){var m=o.apply(this,Array.prototype.slice.call(arguments,1));return G.createBuffersFromArrays(a,m)}}function lr(o){return function(a){var m=o.apply(null,Array.prototype.slice.call(arguments,1));return G.createBufferInfoFromArrays(a,m)}}var dr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function oe(o,a,m,s){s=s||0;for(var T=o.length,P=0;P<T;++P)a[m+P]=o[P]+s}function r(o,a){var m=F(o),s=new m.constructor(a),T=s;return m.numComponents&&m.numElements&&K(s,m.numComponents),o.data&&(T={data:s},te.copyNamedProperties(dr,o,T)),T}function u(o){for(var a={},m,s=function(){var q=o[T];Object.keys(q).forEach(function(ne){a[ne]||(a[ne]=[]),!m&&ne!=="indices"&&(m=ne);var J=q[ne],fe=H(J,ne),ce=F(J),Q=ce.length/fe;a[ne].push(Q)})},T=0;T<o.length;++T)s();function P(Y){for(var q=0,ne,J=0;J<o.length;++J){var fe=o[J],ce=fe[Y],Q=F(ce);q+=Q.length,(!ne||ce.data)&&(ne=ce)}return{length:q,spec:ne}}function B(Y,q,ne){for(var J=0,fe=0,ce=0;ce<o.length;++ce){var Q=o[ce],me=Q[Y],Me=F(me);Y==="indices"?(oe(Me,ne,fe,J),J+=q[ce]):oe(Me,ne,fe),fe+=Me.length}}var M=a[m],k={};return Object.keys(a).forEach(function(Y){var q=P(Y),ne=r(q.spec,q.length);B(Y,M,F(ne)),k[Y]=ne}),k}function f(o){var a={};return Object.keys(o).forEach(function(m){var s=o[m],T=F(s),P=r(s,T.length);oe(T,F(P),0),a[m]=P}),a}i.create3DFBufferInfo=lr(Ve),i.create3DFBuffers=tr(Ve),i.createCubeBufferInfo=lr(he),i.createCubeBuffers=tr(he),i.createPlaneBufferInfo=lr(I),i.createPlaneBuffers=tr(I),i.createSphereBufferInfo=lr(O),i.createSphereBuffers=tr(O),i.createTruncatedConeBufferInfo=lr(Ae),i.createTruncatedConeBuffers=tr(Ae),i.createXYQuadBufferInfo=lr(w),i.createXYQuadBuffers=tr(w);var E=i.createCrescentBufferInfo=lr(Ne),l=i.createCrescentBuffers=tr(Ne);i.createCylinderBufferInfo=lr(Qe),i.createCylinderBuffers=tr(Qe),i.createTorusBufferInfo=lr(Xe),i.createTorusBuffers=tr(Xe),i.createDiscBufferInfo=lr(ir),i.createDiscBuffers=tr(ir),i.createCresentBufferInfo=E,i.createCresentBuffers=l,i.createCresentVertices=Ne},"./src/programs.js":(Te,i,X)=>{function ee(e){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(e)}i.__esModule=!0,i.bindTransformFeedbackInfo=wt,i.bindUniformBlock=xt,i.createAttributeSetters=Qt,i.createProgram=ft,i.createProgramAsync=void 0,i.createProgramFromScripts=Xt,i.createProgramFromSources=Ht,i.createProgramInfo=c,i.createProgramInfoAsync=void 0,i.createProgramInfoFromProgram=Ft,i.createProgramInfos=A,i.createProgramInfosAsync=void 0,i.createPrograms=y,i.createProgramsAsync=void 0,i.createTransformFeedback=zt,i.createTransformFeedbackInfo=gt,i.createUniformBlockInfo=qt,i.createUniformBlockInfoFromProgram=Kt,i.createUniformBlockSpecFromProgram=zr,i.createUniformSetters=$r,i.setAttributes=Zt,i.setBlockUniforms=Jn,i.setBuffersAndAttributes=$n,i.setUniformBlock=dn,i.setUniforms=Rt,i.setUniformsAndBindTextures=void 0;var G=N(X("./src/utils.js")),te=N(X("./src/helper.js"));function Z(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Z=function(b){return b?n:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ee(e)!="object"&&typeof e!="function")return{default:e};var n=Z(t);if(n&&n.has(e))return n.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var R=b?Object.getOwnPropertyDescriptor(e,d):null;R&&(R.get||R.set)?Object.defineProperty(p,d,R):p[d]=e[d]}return p.default=e,n&&n.set(e,p),p}function le(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */le=function(){return t};var e,t={},n=Object.prototype,p=n.hasOwnProperty,b=Object.defineProperty||function(ie,j,z){ie[j]=z.value},d=typeof Symbol=="function"?Symbol:{},R=d.iterator||"@@iterator",g=d.asyncIterator||"@@asyncIterator",D=d.toStringTag||"@@toStringTag";function C(ie,j,z){return Object.defineProperty(ie,j,{value:z,enumerable:!0,configurable:!0,writable:!0}),ie[j]}try{C({},"")}catch{C=function(z,de,Ie){return z[de]=Ie}}function L(ie,j,z,de){var Ie=j&&j.prototype instanceof Ge?j:Ge,Pe=Object.create(Ie.prototype),cr=new ta(de||[]);return b(Pe,"_invoke",{value:Fa(ie,z,cr)}),Pe}function ae(ie,j,z){try{return{type:"normal",arg:ie.call(j,z)}}catch(de){return{type:"throw",arg:de}}}t.wrap=L;var se="suspendedStart",ye="suspendedYield",we="executing",De="completed",Ce={};function Ge(){}function Ye(){}function nr(){}var mr={};C(mr,R,function(){return this});var Pr=Object.getPrototypeOf,Dr=Pr&&Pr(Pr(na([])));Dr&&Dr!==n&&p.call(Dr,R)&&(mr=Dr);var jr=nr.prototype=Ge.prototype=Object.create(mr);function _n(ie){["next","throw","return"].forEach(function(j){C(ie,j,function(z){return this._invoke(j,z)})})}function Sn(ie,j){function z(Ie,Pe,cr,gr){var xr=ae(ie[Ie],ie,Pe);if(xr.type!=="throw"){var lt=xr.arg,et=lt.value;return et&&ee(et)=="object"&&p.call(et,"__await")?j.resolve(et.__await).then(function(vt){z("next",vt,cr,gr)},function(vt){z("throw",vt,cr,gr)}):j.resolve(et).then(function(vt){lt.value=vt,cr(lt)},function(vt){return z("throw",vt,cr,gr)})}gr(xr.arg)}var de;b(this,"_invoke",{value:function(Pe,cr){function gr(){return new j(function(xr,lt){z(Pe,cr,xr,lt)})}return de=de?de.then(gr,gr):gr()}})}function Fa(ie,j,z){var de=se;return function(Ie,Pe){if(de===we)throw new Error("Generator is already running");if(de===De){if(Ie==="throw")throw Pe;return{value:e,done:!0}}for(z.method=Ie,z.arg=Pe;;){var cr=z.delegate;if(cr){var gr=sa(cr,z);if(gr){if(gr===Ce)continue;return gr}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(de===se)throw de=De,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);de=we;var xr=ae(ie,j,z);if(xr.type==="normal"){if(de=z.done?De:ye,xr.arg===Ce)continue;return{value:xr.arg,done:z.done}}xr.type==="throw"&&(de=De,z.method="throw",z.arg=xr.arg)}}}function sa(ie,j){var z=j.method,de=ie.iterator[z];if(de===e)return j.delegate=null,z==="throw"&&ie.iterator.return&&(j.method="return",j.arg=e,sa(ie,j),j.method==="throw")||z!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+z+"' method")),Ce;var Ie=ae(de,ie.iterator,j.arg);if(Ie.type==="throw")return j.method="throw",j.arg=Ie.arg,j.delegate=null,Ce;var Pe=Ie.arg;return Pe?Pe.done?(j[ie.resultName]=Pe.value,j.next=ie.nextLoc,j.method!=="return"&&(j.method="next",j.arg=e),j.delegate=null,Ce):Pe:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,Ce)}function Ca(ie){var j={tryLoc:ie[0]};1 in ie&&(j.catchLoc=ie[1]),2 in ie&&(j.finallyLoc=ie[2],j.afterLoc=ie[3]),this.tryEntries.push(j)}function ra(ie){var j=ie.completion||{};j.type="normal",delete j.arg,ie.completion=j}function ta(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(Ca,this),this.reset(!0)}function na(ie){if(ie||ie===""){var j=ie[R];if(j)return j.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var z=-1,de=function Ie(){for(;++z<ie.length;)if(p.call(ie,z))return Ie.value=ie[z],Ie.done=!1,Ie;return Ie.value=e,Ie.done=!0,Ie};return de.next=de}}throw new TypeError(ee(ie)+" is not iterable")}return Ye.prototype=nr,b(jr,"constructor",{value:nr,configurable:!0}),b(nr,"constructor",{value:Ye,configurable:!0}),Ye.displayName=C(nr,D,"GeneratorFunction"),t.isGeneratorFunction=function(ie){var j=typeof ie=="function"&&ie.constructor;return!!j&&(j===Ye||(j.displayName||j.name)==="GeneratorFunction")},t.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,nr):(ie.__proto__=nr,C(ie,D,"GeneratorFunction")),ie.prototype=Object.create(jr),ie},t.awrap=function(ie){return{__await:ie}},_n(Sn.prototype),C(Sn.prototype,g,function(){return this}),t.AsyncIterator=Sn,t.async=function(ie,j,z,de,Ie){Ie===void 0&&(Ie=Promise);var Pe=new Sn(L(ie,j,z,de),Ie);return t.isGeneratorFunction(j)?Pe:Pe.next().then(function(cr){return cr.done?cr.value:Pe.next()})},_n(jr),C(jr,D,"Generator"),C(jr,R,function(){return this}),C(jr,"toString",function(){return"[object Generator]"}),t.keys=function(ie){var j=Object(ie),z=[];for(var de in j)z.push(de);return z.reverse(),function Ie(){for(;z.length;){var Pe=z.pop();if(Pe in j)return Ie.value=Pe,Ie.done=!1,Ie}return Ie.done=!0,Ie}},t.values=na,ta.prototype={constructor:ta,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ra),!j)for(var z in this)z.charAt(0)==="t"&&p.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=e)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var z=this;function de(lt,et){return cr.type="throw",cr.arg=j,z.next=lt,et&&(z.method="next",z.arg=e),!!et}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Pe=this.tryEntries[Ie],cr=Pe.completion;if(Pe.tryLoc==="root")return de("end");if(Pe.tryLoc<=this.prev){var gr=p.call(Pe,"catchLoc"),xr=p.call(Pe,"finallyLoc");if(gr&&xr){if(this.prev<Pe.catchLoc)return de(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return de(Pe.finallyLoc)}else if(gr){if(this.prev<Pe.catchLoc)return de(Pe.catchLoc,!0)}else{if(!xr)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return de(Pe.finallyLoc)}}}},abrupt:function(j,z){for(var de=this.tryEntries.length-1;de>=0;--de){var Ie=this.tryEntries[de];if(Ie.tryLoc<=this.prev&&p.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Pe=Ie;break}}Pe&&(j==="break"||j==="continue")&&Pe.tryLoc<=z&&z<=Pe.finallyLoc&&(Pe=null);var cr=Pe?Pe.completion:{};return cr.type=j,cr.arg=z,Pe?(this.method="next",this.next=Pe.finallyLoc,Ce):this.complete(cr)},complete:function(j,z){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&z&&(this.next=z),Ce},finish:function(j){for(var z=this.tryEntries.length-1;z>=0;--z){var de=this.tryEntries[z];if(de.finallyLoc===j)return this.complete(de.completion,de.afterLoc),ra(de),Ce}},catch:function(j){for(var z=this.tryEntries.length-1;z>=0;--z){var de=this.tryEntries[z];if(de.tryLoc===j){var Ie=de.completion;if(Ie.type==="throw"){var Pe=Ie.arg;ra(de)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(j,z,de){return this.delegate={iterator:na(j),resultName:z,nextLoc:de},this.method==="next"&&(this.arg=e),Ce}},t}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),n.push.apply(n,p)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(p){F(e,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(n,p))})}return e}function F(e,t,n){return t=H(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=K(e,"string");return ee(t)=="symbol"?t:String(t)}function K(e,t){if(ee(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var p=n.call(e,t||"default");if(ee(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x(e,t,n,p,b,d,R){try{var g=e[d](R),D=g.value}catch(C){n(C);return}g.done?t(D):Promise.resolve(D).then(p,b)}function V(e){return function(){var t=this,n=arguments;return new Promise(function(p,b){var d=e.apply(t,n);function R(D){x(d,p,b,R,g,"next",D)}function g(D){x(d,p,b,R,g,"throw",D)}R(void 0)})}}function ue(e,t){return ge(e)||Ue(e,t)||ve(e,t)||be()}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var p,b,d,R,g=[],D=!0,C=!1;try{if(d=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;D=!1}else for(;!(D=(p=d.call(n)).done)&&(g.push(p.value),g.length!==t);D=!0);}catch(L){C=!0,b=L}finally{try{if(!D&&n.return!=null&&(R=n.return(),Object(R)!==R))return}finally{if(C)throw b}}return g}}function ge(e){if(Array.isArray(e))return e}function ar(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ve(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(C){throw C},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,R=!1,g;return{s:function(){n=n.call(e)},n:function(){var C=n.next();return d=C.done,C},e:function(C){R=!0,g=C},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(R)throw g}}}}function or(e){return I(e)||w(e)||ve(e)||Je()}function Je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(e,t){if(e){if(typeof e=="string")return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}function w(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,p=new Array(t);n<t;n++)p[n]=e[n];return p}var _=te.error,he=te.warn;function Ae(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var xe=33984,Ve=35048,Ne=34962,Qe=34963,Xe=35345,ir=35982,Tr=36386,ur=35713,tr=35714,lr=35632,dr=35633,oe=35981,r=35718,u=35721,f=35971,E=35382,l=35396,o=35398,a=35392,m=35395,s=5126,T=35664,P=35665,B=35666,M=5124,k=35667,Y=35668,q=35669,ne=35670,J=35671,fe=35672,ce=35673,Q=35674,me=35675,Me=35676,He=35678,Le=35680,je=35679,_e=35682,Re=35685,qe=35686,ke=35687,Ke=35688,We=35689,Ze=35690,Fe=36289,Oe=36292,hr=36293,fr=5125,Ar=36294,Sr=36295,Mr=36296,Nr=36298,Ur=36299,Qr=36300,mt=36303,ht=36306,yt=36307,vr=36308,Vn=36311,pt=3553,bt=34067,Lt=32879,Et=35866,Se={};function on(e,t){return Se[t].bindPoint}function kn(e,t){return function(n){e.uniform1f(t,n)}}function Wn(e,t){return function(n){e.uniform1fv(t,n)}}function Xn(e,t){return function(n){e.uniform2fv(t,n)}}function Hn(e,t){return function(n){e.uniform3fv(t,n)}}function Yn(e,t){return function(n){e.uniform4fv(t,n)}}function un(e,t){return function(n){e.uniform1i(t,n)}}function fn(e,t){return function(n){e.uniform1iv(t,n)}}function cn(e,t){return function(n){e.uniform2iv(t,n)}}function ln(e,t){return function(n){e.uniform3iv(t,n)}}function vn(e,t){return function(n){e.uniform4iv(t,n)}}function Lr(e,t){return function(n){e.uniform1ui(t,n)}}function rr(e,t){return function(n){e.uniform1uiv(t,n)}}function Tt(e,t){return function(n){e.uniform2uiv(t,n)}}function Zr(e,t){return function(n){e.uniform3uiv(t,n)}}function dt(e,t){return function(n){e.uniform4uiv(t,n)}}function Vr(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function yr(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function sn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function mn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function hn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Rr(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function ut(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Gt(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function zn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function br(e,t,n,p){var b=on(e,t);return G.isWebGL2(e)?function(d){var R,g;!d||te.isTexture(e,d)?(R=d,g=null):(R=d.texture,g=d.sampler),e.uniform1i(p,n),e.activeTexture(xe+n),e.bindTexture(b,R),e.bindSampler(n,g)}:function(d){e.uniform1i(p,n),e.activeTexture(xe+n),e.bindTexture(b,d)}}function Er(e,t,n,p,b){for(var d=on(e,t),R=new Int32Array(b),g=0;g<b;++g)R[g]=n+g;return G.isWebGL2(e)?function(D){e.uniform1iv(p,R),D.forEach(function(C,L){e.activeTexture(xe+R[L]);var ae,se;!C||te.isTexture(e,C)?(ae=C,se=null):(ae=C.texture,se=C.sampler),e.bindSampler(n,se),e.bindTexture(d,ae)})}:function(D){e.uniform1iv(p,R),D.forEach(function(C,L){e.activeTexture(xe+R[L]),e.bindTexture(d,C)})}}Se[s]={Type:Float32Array,size:4,setter:kn,arraySetter:Wn},Se[T]={Type:Float32Array,size:8,setter:Xn,cols:2},Se[P]={Type:Float32Array,size:12,setter:Hn,cols:3},Se[B]={Type:Float32Array,size:16,setter:Yn,cols:4},Se[M]={Type:Int32Array,size:4,setter:un,arraySetter:fn},Se[k]={Type:Int32Array,size:8,setter:cn,cols:2},Se[Y]={Type:Int32Array,size:12,setter:ln,cols:3},Se[q]={Type:Int32Array,size:16,setter:vn,cols:4},Se[fr]={Type:Uint32Array,size:4,setter:Lr,arraySetter:rr},Se[Ar]={Type:Uint32Array,size:8,setter:Tt,cols:2},Se[Sr]={Type:Uint32Array,size:12,setter:Zr,cols:3},Se[Mr]={Type:Uint32Array,size:16,setter:dt,cols:4},Se[ne]={Type:Uint32Array,size:4,setter:un,arraySetter:fn},Se[J]={Type:Uint32Array,size:8,setter:cn,cols:2},Se[fe]={Type:Uint32Array,size:12,setter:ln,cols:3},Se[ce]={Type:Uint32Array,size:16,setter:vn,cols:4},Se[Q]={Type:Float32Array,size:32,setter:Vr,rows:2,cols:2},Se[me]={Type:Float32Array,size:48,setter:yr,rows:3,cols:3},Se[Me]={Type:Float32Array,size:64,setter:sn,rows:4,cols:4},Se[Re]={Type:Float32Array,size:32,setter:mn,rows:2,cols:3},Se[qe]={Type:Float32Array,size:32,setter:Rr,rows:2,cols:4},Se[ke]={Type:Float32Array,size:48,setter:hn,rows:3,cols:2},Se[Ke]={Type:Float32Array,size:48,setter:Gt,rows:3,cols:4},Se[We]={Type:Float32Array,size:64,setter:ut,rows:4,cols:2},Se[Ze]={Type:Float32Array,size:64,setter:zn,rows:4,cols:3},Se[He]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Le]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[je]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Lt},Se[_e]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Fe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[Oe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[hr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[Nr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Ur]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Lt},Se[Qr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[mt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[ht]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[yt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Lt},Se[vr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[Vn]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et};function At(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||s,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function wr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||M,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Cr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Ne,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||fr,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function kr(e,t,n){var p=n.size,b=n.count;return function(d){e.bindBuffer(Ne,d.buffer);for(var R=d.size||d.numComponents||p,g=R/b,D=d.type||s,C=Se[D],L=C.size*R,ae=d.normalize||!1,se=d.offset||0,ye=L/b,we=0;we<b;++we)e.enableVertexAttribArray(t+we),e.vertexAttribPointer(t+we,g,D,ae,L,se+ye*we),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+we,d.divisor||0)}}var $e={};$e[s]={size:4,setter:At},$e[T]={size:8,setter:At},$e[P]={size:12,setter:At},$e[B]={size:16,setter:At},$e[M]={size:4,setter:wr},$e[k]={size:8,setter:wr},$e[Y]={size:12,setter:wr},$e[q]={size:16,setter:wr},$e[fr]={size:4,setter:Cr},$e[Ar]={size:8,setter:Cr},$e[Sr]={size:12,setter:Cr},$e[Mr]={size:16,setter:Cr},$e[ne]={size:4,setter:wr},$e[J]={size:8,setter:wr},$e[fe]={size:12,setter:wr},$e[ce]={size:16,setter:wr},$e[Q]={size:4,setter:kr,count:2},$e[me]={size:9,setter:kr,count:3},$e[Me]={size:16,setter:kr,count:4};var Wr=/ERROR:\s*\d+:(\d+)/gi;function Gr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=or(t.matchAll(Wr)),b=new Map(p.map(function(d,R){var g=parseInt(d[1]),D=p[R+1],C=D?D.index:t.length,L=t.substring(d.index,C);return[g-1,L]}));return e.split(`
`).map(function(d,R){var g=b.get(R);return"".concat(R+1+n,": ").concat(d).concat(g?`

^^^ `.concat(g):"")}).join(`
`)}var jt=/^[ \t]*\n/;function pr(e){var t=0;return jt.test(e)&&(t=1,e=e.replace(jt,"")),{lineOffset:t,shaderSource:e}}function _t(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function St(e,t,n,p){p=p||_;var b=e.getShaderParameter(n,ur);if(!b){var d=e.getShaderInfoLog(n),R=pr(e.getShaderSource(n)),g=R.lineOffset,D=R.shaderSource,C="".concat(Gr(D,d,g),`
Error compiling `).concat(G.glEnumToString(e,t),": ").concat(d);return p(C),C}return""}function Xr(e,t,n){var p,b,d;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){var R=e;n=R.errorCallback,e=R.attribLocations,p=R.transformFeedbackVaryings,b=R.transformFeedbackMode,d=R.callback}var g=n||_,D=[],C={errorCallback:function(se){D.push(se);for(var ye=arguments.length,we=new Array(ye>1?ye-1:0),De=1;De<ye;De++)we[De-1]=arguments[De];g.apply(void 0,[se].concat(we))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:d,errors:D};{var L={};Array.isArray(e)?e.forEach(function(ae,se){L[ae]=t?t[se]:se}):L=e||{},C.attribLocations=L}return C}var Hr=["VERTEX_SHADER","FRAGMENT_SHADER"];function yn(e,t){if(t.indexOf("frag")>=0)return lr;if(t.indexOf("vert")>=0)return dr}function pn(e,t,n){var p=e.getAttachedShaders(t),b=ar(p),d;try{for(b.s();!(d=b.n()).done;){var R=d.value;n.has(R)&&e.deleteShader(R)}}catch(g){b.e(g)}finally{b.f()}e.deleteProgram(t)}var bn=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(n){return setTimeout(n,t)})};function En(e,t,n){for(var p=e.createProgram(),b=Xr(n),d=b.attribLocations,R=b.transformFeedbackVaryings,g=b.transformFeedbackMode,D=0;D<t.length;++D){var C=t[D];if(typeof C=="string"){var L=Ae(C),ae=L?L.text:C,se=e[Hr[D]];L&&L.type&&(se=yn(e,L.type)||se),C=e.createShader(se),e.shaderSource(C,pr(ae).shaderSource),e.compileShader(C),e.attachShader(p,C)}}Object.entries(d).forEach(function(we){var De=ue(we,2),Ce=De[0],Ge=De[1];return e.bindAttribLocation(p,Ge,Ce)});{var ye=R;ye&&(ye.attribs&&(ye=ye.attribs),Array.isArray(ye)||(ye=Object.keys(ye)),e.transformFeedbackVaryings(p,ye,g||oe))}return e.linkProgram(p),p}function ft(e,t,n,p,b){var d=Xr(n,p,b),R=new Set(t),g=En(e,t,d);function D(C,L){var ae=Wt(C,L,d.errorCallback);return ae&&pn(C,L,R),ae}if(d.callback){Vt(e,g).then(function(){var C=D(e,g);d.callback(C,C?void 0:g)});return}return D(e,g)?void 0:g}function Yr(e){return function(t,n){for(var p=arguments.length,b=new Array(p>2?p-2:0),d=2;d<p;d++)b[d-2]=arguments[d];return new Promise(function(R,g){var D=Xr.apply(void 0,b);D.callback=function(C,L){C?g(C):R(L)},e(t,n,D)})}}i.createProgramAsync=Yr(ft),i.createProgramInfoAsync=Yr(c);function Vt(e,t){return kt.apply(this,arguments)}function kt(){return kt=V(le().mark(function e(t,n){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,C){return D.getProgramParameter(C,p.COMPLETION_STATUS_KHR)}:function(){return!0},d=0;case 3:return g.next=5,bn(d);case 5:d=16.666666666666668;case 6:if(!b(t,n)){g.next=3;break}case 7:case"end":return g.stop()}},e)})),kt.apply(this,arguments)}function Jr(e,t){return Pt.apply(this,arguments)}function Pt(){return Pt=V(le().mark(function e(t,n){var p,b,d;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=0,b=Object.values(n);case 1:if(!(p<b.length)){g.next=8;break}return d=b[p],g.next=5,Vt(t,d);case 5:p++,g.next=1;break;case 8:case"end":return g.stop()}},e)})),Pt.apply(this,arguments)}function Wt(e,t,n){n=n||_;var p=e.getProgramParameter(t,tr);if(!p){var b=e.getProgramInfoLog(t);n("Error in program linking: ".concat(b));var d=e.getAttachedShaders(t),R=d.map(function(g){return St(e,e.getShaderParameter(g,e.SHADER_TYPE),g,n)});return"".concat(b,`
`).concat(R.filter(function(g){return g}).join(`
`))}}function Xt(e,t,n,p,b){var d=Xr(n,p,b),R=[],g=ar(t),D;try{for(g.s();!(D=g.n()).done;){var C=D.value,L=Ae(C);if(!L)return _t(d,"unknown script element: ".concat(C));R.push(L.text)}}catch(ae){g.e(ae)}finally{g.f()}return ft(e,R,d)}function Ht(e,t,n,p,b){return ft(e,t,n,p,b)}function Yt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var Kn=/(\.|\[|]|\w+)/g,qn=function(t){return t>="0"&&t<="9"};function ct(e,t,n,p){for(var b=e.split(Kn).filter(function(we){return we!==""}),d=0,R="";;){var g=b[d++];R+=g;var D=qn(g[0]),C=D?parseInt(g):g;D&&(R+=b[d++]);var L=d===b.length;if(L){n[C]=t;break}else{var ae=b[d++],se=ae==="[",ye=n[C]||(se?[]:{});n[C]=ye,n=ye,p[R]=p[R]||function(we){return function(De){An(we,De)}}(ye),R+=ae}}}function $r(e,t){var n=0;function p(se,ye,we){var De=ye.name.endsWith("[0]"),Ce=ye.type,Ge=Se[Ce];if(!Ge)throw new Error("unknown type: 0x".concat(Ce.toString(16)));var Ye;if(Ge.bindPoint){var nr=n;n+=ye.size,De?Ye=Ge.arraySetter(e,Ce,nr,we,ye.size):Ye=Ge.setter(e,Ce,nr,we,ye.size)}else Ge.arraySetter&&De?Ye=Ge.arraySetter(e,we):Ye=Ge.setter(e,we);return Ye.location=we,Ye}for(var b={},d={},R=e.getProgramParameter(t,r),g=0;g<R;++g){var D=e.getActiveUniform(t,g);if(!Yt(D)){var C=D.name;C.endsWith("[0]")&&(C=C.substr(0,C.length-3));var L=e.getUniformLocation(t,D.name);if(L){var ae=p(t,D,L);b[C]=ae,ct(C,ae,d,b)}}}return b}function gt(e,t){for(var n={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var d=e.getTransformFeedbackVarying(t,b);n[d.name]={index:b,type:d.type,size:d.size}}return n}function wt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(var p in n){var b=t[p];if(b){var d=n[p];d.offset?e.bindBufferRange(ir,b.index,d.buffer,d.offset,d.size):e.bindBufferBase(ir,b.index,d.buffer)}}}function zt(e,t,n){var p=e.createTransformFeedback();return e.bindTransformFeedback(Tr,p),e.useProgram(t.program),wt(e,t,n),e.bindTransformFeedback(Tr,null),p}function zr(e,t){for(var n=e.getProgramParameter(t,r),p=[],b=[],d=0;d<n;++d){b.push(d),p.push({});var R=e.getActiveUniform(t,d);p[d].name=R.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(se){var ye=se[0],we=se[1];e.getActiveUniforms(t,b,e[ye]).forEach(function(De,Ce){p[Ce][we]=De})});for(var g={},D=e.getProgramParameter(t,E),C=0;C<D;++C){var L=e.getActiveUniformBlockName(t,C),ae={index:e.getUniformBlockIndex(t,L),usedByVertexShader:e.getActiveUniformBlockParameter(t,C,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,C,o),size:e.getActiveUniformBlockParameter(t,C,a),uniformIndices:e.getActiveUniformBlockParameter(t,C,m)};ae.used=ae.usedByVertexShader||ae.usedByFragmentShader,g[L]=ae}return{blockSpecs:g,uniformData:p}}var Tn=/\[\d+\]\.$/,Qn=function(t,n){return((t+(n-1))/n|0)*n};function Zn(e,t,n,p){if(t||n){p=p||1;var b=e.length,d=b/4;return function(R){for(var g=0,D=0,C=0;C<d;++C){for(var L=0;L<p;++L)e[g++]=R[D++];g+=4-p}}}else return function(R){R.length?e.set(R):e[0]=R}}function Kt(e,t,n,p){var b=n.blockSpecs,d=n.uniformData,R=b[p];if(!R)return he("no uniform block object named:",p),{name:p,uniforms:{}};var g=new ArrayBuffer(R.size),D=e.createBuffer(),C=R.index;e.bindBuffer(Xe,D),e.uniformBlockBinding(t,R.index,C);var L=p+".";Tn.test(L)&&(L=L.replace(Tn,"."));var ae={},se={},ye={};return R.uniformIndices.forEach(function(we){var De=d[we],Ce=De.name;Ce.startsWith(L)&&(Ce=Ce.substr(L.length));var Ge=Ce.endsWith("[0]");Ge&&(Ce=Ce.substr(0,Ce.length-3));var Ye=Se[De.type],nr=Ye.Type,mr=Ge?Qn(Ye.size,16)*De.size:Ye.size*De.size,Pr=new nr(g,De.offset,mr/nr.BYTES_PER_ELEMENT);ae[Ce]=Pr;var Dr=Zn(Pr,Ge,Ye.rows,Ye.cols);se[Ce]=Dr,ct(Ce,Dr,ye,se)}),{name:p,array:g,asFloat:new Float32Array(g),buffer:D,uniforms:ae,setters:se}}function qt(e,t,n){return Kt(e,t.program,t.uniformBlockSpec,n)}function xt(e,t,n){var p=t.uniformBlockSpec||t,b=p.blockSpecs[n.name];if(b){var d=b.index;return e.bindBufferRange(Xe,d,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function dn(e,t,n){xt(e,t,n)&&e.bufferData(Xe,n.array,Ve)}function Jn(e,t){var n=e.setters;for(var p in t){var b=n[p];if(b){var d=t[p];b(d)}}}function An(e,t){for(var n in t){var p=e[n];typeof p=="function"?p(t[n]):An(e[n],t[n])}}function Rt(e){for(var t=e.uniformSetters||e,n=arguments.length<=1?0:arguments.length-1,p=0;p<n;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var d=b.length,R=0;R<d;++R)Rt(t,b[R]);else for(var g in b){var D=t[g];D&&D(b[g])}}}i.setUniformsAndBindTextures=Rt;function Qt(e,t){for(var n={},p=e.getProgramParameter(t,u),b=0;b<p;++b){var d=e.getActiveAttrib(t,b);if(!Yt(d)){var R=e.getAttribLocation(t,d.name),g=$e[d.type],D=g.setter(e,R,g);D.location=R,n[d.name]=D}}return n}function Zt(e,t){for(var n in t){var p=e[n];p&&p(t[n])}}function $n(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Zt(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Qe,n.indices))}function Ft(e,t){var n=$r(e,t),p=Qt(e,t),b={program:t,uniformSetters:n,attribSetters:p};return G.isWebGL2(e)&&(b.uniformBlockSpec=zr(e,t),b.transformFeedbackInfo=gt(e,t)),b}var ea=/\s|{|}|;/;function c(e,t,n,p,b){var d=Xr(n,p,b),R=[];if(t=t.map(function(C){if(!ea.test(C)){var L=Ae(C);if(L)C=L.text;else{var ae="no element with id: ".concat(C);d.errorCallback(ae),R.push(ae)}}return C}),R.length)return _t(d,"");var g=d.callback;g&&(d.callback=function(C,L){g(C,C?void 0:Ft(e,L))});var D=Ht(e,t,d);return D?Ft(e,D):null}function h(e,t,n,p,b){for(var d=0,R=Object.entries(t);d<R.length;d++){var g=ue(R[d],2),D=g[0],C=g[1],L=Ee({},b),ae=n[D];Array.isArray(ae)||Object.assign(L,ae);var se=Wt(e,C,L.errorCallback);if(se){for(var ye=0,we=Object.values(t);ye<we.length;ye++){var De=we[ye],Ce=e.getAttachedShaders(De);e.deleteProgram(De);var Ge=ar(Ce),Ye;try{for(Ge.s();!(Ye=Ge.n()).done;){var nr=Ye.value;p.has(nr)||e.deleteShader(nr)}}catch(mr){Ge.e(mr)}finally{Ge.f()}}return se}}}function y(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(R){var g=ue(R,2),D=g[0],C=g[1],L=Ee({},n),ae=Array.isArray(C)?C:C.shaders;return Array.isArray(C)||Object.assign(L,C),ae.forEach(p.add,p),[D,En(e,ae,L)]}));if(n.callback){Jr(e,b).then(function(){var R=h(e,b,t,p,n);n.callback(R,R?void 0:b)});return}var d=h(e,b,t,p,n);return d?void 0:b}function A(e,t,n){n=Xr(n);function p(R,g){return Object.fromEntries(Object.entries(g).map(function(D){var C=ue(D,2),L=C[0],ae=C[1];return[L,Ft(R,ae)]}))}var b=n.callback;b&&(n.callback=function(R,g){b(R,R?void 0:p(e,g))});var d=y(e,t,n);if(!(b||!d))return p(e,d)}i.createProgramsAsync=Yr(y),i.createProgramInfosAsync=Yr(A)},"./src/textures.js":(Te,i,X)=>{function ee(c){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},ee(c)}i.__esModule=!0,i.canFilter=bn,i.canGenerateMipmap=pn,i.createSampler=Yt,i.createSamplers=Kn,i.createTexture=Zt,i.createTextures=ea,i.getBytesPerElementForInternalFormat=Xr,i.getFormatAndTypeForInternalFormat=Hr,i.getNumComponentsForFormat=En,i.loadTextureFromUrl=dn,i.resizeTexture=$n,i.setDefaultTextureColor=Vt,i.setEmptyTexture=Qt,i.setSamplerParameters=Ht,i.setTextureDefaults_=kt,i.setTextureFilteringForSize=ct,i.setTextureFromArray=Rt,i.setTextureFromElement=zt,i.setTextureParameters=Xt;var G=le(X("./src/utils.js")),te=le(X("./src/typedarrays.js")),Z=le(X("./src/helper.js"));function N(c){if(typeof WeakMap!="function")return null;var h=new WeakMap,y=new WeakMap;return(N=function(e){return e?y:h})(c)}function le(c,h){if(!h&&c&&c.__esModule)return c;if(c===null||ee(c)!="object"&&typeof c!="function")return{default:c};var y=N(h);if(y&&y.has(c))return y.get(c);var A={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var n=e?Object.getOwnPropertyDescriptor(c,t):null;n&&(n.get||n.set)?Object.defineProperty(A,t,n):A[t]=c[t]}return A.default=c,y&&y.set(c,A),A}var re={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ee=te.isArrayBuffer,F=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),H=6406,K=6407,x=6408,V=6409,ue=6410,be=6402,Ue=34041,ge=33071,ar=9728,or=9729,Je=3553,ve=34067,w=32879,I=35866,O=34069,_=34070,he=34071,Ae=34072,xe=34073,Ve=34074,Ne=10241,Qe=10240,Xe=10242,ir=10243,Tr=32882,ur=33082,tr=33083,lr=33084,dr=33085,oe=34892,r=34893,u=3317,f=3314,E=32878,l=3316,o=3315,a=32877,m=37443,s=37441,T=37440,P=33321,B=36756,M=33325,k=33326,Y=33330,q=33329,ne=33338,J=33337,fe=33340,ce=33339,Q=33323,me=36757,Me=33327,He=33328,Le=33336,je=33335,_e=33332,Re=33331,qe=33334,ke=33333,Ke=32849,We=35905,Ze=36194,Fe=36758,Oe=35898,hr=35901,fr=34843,Ar=34837,Sr=36221,Mr=36239,Nr=36215,Ur=36233,Qr=36209,mt=36227,ht=32856,yt=35907,vr=36759,Vn=32855,pt=32854,bt=32857,Lt=34842,Et=34836,Se=36220,on=36238,kn=36975,Wn=36214,Xn=36232,Hn=36226,Yn=36208,un=33189,fn=33190,cn=36012,ln=36013,vn=35056,Lr=5120,rr=5121,Tt=5122,Zr=5123,dt=5124,Vr=5125,yr=5126,sn=32819,mn=32820,hn=33635,Rr=5131,ut=36193,Gt=33640,zn=35899,br=35902,Er=36269,At=34042,wr=33319,Cr=33320,kr=6403,$e=36244,Wr=36248,Gr=36249,jt={};{var pr=jt;pr[H]={numColorComponents:1},pr[V]={numColorComponents:1},pr[ue]={numColorComponents:2},pr[K]={numColorComponents:3},pr[x]={numColorComponents:4},pr[kr]={numColorComponents:1},pr[$e]={numColorComponents:1},pr[wr]={numColorComponents:2},pr[Cr]={numColorComponents:2},pr[K]={numColorComponents:3},pr[Wr]={numColorComponents:3},pr[x]={numColorComponents:4},pr[Gr]={numColorComponents:4},pr[be]={numColorComponents:1},pr[Ue]={numColorComponents:2}}var _t;function St(c){if(!_t){var h={};h[H]={textureFormat:H,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[rr,Rr,ut,yr]},h[V]={textureFormat:V,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[rr,Rr,ut,yr]},h[ue]={textureFormat:ue,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[rr,Rr,ut,yr]},h[K]={textureFormat:K,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[rr,Rr,ut,yr,hn]},h[x]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[rr,Rr,ut,yr,sn,mn]},h[be]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Vr,Zr]},h[P]={textureFormat:kr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[rr]},h[B]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Lr]},h[M]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[yr,Rr]},h[k]={textureFormat:kr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[Y]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[rr]},h[q]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Lr]},h[_e]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Zr]},h[Re]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Tt]},h[qe]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},h[ke]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dt]},h[Q]={textureFormat:wr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[rr]},h[me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Lr]},h[Me]={textureFormat:wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[yr,Rr]},h[He]={textureFormat:wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[yr]},h[Le]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rr]},h[je]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Lr]},h[ne]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},h[J]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tt]},h[fe]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vr]},h[ce]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[dt]},h[Ke]={textureFormat:K,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[rr]},h[We]={textureFormat:K,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[rr]},h[Ze]={textureFormat:K,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[rr,hn]},h[Fe]={textureFormat:K,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Lr]},h[Oe]={textureFormat:K,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,zn]},h[hr]={textureFormat:K,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yr,Rr,br]},h[fr]={textureFormat:K,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[yr,Rr]},h[Ar]={textureFormat:K,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yr]},h[Sr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[rr]},h[Mr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Lr]},h[Nr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Zr]},h[Ur]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Tt]},h[Qr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vr]},h[mt]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[dt]},h[ht]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rr]},h[yt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rr]},h[vr]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Lr]},h[Vn]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[rr,mn,Gt]},h[pt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[rr,sn]},h[bt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Gt]},h[Lt]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[yr,Rr]},h[Et]={textureFormat:x,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[yr]},h[Se]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rr]},h[on]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Lr]},h[kn]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Gt]},h[Wn]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zr]},h[Xn]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Tt]},h[Hn]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[dt]},h[Yn]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vr]},h[un]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zr,Vr]},h[fn]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},h[cn]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},h[vn]={textureFormat:Ue,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},h[ln]={textureFormat:Ue,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(h).forEach(function(y){var A=h[y];A.bytesPerElementMap={},A.bytesPerElement.forEach(function(e,t){var n=A.type[t];A.bytesPerElementMap[n]=e})}),_t=h}return _t[c]}function Xr(c,h){var y=St(c);if(!y)throw"unknown internal format";var A=y.bytesPerElementMap[h];if(A===void 0)throw"unknown internal format";return A}function Hr(c){var h=St(c);if(!h)throw"unknown internal format";return{format:h.textureFormat,type:h.type[0]}}function yn(c){return(c&c-1)===0}function pn(c,h,y,A){if(!G.isWebGL2(c))return yn(h)&&yn(y);var e=St(A);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function bn(c){var h=St(c);if(!h)throw"unknown internal format";return h.textureFilterable}function En(c){var h=jt[c];if(!h)throw"unknown format: "+c;return h.numColorComponents}function ft(c,h,y){return Ee(h)?te.getGLTypeForTypedArray(h):y||rr}function Yr(c,h,y,A,e){if(e%1!==0)throw"can't guess dimensions";if(!y&&!A){var t=Math.sqrt(e/(h===ve?6:1));t%1===0?(y=t,A=t):(y=e,A=1)}else if(A){if(!y&&(y=e/A,y%1))throw"can't guess dimensions"}else if(A=e/y,A%1)throw"can't guess dimensions";return{width:y,height:A}}function Vt(c){re.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function kt(c){Z.copyExistingProperties(c,re),c.textureColor&&Vt(c.textureColor)}function Jr(c,h){h.colorspaceConversion!==void 0&&c.pixelStorei(m,h.colorspaceConversion),h.premultiplyAlpha!==void 0&&c.pixelStorei(s,h.premultiplyAlpha),h.flipY!==void 0&&c.pixelStorei(T,h.flipY)}function Pt(c){c.pixelStorei(u,4),G.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(a,0))}function Wt(c,h,y,A){A.minMag&&(y.call(c,h,Ne,A.minMag),y.call(c,h,Qe,A.minMag)),A.min&&y.call(c,h,Ne,A.min),A.mag&&y.call(c,h,Qe,A.mag),A.wrap&&(y.call(c,h,Xe,A.wrap),y.call(c,h,ir,A.wrap),(h===w||Z.isSampler(c,h))&&y.call(c,h,Tr,A.wrap)),A.wrapR&&y.call(c,h,Tr,A.wrapR),A.wrapS&&y.call(c,h,Xe,A.wrapS),A.wrapT&&y.call(c,h,ir,A.wrapT),A.minLod!==void 0&&y.call(c,h,ur,A.minLod),A.maxLod!==void 0&&y.call(c,h,tr,A.maxLod),A.baseLevel!==void 0&&y.call(c,h,lr,A.baseLevel),A.maxLevel!==void 0&&y.call(c,h,dr,A.maxLevel),A.compareFunc!==void 0&&y.call(c,h,r,A.compareFunc),A.compareMode!==void 0&&y.call(c,h,oe,A.compareMode)}function Xt(c,h,y){var A=y.target||Je;c.bindTexture(A,h),Wt(c,A,c.texParameteri,y)}function Ht(c,h,y){Wt(c,h,c.samplerParameteri,y)}function Yt(c,h){var y=c.createSampler();return Ht(c,y,h),y}function Kn(c,h){var y={};return Object.keys(h).forEach(function(A){y[A]=Yt(c,h[A])}),y}function qn(c){return c=c||re.textureColor,Ee(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function ct(c,h,y,A,e,t){y=y||re.textureOptions,t=t||x;var n=y.target||Je;if(A=A||y.width,e=e||y.height,c.bindTexture(n,h),pn(c,A,e,t))c.generateMipmap(n);else{var p=bn(t)?or:ar;c.texParameteri(n,Ne,p),c.texParameteri(n,Qe,p),c.texParameteri(n,Xe,ge),c.texParameteri(n,ir,ge)}}function $r(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function gt(c,h){return h=h||{},h.cubeFaceOrder||[O,_,he,Ae,xe,Ve]}function wt(c,h){var y=gt(c,h),A=y.map(function(e,t){return{face:e,ndx:t}});return A.sort(function(e,t){return e.face-t.face}),A}function zt(c,h,y,A){A=A||re.textureOptions;var e=A.target||Je,t=A.level||0,n=y.width,p=y.height,b=A.internalFormat||A.format||x,d=Hr(b),R=A.format||d.format,g=A.type||d.type;if(Jr(c,A),c.bindTexture(e,h),e===ve){var D=y.width,C=y.height,L,ae;if(D/6===C)L=C,ae=[0,0,1,0,2,0,3,0,4,0,5,0];else if(C/6===D)L=D,ae=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===C/2)L=D/3,ae=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===C/3)L=D/2,ae=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(y.src?y.src:y.nodeName);var se=F();se?(se.canvas.width=L,se.canvas.height=L,n=L,p=L,wt(c,A).forEach(function(Pr){var Dr=ae[Pr.ndx*2+0]*L,jr=ae[Pr.ndx*2+1]*L;se.drawImage(y,Dr,jr,L,L,0,0,L,L),c.texImage2D(Pr.face,t,b,R,g,se.canvas)}),se.canvas.width=1,se.canvas.height=1):typeof createImageBitmap<"u"&&(n=L,p=L,wt(c,A).forEach(function(Pr){var Dr=ae[Pr.ndx*2+0]*L,jr=ae[Pr.ndx*2+1]*L;c.texImage2D(Pr.face,t,b,L,L,0,R,g,null),createImageBitmap(y,Dr,jr,L,L,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(_n){Jr(c,A),c.bindTexture(e,h),c.texImage2D(Pr.face,t,b,R,g,_n),$r(A)&&ct(c,h,A,n,p,b)})}))}else if(e===w||e===I){var ye=Math.min(y.width,y.height),we=Math.max(y.width,y.height),De=we/ye;if(De%1!==0)throw"can not compute 3D dimensions of element";var Ce=y.width===we?1:0,Ge=y.height===we?1:0;c.pixelStorei(u,1),c.pixelStorei(f,y.width),c.pixelStorei(E,0),c.pixelStorei(a,0),c.texImage3D(e,t,b,ye,ye,ye,0,R,g,null);for(var Ye=0;Ye<De;++Ye){var nr=Ye*ye*Ce,mr=Ye*ye*Ge;c.pixelStorei(l,nr),c.pixelStorei(o,mr),c.texSubImage3D(e,t,0,0,Ye,ye,ye,1,R,g,y)}Pt(c)}else c.texImage2D(e,t,b,R,g,y);$r(A)&&ct(c,h,A,n,p,b),Xt(c,h,A)}function zr(){}function Tn(c){if(typeof document<"u"){var h=document.createElement("a");return h.href=c,h.hostname===location.hostname&&h.port===location.port&&h.protocol===location.protocol}else{var y=new URL(location.href).origin,A=new URL(c,location.href).origin;return A===y}}function Qn(c,h){return h===void 0&&!Tn(c)?"anonymous":h}function Zn(c,h,y){y=y||zr;var A;if(h=h!==void 0?h:re.crossOrigin,h=Qn(c,h),typeof Image<"u"){A=new Image,h!==void 0&&(A.crossOrigin=h);var e=function(){A.removeEventListener("error",t),A.removeEventListener("load",n),A=null},t=function(){var D="couldn't load image: "+c;Z.error(D),y(D,A),e()},n=function(){y(null,A),e()};return A.addEventListener("error",t),A.addEventListener("load",n),A.src=c,A}else if(typeof ImageBitmap<"u"){var p,b,d=function(){y(p,b)},R={};h&&(R.mode="cors"),fetch(c,R).then(function(g){if(!g.ok)throw g;return g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){b=g,setTimeout(d)}).catch(function(g){p=g,setTimeout(d)}),A=null}return A}function Kt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function qt(c,h,y){return Kt(c)?(setTimeout(function(){y(null,c)}),c):Zn(c,h,y)}function xt(c,h,y){y=y||re.textureOptions;var A=y.target||Je;if(c.bindTexture(A,h),y.color!==!1){var e=qn(y.color);if(A===ve)for(var t=0;t<6;++t)c.texImage2D(O+t,0,x,1,1,0,x,rr,e);else A===w||A===I?c.texImage3D(A,0,x,1,1,1,0,x,rr,e):c.texImage2D(A,0,x,1,1,0,x,rr,e)}}function dn(c,h,y,A){A=A||zr,y=y||re.textureOptions,xt(c,h,y),y=Object.assign({},y);var e=qt(y.src,y.crossOrigin,function(t,n){t?A(t,h,n):(zt(c,h,n,y),A(null,h,n))});return e}function Jn(c,h,y,A){A=A||zr;var e=y.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=y.level||0,n=y.internalFormat||y.format||x,p=Hr(n),b=y.format||p.format,d=y.type||rr,R=y.target||Je;if(R!==ve)throw"target must be TEXTURE_CUBE_MAP";xt(c,h,y),y=Object.assign({},y);var g=6,D=[],C=gt(c,y),L;function ae(se){return function(ye,we){--g,ye?D.push(ye):we.width!==we.height?D.push("cubemap face img is not a square: "+we.src):(Jr(c,y),c.bindTexture(R,h),g===5?gt().forEach(function(De){c.texImage2D(De,t,n,b,d,we)}):c.texImage2D(se,t,n,b,d,we),$r(y)&&c.generateMipmap(R)),g===0&&A(D.length?D:void 0,h,L)}}L=e.map(function(se,ye){return qt(se,y.crossOrigin,ae(C[ye]))})}function An(c,h,y,A){A=A||zr;var e=y.src,t=y.internalFormat||y.format||x,n=Hr(t),p=y.format||n.format,b=y.type||rr,d=y.target||I;if(d!==w&&d!==I)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";xt(c,h,y),y=Object.assign({},y);var R=e.length,g=[],D,C=y.level||0,L=y.width,ae=y.height,se=e.length,ye=!0;function we(De){return function(Ce,Ge){if(--R,Ce)g.push(Ce);else{if(Jr(c,y),c.bindTexture(d,h),ye){ye=!1,L=y.width||Ge.width,ae=y.height||Ge.height,c.texImage3D(d,C,t,L,ae,se,0,p,b,null);for(var Ye=0;Ye<se;++Ye)c.texSubImage3D(d,C,0,0,Ye,L,ae,1,p,b,Ge)}else{var nr=Ge,mr;(Ge.width!==L||Ge.height!==ae)&&(mr=F(),nr=mr.canvas,mr.canvas.width=L,mr.canvas.height=ae,mr.drawImage(Ge,0,0,L,ae)),c.texSubImage3D(d,C,0,0,De,L,ae,1,p,b,nr),mr&&nr===mr.canvas&&(mr.canvas.width=0,mr.canvas.height=0)}$r(y)&&c.generateMipmap(d)}R===0&&A(g.length?g:void 0,h,D)}}D=e.map(function(De,Ce){return qt(De,y.crossOrigin,we(Ce))})}function Rt(c,h,y,A){A=A||re.textureOptions;var e=A.target||Je;c.bindTexture(e,h);var t=A.width,n=A.height,p=A.depth,b=A.level||0,d=A.internalFormat||A.format||x,R=Hr(d),g=A.format||R.format,D=A.type||ft(c,y,R.type);if(Ee(y))y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));else{var C=te.getTypedArrayTypeForGLType(D);y=new C(y)}var L=Xr(d,D),ae=y.byteLength/L;if(ae%1)throw"length wrong size for format: "+G.glEnumToString(c,g);var se;if(e===w||e===I)if(!t&&!n&&!p){var ye=Math.cbrt(ae);if(ye%1!==0)throw"can't guess cube size of array of numElements: "+ae;t=ye,n=ye,p=ye}else t&&(!n||!p)?(se=Yr(c,e,n,p,ae/t),n=se.width,p=se.height):n&&(!t||!p)?(se=Yr(c,e,t,p,ae/n),t=se.width,p=se.height):(se=Yr(c,e,t,n,ae/p),t=se.width,n=se.height);else se=Yr(c,e,t,n,ae),t=se.width,n=se.height;if(Pt(c),c.pixelStorei(u,A.unpackAlignment||1),Jr(c,A),e===ve){var we=L/y.BYTES_PER_ELEMENT,De=ae/6*we;wt(c,A).forEach(function(Ce){var Ge=De*Ce.ndx,Ye=y.subarray(Ge,Ge+De);c.texImage2D(Ce.face,b,d,t,n,0,g,D,Ye)})}else e===w||e===I?c.texImage3D(e,b,d,t,n,p,0,g,D,y):c.texImage2D(e,b,d,t,n,0,g,D,y);return{width:t,height:n,depth:p,type:D}}function Qt(c,h,y){var A=y.target||Je;c.bindTexture(A,h);var e=y.level||0,t=y.internalFormat||y.format||x,n=Hr(t),p=y.format||n.format,b=y.type||n.type;if(Jr(c,y),A===ve)for(var d=0;d<6;++d)c.texImage2D(O+d,e,t,y.width,y.height,0,p,b,null);else A===w||A===I?c.texImage3D(A,e,t,y.width,y.height,y.depth,0,p,b,null):c.texImage2D(A,e,t,y.width,y.height,0,p,b,null)}function Zt(c,h,y){y=y||zr,h=h||re.textureOptions;var A=c.createTexture(),e=h.target||Je,t=h.width||1,n=h.height||1,p=h.internalFormat||x;c.bindTexture(e,A),e===ve&&(c.texParameteri(e,Xe,ge),c.texParameteri(e,ir,ge));var b=h.src;if(b)if(typeof b=="function"&&(b=b(c,h)),typeof b=="string")dn(c,A,h,y);else if(Ee(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||Ee(b[0]))){var d=Rt(c,A,b,h);t=d.width,n=d.height}else Array.isArray(b)&&(typeof b[0]=="string"||Kt(b[0]))?e===ve?Jn(c,A,h,y):An(c,A,h,y):(zt(c,A,b,h),t=b.width,n=b.height);else Qt(c,A,h);return $r(h)&&ct(c,A,h,t,n,p),Xt(c,A,h),A}function $n(c,h,y,A,e,t){A=A||y.width,e=e||y.height,t=t||y.depth;var n=y.target||Je;c.bindTexture(n,h);var p=y.level||0,b=y.internalFormat||y.format||x,d=Hr(b),R=y.format||d.format,g,D=y.src;if(D&&(Ee(D)||Array.isArray(D)&&typeof D[0]=="number")?g=y.type||ft(c,D,d.type):g=y.type||d.type,n===ve)for(var C=0;C<6;++C)c.texImage2D(O+C,p,b,A,e,0,R,g,null);else n===w||n===I?c.texImage3D(n,p,b,A,e,t,0,R,g,null):c.texImage2D(n,p,b,A,e,0,R,g,null)}function Ft(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function ea(c,h,y){y=y||zr;var A=0,e=[],t={},n={};function p(){A===0&&setTimeout(function(){y(e.length?e:void 0,t,n)},0)}return Object.keys(h).forEach(function(b){var d=h[b],R;Ft(d.src)&&(R=function(D,C,L){n[b]=L,--A,D&&e.push(D),p()},++A),t[b]=Zt(c,d,R)}),p(),t}},"./src/twgl-full.js":(Te,i,X)=>{function ee(F){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},ee(F)}i.__esModule=!0;var G={m4:!0,v3:!0,primitives:!0};i.v3=i.primitives=i.m4=void 0;var te=Ee(X("./src/m4.js"));i.m4=te;var Z=Ee(X("./src/v3.js"));i.v3=Z;var N=Ee(X("./src/primitives.js"));i.primitives=N;var le=X("./src/twgl.js");Object.keys(le).forEach(function(F){F==="default"||F==="__esModule"||Object.prototype.hasOwnProperty.call(G,F)||F in i&&i[F]===le[F]||(i[F]=le[F])});function re(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,K=new WeakMap;return(re=function(V){return V?K:H})(F)}function Ee(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||ee(F)!="object"&&typeof F!="function")return{default:F};var K=re(H);if(K&&K.has(F))return K.get(F);var x={__proto__:null},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=V?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,K&&K.set(F,x),x}},"./src/twgl.js":(Te,i,X)=>{function ee(_){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},ee(_)}i.__esModule=!0;var G={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};i.addExtensionsToContext=or,i.framebuffers=i.draw=i.attributes=void 0,i.getContext=I,i.getWebGLContext=ve,i.programs=void 0,i.resizeCanvasToDisplaySize=O,i.setDefaults=be,i.vertexArrays=i.utils=i.typedarrays=i.textures=void 0;var te=V(X("./src/attributes.js"));i.attributes=te,Object.keys(te).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===te[_]||(i[_]=te[_])});var Z=V(X("./src/textures.js"));i.textures=Z,Object.keys(Z).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===Z[_]||(i[_]=Z[_])});var N=V(X("./src/helper.js")),le=V(X("./src/utils.js"));i.utils=le,Object.keys(le).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===le[_]||(i[_]=le[_])});var re=V(X("./src/draw.js"));i.draw=re,Object.keys(re).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===re[_]||(i[_]=re[_])});var Ee=V(X("./src/framebuffers.js"));i.framebuffers=Ee,Object.keys(Ee).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===Ee[_]||(i[_]=Ee[_])});var F=V(X("./src/programs.js"));i.programs=F,Object.keys(F).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===F[_]||(i[_]=F[_])});var H=V(X("./src/typedarrays.js"));i.typedarrays=H,Object.keys(H).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===H[_]||(i[_]=H[_])});var K=V(X("./src/vertex-arrays.js"));i.vertexArrays=K,Object.keys(K).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(G,_)||_ in i&&i[_]===K[_]||(i[_]=K[_])});function x(_){if(typeof WeakMap!="function")return null;var he=new WeakMap,Ae=new WeakMap;return(x=function(Ve){return Ve?Ae:he})(_)}function V(_,he){if(!he&&_&&_.__esModule)return _;if(_===null||ee(_)!="object"&&typeof _!="function")return{default:_};var Ae=x(he);if(Ae&&Ae.has(_))return Ae.get(_);var xe={__proto__:null},Ve=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ne in _)if(Ne!=="default"&&Object.prototype.hasOwnProperty.call(_,Ne)){var Qe=Ve?Object.getOwnPropertyDescriptor(_,Ne):null;Qe&&(Qe.get||Qe.set)?Object.defineProperty(xe,Ne,Qe):xe[Ne]=_[Ne]}return xe.default=_,Ae&&Ae.set(_,xe),xe}var ue={addExtensionsToContext:!0};function be(_){N.copyExistingProperties(_,ue),te.setAttributeDefaults_(_),Z.setTextureDefaults_(_)}var Ue=/^(.*?)_/;function ge(_,he){le.glEnumToString(_,0);var Ae=_.getExtension(he);if(Ae){var xe={},Ve=Ue.exec(he)[1],Ne="_"+Ve;for(var Qe in Ae){var Xe=Ae[Qe],ir=typeof Xe=="function",Tr=ir?Ve:Ne,ur=Qe;Qe.endsWith(Tr)&&(ur=Qe.substring(0,Qe.length-Tr.length)),_[ur]!==void 0?!ir&&_[ur]!==Xe&&N.warn(ur,_[ur],Xe,Qe):ir?_[ur]=function(tr){return function(){return tr.apply(Ae,arguments)}}(Xe):(_[ur]=Xe,xe[ur]=Xe)}xe.constructor={name:Ae.constructor.name},le.glEnumToString(xe,0)}return Ae}var ar=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function or(_){for(var he=0;he<ar.length;++he)ge(_,ar[he])}function Je(_,he){for(var Ae=["webgl","experimental-webgl"],xe=null,Ve=0;Ve<Ae.length;++Ve)if(xe=_.getContext(Ae[Ve],he),xe){ue.addExtensionsToContext&&or(xe);break}return xe}function ve(_,he){var Ae=Je(_,he);return Ae}function w(_,he){for(var Ae=["webgl2","webgl","experimental-webgl"],xe=null,Ve=0;Ve<Ae.length;++Ve)if(xe=_.getContext(Ae[Ve],he),xe){ue.addExtensionsToContext&&or(xe);break}return xe}function I(_,he){var Ae=w(_,he);return Ae}function O(_,he){he=he||1,he=Math.max(0,he);var Ae=_.clientWidth*he|0,xe=_.clientHeight*he|0;return _.width!==Ae||_.height!==xe?(_.width=Ae,_.height=xe,!0):!1}},"./src/typedarrays.js":(Te,i)=>{i.__esModule=!0,i.getGLTypeForTypedArray=ar,i.getGLTypeForTypedArrayType=or,i.getTypedArrayTypeForGLType=Je,i.isArrayBuffer=void 0;var X=5120,ee=5121,G=5122,te=5123,Z=5124,N=5125,le=5126,re=32819,Ee=32820,F=33635,H=5131,K=33640,x=35899,V=35902,ue=36269,be=34042,Ue={};{var ge=Ue;ge[X]=Int8Array,ge[ee]=Uint8Array,ge[G]=Int16Array,ge[te]=Uint16Array,ge[Z]=Int32Array,ge[N]=Uint32Array,ge[le]=Float32Array,ge[re]=Uint16Array,ge[Ee]=Uint16Array,ge[F]=Uint16Array,ge[H]=Uint16Array,ge[K]=Uint32Array,ge[x]=Uint32Array,ge[V]=Uint32Array,ge[ue]=Uint32Array,ge[be]=Uint32Array}function ar(ve){if(ve instanceof Int8Array)return X;if(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray)return ee;if(ve instanceof Int16Array)return G;if(ve instanceof Uint16Array)return te;if(ve instanceof Int32Array)return Z;if(ve instanceof Uint32Array)return N;if(ve instanceof Float32Array)return le;throw new Error("unsupported typed array type")}function or(ve){if(ve===Int8Array)return X;if(ve===Uint8Array||ve===Uint8ClampedArray)return ee;if(ve===Int16Array)return G;if(ve===Uint16Array)return te;if(ve===Int32Array)return Z;if(ve===Uint32Array)return N;if(ve===Float32Array)return le;throw new Error("unsupported typed array type")}function Je(ve){var w=Ue[ve];if(!w)throw new Error("unknown gl type");return w}i.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(w){return w&&w.buffer&&(w.buffer instanceof ArrayBuffer||w.buffer instanceof SharedArrayBuffer)}:function(w){return w&&w.buffer&&w.buffer instanceof ArrayBuffer}},"./src/utils.js":(Te,i)=>{i.__esModule=!0,i.glEnumToString=void 0,i.isWebGL1=ee,i.isWebGL2=X;function X(G){return!!G.texStorage2D}function ee(G){return!G.texStorage2D}i.glEnumToString=function(){var G={},te={};function Z(N){var le=N.constructor.name;if(!G[le]){for(var re in N)if(typeof N[re]=="number"){var Ee=te[N[re]];te[N[re]]=Ee?"".concat(Ee," | ").concat(re):re}G[le]=!0}}return function(le,re){return Z(le),te[re]||(typeof re=="number"?"0x".concat(re.toString(16)):re)}}()},"./src/v3.js":(Te,i)=>{i.__esModule=!0,i.add=te,i.copy=or,i.create=G,i.cross=K,i.distance=be,i.distanceSq=Ue,i.divScalar=H,i.divide=ve,i.dot=x,i.length=V,i.lengthSq=ue,i.lerp=N,i.lerpV=le,i.max=re,i.min=Ee,i.mulScalar=F,i.multiply=Je,i.negate=ar,i.normalize=ge,i.setDefaultType=ee,i.subtract=Z;var X=Float32Array;function ee(w){var I=X;return X=w,I}function G(w,I,O){var _=new X(3);return w&&(_[0]=w),I&&(_[1]=I),O&&(_[2]=O),_}function te(w,I,O){return O=O||new X(3),O[0]=w[0]+I[0],O[1]=w[1]+I[1],O[2]=w[2]+I[2],O}function Z(w,I,O){return O=O||new X(3),O[0]=w[0]-I[0],O[1]=w[1]-I[1],O[2]=w[2]-I[2],O}function N(w,I,O,_){return _=_||new X(3),_[0]=w[0]+O*(I[0]-w[0]),_[1]=w[1]+O*(I[1]-w[1]),_[2]=w[2]+O*(I[2]-w[2]),_}function le(w,I,O,_){return _=_||new X(3),_[0]=w[0]+O[0]*(I[0]-w[0]),_[1]=w[1]+O[1]*(I[1]-w[1]),_[2]=w[2]+O[2]*(I[2]-w[2]),_}function re(w,I,O){return O=O||new X(3),O[0]=Math.max(w[0],I[0]),O[1]=Math.max(w[1],I[1]),O[2]=Math.max(w[2],I[2]),O}function Ee(w,I,O){return O=O||new X(3),O[0]=Math.min(w[0],I[0]),O[1]=Math.min(w[1],I[1]),O[2]=Math.min(w[2],I[2]),O}function F(w,I,O){return O=O||new X(3),O[0]=w[0]*I,O[1]=w[1]*I,O[2]=w[2]*I,O}function H(w,I,O){return O=O||new X(3),O[0]=w[0]/I,O[1]=w[1]/I,O[2]=w[2]/I,O}function K(w,I,O){O=O||new X(3);var _=w[2]*I[0]-w[0]*I[2],he=w[0]*I[1]-w[1]*I[0];return O[0]=w[1]*I[2]-w[2]*I[1],O[1]=_,O[2]=he,O}function x(w,I){return w[0]*I[0]+w[1]*I[1]+w[2]*I[2]}function V(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])}function ue(w){return w[0]*w[0]+w[1]*w[1]+w[2]*w[2]}function be(w,I){var O=w[0]-I[0],_=w[1]-I[1],he=w[2]-I[2];return Math.sqrt(O*O+_*_+he*he)}function Ue(w,I){var O=w[0]-I[0],_=w[1]-I[1],he=w[2]-I[2];return O*O+_*_+he*he}function ge(w,I){I=I||new X(3);var O=w[0]*w[0]+w[1]*w[1]+w[2]*w[2],_=Math.sqrt(O);return _>1e-5?(I[0]=w[0]/_,I[1]=w[1]/_,I[2]=w[2]/_):(I[0]=0,I[1]=0,I[2]=0),I}function ar(w,I){return I=I||new X(3),I[0]=-w[0],I[1]=-w[1],I[2]=-w[2],I}function or(w,I){return I=I||new X(3),I[0]=w[0],I[1]=w[1],I[2]=w[2],I}function Je(w,I,O){return O=O||new X(3),O[0]=w[0]*I[0],O[1]=w[1]*I[1],O[2]=w[2]*I[2],O}function ve(w,I,O){return O=O||new X(3),O[0]=w[0]/I[0],O[1]=w[1]/I[1],O[2]=w[2]/I[2],O}},"./src/vertex-arrays.js":(Te,i,X)=>{function ee(F){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},ee(F)}i.__esModule=!0,i.createVAOAndSetAttributes=re,i.createVAOFromBufferInfo=Ee,i.createVertexArrayInfo=le;var G=Z(X("./src/programs.js"));function te(F){if(typeof WeakMap!="function")return null;var H=new WeakMap,K=new WeakMap;return(te=function(V){return V?K:H})(F)}function Z(F,H){if(!H&&F&&F.__esModule)return F;if(F===null||ee(F)!="object"&&typeof F!="function")return{default:F};var K=te(H);if(K&&K.has(F))return K.get(F);var x={__proto__:null},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in F)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(F,ue)){var be=V?Object.getOwnPropertyDescriptor(F,ue):null;be&&(be.get||be.set)?Object.defineProperty(x,ue,be):x[ue]=F[ue]}return x.default=F,K&&K.set(F,x),x}var N=34963;function le(F,H,K){var x=F.createVertexArray();return F.bindVertexArray(x),H.length||(H=[H]),H.forEach(function(V){G.setBuffersAndAttributes(F,V,K)}),F.bindVertexArray(null),{numElements:K.numElements,elementType:K.elementType,vertexArrayObject:x}}function re(F,H,K,x){var V=F.createVertexArray();return F.bindVertexArray(V),G.setAttributes(H,K),x&&F.bindBuffer(N,x),F.bindVertexArray(null),V}function Ee(F,H,K){return re(F,H.attribSetters||H,K.attribs,K.indices)}}},W={};function U(Te){var i=W[Te];if(i!==void 0)return i.exports;var X=W[Te]={exports:{}};return S[Te](X,X.exports,U),X.exports}var pe=U("./src/twgl-full.js");return pe})())})(_a);var rt=_a.exports,Fr,Br,at,Dt,ot,_r,it,qr,Ot,rn,tn,la,va,nn,Nt,On,Sa,Nn,Pa,Un,ga,an,ca,Ln,wa,Ut,gn,Gn,xa,jn,Ra;class Oa{constructor(){Be(this,On);Be(this,Nn);Be(this,Un);Be(this,an);Be(this,Ln);Be(this,Ut);Be(this,Gn);Be(this,jn);Or(this,"canvas",document.querySelector("#canvas"));Or(this,"gl");Be(this,Fr,new Map);Be(this,Br,new Map);Be(this,at,void 0);Be(this,Dt,void 0);Be(this,ot,void 0);Be(this,_r,new Uint8Array(600));Be(this,it,void 0);Be(this,qr,new Uint8Array(3*40));Be(this,Ot,void 0);Be(this,rn,document.createTextNode("0"));Be(this,tn,document.createTextNode("1"));Be(this,la,0);Be(this,va,0);Be(this,nn,new Map);Be(this,Nt,document.styleSheets[0].cssRules);document.querySelector("#linesCleared").appendChild($(this,rn)),document.querySelector("#speedLevel").appendChild($(this,tn)),$(this,Fr).set(1,[255,0,0]),$(this,Fr).set(2,[0,255,0]),$(this,Fr).set(3,[255,255,0]),$(this,Fr).set(4,[0,0,255]),$(this,Fr).set(5,[180,90,246]),$(this,Fr).set(6,[0,255,255]),$(this,Fr).set(7,[255,140,40]),$(this,Br).set("Z",1),$(this,Br).set("S",2),$(this,Br).set("O",3),$(this,Br).set("J",4),$(this,Br).set("T",5),$(this,Br).set("I",6),$(this,Br).set("L",7);let v=this.canvas.getContext("webgl");this.gl=v,v||document.body.appendChild(document.createTextNode("WebGL is not supported."));function S(G,te,Z,N){return[G,te+N,G+Z,te+N,G+Z,te,G,te]}function W(G,te,Z,N){let le=[G/2,G],re=[],Ee=(300-le[1])/2,F=(400-le[0])/2;re.push(...S(F,Ee,le[0],le[1])),re.push(...S(F-te-N,Ee,N,N)),console.log("l: "+(F-te-N)+`
t: `+Ee+`
w/h: `+N);for(let H=0;H<3;H++)re.push(...S(F+te+le[0],Ee+H*(N+Z),N,N));return re}const U={a_Position:{numComponents:2,data:W(250,3,0,30)},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16]}};sr(this,Dt,rt.createBufferInfoFromArrays(v,U));let pe=document.querySelector("#vertex-shader-2d").text,Te=document.querySelector("#fragment-shader-2d").text;sr(this,at,rt.createProgramInfo(v,[pe,Te]));let i={src:"textures/block.png",mag:v.LINEAR};sr(this,Ot,rt.createTexture(this.gl,i)),sr(this,ot,v.createTexture()),v.bindTexture(v.TEXTURE_2D,$(this,ot)),v.pixelStorei(v.UNPACK_ALIGNMENT,1),v.texImage2D(v.TEXTURE_2D,0,v.RGB,10,20,0,v.RGB,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),sr(this,it,v.createTexture()),v.bindTexture(v.TEXTURE_2D,$(this,it)),v.pixelStorei(v.UNPACK_ALIGNMENT,1),v.texImage2D(v.TEXTURE_2D,0,v.RGB,4,2*5,0,v.RGB,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.useProgram($(this,at).program),rt.setBuffersAndAttributes(v,$(this,at),$(this,Dt));let X={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:$(this,ot),u_QueueData:$(this,it),u_BlockTexture:$(this,Ot)};rt.setUniforms($(this,at),X);const ee=document.styleSheets[0].cssRules[3];console.log(ee),er(this,Ut,gn).call(this,"#scoreOverlay"),er(this,Ut,gn).call(this,"#controlsGuide"),er(this,Ut,gn).call(this,"#heldPieceOverlay")}updateData(v){er(this,On,Sa).call(this,v),er(this,Un,ga).call(this,v),er(this,Ln,wa).call(this,v)}renderGame(){rt.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),er(this,jn,Ra).call(this);let v={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:$(this,ot),u_QueueData:$(this,it),u_BlockTexture:$(this,Ot)};rt.setUniforms($(this,at),v),rt.drawBufferInfo(this.gl,$(this,Dt))}}Fr=new WeakMap,Br=new WeakMap,at=new WeakMap,Dt=new WeakMap,ot=new WeakMap,_r=new WeakMap,it=new WeakMap,qr=new WeakMap,Ot=new WeakMap,rn=new WeakMap,tn=new WeakMap,la=new WeakMap,va=new WeakMap,nn=new WeakMap,Nt=new WeakMap,On=new WeakSet,Sa=function(v){for(let S=0;S<20;S++){let W=v.gridData[S];for(let U=0;U<10;U++){let pe=er(this,Nn,Pa).call(this,W,U),Te=3*(10*S+U);if(pe!=0){let i=$(this,Fr).get(pe);$(this,_r)[Te]=i[0],$(this,_r)[Te+1]=i[1],$(this,_r)[Te+2]=i[2]}else $(this,_r)[Te]=0,$(this,_r)[Te+1]=0,$(this,_r)[Te+2]=0}}if(v.playerPiece.active){let S=170;for(let U=0;U<4;U++){let pe=3*(10*v.ghostBlocks[U][1]+v.ghostBlocks[U][0]);$(this,_r)[pe]=S,$(this,_r)[pe+1]=S,$(this,_r)[pe+2]=S}let W=v.playerPiece.shape;for(let U=0;U<4;U++){let pe=$(this,Fr).get($(this,Br).get(W)),Te=3*(10*v.playerPiece.blocks[U][1]+v.playerPiece.blocks[U][0]);$(this,_r)[Te]=pe[0],$(this,_r)[Te+1]=pe[1],$(this,_r)[Te+2]=pe[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,$(this,ot)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,$(this,_r))},Nn=new WeakSet,Pa=function(v,S){const W=32-(3+3*S),U=7<<W;return(v&U)>>>W},Un=new WeakSet,ga=function(v){for(let S=0;S<$(this,qr).length;S++)$(this,qr)[S]=0;v.heldPiece!=null&&er(this,an,ca).call(this,v.heldPiece,0);for(let S=0;S<4;S++)er(this,an,ca).call(this,v.pieceQueue[S],24*(1+S));this.gl.bindTexture(this.gl.TEXTURE_2D,$(this,it)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,$(this,qr))},an=new WeakSet,ca=function(v,S){let W=tt.getBaseShape(v),U=$(this,Fr).get($(this,Br).get(v));for(let pe=0;pe<4;pe++){let Te=W[pe],i=S+3*(Te[1]*4+Te[0]);$(this,qr)[i]=U[0],$(this,qr)[i+1]=U[1],$(this,qr)[i+2]=U[2]}},Ln=new WeakSet,wa=function(v){$(this,rn).nodeValue=v.linesCleared,$(this,tn).nodeValue=v.speedLevel==11?"MAX":v.speedLevel},Ut=new WeakSet,gn=function(v){const S=document.querySelector(v),W=er(this,Gn,xa).call(this,v);W!=null&&$(this,nn).set(S,W)},Gn=new WeakSet,xa=function(v){let S=null;for(let W=0;W<$(this,Nt).length&&S==null;W++)$(this,Nt)[W].selectorText==v&&(S=$(this,Nt)[W].style);return S},jn=new WeakSet,Ra=function(){const v=this.gl.canvas.width,S=this.gl.canvas.height,W=3*v>4*S;$(this,nn).forEach(function(U,pe,Te){const i=U.left!="",X=U.top!="";let ee=i?U.left:U.right,G=X?U.top:U.bottom,te=U.fontSize,Z=U.width,N=U.height;ee=Number(ee.substring(0,ee.length-2)),G=Number(G.substring(0,G.length-2)),Z=Number(Z.substring(0,Z.length-2)),N=Number(N.substring(0,N.length-2)),te!=""&&(te=Number(te.substring(0,te.length-2))),W?(ee=(4*S*(ee-50)+150*v)/(3*v)+"vw",Z=Z*4*S/(3*v)+"vw",G=G+"vh",N=N+"vh"):(G=G*3*v/(4*S)+(100*S-75*v)/(2*S)+"vh",N=N*3*v/(4*S)+"vh",ee=ee+"vw",Z=Z+"vw",te!=""&&(te=te*3*v/(4*S))),te!=""&&(pe.style.fontSize=te+"vh"),i?pe.style.left=ee:pe.style.right=ee,X?pe.style.top=G:pe.style.bottom=G,pe.style.width=Z,pe.style.height=N})};function Na(){let ze=document.createTextNode("");document.querySelector("#debug").appendChild(ze);let v=new Ma;document.addEventListener("keydown",function(i){v.setInputState(i.key,!0)}),document.addEventListener("keyup",function(i){v.setInputState(i.key,!1)});let S=new ia,W=new Oa,U=0,pe=0;function Te(i){let X=(i-pe)*.001;pe=i,U+=X,U>=S.gameTickTime&&(S.runTick(v),U=Math.min(U-S.gameTickTime,S.gameTickTime)),S.isStateChanged&&W.updateData(S.gameState),W.renderGame(),requestAnimationFrame(Te)}requestAnimationFrame(Te)}Na();

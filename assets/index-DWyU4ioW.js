var _n=Object.defineProperty;var Pn=(Ne,C,y)=>C in Ne?_n(Ne,C,{enumerable:!0,configurable:!0,writable:!0,value:y}):Ne[C]=y;var mn=(Ne,C,y)=>(Pn(Ne,typeof C!="symbol"?C+"":C,y),y),Sn=(Ne,C,y)=>{if(!C.has(Ne))throw TypeError("Cannot "+y)};var yn=(Ne,C,y)=>{if(C.has(Ne))throw TypeError("Cannot add the same private member more than once");C instanceof WeakSet?C.add(Ne):C.set(Ne,y)};var hn=(Ne,C,y)=>(Sn(Ne,C,"access private method"),y);(function(){const C=document.createElement("link").relList;if(C&&C.supports&&C.supports("modulepreload"))return;for(const K of document.querySelectorAll('link[rel="modulepreload"]'))J(K);new MutationObserver(K=>{for(const fe of K)if(fe.type==="childList")for(const Ge of fe.addedNodes)Ge.tagName==="LINK"&&Ge.rel==="modulepreload"&&J(Ge)}).observe(document,{childList:!0,subtree:!0});function y(K){const fe={};return K.integrity&&(fe.integrity=K.integrity),K.referrerPolicy&&(fe.referrerPolicy=K.referrerPolicy),K.crossOrigin==="use-credentials"?fe.credentials="include":K.crossOrigin==="anonymous"?fe.credentials="omit":fe.credentials="same-origin",fe}function J(K){if(K.ep)return;K.ep=!0;const fe=y(K);fetch(K.href,fe)}})();class wn{static isWebGLAvailable(){try{const C=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(C.getContext("webgl")||C.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const C=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&C.getContext("webgl2"))}catch{return!1}}static isColorSpaceAvailable(C){try{const y=document.createElement("canvas"),J=window.WebGL2RenderingContext&&y.getContext("webgl2");return J.drawingBufferColorSpace=C,J.drawingBufferColorSpace===C}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(C){const y={1:"WebGL",2:"WebGL 2"},J={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let K='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const fe=document.createElement("div");return fe.id="webglmessage",fe.style.fontFamily="monospace",fe.style.fontSize="13px",fe.style.fontWeight="normal",fe.style.textAlign="center",fe.style.background="#fff",fe.style.color="#000",fe.style.padding="1.5em",fe.style.width="400px",fe.style.margin="5em auto 0",J[C]?K=K.replace("$0","graphics card"):K=K.replace("$0","browser"),K=K.replace("$1",y[C]),fe.innerHTML=K,fe}}var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bn={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Ne,C){(function(J,K){Ne.exports=K()})(typeof self<"u"?self:xn,()=>(()=>{var y={"./src/attributes.js":(Ge,u,W)=>{function U(l){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U(l)}u.__esModule=!0,u.createAttribsFromArrays=ar,u.createBufferFromArray=f,u.createBufferFromTypedArray=le,u.createBufferInfoFromArrays=i,u.createBuffersFromArrays=E,u.getArray_=O,u.getNumComponents_=xe,u.setAttribInfoBufferFromArray=rr,u.setAttributeDefaults_=er,u.setAttributePrefix=Je;var k=$(W("./src/typedarrays.js")),ce=$(W("./src/helper.js"));function we(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(we=function(v){return v?a:o})(l)}function $(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||U(l)!="object"&&typeof l!="function")return{default:l};var a=we(o);if(a&&a.has(l))return a.get(l);var s={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in l)if(T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)){var P=v?Object.getOwnPropertyDescriptor(l,T):null;P&&(P.get||P.set)?Object.defineProperty(s,T,P):s[T]=l[T]}return s.default=l,a&&a.set(l,s),s}var q=35044,ee=34962,Te=34963,R=34660,V=5120,X=5121,w=5122,L=5123,te=5124,ye=5125,be=5126,pe={attribPrefix:""};function Je(l){pe.attribPrefix=l}function er(l){ce.copyExistingProperties(l,pe)}function Qe(l,o,a,s,v){l.bindBuffer(o,a),l.bufferData(o,s,v||q)}function le(l,o,a,s){if(ce.isBuffer(l,o))return o;a=a||ee;var v=l.createBuffer();return Qe(l,a,v,o,s),v}function x(l){return l==="indices"}function M(l){return l===Int8Array||l===Uint8Array}function O(l){return l.length?l:l.data}var _=/coord|texture/i,me=/color|colour/i;function de(l,o){var a;if(_.test(l)?a=2:me.test(l)?a=4:a=3,o%a>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(a," but ").concat(o," values is not evenly divisible by ").concat(a,". You should specify it."));return a}function xe(l,o,a){return l.numComponents||l.size||de(o,a||O(l).length)}function je(l,o){if(k.isArrayBuffer(l))return l;if(k.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var a=l.type?Ke(l.type):void 0;return a||(x(o)?a=Uint16Array:a=Float32Array),new a(l.data)}function De(l){return typeof l=="number"?l:l?k.getGLTypeForTypedArrayType(l):be}function Ke(l){return typeof l=="number"?k.getTypedArrayTypeForGLType(l):l||Float32Array}function We(l,o){return{buffer:o.buffer,numValues:24,type:De(o.type),arrayType:Ke(o.type)}}function nr(l,o){var a=o.data||o,s=Ke(o.type),v=a*s.BYTES_PER_ELEMENT,T=l.createBuffer();return l.bindBuffer(ee,T),l.bufferData(ee,v,o.drawType||q),{buffer:T,numValues:a,type:k.getGLTypeForTypedArrayType(s),arrayType:s}}function hr(l,o,a){var s=je(o,a);return{arrayType:s.constructor,buffer:le(l,s,void 0,o.drawType),type:k.getGLTypeForTypedArray(s),numValues:0}}function ar(l,o){var a={};return Object.keys(o).forEach(function(s){if(!x(s)){var v=o[s],T=v.attrib||v.name||v.attribName||pe.attribPrefix+s;if(v.value){if(!Array.isArray(v.value)&&!k.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");a[T]={value:v.value}}else{var P;v.buffer&&v.buffer instanceof WebGLBuffer?P=We:typeof v=="number"||typeof v.data=="number"?P=nr:P=hr;var B=P(l,v,s),I=B.buffer,j=B.type,H=B.numValues,Y=B.arrayType,re=v.normalize!==void 0?v.normalize:M(Y),Z=xe(v,s,H);a[T]={buffer:I,numComponents:Z,type:j,normalize:re,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),l.bindBuffer(ee,null),a}function rr(l,o,a,s){a=je(a),s!==void 0?(l.bindBuffer(ee,o.buffer),l.bufferSubData(ee,s,a)):Qe(l,ee,o.buffer,a,o.drawType)}function ur(l,o){return o===V||o===X?1:o===w||o===L?2:o===te||o===ye||o===be?4:0}var pr=["position","positions","a_position"];function ae(l){var o,a;for(a=0;a<pr.length&&(o=pr[a],!(o in l));++a);a===pr.length&&(o=Object.keys(l)[0]);var s=l[o],v=O(s).length;if(v===void 0)return 1;var T=xe(s,o),P=v/T;if(v%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(v));return P}function r(l,o){var a,s;for(s=0;s<pr.length&&(a=pr[s],!(a in o||(a=pe.attribPrefix+a,a in o)));++s);s===pr.length&&(a=Object.keys(o)[0]);var v=o[a];if(!v.buffer)return 1;l.bindBuffer(ee,v.buffer);var T=l.getBufferParameter(ee,R);l.bindBuffer(ee,null);var P=ur(l,v.type),B=T/P,I=v.numComponents||v.size,j=B/I;if(j%1!==0)throw new Error("numComponents ".concat(I," not correct for length ").concat(length));return j}function i(l,o,a){var s=ar(l,o),v=Object.assign({},a||{});v.attribs=Object.assign({},a?a.attribs:{},s);var T=o.indices;if(T){var P=je(T,"indices");v.indices=le(l,P,Te),v.numElements=P.length,v.elementType=k.getGLTypeForTypedArray(P)}else v.numElements||(v.numElements=r(l,v.attribs));return v}function f(l,o,a){var s=a==="indices"?Te:ee,v=je(o,a);return le(l,v,s)}function E(l,o){var a={};return Object.keys(o).forEach(function(s){a[s]=f(l,o[s],s)}),o.indices?(a.numElements=o.indices.length,a.elementType=k.getGLTypeForTypedArray(je(o.indices),"indices")):a.numElements=ae(o),a}},"./src/draw.js":(Ge,u,W)=>{function U(R){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},U(R)}u.__esModule=!0,u.drawBufferInfo=ee,u.drawObjectList=Te;var k=we(W("./src/programs.js"));function ce(R){if(typeof WeakMap!="function")return null;var V=new WeakMap,X=new WeakMap;return(ce=function(L){return L?X:V})(R)}function we(R,V){if(!V&&R&&R.__esModule)return R;if(R===null||U(R)!="object"&&typeof R!="function")return{default:R};var X=ce(V);if(X&&X.has(R))return X.get(R);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in R)if(te!=="default"&&Object.prototype.hasOwnProperty.call(R,te)){var ye=L?Object.getOwnPropertyDescriptor(R,te):null;ye&&(ye.get||ye.set)?Object.defineProperty(w,te,ye):w[te]=R[te]}return w.default=R,X&&X.set(R,w),w}var $=4,q=5123;function ee(R,V,X,w,L,te){X=X===void 0?$:X;var ye=V.indices,be=V.elementType,pe=w===void 0?V.numElements:w;L=L===void 0?0:L,be||ye?te!==void 0?R.drawElementsInstanced(X,pe,be===void 0?q:V.elementType,L,te):R.drawElements(X,pe,be===void 0?q:V.elementType,L):te!==void 0?R.drawArraysInstanced(X,L,pe,te):R.drawArrays(X,L,pe)}function Te(R,V){var X=null,w=null;V.forEach(function(L){if(L.active!==!1){var te=L.programInfo,ye=L.vertexArrayInfo||L.bufferInfo,be=!1,pe=L.type===void 0?$:L.type;te!==X&&(X=te,R.useProgram(te.program),be=!0),(be||ye!==w)&&(w&&w.vertexArrayObject&&!ye.vertexArrayObject&&R.bindVertexArray(null),w=ye,k.setBuffersAndAttributes(R,te,ye)),k.setUniforms(te,L.uniforms),ee(R,ye,pe,L.count,L.offset,L.instanceCount)}}),w&&w.vertexArrayObject&&R.bindVertexArray(null)}},"./src/framebuffers.js":(Ge,u,W)=>{function U(ae){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},U(ae)}u.__esModule=!0,u.bindFramebufferInfo=pr,u.createFramebufferInfo=rr,u.resizeFramebufferInfo=ur;var k=$(W("./src/textures.js")),ce=$(W("./src/helper.js"));function we(ae){if(typeof WeakMap!="function")return null;var r=new WeakMap,i=new WeakMap;return(we=function(E){return E?i:r})(ae)}function $(ae,r){if(!r&&ae&&ae.__esModule)return ae;if(ae===null||U(ae)!="object"&&typeof ae!="function")return{default:ae};var i=we(r);if(i&&i.has(ae))return i.get(ae);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in ae)if(l!=="default"&&Object.prototype.hasOwnProperty.call(ae,l)){var o=E?Object.getOwnPropertyDescriptor(ae,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=ae[l]}return f.default=ae,i&&i.set(ae,f),f}var q=36160,ee=36161,Te=3553,R=5121,V=6402,X=6408,w=33190,L=36012,te=35056,ye=36013,be=32854,pe=32855,Je=36194,er=33189,Qe=6401,le=36168,x=34041,M=36064,O=36096,_=36128,me=33306,de=33071,xe=9729,je=[{format:X,type:R,min:xe,wrap:de},{format:x}],De={};De[x]=me,De[Qe]=_,De[le]=_,De[V]=O,De[er]=O,De[w]=O,De[L]=O,De[te]=me,De[ye]=me;function Ke(ae,r){return De[ae]||De[r]}var We={};We[be]=!0,We[pe]=!0,We[Je]=!0,We[x]=!0,We[er]=!0,We[Qe]=!0,We[le]=!0;function nr(ae){return We[ae]}var hr=32;function ar(ae){return ae>=M&&ae<M+hr}function rr(ae,r,i,f){var E=q,l=ae.createFramebuffer();ae.bindFramebuffer(E,l),i=i||ae.drawingBufferWidth,f=f||ae.drawingBufferHeight,r=r||je;var o=[],a={framebuffer:l,attachments:[],width:i,height:f};return r.forEach(function(s,v){var T=s.attachment,P=s.samples,B=s.format,I=s.attachmentPoint||Ke(B,s.internalFormat);if(I||(I=M+v),ar(I)&&o.push(I),!T)if(P!==void 0||nr(B))T=ae.createRenderbuffer(),ae.bindRenderbuffer(ee,T),P>1?ae.renderbufferStorageMultisample(ee,P,B,i,f):ae.renderbufferStorage(ee,B,i,f);else{var j=Object.assign({},s);j.width=i,j.height=f,j.auto===void 0&&(j.auto=!1,j.min=j.min||j.minMag||xe,j.mag=j.mag||j.minMag||xe,j.wrapS=j.wrapS||j.wrap||de,j.wrapT=j.wrapT||j.wrap||de),T=k.createTexture(ae,j)}if(ce.isRenderbuffer(ae,T))ae.framebufferRenderbuffer(E,I,ee,T);else if(ce.isTexture(ae,T))s.layer!==void 0?ae.framebufferTextureLayer(E,I,T,s.level||0,s.layer):ae.framebufferTexture2D(E,I,s.target||Te,T,s.level||0);else throw new Error("unknown attachment type");a.attachments.push(T)}),ae.drawBuffers&&ae.drawBuffers(o),a}function ur(ae,r,i,f,E){f=f||ae.drawingBufferWidth,E=E||ae.drawingBufferHeight,r.width=f,r.height=E,i=i||je,i.forEach(function(l,o){var a=r.attachments[o],s=l.format,v=l.samples;if(v!==void 0||ce.isRenderbuffer(ae,a))ae.bindRenderbuffer(ee,a),v>1?ae.renderbufferStorageMultisample(ee,v,s,f,E):ae.renderbufferStorage(ee,s,f,E);else if(ce.isTexture(ae,a))k.resizeTexture(ae,a,l,f,E);else throw new Error("unknown attachment type")})}function pr(ae,r,i){i=i||q,r?(ae.bindFramebuffer(i,r.framebuffer),ae.viewport(0,0,r.width,r.height)):(ae.bindFramebuffer(i,null),ae.viewport(0,0,ae.drawingBufferWidth,ae.drawingBufferHeight))}},"./src/helper.js":(Ge,u)=>{u.__esModule=!0,u.copyExistingProperties=k,u.copyNamedProperties=U,u.error=ce,u.isBuffer=ee,u.isRenderbuffer=Te,u.isSampler=X,u.isShader=R,u.isTexture=V,u.warn=we;function W(w){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},W(w)}function U(w,L,te){w.forEach(function(ye){var be=L[ye];be!==void 0&&(te[ye]=be)})}function k(w,L){Object.keys(L).forEach(function(te){L.hasOwnProperty(te)&&w.hasOwnProperty(te)&&(L[te]=w[te])})}function ce(){var w;(w=console).error.apply(w,arguments)}function we(){var w;(w=console).warn.apply(w,arguments)}var $=new Map;function q(w,L){if(!w||W(w)!=="object")return!1;var te=$.get(L);te||(te=new WeakMap,$.set(L,te));var ye=te.get(w);if(ye===void 0){var be=Object.prototype.toString.call(w);ye=be.substring(8,be.length-1)===L,te.set(w,ye)}return ye}function ee(w,L){return typeof WebGLBuffer<"u"&&q(L,"WebGLBuffer")}function Te(w,L){return typeof WebGLRenderbuffer<"u"&&q(L,"WebGLRenderbuffer")}function R(w,L){return typeof WebGLShader<"u"&&q(L,"WebGLShader")}function V(w,L){return typeof WebGLTexture<"u"&&q(L,"WebGLTexture")}function X(w,L){return typeof WebGLSampler<"u"&&q(L,"WebGLSampler")}},"./src/m4.js":(Ge,u,W)=>{function U(r){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},U(r)}u.__esModule=!0,u.axisRotate=hr,u.axisRotation=nr,u.copy=R,u.create=Te,u.frustum=Qe,u.getAxis=be,u.getTranslation=ye,u.identity=V,u.inverse=w,u.lookAt=O,u.multiply=L,u.negate=ee,u.ortho=er,u.perspective=Je,u.rotateX=xe,u.rotateY=De,u.rotateZ=We,u.rotationX=de,u.rotationY=je,u.rotationZ=Ke,u.scale=rr,u.scaling=ar,u.setAxis=pe,u.setDefaultType=q,u.setTranslation=te,u.transformDirection=pr,u.transformNormal=ae,u.transformPoint=ur,u.translate=me,u.translation=_,u.transpose=X;var k=we(W("./src/v3.js"));function ce(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(ce=function(l){return l?f:i})(r)}function we(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||U(r)!="object"&&typeof r!="function")return{default:r};var f=ce(i);if(f&&f.has(r))return f.get(r);var E={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var a=l?Object.getOwnPropertyDescriptor(r,o):null;a&&(a.get||a.set)?Object.defineProperty(E,o,a):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var $=Float32Array;function q(r){var i=$;return $=r,i}function ee(r,i){return i=i||new $(16),i[0]=-r[0],i[1]=-r[1],i[2]=-r[2],i[3]=-r[3],i[4]=-r[4],i[5]=-r[5],i[6]=-r[6],i[7]=-r[7],i[8]=-r[8],i[9]=-r[9],i[10]=-r[10],i[11]=-r[11],i[12]=-r[12],i[13]=-r[13],i[14]=-r[14],i[15]=-r[15],i}function Te(){return new $(16).fill(0)}function R(r,i){return i=i||new $(16),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}function V(r){return r=r||new $(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function X(r,i){if(i=i||new $(16),i===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,i}var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],B=r[2*4+0],I=r[2*4+1],j=r[2*4+2],H=r[2*4+3],Y=r[3*4+0],re=r[3*4+1],Z=r[3*4+2],ie=r[3*4+3];return i[0]=E,i[1]=s,i[2]=B,i[3]=Y,i[4]=l,i[5]=v,i[6]=I,i[7]=re,i[8]=o,i[9]=T,i[10]=j,i[11]=Z,i[12]=a,i[13]=P,i[14]=H,i[15]=ie,i}function w(r,i){i=i||new $(16);var f=r[0*4+0],E=r[0*4+1],l=r[0*4+2],o=r[0*4+3],a=r[1*4+0],s=r[1*4+1],v=r[1*4+2],T=r[1*4+3],P=r[2*4+0],B=r[2*4+1],I=r[2*4+2],j=r[2*4+3],H=r[3*4+0],Y=r[3*4+1],re=r[3*4+2],Z=r[3*4+3],ie=I*Z,ue=re*j,Q=v*Z,se=re*T,Me=v*j,Xe=I*T,Oe=l*Z,Le=re*o,Ae=l*j,ge=I*o,Ye=l*T,ke=v*o,ze=P*Y,Ve=H*B,qe=a*Y,Re=H*s,Ie=a*B,lr=P*s,or=f*Y,br=H*E,Er=f*B,xr=P*E,Rr=f*s,Fr=a*E,jr=ie*s+se*B+Me*Y-(ue*s+Q*B+Xe*Y),Jr=ue*E+Oe*B+ge*Y-(ie*E+Le*B+Ae*Y),$r=Q*E+Le*s+Ye*Y-(se*E+Oe*s+ke*Y),et=Xe*E+Ae*s+ke*B-(Me*E+ge*s+Ye*B),fr=1/(f*jr+a*Jr+P*$r+H*et);return i[0]=fr*jr,i[1]=fr*Jr,i[2]=fr*$r,i[3]=fr*et,i[4]=fr*(ue*a+Q*P+Xe*H-(ie*a+se*P+Me*H)),i[5]=fr*(ie*f+Le*P+Ae*H-(ue*f+Oe*P+ge*H)),i[6]=fr*(se*f+Oe*a+ke*H-(Q*f+Le*a+Ye*H)),i[7]=fr*(Me*f+ge*a+Ye*P-(Xe*f+Ae*a+ke*P)),i[8]=fr*(ze*T+Re*j+Ie*Z-(Ve*T+qe*j+lr*Z)),i[9]=fr*(Ve*o+or*j+xr*Z-(ze*o+br*j+Er*Z)),i[10]=fr*(qe*o+br*T+Rr*Z-(Re*o+or*T+Fr*Z)),i[11]=fr*(lr*o+Er*T+Fr*j-(Ie*o+xr*T+Rr*j)),i[12]=fr*(qe*I+lr*re+Ve*v-(Ie*re+ze*v+Re*I)),i[13]=fr*(Er*re+ze*l+br*I-(or*I+xr*re+Ve*l)),i[14]=fr*(or*v+Fr*re+Re*l-(Rr*re+qe*l+br*v)),i[15]=fr*(Rr*I+Ie*l+xr*v-(Er*v+Fr*I+lr*l)),i}function L(r,i,f){f=f||new $(16);var E=r[0],l=r[1],o=r[2],a=r[3],s=r[4],v=r[5],T=r[6],P=r[7],B=r[8],I=r[9],j=r[10],H=r[11],Y=r[12],re=r[13],Z=r[14],ie=r[15],ue=i[0],Q=i[1],se=i[2],Me=i[3],Xe=i[4],Oe=i[5],Le=i[6],Ae=i[7],ge=i[8],Ye=i[9],ke=i[10],ze=i[11],Ve=i[12],qe=i[13],Re=i[14],Ie=i[15];return f[0]=E*ue+s*Q+B*se+Y*Me,f[1]=l*ue+v*Q+I*se+re*Me,f[2]=o*ue+T*Q+j*se+Z*Me,f[3]=a*ue+P*Q+H*se+ie*Me,f[4]=E*Xe+s*Oe+B*Le+Y*Ae,f[5]=l*Xe+v*Oe+I*Le+re*Ae,f[6]=o*Xe+T*Oe+j*Le+Z*Ae,f[7]=a*Xe+P*Oe+H*Le+ie*Ae,f[8]=E*ge+s*Ye+B*ke+Y*ze,f[9]=l*ge+v*Ye+I*ke+re*ze,f[10]=o*ge+T*Ye+j*ke+Z*ze,f[11]=a*ge+P*Ye+H*ke+ie*ze,f[12]=E*Ve+s*qe+B*Re+Y*Ie,f[13]=l*Ve+v*qe+I*Re+re*Ie,f[14]=o*Ve+T*qe+j*Re+Z*Ie,f[15]=a*Ve+P*qe+H*Re+ie*Ie,f}function te(r,i,f){return f=f||V(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=i[0],f[13]=i[1],f[14]=i[2],f[15]=1,f}function ye(r,i){return i=i||k.create(),i[0]=r[12],i[1]=r[13],i[2]=r[14],i}function be(r,i,f){f=f||k.create();var E=i*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function pe(r,i,f,E){E!==r&&(E=R(r,E));var l=f*4;return E[l+0]=i[0],E[l+1]=i[1],E[l+2]=i[2],E}function Je(r,i,f,E,l){l=l||new $(16);var o=Math.tan(Math.PI*.5-.5*r),a=1/(f-E);return l[0]=o/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+E)*a,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*E*a*2,l[15]=0,l}function er(r,i,f,E,l,o,a){return a=a||new $(16),a[0]=2/(i-r),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(E-f),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(l-o),a[11]=0,a[12]=(i+r)/(r-i),a[13]=(E+f)/(f-E),a[14]=(o+l)/(l-o),a[15]=1,a}function Qe(r,i,f,E,l,o,a){a=a||new $(16);var s=i-r,v=E-f,T=l-o;return a[0]=2*l/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l/v,a[6]=0,a[7]=0,a[8]=(r+i)/s,a[9]=(E+f)/v,a[10]=o/T,a[11]=-1,a[12]=0,a[13]=0,a[14]=l*o/T,a[15]=0,a}var le,x,M;function O(r,i,f,E){return E=E||new $(16),le=le||k.create(),x=x||k.create(),M=M||k.create(),k.normalize(k.subtract(r,i,M),M),k.normalize(k.cross(f,M,le),le),k.normalize(k.cross(M,le,x),x),E[0]=le[0],E[1]=le[1],E[2]=le[2],E[3]=0,E[4]=x[0],E[5]=x[1],E[6]=x[2],E[7]=0,E[8]=M[0],E[9]=M[1],E[10]=M[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function _(r,i){return i=i||new $(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}function me(r,i,f){f=f||new $(16);var E=i[0],l=i[1],o=i[2],a=r[0],s=r[1],v=r[2],T=r[3],P=r[1*4+0],B=r[1*4+1],I=r[1*4+2],j=r[1*4+3],H=r[2*4+0],Y=r[2*4+1],re=r[2*4+2],Z=r[2*4+3],ie=r[3*4+0],ue=r[3*4+1],Q=r[3*4+2],se=r[3*4+3];return r!==f&&(f[0]=a,f[1]=s,f[2]=v,f[3]=T,f[4]=P,f[5]=B,f[6]=I,f[7]=j,f[8]=H,f[9]=Y,f[10]=re,f[11]=Z),f[12]=a*E+P*l+H*o+ie,f[13]=s*E+B*l+Y*o+ue,f[14]=v*E+I*l+re*o+Q,f[15]=T*E+j*l+Z*o+se,f}function de(r,i){i=i||new $(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=f,i[6]=E,i[7]=0,i[8]=0,i[9]=-E,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xe(r,i,f){f=f||new $(16);var E=r[4],l=r[5],o=r[6],a=r[7],s=r[8],v=r[9],T=r[10],P=r[11],B=Math.cos(i),I=Math.sin(i);return f[4]=B*E+I*s,f[5]=B*l+I*v,f[6]=B*o+I*T,f[7]=B*a+I*P,f[8]=B*s-I*E,f[9]=B*v-I*l,f[10]=B*T-I*o,f[11]=B*P-I*a,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function je(r,i){i=i||new $(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=0,i[2]=-E,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=E,i[9]=0,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function De(r,i,f){f=f||new $(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[2*4+0],v=r[2*4+1],T=r[2*4+2],P=r[2*4+3],B=Math.cos(i),I=Math.sin(i);return f[0]=B*E-I*s,f[1]=B*l-I*v,f[2]=B*o-I*T,f[3]=B*a-I*P,f[8]=B*s+I*E,f[9]=B*v+I*l,f[10]=B*T+I*o,f[11]=B*P+I*a,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ke(r,i){i=i||new $(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=E,i[2]=0,i[3]=0,i[4]=-E,i[5]=f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function We(r,i,f){f=f||new $(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[1*4+0],v=r[1*4+1],T=r[1*4+2],P=r[1*4+3],B=Math.cos(i),I=Math.sin(i);return f[0]=B*E+I*s,f[1]=B*l+I*v,f[2]=B*o+I*T,f[3]=B*a+I*P,f[4]=B*s-I*E,f[5]=B*v-I*l,f[6]=B*T-I*o,f[7]=B*P-I*a,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function nr(r,i,f){f=f||new $(16);var E=r[0],l=r[1],o=r[2],a=Math.sqrt(E*E+l*l+o*o);E/=a,l/=a,o/=a;var s=E*E,v=l*l,T=o*o,P=Math.cos(i),B=Math.sin(i),I=1-P;return f[0]=s+(1-s)*P,f[1]=E*l*I+o*B,f[2]=E*o*I-l*B,f[3]=0,f[4]=E*l*I-o*B,f[5]=v+(1-v)*P,f[6]=l*o*I+E*B,f[7]=0,f[8]=E*o*I+l*B,f[9]=l*o*I-E*B,f[10]=T+(1-T)*P,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function hr(r,i,f,E){E=E||new $(16);var l=i[0],o=i[1],a=i[2],s=Math.sqrt(l*l+o*o+a*a);l/=s,o/=s,a/=s;var v=l*l,T=o*o,P=a*a,B=Math.cos(f),I=Math.sin(f),j=1-B,H=v+(1-v)*B,Y=l*o*j+a*I,re=l*a*j-o*I,Z=l*o*j-a*I,ie=T+(1-T)*B,ue=o*a*j+l*I,Q=l*a*j+o*I,se=o*a*j-l*I,Me=P+(1-P)*B,Xe=r[0],Oe=r[1],Le=r[2],Ae=r[3],ge=r[4],Ye=r[5],ke=r[6],ze=r[7],Ve=r[8],qe=r[9],Re=r[10],Ie=r[11];return E[0]=H*Xe+Y*ge+re*Ve,E[1]=H*Oe+Y*Ye+re*qe,E[2]=H*Le+Y*ke+re*Re,E[3]=H*Ae+Y*ze+re*Ie,E[4]=Z*Xe+ie*ge+ue*Ve,E[5]=Z*Oe+ie*Ye+ue*qe,E[6]=Z*Le+ie*ke+ue*Re,E[7]=Z*Ae+ie*ze+ue*Ie,E[8]=Q*Xe+se*ge+Me*Ve,E[9]=Q*Oe+se*Ye+Me*qe,E[10]=Q*Le+se*ke+Me*Re,E[11]=Q*Ae+se*ze+Me*Ie,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function ar(r,i){return i=i||new $(16),i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function rr(r,i,f){f=f||new $(16);var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ur(r,i,f){f=f||k.create();var E=i[0],l=i[1],o=i[2],a=E*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+l*r[4]+o*r[8]+r[12])/a,f[1]=(E*r[1]+l*r[5]+o*r[9]+r[13])/a,f[2]=(E*r[2]+l*r[6]+o*r[10]+r[14])/a,f}function pr(r,i,f){f=f||k.create();var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0]+l*r[4]+o*r[8],f[1]=E*r[1]+l*r[5]+o*r[9],f[2]=E*r[2]+l*r[6]+o*r[10],f}function ae(r,i,f){f=f||k.create();var E=w(r),l=i[0],o=i[1],a=i[2];return f[0]=l*E[0]+o*E[1]+a*E[2],f[1]=l*E[4]+o*E[5]+a*E[6],f[2]=l*E[8]+o*E[9]+a*E[10],f}},"./src/primitives.js":(Ge,u,W)=>{function U(o){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},U(o)}u.__esModule=!0,u.concatVertices=i,u.create3DFBuffers=u.create3DFBufferInfo=void 0,u.create3DFVertices=je,u.createAugmentedTypedArray=w,u.createCrescentBuffers=u.createCrescentBufferInfo=void 0,u.createCrescentVertices=De,u.createCubeBuffers=u.createCubeBufferInfo=u.createCresentVertices=u.createCresentBuffers=u.createCresentBufferInfo=void 0,u.createCubeVertices=me,u.createCylinderBuffers=u.createCylinderBufferInfo=void 0,u.createCylinderVertices=Ke,u.createDiscBuffers=u.createDiscBufferInfo=void 0,u.createDiscVertices=nr,u.createPlaneBuffers=u.createPlaneBufferInfo=void 0,u.createPlaneVertices=M,u.createSphereBuffers=u.createSphereBufferInfo=void 0,u.createSphereVertices=O,u.createTorusBuffers=u.createTorusBufferInfo=void 0,u.createTorusVertices=We,u.createTruncatedConeBuffers=u.createTruncatedConeBufferInfo=void 0,u.createTruncatedConeVertices=de,u.createXYQuadBuffers=u.createXYQuadBufferInfo=void 0,u.createXYQuadVertices=x,u.deindexVertices=te,u.duplicateVertices=f,u.flattenNormals=ye,u.makeRandomVertexColors=ar,u.reorientDirections=Je,u.reorientNormals=er,u.reorientPositions=Qe,u.reorientVertices=le;var k=Te(W("./src/attributes.js")),ce=Te(W("./src/helper.js")),we=Te(W("./src/typedarrays.js")),$=Te(W("./src/m4.js")),q=Te(W("./src/v3.js"));function ee(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(ee=function(T){return T?s:a})(o)}function Te(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||U(o)!="object"&&typeof o!="function")return{default:o};var s=ee(a);if(s&&s.has(o))return s.get(o);var v={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in o)if(P!=="default"&&Object.prototype.hasOwnProperty.call(o,P)){var B=T?Object.getOwnPropertyDescriptor(o,P):null;B&&(B.get||B.set)?Object.defineProperty(v,P,B):v[P]=o[P]}return v.default=o,s&&s.set(o,v),v}var R=k.getArray_,V=k.getNumComponents_;function X(o,a){var s=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var T=arguments[v];if(T instanceof Array||we.isArrayBuffer(T))for(var P=0;P<T.length;++P)o[s++]=T[P];else o[s++]=T}},o.reset=function(v){s=v||0},o.numComponents=a,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function w(o,a,s){var v=s||Float32Array;return X(new v(o*a),o)}function L(o){return o!=="indices"}function te(o){var a=o.indices,s={},v=a.length;function T(P){for(var B=o[P],I=B.numComponents,j=w(I,v,B.constructor),H=0;H<v;++H)for(var Y=a[H],re=Y*I,Z=0;Z<I;++Z)j.push(B[re+Z]);s[P]=j}return Object.keys(o).filter(L).forEach(T),s}function ye(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var a=o.normal,s=a.length,v=0;v<s;v+=9){var T=a[v+0],P=a[v+1],B=a[v+2],I=a[v+3],j=a[v+4],H=a[v+5],Y=a[v+6],re=a[v+7],Z=a[v+8],ie=T+I+Y,ue=P+j+re,Q=B+H+Z,se=Math.sqrt(ie*ie+ue*ue+Q*Q);ie/=se,ue/=se,Q/=se,a[v+0]=ie,a[v+1]=ue,a[v+2]=Q,a[v+3]=ie,a[v+4]=ue,a[v+5]=Q,a[v+6]=ie,a[v+7]=ue,a[v+8]=Q}return o}function be(o,a,s){for(var v=o.length,T=new Float32Array(3),P=0;P<v;P+=3)s(a,[o[P],o[P+1],o[P+2]],T),o[P]=T[0],o[P+1]=T[1],o[P+2]=T[2]}function pe(o,a,s){s=s||q.create();var v=a[0],T=a[1],P=a[2];return s[0]=v*o[0]+T*o[1]+P*o[2],s[1]=v*o[4]+T*o[5]+P*o[6],s[2]=v*o[8]+T*o[9]+P*o[10],s}function Je(o,a){return be(o,a,$.transformDirection),o}function er(o,a){return be(o,$.inverse(a),pe),o}function Qe(o,a){return be(o,a,$.transformPoint),o}function le(o,a){return Object.keys(o).forEach(function(s){var v=o[s];s.indexOf("pos")>=0?Qe(v,a):s.indexOf("tan")>=0||s.indexOf("binorm")>=0?Je(v,a):s.indexOf("norm")>=0&&er(v,a)}),o}function x(o,a,s){return o=o||2,a=a||0,s=s||0,o*=.5,{position:{numComponents:2,data:[a+-1*o,s+-1*o,a+1*o,s+-1*o,a+-1*o,s+1*o,a+1*o,s+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function M(o,a,s,v,T){o=o||1,a=a||1,s=s||1,v=v||1,T=T||$.identity();for(var P=(s+1)*(v+1),B=w(3,P),I=w(3,P),j=w(2,P),H=0;H<=v;H++)for(var Y=0;Y<=s;Y++){var re=Y/s,Z=H/v;B.push(o*re-o*.5,0,a*Z-a*.5),I.push(0,1,0),j.push(re,Z)}for(var ie=s+1,ue=w(3,s*v*2,Uint16Array),Q=0;Q<v;Q++)for(var se=0;se<s;se++)ue.push((Q+0)*ie+se,(Q+1)*ie+se,(Q+0)*ie+se+1),ue.push((Q+1)*ie+se,(Q+1)*ie+se+1,(Q+0)*ie+se+1);var Me=le({position:B,normal:I,texcoord:j,indices:ue},T);return Me}function O(o,a,s,v,T,P,B){if(a<=0||s<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,T=T||Math.PI,P=P||0,B=B||Math.PI*2;for(var I=T-v,j=B-P,H=(a+1)*(s+1),Y=w(3,H),re=w(3,H),Z=w(2,H),ie=0;ie<=s;ie++)for(var ue=0;ue<=a;ue++){var Q=ue/a,se=ie/s,Me=j*Q+P,Xe=I*se+v,Oe=Math.sin(Me),Le=Math.cos(Me),Ae=Math.sin(Xe),ge=Math.cos(Xe),Ye=Le*Ae,ke=ge,ze=Oe*Ae;Y.push(o*Ye,o*ke,o*ze),re.push(Ye,ke,ze),Z.push(1-Q,se)}for(var Ve=a+1,qe=w(3,a*s*2,Uint16Array),Re=0;Re<a;Re++)for(var Ie=0;Ie<s;Ie++)qe.push((Ie+0)*Ve+Re,(Ie+0)*Ve+Re+1,(Ie+1)*Ve+Re),qe.push((Ie+1)*Ve+Re,(Ie+0)*Ve+Re+1,(Ie+1)*Ve+Re+1);return{position:Y,normal:re,texcoord:Z,indices:qe}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function me(o){o=o||1;for(var a=o/2,s=[[-a,-a,-a],[+a,-a,-a],[-a,+a,-a],[+a,+a,-a],[-a,-a,+a],[+a,-a,+a],[-a,+a,+a],[+a,+a,+a]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],P=6*4,B=w(3,P),I=w(3,P),j=w(2,P),H=w(3,6*2,Uint16Array),Y=0;Y<6;++Y){for(var re=_[Y],Z=0;Z<4;++Z){var ie=s[re[Z]],ue=v[Y],Q=T[Z];B.push(ie),I.push(ue),j.push(Q)}var se=4*Y;H.push(se+0,se+1,se+2),H.push(se+0,se+2,se+3)}return{position:B,normal:I,texcoord:j,indices:H}}function de(o,a,s,v,T,P,B){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var I=P===void 0?!0:P,j=B===void 0?!0:B,H=(I?2:0)+(j?2:0),Y=(v+1)*(T+1+H),re=w(3,Y),Z=w(3,Y),ie=w(2,Y),ue=w(3,v*(T+H/2)*2,Uint16Array),Q=v+1,se=Math.atan2(o-a,s),Me=Math.cos(se),Xe=Math.sin(se),Oe=I?-2:0,Le=T+(j?2:0),Ae=Oe;Ae<=Le;++Ae){var ge=Ae/T,Ye=s*ge,ke=void 0;Ae<0?(Ye=0,ge=1,ke=o):Ae>T?(Ye=s,ge=1,ke=a):ke=o+(a-o)*(Ae/T),(Ae===-2||Ae===T+2)&&(ke=0,ge=0),Ye-=s/2;for(var ze=0;ze<Q;++ze){var Ve=Math.sin(ze*Math.PI*2/v),qe=Math.cos(ze*Math.PI*2/v);re.push(Ve*ke,Ye,qe*ke),Ae<0?Z.push(0,-1,0):Ae>T?Z.push(0,1,0):ke===0?Z.push(0,0,0):Z.push(Ve*Me,Xe,qe*Me),ie.push(ze/v,1-ge)}}for(var Re=0;Re<T+H;++Re)if(!(Re===1&&I||Re===T+H-2&&j))for(var Ie=0;Ie<v;++Ie)ue.push(Q*(Re+0)+0+Ie,Q*(Re+0)+1+Ie,Q*(Re+1)+1+Ie),ue.push(Q*(Re+0)+0+Ie,Q*(Re+1)+1+Ie,Q*(Re+1)+0+Ie);return{position:re,normal:Z,texcoord:ie,indices:ue}}function xe(o,a){a=a||[];for(var s=[],v=0;v<o.length;v+=4){var T=o[v],P=o.slice(v+1,v+4);P.push.apply(P,a);for(var B=0;B<T;++B)s.push.apply(s,P)}return s}function je(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],a=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],s=xe([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=xe([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,P={position:w(3,T),texcoord:w(2,T),normal:w(3,T),color:w(4,T,Uint8Array),indices:w(3,T/3,Uint16Array)};P.position.push(o),P.texcoord.push(a),P.normal.push(s),P.color.push(v);for(var B=0;B<T;++B)P.indices.push(B);return P}function De(o,a,s,v,T,P,B){if(T<=0)throw new Error("subdivisionDown must be > 0");P=P||0,B=B||1;var I=2,j=B-P,H=(T+1)*2*(2+I),Y=w(3,H),re=w(3,H),Z=w(2,H);function ie(Le,Ae,ge){return Le+(Ae-Le)*ge}function ue(Le,Ae,ge,Ye,ke,ze){for(var Ve=0;Ve<=T;Ve++){var qe=Ae/(I-1),Re=Ve/T,Ie=(qe-.5)*2,lr=(P+Re*j)*Math.PI,or=Math.sin(lr),br=Math.cos(lr),Er=ie(o,Le,or),xr=Ie*v,Rr=br*o,Fr=or*Er;Y.push(xr,Rr,Fr);var jr=q.add(q.multiply([0,or,br],ge),Ye);re.push(jr),Z.push(qe*ke+ze,Re)}}for(var Q=0;Q<I;Q++){var se=(Q/(I-1)-.5)*2;ue(a,Q,[1,1,1],[0,0,0],1,0),ue(a,Q,[0,0,0],[se,0,0],0,0),ue(s,Q,[1,1,1],[0,0,0],1,0),ue(s,Q,[0,0,0],[se,0,0],0,1)}var Me=w(3,T*2*(2+I),Uint16Array);function Xe(Le,Ae){for(var ge=0;ge<T;++ge)Me.push(Le+ge+0,Le+ge+1,Ae+ge+0),Me.push(Le+ge+1,Ae+ge+1,Ae+ge+0)}var Oe=T+1;return Xe(Oe*0,Oe*4),Xe(Oe*5,Oe*7),Xe(Oe*6,Oe*2),Xe(Oe*3,Oe*1),{position:Y,normal:re,texcoord:Z,indices:Me}}function Ke(o,a,s,v,T,P){return de(o,o,a,s,v,T,P)}function We(o,a,s,v,T,P){if(s<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,P=P||Math.PI*2;for(var B=P-T,I=s+1,j=v+1,H=I*j,Y=w(3,H),re=w(3,H),Z=w(2,H),ie=w(3,s*v*2,Uint16Array),ue=0;ue<j;++ue)for(var Q=ue/v,se=Q*Math.PI*2,Me=Math.sin(se),Xe=o+Me*a,Oe=Math.cos(se),Le=Oe*a,Ae=0;Ae<I;++Ae){var ge=Ae/s,Ye=T+ge*B,ke=Math.sin(Ye),ze=Math.cos(Ye),Ve=ke*Xe,qe=ze*Xe,Re=ke*Me,Ie=ze*Me;Y.push(Ve,Le,qe),re.push(Re,Oe,Ie),Z.push(ge,1-Q)}for(var lr=0;lr<v;++lr)for(var or=0;or<s;++or){var br=1+or,Er=1+lr;ie.push(I*lr+or,I*Er+or,I*lr+br),ie.push(I*Er+or,I*Er+br,I*lr+br)}return{position:Y,normal:re,texcoord:Z,indices:ie}}function nr(o,a,s,v,T){if(a<3)throw new Error("divisions must be at least 3");s=s||1,T=T||1,v=v||0;for(var P=(a+1)*(s+1),B=w(3,P),I=w(3,P),j=w(2,P),H=w(3,s*a*2,Uint16Array),Y=0,re=o-v,Z=a+1,ie=0;ie<=s;++ie){for(var ue=v+re*Math.pow(ie/s,T),Q=0;Q<=a;++Q){var se=2*Math.PI*Q/a,Me=ue*Math.cos(se),Xe=ue*Math.sin(se);if(B.push(Me,0,Xe),I.push(0,1,0),j.push(1-Q/a,ie/s),ie>0&&Q!==a){var Oe=Y+(Q+1),Le=Y+Q,Ae=Y+Q-Z,ge=Y+(Q+1)-Z;H.push(Oe,Le,Ae),H.push(Oe,Ae,ge)}}Y+=a+1}return{position:B,normal:I,texcoord:j,indices:H}}function hr(o){return Math.random()*o|0}function ar(o,a){a=a||{};var s=o.position.numElements,v=w(4,s,Uint8Array),T=a.rand||function(re,Z){return Z<3?hr(256):255};if(o.color=v,o.indices)for(var P=0;P<s;++P)v.push(T(P,0),T(P,1),T(P,2),T(P,3));else for(var B=a.vertsPerColor||3,I=s/B,j=0;j<I;++j)for(var H=[T(j,0),T(j,1),T(j,2),T(j,3)],Y=0;Y<B;++Y)v.push(H);return o}function rr(o){return function(a){var s=o.apply(this,Array.prototype.slice.call(arguments,1));return k.createBuffersFromArrays(a,s)}}function ur(o){return function(a){var s=o.apply(null,Array.prototype.slice.call(arguments,1));return k.createBufferInfoFromArrays(a,s)}}var pr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function ae(o,a,s,v){v=v||0;for(var T=o.length,P=0;P<T;++P)a[s+P]=o[P]+v}function r(o,a){var s=R(o),v=new s.constructor(a),T=v;return s.numComponents&&s.numElements&&X(v,s.numComponents),o.data&&(T={data:v},ce.copyNamedProperties(pr,o,T)),T}function i(o){for(var a={},s,v=function(){var Y=o[T];Object.keys(Y).forEach(function(re){a[re]||(a[re]=[]),!s&&re!=="indices"&&(s=re);var Z=Y[re],ie=V(Z,re),ue=R(Z),Q=ue.length/ie;a[re].push(Q)})},T=0;T<o.length;++T)v();function P(H){for(var Y=0,re,Z=0;Z<o.length;++Z){var ie=o[Z],ue=ie[H],Q=R(ue);Y+=Q.length,(!re||ue.data)&&(re=ue)}return{length:Y,spec:re}}function B(H,Y,re){for(var Z=0,ie=0,ue=0;ue<o.length;++ue){var Q=o[ue],se=Q[H],Me=R(se);H==="indices"?(ae(Me,re,ie,Z),Z+=Y[ue]):ae(Me,re,ie),ie+=Me.length}}var I=a[s],j={};return Object.keys(a).forEach(function(H){var Y=P(H),re=r(Y.spec,Y.length);B(H,I,R(re)),j[H]=re}),j}function f(o){var a={};return Object.keys(o).forEach(function(s){var v=o[s],T=R(v),P=r(v,T.length);ae(T,R(P),0),a[s]=P}),a}u.create3DFBufferInfo=ur(je),u.create3DFBuffers=rr(je),u.createCubeBufferInfo=ur(me),u.createCubeBuffers=rr(me),u.createPlaneBufferInfo=ur(M),u.createPlaneBuffers=rr(M),u.createSphereBufferInfo=ur(O),u.createSphereBuffers=rr(O),u.createTruncatedConeBufferInfo=ur(de),u.createTruncatedConeBuffers=rr(de),u.createXYQuadBufferInfo=ur(x),u.createXYQuadBuffers=rr(x);var E=u.createCrescentBufferInfo=ur(De),l=u.createCrescentBuffers=rr(De);u.createCylinderBufferInfo=ur(Ke),u.createCylinderBuffers=rr(Ke),u.createTorusBufferInfo=ur(We),u.createTorusBuffers=rr(We),u.createDiscBufferInfo=ur(nr),u.createDiscBuffers=rr(nr),u.createCresentBufferInfo=E,u.createCresentBuffers=l,u.createCresentVertices=De},"./src/programs.js":(Ge,u,W)=>{function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}u.__esModule=!0,u.bindTransformFeedbackInfo=vt,u.bindUniformBlock=st,u.createAttributeSetters=gt,u.createProgram=zr,u.createProgramAsync=void 0,u.createProgramFromScripts=At,u.createProgramFromSources=_t,u.createProgramInfo=c,u.createProgramInfoAsync=void 0,u.createProgramInfoFromProgram=yt,u.createProgramInfos=A,u.createProgramInfosAsync=void 0,u.createPrograms=h,u.createProgramsAsync=void 0,u.createTransformFeedback=St,u.createTransformFeedbackInfo=lt,u.createUniformBlockInfo=xt,u.createUniformBlockInfoFromProgram=wt,u.createUniformBlockSpecFromProgram=Gr,u.createUniformSetters=Wr,u.setAttributes=Rt,u.setBlockUniforms=un,u.setBuffersAndAttributes=fn,u.setUniformBlock=Wt,u.setUniforms=mt,u.setUniformsAndBindTextures=void 0;var k=$(W("./src/utils.js")),ce=$(W("./src/helper.js"));function we(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(we=function(b){return b?n:t})(e)}function $(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||U(e)!="object"&&typeof e!="function")return{default:e};var n=we(t);if(n&&n.has(e))return n.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=b?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(p,d,g):p[d]=e[d]}return p.default=e,n&&n.set(e,p),p}function q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */q=function(){return t};var e,t={},n=Object.prototype,p=n.hasOwnProperty,b=Object.defineProperty||function(oe,G,z){oe[G]=z.value},d=typeof Symbol=="function"?Symbol:{},g=d.iterator||"@@iterator",S=d.asyncIterator||"@@asyncIterator",D=d.toStringTag||"@@toStringTag";function F(oe,G,z){return Object.defineProperty(oe,G,{value:z,enumerable:!0,configurable:!0,writable:!0}),oe[G]}try{F({},"")}catch{F=function(z,Ee,Ce){return z[Ee]=Ce}}function N(oe,G,z,Ee){var Ce=G&&G.prototype instanceof Ue?G:Ue,Pe=Object.create(Ce.prototype),ir=new vn(Ee||[]);return b(Pe,"_invoke",{value:dn(oe,z,ir)}),Pe}function ne(oe,G,z){try{return{type:"normal",arg:oe.call(G,z)}}catch(Ee){return{type:"throw",arg:Ee}}}t.wrap=N;var ve="suspendedStart",he="suspendedYield",Se="executing",Be="completed",Fe={};function Ue(){}function He(){}function tr(){}var cr={};F(cr,g,function(){return this});var Tr=Object.getPrototypeOf,gr=Tr&&Tr(Tr(sn([])));gr&&gr!==n&&p.call(gr,g)&&(cr=gr);var Br=tr.prototype=Ue.prototype=Object.create(cr);function Ht(oe){["next","throw","return"].forEach(function(G){F(oe,G,function(z){return this._invoke(G,z)})})}function zt(oe,G){function z(Ce,Pe,ir,dr){var _r=ne(oe[Ce],oe,Pe);if(_r.type!=="throw"){var Kr=_r.arg,Xr=Kr.value;return Xr&&U(Xr)=="object"&&p.call(Xr,"__await")?G.resolve(Xr.__await).then(function(qr){z("next",qr,ir,dr)},function(qr){z("throw",qr,ir,dr)}):G.resolve(Xr).then(function(qr){Kr.value=qr,ir(Kr)},function(qr){return z("throw",qr,ir,dr)})}dr(_r.arg)}var Ee;b(this,"_invoke",{value:function(Pe,ir){function dr(){return new G(function(_r,Kr){z(Pe,ir,_r,Kr)})}return Ee=Ee?Ee.then(dr,dr):dr()}})}function dn(oe,G,z){var Ee=ve;return function(Ce,Pe){if(Ee===Se)throw new Error("Generator is already running");if(Ee===Be){if(Ce==="throw")throw Pe;return{value:e,done:!0}}for(z.method=Ce,z.arg=Pe;;){var ir=z.delegate;if(ir){var dr=pn(ir,z);if(dr){if(dr===Fe)continue;return dr}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(Ee===ve)throw Ee=Be,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);Ee=Se;var _r=ne(oe,G,z);if(_r.type==="normal"){if(Ee=z.done?Be:he,_r.arg===Fe)continue;return{value:_r.arg,done:z.done}}_r.type==="throw"&&(Ee=Be,z.method="throw",z.arg=_r.arg)}}}function pn(oe,G){var z=G.method,Ee=oe.iterator[z];if(Ee===e)return G.delegate=null,z==="throw"&&oe.iterator.return&&(G.method="return",G.arg=e,pn(oe,G),G.method==="throw")||z!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+z+"' method")),Fe;var Ce=ne(Ee,oe.iterator,G.arg);if(Ce.type==="throw")return G.method="throw",G.arg=Ce.arg,G.delegate=null,Fe;var Pe=Ce.arg;return Pe?Pe.done?(G[oe.resultName]=Pe.value,G.next=oe.nextLoc,G.method!=="return"&&(G.method="next",G.arg=e),G.delegate=null,Fe):Pe:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,Fe)}function An(oe){var G={tryLoc:oe[0]};1 in oe&&(G.catchLoc=oe[1]),2 in oe&&(G.finallyLoc=oe[2],G.afterLoc=oe[3]),this.tryEntries.push(G)}function ln(oe){var G=oe.completion||{};G.type="normal",delete G.arg,oe.completion=G}function vn(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(An,this),this.reset(!0)}function sn(oe){if(oe||oe===""){var G=oe[g];if(G)return G.call(oe);if(typeof oe.next=="function")return oe;if(!isNaN(oe.length)){var z=-1,Ee=function Ce(){for(;++z<oe.length;)if(p.call(oe,z))return Ce.value=oe[z],Ce.done=!1,Ce;return Ce.value=e,Ce.done=!0,Ce};return Ee.next=Ee}}throw new TypeError(U(oe)+" is not iterable")}return He.prototype=tr,b(Br,"constructor",{value:tr,configurable:!0}),b(tr,"constructor",{value:He,configurable:!0}),He.displayName=F(tr,D,"GeneratorFunction"),t.isGeneratorFunction=function(oe){var G=typeof oe=="function"&&oe.constructor;return!!G&&(G===He||(G.displayName||G.name)==="GeneratorFunction")},t.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,tr):(oe.__proto__=tr,F(oe,D,"GeneratorFunction")),oe.prototype=Object.create(Br),oe},t.awrap=function(oe){return{__await:oe}},Ht(zt.prototype),F(zt.prototype,S,function(){return this}),t.AsyncIterator=zt,t.async=function(oe,G,z,Ee,Ce){Ce===void 0&&(Ce=Promise);var Pe=new zt(N(oe,G,z,Ee),Ce);return t.isGeneratorFunction(G)?Pe:Pe.next().then(function(ir){return ir.done?ir.value:Pe.next()})},Ht(Br),F(Br,D,"Generator"),F(Br,g,function(){return this}),F(Br,"toString",function(){return"[object Generator]"}),t.keys=function(oe){var G=Object(oe),z=[];for(var Ee in G)z.push(Ee);return z.reverse(),function Ce(){for(;z.length;){var Pe=z.pop();if(Pe in G)return Ce.value=Pe,Ce.done=!1,Ce}return Ce.done=!0,Ce}},t.values=sn,vn.prototype={constructor:vn,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ln),!G)for(var z in this)z.charAt(0)==="t"&&p.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=e)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var z=this;function Ee(Kr,Xr){return ir.type="throw",ir.arg=G,z.next=Kr,Xr&&(z.method="next",z.arg=e),!!Xr}for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Pe=this.tryEntries[Ce],ir=Pe.completion;if(Pe.tryLoc==="root")return Ee("end");if(Pe.tryLoc<=this.prev){var dr=p.call(Pe,"catchLoc"),_r=p.call(Pe,"finallyLoc");if(dr&&_r){if(this.prev<Pe.catchLoc)return Ee(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return Ee(Pe.finallyLoc)}else if(dr){if(this.prev<Pe.catchLoc)return Ee(Pe.catchLoc,!0)}else{if(!_r)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return Ee(Pe.finallyLoc)}}}},abrupt:function(G,z){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ce=this.tryEntries[Ee];if(Ce.tryLoc<=this.prev&&p.call(Ce,"finallyLoc")&&this.prev<Ce.finallyLoc){var Pe=Ce;break}}Pe&&(G==="break"||G==="continue")&&Pe.tryLoc<=z&&z<=Pe.finallyLoc&&(Pe=null);var ir=Pe?Pe.completion:{};return ir.type=G,ir.arg=z,Pe?(this.method="next",this.next=Pe.finallyLoc,Fe):this.complete(ir)},complete:function(G,z){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&z&&(this.next=z),Fe},finish:function(G){for(var z=this.tryEntries.length-1;z>=0;--z){var Ee=this.tryEntries[z];if(Ee.finallyLoc===G)return this.complete(Ee.completion,Ee.afterLoc),ln(Ee),Fe}},catch:function(G){for(var z=this.tryEntries.length-1;z>=0;--z){var Ee=this.tryEntries[z];if(Ee.tryLoc===G){var Ce=Ee.completion;if(Ce.type==="throw"){var Pe=Ce.arg;ln(Ee)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(G,z,Ee){return this.delegate={iterator:sn(G),resultName:z,nextLoc:Ee},this.method==="next"&&(this.arg=e),Fe}},t}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),n.push.apply(n,p)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(p){R(e,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(n,p))})}return e}function R(e,t,n){return t=V(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){var t=X(e,"string");return U(t)=="symbol"?t:String(t)}function X(e,t){if(U(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var p=n.call(e,t||"default");if(U(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w(e,t,n,p,b,d,g){try{var S=e[d](g),D=S.value}catch(F){n(F);return}S.done?t(D):Promise.resolve(D).then(p,b)}function L(e){return function(){var t=this,n=arguments;return new Promise(function(p,b){var d=e.apply(t,n);function g(D){w(d,p,b,g,S,"next",D)}function S(D){w(d,p,b,g,S,"throw",D)}g(void 0)})}}function te(e,t){return pe(e)||be(e,t)||le(e,t)||ye()}function ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function be(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var p,b,d,g,S=[],D=!0,F=!1;try{if(d=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;D=!1}else for(;!(D=(p=d.call(n)).done)&&(S.push(p.value),S.length!==t);D=!0);}catch(N){F=!0,b=N}finally{try{if(!D&&n.return!=null&&(g=n.return(),Object(g)!==g))return}finally{if(F)throw b}}return S}}function pe(e){if(Array.isArray(e))return e}function Je(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=le(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(F){throw F},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,g=!1,S;return{s:function(){n=n.call(e)},n:function(){var F=n.next();return d=F.done,F},e:function(F){g=!0,S=F},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(g)throw S}}}}function er(e){return M(e)||x(e)||le(e)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){if(e){if(typeof e=="string")return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}function x(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,p=new Array(t);n<t;n++)p[n]=e[n];return p}var _=ce.error,me=ce.warn;function de(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var xe=33984,je=35048,De=34962,Ke=34963,We=35345,nr=35982,hr=36386,ar=35713,rr=35714,ur=35632,pr=35633,ae=35981,r=35718,i=35721,f=35971,E=35382,l=35396,o=35398,a=35392,s=35395,v=5126,T=35664,P=35665,B=35666,I=5124,j=35667,H=35668,Y=35669,re=35670,Z=35671,ie=35672,ue=35673,Q=35674,se=35675,Me=35676,Xe=35678,Oe=35680,Le=35679,Ae=35682,ge=35685,Ye=35686,ke=35687,ze=35688,Ve=35689,qe=35690,Re=36289,Ie=36292,lr=36293,or=5125,br=36294,Er=36295,xr=36296,Rr=36298,Fr=36299,jr=36300,Jr=36303,$r=36306,et=36307,fr=36308,qt=36311,rt=3553,tt=34067,ht=32879,nt=35866,_e={};function Ft(e,t){return _e[t].bindPoint}function Qt(e,t){return function(n){e.uniform1f(t,n)}}function Zt(e,t){return function(n){e.uniform1fv(t,n)}}function Jt(e,t){return function(n){e.uniform2fv(t,n)}}function $t(e,t){return function(n){e.uniform3fv(t,n)}}function en(e,t){return function(n){e.uniform4fv(t,n)}}function Ct(e,t){return function(n){e.uniform1i(t,n)}}function Mt(e,t){return function(n){e.uniform1iv(t,n)}}function Bt(e,t){return function(n){e.uniform2iv(t,n)}}function It(e,t){return function(n){e.uniform3iv(t,n)}}function Dt(e,t){return function(n){e.uniform4iv(t,n)}}function Cr(e,t){return function(n){e.uniform1ui(t,n)}}function $e(e,t){return function(n){e.uniform1uiv(t,n)}}function at(e,t){return function(n){e.uniform2uiv(t,n)}}function kr(e,t){return function(n){e.uniform3uiv(t,n)}}function ot(e,t){return function(n){e.uniform4uiv(t,n)}}function Ir(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function vr(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Ot(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Nt(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Ut(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Pr(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Hr(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function pt(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function rn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function mr(e,t,n,p){var b=Ft(e,t);return k.isWebGL2(e)?function(d){var g,S;!d||ce.isTexture(e,d)?(g=d,S=null):(g=d.texture,S=d.sampler),e.uniform1i(p,n),e.activeTexture(xe+n),e.bindTexture(b,g),e.bindSampler(n,S)}:function(d){e.uniform1i(p,n),e.activeTexture(xe+n),e.bindTexture(b,d)}}function yr(e,t,n,p,b){for(var d=Ft(e,t),g=new Int32Array(b),S=0;S<b;++S)g[S]=n+S;return k.isWebGL2(e)?function(D){e.uniform1iv(p,g),D.forEach(function(F,N){e.activeTexture(xe+g[N]);var ne,ve;!F||ce.isTexture(e,F)?(ne=F,ve=null):(ne=F.texture,ve=F.sampler),e.bindSampler(n,ve),e.bindTexture(d,ne)})}:function(D){e.uniform1iv(p,g),D.forEach(function(F,N){e.activeTexture(xe+g[N]),e.bindTexture(d,F)})}}_e[v]={Type:Float32Array,size:4,setter:Qt,arraySetter:Zt},_e[T]={Type:Float32Array,size:8,setter:Jt,cols:2},_e[P]={Type:Float32Array,size:12,setter:$t,cols:3},_e[B]={Type:Float32Array,size:16,setter:en,cols:4},_e[I]={Type:Int32Array,size:4,setter:Ct,arraySetter:Mt},_e[j]={Type:Int32Array,size:8,setter:Bt,cols:2},_e[H]={Type:Int32Array,size:12,setter:It,cols:3},_e[Y]={Type:Int32Array,size:16,setter:Dt,cols:4},_e[or]={Type:Uint32Array,size:4,setter:Cr,arraySetter:$e},_e[br]={Type:Uint32Array,size:8,setter:at,cols:2},_e[Er]={Type:Uint32Array,size:12,setter:kr,cols:3},_e[xr]={Type:Uint32Array,size:16,setter:ot,cols:4},_e[re]={Type:Uint32Array,size:4,setter:Ct,arraySetter:Mt},_e[Z]={Type:Uint32Array,size:8,setter:Bt,cols:2},_e[ie]={Type:Uint32Array,size:12,setter:It,cols:3},_e[ue]={Type:Uint32Array,size:16,setter:Dt,cols:4},_e[Q]={Type:Float32Array,size:32,setter:Ir,rows:2,cols:2},_e[se]={Type:Float32Array,size:48,setter:vr,rows:3,cols:3},_e[Me]={Type:Float32Array,size:64,setter:Ot,rows:4,cols:4},_e[ge]={Type:Float32Array,size:32,setter:Nt,rows:2,cols:3},_e[Ye]={Type:Float32Array,size:32,setter:Pr,rows:2,cols:4},_e[ke]={Type:Float32Array,size:48,setter:Ut,rows:3,cols:2},_e[ze]={Type:Float32Array,size:48,setter:pt,rows:3,cols:4},_e[Ve]={Type:Float32Array,size:64,setter:Hr,rows:4,cols:2},_e[qe]={Type:Float32Array,size:64,setter:rn,rows:4,cols:3},_e[Xe]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},_e[Oe]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},_e[Le]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:ht},_e[Ae]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},_e[Re]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:nt},_e[Ie]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:nt},_e[lr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},_e[Rr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},_e[Fr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:ht},_e[jr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},_e[Jr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:nt},_e[$r]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},_e[et]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:ht},_e[fr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},_e[qt]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:nt};function it(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(De,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||v,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Ar(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(De,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||I,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Sr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(De,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||or,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Dr(e,t,n){var p=n.size,b=n.count;return function(d){e.bindBuffer(De,d.buffer);for(var g=d.size||d.numComponents||p,S=g/b,D=d.type||v,F=_e[D],N=F.size*g,ne=d.normalize||!1,ve=d.offset||0,he=N/b,Se=0;Se<b;++Se)e.enableVertexAttribArray(t+Se),e.vertexAttribPointer(t+Se,S,D,ne,N,ve+he*Se),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+Se,d.divisor||0)}}var Ze={};Ze[v]={size:4,setter:it},Ze[T]={size:8,setter:it},Ze[P]={size:12,setter:it},Ze[B]={size:16,setter:it},Ze[I]={size:4,setter:Ar},Ze[j]={size:8,setter:Ar},Ze[H]={size:12,setter:Ar},Ze[Y]={size:16,setter:Ar},Ze[or]={size:4,setter:Sr},Ze[br]={size:8,setter:Sr},Ze[Er]={size:12,setter:Sr},Ze[xr]={size:16,setter:Sr},Ze[re]={size:4,setter:Ar},Ze[Z]={size:8,setter:Ar},Ze[ie]={size:12,setter:Ar},Ze[ue]={size:16,setter:Ar},Ze[Q]={size:4,setter:Dr,count:2},Ze[se]={size:9,setter:Dr,count:3},Ze[Me]={size:16,setter:Dr,count:4};var Or=/ERROR:\s*\d+:(\d+)/gi;function Mr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=er(t.matchAll(Or)),b=new Map(p.map(function(d,g){var S=parseInt(d[1]),D=p[g+1],F=D?D.index:t.length,N=t.substring(d.index,F);return[S-1,N]}));return e.split(`
`).map(function(d,g){var S=b.get(g);return"".concat(g+1+n,": ").concat(d).concat(S?`

^^^ `.concat(S):"")}).join(`
`)}var bt=/^[ \t]*\n/;function sr(e){var t=0;return bt.test(e)&&(t=1,e=e.replace(bt,"")),{lineOffset:t,shaderSource:e}}function ut(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function ft(e,t,n,p){p=p||_;var b=e.getShaderParameter(n,ar);if(!b){var d=e.getShaderInfoLog(n),g=sr(e.getShaderSource(n)),S=g.lineOffset,D=g.shaderSource,F="".concat(Mr(D,d,S),`
Error compiling `).concat(k.glEnumToString(e,t),": ").concat(d);return p(F),F}return""}function Nr(e,t,n){var p,b,d;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){var g=e;n=g.errorCallback,e=g.attribLocations,p=g.transformFeedbackVaryings,b=g.transformFeedbackMode,d=g.callback}var S=n||_,D=[],F={errorCallback:function(ve){D.push(ve);for(var he=arguments.length,Se=new Array(he>1?he-1:0),Be=1;Be<he;Be++)Se[Be-1]=arguments[Be];S.apply(void 0,[ve].concat(Se))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:d,errors:D};{var N={};Array.isArray(e)?e.forEach(function(ne,ve){N[ne]=t?t[ve]:ve}):N=e||{},F.attribLocations=N}return F}var Ur=["VERTEX_SHADER","FRAGMENT_SHADER"];function Lt(e,t){if(t.indexOf("frag")>=0)return ur;if(t.indexOf("vert")>=0)return pr}function Gt(e,t,n){var p=e.getAttachedShaders(t),b=Je(p),d;try{for(b.s();!(d=b.n()).done;){var g=d.value;n.has(g)&&e.deleteShader(g)}}catch(S){b.e(S)}finally{b.f()}e.deleteProgram(t)}var jt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(n){return setTimeout(n,t)})};function kt(e,t,n){for(var p=e.createProgram(),b=Nr(n),d=b.attribLocations,g=b.transformFeedbackVaryings,S=b.transformFeedbackMode,D=0;D<t.length;++D){var F=t[D];if(typeof F=="string"){var N=de(F),ne=N?N.text:F,ve=e[Ur[D]];N&&N.type&&(ve=Lt(e,N.type)||ve),F=e.createShader(ve),e.shaderSource(F,sr(ne).shaderSource),e.compileShader(F),e.attachShader(p,F)}}Object.entries(d).forEach(function(Se){var Be=te(Se,2),Fe=Be[0],Ue=Be[1];return e.bindAttribLocation(p,Ue,Fe)});{var he=g;he&&(he.attribs&&(he=he.attribs),Array.isArray(he)||(he=Object.keys(he)),e.transformFeedbackVaryings(p,he,S||ae))}return e.linkProgram(p),p}function zr(e,t,n,p,b){var d=Nr(n,p,b),g=new Set(t),S=kt(e,t,d);function D(F,N){var ne=dt(F,N,d.errorCallback);return ne&&Gt(F,N,g),ne}if(d.callback){Et(e,S).then(function(){var F=D(e,S);d.callback(F,F?void 0:S)});return}return D(e,S)?void 0:S}function Lr(e){return function(t,n){for(var p=arguments.length,b=new Array(p>2?p-2:0),d=2;d<p;d++)b[d-2]=arguments[d];return new Promise(function(g,S){var D=Nr.apply(void 0,b);D.callback=function(F,N){F?S(F):g(N)},e(t,n,D)})}}u.createProgramAsync=Lr(zr),u.createProgramInfoAsync=Lr(c);function Et(e,t){return Tt.apply(this,arguments)}function Tt(){return Tt=L(q().mark(function e(t,n){var p,b,d;return q().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,F){return D.getProgramParameter(F,p.COMPLETION_STATUS_KHR)}:function(){return!0},d=0;case 3:return S.next=5,jt(d);case 5:d=16.666666666666668;case 6:if(!b(t,n)){S.next=3;break}case 7:case"end":return S.stop()}},e)})),Tt.apply(this,arguments)}function Vr(e,t){return ct.apply(this,arguments)}function ct(){return ct=L(q().mark(function e(t,n){var p,b,d;return q().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:p=0,b=Object.values(n);case 1:if(!(p<b.length)){S.next=8;break}return d=b[p],S.next=5,Et(t,d);case 5:p++,S.next=1;break;case 8:case"end":return S.stop()}},e)})),ct.apply(this,arguments)}function dt(e,t,n){n=n||_;var p=e.getProgramParameter(t,rr);if(!p){var b=e.getProgramInfoLog(t);n("Error in program linking: ".concat(b));var d=e.getAttachedShaders(t),g=d.map(function(S){return ft(e,e.getShaderParameter(S,e.SHADER_TYPE),S,n)});return"".concat(b,`
`).concat(g.filter(function(S){return S}).join(`
`))}}function At(e,t,n,p,b){var d=Nr(n,p,b),g=[],S=Je(t),D;try{for(S.s();!(D=S.n()).done;){var F=D.value,N=de(F);if(!N)return ut(d,"unknown script element: ".concat(F));g.push(N.text)}}catch(ne){S.e(ne)}finally{S.f()}return zr(e,g,d)}function _t(e,t,n,p,b){return zr(e,t,n,p,b)}function Pt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var tn=/(\.|\[|]|\w+)/g,nn=function(t){return t>="0"&&t<="9"};function Yr(e,t,n,p){for(var b=e.split(tn).filter(function(Se){return Se!==""}),d=0,g="";;){var S=b[d++];g+=S;var D=nn(S[0]),F=D?parseInt(S):S;D&&(g+=b[d++]);var N=d===b.length;if(N){n[F]=t;break}else{var ne=b[d++],ve=ne==="[",he=n[F]||(ve?[]:{});n[F]=he,n=he,p[g]=p[g]||function(Se){return function(Be){Xt(Se,Be)}}(he),g+=ne}}}function Wr(e,t){var n=0;function p(ve,he,Se){var Be=he.name.endsWith("[0]"),Fe=he.type,Ue=_e[Fe];if(!Ue)throw new Error("unknown type: 0x".concat(Fe.toString(16)));var He;if(Ue.bindPoint){var tr=n;n+=he.size,Be?He=Ue.arraySetter(e,Fe,tr,Se,he.size):He=Ue.setter(e,Fe,tr,Se,he.size)}else Ue.arraySetter&&Be?He=Ue.arraySetter(e,Se):He=Ue.setter(e,Se);return He.location=Se,He}for(var b={},d={},g=e.getProgramParameter(t,r),S=0;S<g;++S){var D=e.getActiveUniform(t,S);if(!Pt(D)){var F=D.name;F.endsWith("[0]")&&(F=F.substr(0,F.length-3));var N=e.getUniformLocation(t,D.name);if(N){var ne=p(t,D,N);b[F]=ne,Yr(F,ne,d,b)}}}return b}function lt(e,t){for(var n={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var d=e.getTransformFeedbackVarying(t,b);n[d.name]={index:b,type:d.type,size:d.size}}return n}function vt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(var p in n){var b=t[p];if(b){var d=n[p];d.offset?e.bindBufferRange(nr,b.index,d.buffer,d.offset,d.size):e.bindBufferBase(nr,b.index,d.buffer)}}}function St(e,t,n){var p=e.createTransformFeedback();return e.bindTransformFeedback(hr,p),e.useProgram(t.program),vt(e,t,n),e.bindTransformFeedback(hr,null),p}function Gr(e,t){for(var n=e.getProgramParameter(t,r),p=[],b=[],d=0;d<n;++d){b.push(d),p.push({});var g=e.getActiveUniform(t,d);p[d].name=g.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ve){var he=ve[0],Se=ve[1];e.getActiveUniforms(t,b,e[he]).forEach(function(Be,Fe){p[Fe][Se]=Be})});for(var S={},D=e.getProgramParameter(t,E),F=0;F<D;++F){var N=e.getActiveUniformBlockName(t,F),ne={index:e.getUniformBlockIndex(t,N),usedByVertexShader:e.getActiveUniformBlockParameter(t,F,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,F,o),size:e.getActiveUniformBlockParameter(t,F,a),uniformIndices:e.getActiveUniformBlockParameter(t,F,s)};ne.used=ne.usedByVertexShader||ne.usedByFragmentShader,S[N]=ne}return{blockSpecs:S,uniformData:p}}var Vt=/\[\d+\]\.$/,an=function(t,n){return((t+(n-1))/n|0)*n};function on(e,t,n,p){if(t||n){p=p||1;var b=e.length,d=b/4;return function(g){for(var S=0,D=0,F=0;F<d;++F){for(var N=0;N<p;++N)e[S++]=g[D++];S+=4-p}}}else return function(g){g.length?e.set(g):e[0]=g}}function wt(e,t,n,p){var b=n.blockSpecs,d=n.uniformData,g=b[p];if(!g)return me("no uniform block object named:",p),{name:p,uniforms:{}};var S=new ArrayBuffer(g.size),D=e.createBuffer(),F=g.index;e.bindBuffer(We,D),e.uniformBlockBinding(t,g.index,F);var N=p+".";Vt.test(N)&&(N=N.replace(Vt,"."));var ne={},ve={},he={};return g.uniformIndices.forEach(function(Se){var Be=d[Se],Fe=Be.name;Fe.startsWith(N)&&(Fe=Fe.substr(N.length));var Ue=Fe.endsWith("[0]");Ue&&(Fe=Fe.substr(0,Fe.length-3));var He=_e[Be.type],tr=He.Type,cr=Ue?an(He.size,16)*Be.size:He.size*Be.size,Tr=new tr(S,Be.offset,cr/tr.BYTES_PER_ELEMENT);ne[Fe]=Tr;var gr=on(Tr,Ue,He.rows,He.cols);ve[Fe]=gr,Yr(Fe,gr,he,ve)}),{name:p,array:S,asFloat:new Float32Array(S),buffer:D,uniforms:ne,setters:ve}}function xt(e,t,n){return wt(e,t.program,t.uniformBlockSpec,n)}function st(e,t,n){var p=t.uniformBlockSpec||t,b=p.blockSpecs[n.name];if(b){var d=b.index;return e.bindBufferRange(We,d,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Wt(e,t,n){st(e,t,n)&&e.bufferData(We,n.array,je)}function un(e,t){var n=e.setters;for(var p in t){var b=n[p];if(b){var d=t[p];b(d)}}}function Xt(e,t){for(var n in t){var p=e[n];typeof p=="function"?p(t[n]):Xt(e[n],t[n])}}function mt(e){for(var t=e.uniformSetters||e,n=arguments.length<=1?0:arguments.length-1,p=0;p<n;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var d=b.length,g=0;g<d;++g)mt(t,b[g]);else for(var S in b){var D=t[S];D&&D(b[S])}}}u.setUniformsAndBindTextures=mt;function gt(e,t){for(var n={},p=e.getProgramParameter(t,i),b=0;b<p;++b){var d=e.getActiveAttrib(t,b);if(!Pt(d)){var g=e.getAttribLocation(t,d.name),S=Ze[d.type],D=S.setter(e,g,S);D.location=g,n[d.name]=D}}return n}function Rt(e,t){for(var n in t){var p=e[n];p&&p(t[n])}}function fn(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Rt(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Ke,n.indices))}function yt(e,t){var n=Wr(e,t),p=gt(e,t),b={program:t,uniformSetters:n,attribSetters:p};return k.isWebGL2(e)&&(b.uniformBlockSpec=Gr(e,t),b.transformFeedbackInfo=lt(e,t)),b}var cn=/\s|{|}|;/;function c(e,t,n,p,b){var d=Nr(n,p,b),g=[];if(t=t.map(function(F){if(!cn.test(F)){var N=de(F);if(N)F=N.text;else{var ne="no element with id: ".concat(F);d.errorCallback(ne),g.push(ne)}}return F}),g.length)return ut(d,"");var S=d.callback;S&&(d.callback=function(F,N){S(F,F?void 0:yt(e,N))});var D=_t(e,t,d);return D?yt(e,D):null}function m(e,t,n,p,b){for(var d=0,g=Object.entries(t);d<g.length;d++){var S=te(g[d],2),D=S[0],F=S[1],N=Te({},b),ne=n[D];Array.isArray(ne)||Object.assign(N,ne);var ve=dt(e,F,N.errorCallback);if(ve){for(var he=0,Se=Object.values(t);he<Se.length;he++){var Be=Se[he],Fe=e.getAttachedShaders(Be);e.deleteProgram(Be);var Ue=Je(Fe),He;try{for(Ue.s();!(He=Ue.n()).done;){var tr=He.value;p.has(tr)||e.deleteShader(tr)}}catch(cr){Ue.e(cr)}finally{Ue.f()}}return ve}}}function h(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(g){var S=te(g,2),D=S[0],F=S[1],N=Te({},n),ne=Array.isArray(F)?F:F.shaders;return Array.isArray(F)||Object.assign(N,F),ne.forEach(p.add,p),[D,kt(e,ne,N)]}));if(n.callback){Vr(e,b).then(function(){var g=m(e,b,t,p,n);n.callback(g,g?void 0:b)});return}var d=m(e,b,t,p,n);return d?void 0:b}function A(e,t,n){n=Nr(n);function p(g,S){return Object.fromEntries(Object.entries(S).map(function(D){var F=te(D,2),N=F[0],ne=F[1];return[N,yt(g,ne)]}))}var b=n.callback;b&&(n.callback=function(g,S){b(g,g?void 0:p(e,S))});var d=h(e,t,n);if(!(b||!d))return p(e,d)}u.createProgramsAsync=Lr(h),u.createProgramInfosAsync=Lr(A)},"./src/textures.js":(Ge,u,W)=>{function U(c){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},U(c)}u.__esModule=!0,u.canFilter=jt,u.canGenerateMipmap=Gt,u.createSampler=Pt,u.createSamplers=tn,u.createTexture=Rt,u.createTextures=cn,u.getBytesPerElementForInternalFormat=Nr,u.getFormatAndTypeForInternalFormat=Ur,u.getNumComponentsForFormat=kt,u.loadTextureFromUrl=Wt,u.resizeTexture=fn,u.setDefaultTextureColor=Et,u.setEmptyTexture=gt,u.setSamplerParameters=_t,u.setTextureDefaults_=Tt,u.setTextureFilteringForSize=Yr,u.setTextureFromArray=mt,u.setTextureFromElement=St,u.setTextureParameters=At;var k=q(W("./src/utils.js")),ce=q(W("./src/typedarrays.js")),we=q(W("./src/helper.js"));function $(c){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return($=function(e){return e?h:m})(c)}function q(c,m){if(!m&&c&&c.__esModule)return c;if(c===null||U(c)!="object"&&typeof c!="function")return{default:c};var h=$(m);if(h&&h.has(c))return h.get(c);var A={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var n=e?Object.getOwnPropertyDescriptor(c,t):null;n&&(n.get||n.set)?Object.defineProperty(A,t,n):A[t]=c[t]}return A.default=c,h&&h.set(c,A),A}var ee={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Te=ce.isArrayBuffer,R=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),V=6406,X=6407,w=6408,L=6409,te=6410,ye=6402,be=34041,pe=33071,Je=9728,er=9729,Qe=3553,le=34067,x=32879,M=35866,O=34069,_=34070,me=34071,de=34072,xe=34073,je=34074,De=10241,Ke=10240,We=10242,nr=10243,hr=32882,ar=33082,rr=33083,ur=33084,pr=33085,ae=34892,r=34893,i=3317,f=3314,E=32878,l=3316,o=3315,a=32877,s=37443,v=37441,T=37440,P=33321,B=36756,I=33325,j=33326,H=33330,Y=33329,re=33338,Z=33337,ie=33340,ue=33339,Q=33323,se=36757,Me=33327,Xe=33328,Oe=33336,Le=33335,Ae=33332,ge=33331,Ye=33334,ke=33333,ze=32849,Ve=35905,qe=36194,Re=36758,Ie=35898,lr=35901,or=34843,br=34837,Er=36221,xr=36239,Rr=36215,Fr=36233,jr=36209,Jr=36227,$r=32856,et=35907,fr=36759,qt=32855,rt=32854,tt=32857,ht=34842,nt=34836,_e=36220,Ft=36238,Qt=36975,Zt=36214,Jt=36232,$t=36226,en=36208,Ct=33189,Mt=33190,Bt=36012,It=36013,Dt=35056,Cr=5120,$e=5121,at=5122,kr=5123,ot=5124,Ir=5125,vr=5126,Ot=32819,Nt=32820,Ut=33635,Pr=5131,Hr=36193,pt=33640,rn=35899,mr=35902,yr=36269,it=34042,Ar=33319,Sr=33320,Dr=6403,Ze=36244,Or=36248,Mr=36249,bt={};{var sr=bt;sr[V]={numColorComponents:1},sr[L]={numColorComponents:1},sr[te]={numColorComponents:2},sr[X]={numColorComponents:3},sr[w]={numColorComponents:4},sr[Dr]={numColorComponents:1},sr[Ze]={numColorComponents:1},sr[Ar]={numColorComponents:2},sr[Sr]={numColorComponents:2},sr[X]={numColorComponents:3},sr[Or]={numColorComponents:3},sr[w]={numColorComponents:4},sr[Mr]={numColorComponents:4},sr[ye]={numColorComponents:1},sr[be]={numColorComponents:2}}var ut;function ft(c){if(!ut){var m={};m[V]={textureFormat:V,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[$e,Pr,Hr,vr]},m[L]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[$e,Pr,Hr,vr]},m[te]={textureFormat:te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[$e,Pr,Hr,vr]},m[X]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[$e,Pr,Hr,vr,Ut]},m[w]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[$e,Pr,Hr,vr,Ot,Nt]},m[ye]={textureFormat:ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ir,kr]},m[P]={textureFormat:Dr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[$e]},m[B]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Cr]},m[I]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[vr,Pr]},m[j]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[vr]},m[H]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[$e]},m[Y]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Cr]},m[Ae]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[kr]},m[ge]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[at]},m[Ye]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ir]},m[ke]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ot]},m[Q]={textureFormat:Ar,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[$e]},m[se]={textureFormat:Ar,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Cr]},m[Me]={textureFormat:Ar,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[vr,Pr]},m[Xe]={textureFormat:Ar,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[vr]},m[Oe]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[$e]},m[Le]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Cr]},m[re]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kr]},m[Z]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[at]},m[ie]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ir]},m[ue]={textureFormat:Sr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ot]},m[ze]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[$e]},m[Ve]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[$e]},m[qe]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[$e,Ut]},m[Re]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Cr]},m[Ie]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[vr,Pr,rn]},m[lr]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[vr,Pr,mr]},m[or]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[vr,Pr]},m[br]={textureFormat:X,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[vr]},m[Er]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[$e]},m[xr]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Cr]},m[Rr]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[kr]},m[Fr]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[at]},m[jr]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ir]},m[Jr]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ot]},m[$r]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[$e]},m[et]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[$e]},m[fr]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Cr]},m[qt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[$e,Nt,pt]},m[rt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[$e,Ot]},m[tt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[pt]},m[ht]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[vr,Pr]},m[nt]={textureFormat:w,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[vr]},m[_e]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$e]},m[Ft]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Cr]},m[Qt]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pt]},m[Zt]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[kr]},m[Jt]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[at]},m[$t]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ot]},m[en]={textureFormat:Mr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ir]},m[Ct]={textureFormat:ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[kr,Ir]},m[Mt]={textureFormat:ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ir]},m[Bt]={textureFormat:ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vr]},m[Dt]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[it]},m[It]={textureFormat:be,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},Object.keys(m).forEach(function(h){var A=m[h];A.bytesPerElementMap={},A.bytesPerElement.forEach(function(e,t){var n=A.type[t];A.bytesPerElementMap[n]=e})}),ut=m}return ut[c]}function Nr(c,m){var h=ft(c);if(!h)throw"unknown internal format";var A=h.bytesPerElementMap[m];if(A===void 0)throw"unknown internal format";return A}function Ur(c){var m=ft(c);if(!m)throw"unknown internal format";return{format:m.textureFormat,type:m.type[0]}}function Lt(c){return(c&c-1)===0}function Gt(c,m,h,A){if(!k.isWebGL2(c))return Lt(m)&&Lt(h);var e=ft(A);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function jt(c){var m=ft(c);if(!m)throw"unknown internal format";return m.textureFilterable}function kt(c){var m=bt[c];if(!m)throw"unknown format: "+c;return m.numColorComponents}function zr(c,m,h){return Te(m)?ce.getGLTypeForTypedArray(m):h||$e}function Lr(c,m,h,A,e){if(e%1!==0)throw"can't guess dimensions";if(!h&&!A){var t=Math.sqrt(e/(m===le?6:1));t%1===0?(h=t,A=t):(h=e,A=1)}else if(A){if(!h&&(h=e/A,h%1))throw"can't guess dimensions"}else if(A=e/h,A%1)throw"can't guess dimensions";return{width:h,height:A}}function Et(c){ee.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Tt(c){we.copyExistingProperties(c,ee),c.textureColor&&Et(c.textureColor)}function Vr(c,m){m.colorspaceConversion!==void 0&&c.pixelStorei(s,m.colorspaceConversion),m.premultiplyAlpha!==void 0&&c.pixelStorei(v,m.premultiplyAlpha),m.flipY!==void 0&&c.pixelStorei(T,m.flipY)}function ct(c){c.pixelStorei(i,4),k.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(a,0))}function dt(c,m,h,A){A.minMag&&(h.call(c,m,De,A.minMag),h.call(c,m,Ke,A.minMag)),A.min&&h.call(c,m,De,A.min),A.mag&&h.call(c,m,Ke,A.mag),A.wrap&&(h.call(c,m,We,A.wrap),h.call(c,m,nr,A.wrap),(m===x||we.isSampler(c,m))&&h.call(c,m,hr,A.wrap)),A.wrapR&&h.call(c,m,hr,A.wrapR),A.wrapS&&h.call(c,m,We,A.wrapS),A.wrapT&&h.call(c,m,nr,A.wrapT),A.minLod!==void 0&&h.call(c,m,ar,A.minLod),A.maxLod!==void 0&&h.call(c,m,rr,A.maxLod),A.baseLevel!==void 0&&h.call(c,m,ur,A.baseLevel),A.maxLevel!==void 0&&h.call(c,m,pr,A.maxLevel),A.compareFunc!==void 0&&h.call(c,m,r,A.compareFunc),A.compareMode!==void 0&&h.call(c,m,ae,A.compareMode)}function At(c,m,h){var A=h.target||Qe;c.bindTexture(A,m),dt(c,A,c.texParameteri,h)}function _t(c,m,h){dt(c,m,c.samplerParameteri,h)}function Pt(c,m){var h=c.createSampler();return _t(c,h,m),h}function tn(c,m){var h={};return Object.keys(m).forEach(function(A){h[A]=Pt(c,m[A])}),h}function nn(c){return c=c||ee.textureColor,Te(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Yr(c,m,h,A,e,t){h=h||ee.textureOptions,t=t||w;var n=h.target||Qe;if(A=A||h.width,e=e||h.height,c.bindTexture(n,m),Gt(c,A,e,t))c.generateMipmap(n);else{var p=jt(t)?er:Je;c.texParameteri(n,De,p),c.texParameteri(n,Ke,p),c.texParameteri(n,We,pe),c.texParameteri(n,nr,pe)}}function Wr(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function lt(c,m){return m=m||{},m.cubeFaceOrder||[O,_,me,de,xe,je]}function vt(c,m){var h=lt(c,m),A=h.map(function(e,t){return{face:e,ndx:t}});return A.sort(function(e,t){return e.face-t.face}),A}function St(c,m,h,A){A=A||ee.textureOptions;var e=A.target||Qe,t=A.level||0,n=h.width,p=h.height,b=A.internalFormat||A.format||w,d=Ur(b),g=A.format||d.format,S=A.type||d.type;if(Vr(c,A),c.bindTexture(e,m),e===le){var D=h.width,F=h.height,N,ne;if(D/6===F)N=F,ne=[0,0,1,0,2,0,3,0,4,0,5,0];else if(F/6===D)N=D,ne=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===F/2)N=D/3,ne=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===F/3)N=D/2,ne=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(h.src?h.src:h.nodeName);var ve=R();ve?(ve.canvas.width=N,ve.canvas.height=N,n=N,p=N,vt(c,A).forEach(function(Tr){var gr=ne[Tr.ndx*2+0]*N,Br=ne[Tr.ndx*2+1]*N;ve.drawImage(h,gr,Br,N,N,0,0,N,N),c.texImage2D(Tr.face,t,b,g,S,ve.canvas)}),ve.canvas.width=1,ve.canvas.height=1):typeof createImageBitmap<"u"&&(n=N,p=N,vt(c,A).forEach(function(Tr){var gr=ne[Tr.ndx*2+0]*N,Br=ne[Tr.ndx*2+1]*N;c.texImage2D(Tr.face,t,b,N,N,0,g,S,null),createImageBitmap(h,gr,Br,N,N,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(Ht){Vr(c,A),c.bindTexture(e,m),c.texImage2D(Tr.face,t,b,g,S,Ht),Wr(A)&&Yr(c,m,A,n,p,b)})}))}else if(e===x||e===M){var he=Math.min(h.width,h.height),Se=Math.max(h.width,h.height),Be=Se/he;if(Be%1!==0)throw"can not compute 3D dimensions of element";var Fe=h.width===Se?1:0,Ue=h.height===Se?1:0;c.pixelStorei(i,1),c.pixelStorei(f,h.width),c.pixelStorei(E,0),c.pixelStorei(a,0),c.texImage3D(e,t,b,he,he,he,0,g,S,null);for(var He=0;He<Be;++He){var tr=He*he*Fe,cr=He*he*Ue;c.pixelStorei(l,tr),c.pixelStorei(o,cr),c.texSubImage3D(e,t,0,0,He,he,he,1,g,S,h)}ct(c)}else c.texImage2D(e,t,b,g,S,h);Wr(A)&&Yr(c,m,A,n,p,b),At(c,m,A)}function Gr(){}function Vt(c){if(typeof document<"u"){var m=document.createElement("a");return m.href=c,m.hostname===location.hostname&&m.port===location.port&&m.protocol===location.protocol}else{var h=new URL(location.href).origin,A=new URL(c,location.href).origin;return A===h}}function an(c,m){return m===void 0&&!Vt(c)?"anonymous":m}function on(c,m,h){h=h||Gr;var A;if(m=m!==void 0?m:ee.crossOrigin,m=an(c,m),typeof Image<"u"){A=new Image,m!==void 0&&(A.crossOrigin=m);var e=function(){A.removeEventListener("error",t),A.removeEventListener("load",n),A=null},t=function(){var D="couldn't load image: "+c;we.error(D),h(D,A),e()},n=function(){h(null,A),e()};return A.addEventListener("error",t),A.addEventListener("load",n),A.src=c,A}else if(typeof ImageBitmap<"u"){var p,b,d=function(){h(p,b)},g={};m&&(g.mode="cors"),fetch(c,g).then(function(S){if(!S.ok)throw S;return S.blob()}).then(function(S){return createImageBitmap(S,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(S){b=S,setTimeout(d)}).catch(function(S){p=S,setTimeout(d)}),A=null}return A}function wt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function xt(c,m,h){return wt(c)?(setTimeout(function(){h(null,c)}),c):on(c,m,h)}function st(c,m,h){h=h||ee.textureOptions;var A=h.target||Qe;if(c.bindTexture(A,m),h.color!==!1){var e=nn(h.color);if(A===le)for(var t=0;t<6;++t)c.texImage2D(O+t,0,w,1,1,0,w,$e,e);else A===x||A===M?c.texImage3D(A,0,w,1,1,1,0,w,$e,e):c.texImage2D(A,0,w,1,1,0,w,$e,e)}}function Wt(c,m,h,A){A=A||Gr,h=h||ee.textureOptions,st(c,m,h),h=Object.assign({},h);var e=xt(h.src,h.crossOrigin,function(t,n){t?A(t,m,n):(St(c,m,n,h),A(null,m,n))});return e}function un(c,m,h,A){A=A||Gr;var e=h.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=h.level||0,n=h.internalFormat||h.format||w,p=Ur(n),b=h.format||p.format,d=h.type||$e,g=h.target||Qe;if(g!==le)throw"target must be TEXTURE_CUBE_MAP";st(c,m,h),h=Object.assign({},h);var S=6,D=[],F=lt(c,h),N;function ne(ve){return function(he,Se){--S,he?D.push(he):Se.width!==Se.height?D.push("cubemap face img is not a square: "+Se.src):(Vr(c,h),c.bindTexture(g,m),S===5?lt().forEach(function(Be){c.texImage2D(Be,t,n,b,d,Se)}):c.texImage2D(ve,t,n,b,d,Se),Wr(h)&&c.generateMipmap(g)),S===0&&A(D.length?D:void 0,m,N)}}N=e.map(function(ve,he){return xt(ve,h.crossOrigin,ne(F[he]))})}function Xt(c,m,h,A){A=A||Gr;var e=h.src,t=h.internalFormat||h.format||w,n=Ur(t),p=h.format||n.format,b=h.type||$e,d=h.target||M;if(d!==x&&d!==M)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";st(c,m,h),h=Object.assign({},h);var g=e.length,S=[],D,F=h.level||0,N=h.width,ne=h.height,ve=e.length,he=!0;function Se(Be){return function(Fe,Ue){if(--g,Fe)S.push(Fe);else{if(Vr(c,h),c.bindTexture(d,m),he){he=!1,N=h.width||Ue.width,ne=h.height||Ue.height,c.texImage3D(d,F,t,N,ne,ve,0,p,b,null);for(var He=0;He<ve;++He)c.texSubImage3D(d,F,0,0,He,N,ne,1,p,b,Ue)}else{var tr=Ue,cr;(Ue.width!==N||Ue.height!==ne)&&(cr=R(),tr=cr.canvas,cr.canvas.width=N,cr.canvas.height=ne,cr.drawImage(Ue,0,0,N,ne)),c.texSubImage3D(d,F,0,0,Be,N,ne,1,p,b,tr),cr&&tr===cr.canvas&&(cr.canvas.width=0,cr.canvas.height=0)}Wr(h)&&c.generateMipmap(d)}g===0&&A(S.length?S:void 0,m,D)}}D=e.map(function(Be,Fe){return xt(Be,h.crossOrigin,Se(Fe))})}function mt(c,m,h,A){A=A||ee.textureOptions;var e=A.target||Qe;c.bindTexture(e,m);var t=A.width,n=A.height,p=A.depth,b=A.level||0,d=A.internalFormat||A.format||w,g=Ur(d),S=A.format||g.format,D=A.type||zr(c,h,g.type);if(Te(h))h instanceof Uint8ClampedArray&&(h=new Uint8Array(h.buffer));else{var F=ce.getTypedArrayTypeForGLType(D);h=new F(h)}var N=Nr(d,D),ne=h.byteLength/N;if(ne%1)throw"length wrong size for format: "+k.glEnumToString(c,S);var ve;if(e===x||e===M)if(!t&&!n&&!p){var he=Math.cbrt(ne);if(he%1!==0)throw"can't guess cube size of array of numElements: "+ne;t=he,n=he,p=he}else t&&(!n||!p)?(ve=Lr(c,e,n,p,ne/t),n=ve.width,p=ve.height):n&&(!t||!p)?(ve=Lr(c,e,t,p,ne/n),t=ve.width,p=ve.height):(ve=Lr(c,e,t,n,ne/p),t=ve.width,n=ve.height);else ve=Lr(c,e,t,n,ne),t=ve.width,n=ve.height;if(ct(c),c.pixelStorei(i,A.unpackAlignment||1),Vr(c,A),e===le){var Se=N/h.BYTES_PER_ELEMENT,Be=ne/6*Se;vt(c,A).forEach(function(Fe){var Ue=Be*Fe.ndx,He=h.subarray(Ue,Ue+Be);c.texImage2D(Fe.face,b,d,t,n,0,S,D,He)})}else e===x||e===M?c.texImage3D(e,b,d,t,n,p,0,S,D,h):c.texImage2D(e,b,d,t,n,0,S,D,h);return{width:t,height:n,depth:p,type:D}}function gt(c,m,h){var A=h.target||Qe;c.bindTexture(A,m);var e=h.level||0,t=h.internalFormat||h.format||w,n=Ur(t),p=h.format||n.format,b=h.type||n.type;if(Vr(c,h),A===le)for(var d=0;d<6;++d)c.texImage2D(O+d,e,t,h.width,h.height,0,p,b,null);else A===x||A===M?c.texImage3D(A,e,t,h.width,h.height,h.depth,0,p,b,null):c.texImage2D(A,e,t,h.width,h.height,0,p,b,null)}function Rt(c,m,h){h=h||Gr,m=m||ee.textureOptions;var A=c.createTexture(),e=m.target||Qe,t=m.width||1,n=m.height||1,p=m.internalFormat||w;c.bindTexture(e,A),e===le&&(c.texParameteri(e,We,pe),c.texParameteri(e,nr,pe));var b=m.src;if(b)if(typeof b=="function"&&(b=b(c,m)),typeof b=="string")Wt(c,A,m,h);else if(Te(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||Te(b[0]))){var d=mt(c,A,b,m);t=d.width,n=d.height}else Array.isArray(b)&&(typeof b[0]=="string"||wt(b[0]))?e===le?un(c,A,m,h):Xt(c,A,m,h):(St(c,A,b,m),t=b.width,n=b.height);else gt(c,A,m);return Wr(m)&&Yr(c,A,m,t,n,p),At(c,A,m),A}function fn(c,m,h,A,e,t){A=A||h.width,e=e||h.height,t=t||h.depth;var n=h.target||Qe;c.bindTexture(n,m);var p=h.level||0,b=h.internalFormat||h.format||w,d=Ur(b),g=h.format||d.format,S,D=h.src;if(D&&(Te(D)||Array.isArray(D)&&typeof D[0]=="number")?S=h.type||zr(c,D,d.type):S=h.type||d.type,n===le)for(var F=0;F<6;++F)c.texImage2D(O+F,p,b,A,e,0,g,S,null);else n===x||n===M?c.texImage3D(n,p,b,A,e,t,0,g,S,null):c.texImage2D(n,p,b,A,e,0,g,S,null)}function yt(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function cn(c,m,h){h=h||Gr;var A=0,e=[],t={},n={};function p(){A===0&&setTimeout(function(){h(e.length?e:void 0,t,n)},0)}return Object.keys(m).forEach(function(b){var d=m[b],g;yt(d.src)&&(g=function(D,F,N){n[b]=N,--A,D&&e.push(D),p()},++A),t[b]=Rt(c,d,g)}),p(),t}},"./src/twgl-full.js":(Ge,u,W)=>{function U(R){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},U(R)}u.__esModule=!0;var k={m4:!0,v3:!0,primitives:!0};u.v3=u.primitives=u.m4=void 0;var ce=Te(W("./src/m4.js"));u.m4=ce;var we=Te(W("./src/v3.js"));u.v3=we;var $=Te(W("./src/primitives.js"));u.primitives=$;var q=W("./src/twgl.js");Object.keys(q).forEach(function(R){R==="default"||R==="__esModule"||Object.prototype.hasOwnProperty.call(k,R)||R in u&&u[R]===q[R]||(u[R]=q[R])});function ee(R){if(typeof WeakMap!="function")return null;var V=new WeakMap,X=new WeakMap;return(ee=function(L){return L?X:V})(R)}function Te(R,V){if(!V&&R&&R.__esModule)return R;if(R===null||U(R)!="object"&&typeof R!="function")return{default:R};var X=ee(V);if(X&&X.has(R))return X.get(R);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in R)if(te!=="default"&&Object.prototype.hasOwnProperty.call(R,te)){var ye=L?Object.getOwnPropertyDescriptor(R,te):null;ye&&(ye.get||ye.set)?Object.defineProperty(w,te,ye):w[te]=R[te]}return w.default=R,X&&X.set(R,w),w}},"./src/twgl.js":(Ge,u,W)=>{function U(_){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me},U(_)}u.__esModule=!0;var k={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};u.addExtensionsToContext=er,u.framebuffers=u.draw=u.attributes=void 0,u.getContext=M,u.getWebGLContext=le,u.programs=void 0,u.resizeCanvasToDisplaySize=O,u.setDefaults=ye,u.vertexArrays=u.utils=u.typedarrays=u.textures=void 0;var ce=L(W("./src/attributes.js"));u.attributes=ce,Object.keys(ce).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===ce[_]||(u[_]=ce[_])});var we=L(W("./src/textures.js"));u.textures=we,Object.keys(we).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===we[_]||(u[_]=we[_])});var $=L(W("./src/helper.js")),q=L(W("./src/utils.js"));u.utils=q,Object.keys(q).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===q[_]||(u[_]=q[_])});var ee=L(W("./src/draw.js"));u.draw=ee,Object.keys(ee).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===ee[_]||(u[_]=ee[_])});var Te=L(W("./src/framebuffers.js"));u.framebuffers=Te,Object.keys(Te).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===Te[_]||(u[_]=Te[_])});var R=L(W("./src/programs.js"));u.programs=R,Object.keys(R).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===R[_]||(u[_]=R[_])});var V=L(W("./src/typedarrays.js"));u.typedarrays=V,Object.keys(V).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===V[_]||(u[_]=V[_])});var X=L(W("./src/vertex-arrays.js"));u.vertexArrays=X,Object.keys(X).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===X[_]||(u[_]=X[_])});function w(_){if(typeof WeakMap!="function")return null;var me=new WeakMap,de=new WeakMap;return(w=function(je){return je?de:me})(_)}function L(_,me){if(!me&&_&&_.__esModule)return _;if(_===null||U(_)!="object"&&typeof _!="function")return{default:_};var de=w(me);if(de&&de.has(_))return de.get(_);var xe={__proto__:null},je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var De in _)if(De!=="default"&&Object.prototype.hasOwnProperty.call(_,De)){var Ke=je?Object.getOwnPropertyDescriptor(_,De):null;Ke&&(Ke.get||Ke.set)?Object.defineProperty(xe,De,Ke):xe[De]=_[De]}return xe.default=_,de&&de.set(_,xe),xe}var te={addExtensionsToContext:!0};function ye(_){$.copyExistingProperties(_,te),ce.setAttributeDefaults_(_),we.setTextureDefaults_(_)}var be=/^(.*?)_/;function pe(_,me){q.glEnumToString(_,0);var de=_.getExtension(me);if(de){var xe={},je=be.exec(me)[1],De="_"+je;for(var Ke in de){var We=de[Ke],nr=typeof We=="function",hr=nr?je:De,ar=Ke;Ke.endsWith(hr)&&(ar=Ke.substring(0,Ke.length-hr.length)),_[ar]!==void 0?!nr&&_[ar]!==We&&$.warn(ar,_[ar],We,Ke):nr?_[ar]=function(rr){return function(){return rr.apply(de,arguments)}}(We):(_[ar]=We,xe[ar]=We)}xe.constructor={name:de.constructor.name},q.glEnumToString(xe,0)}return de}var Je=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function er(_){for(var me=0;me<Je.length;++me)pe(_,Je[me])}function Qe(_,me){for(var de=["webgl","experimental-webgl"],xe=null,je=0;je<de.length;++je)if(xe=_.getContext(de[je],me),xe){te.addExtensionsToContext&&er(xe);break}return xe}function le(_,me){var de=Qe(_,me);return de}function x(_,me){for(var de=["webgl2","webgl","experimental-webgl"],xe=null,je=0;je<de.length;++je)if(xe=_.getContext(de[je],me),xe){te.addExtensionsToContext&&er(xe);break}return xe}function M(_,me){var de=x(_,me);return de}function O(_,me){me=me||1,me=Math.max(0,me);var de=_.clientWidth*me|0,xe=_.clientHeight*me|0;return _.width!==de||_.height!==xe?(_.width=de,_.height=xe,!0):!1}},"./src/typedarrays.js":(Ge,u)=>{u.__esModule=!0,u.getGLTypeForTypedArray=Je,u.getGLTypeForTypedArrayType=er,u.getTypedArrayTypeForGLType=Qe,u.isArrayBuffer=void 0;var W=5120,U=5121,k=5122,ce=5123,we=5124,$=5125,q=5126,ee=32819,Te=32820,R=33635,V=5131,X=33640,w=35899,L=35902,te=36269,ye=34042,be={};{var pe=be;pe[W]=Int8Array,pe[U]=Uint8Array,pe[k]=Int16Array,pe[ce]=Uint16Array,pe[we]=Int32Array,pe[$]=Uint32Array,pe[q]=Float32Array,pe[ee]=Uint16Array,pe[Te]=Uint16Array,pe[R]=Uint16Array,pe[V]=Uint16Array,pe[X]=Uint32Array,pe[w]=Uint32Array,pe[L]=Uint32Array,pe[te]=Uint32Array,pe[ye]=Uint32Array}function Je(le){if(le instanceof Int8Array)return W;if(le instanceof Uint8Array||le instanceof Uint8ClampedArray)return U;if(le instanceof Int16Array)return k;if(le instanceof Uint16Array)return ce;if(le instanceof Int32Array)return we;if(le instanceof Uint32Array)return $;if(le instanceof Float32Array)return q;throw new Error("unsupported typed array type")}function er(le){if(le===Int8Array)return W;if(le===Uint8Array||le===Uint8ClampedArray)return U;if(le===Int16Array)return k;if(le===Uint16Array)return ce;if(le===Int32Array)return we;if(le===Uint32Array)return $;if(le===Float32Array)return q;throw new Error("unsupported typed array type")}function Qe(le){var x=be[le];if(!x)throw new Error("unknown gl type");return x}u.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(x){return x&&x.buffer&&(x.buffer instanceof ArrayBuffer||x.buffer instanceof SharedArrayBuffer)}:function(x){return x&&x.buffer&&x.buffer instanceof ArrayBuffer}},"./src/utils.js":(Ge,u)=>{u.__esModule=!0,u.glEnumToString=void 0,u.isWebGL1=U,u.isWebGL2=W;function W(k){return!!k.texStorage2D}function U(k){return!k.texStorage2D}u.glEnumToString=function(){var k={},ce={};function we($){var q=$.constructor.name;if(!k[q]){for(var ee in $)if(typeof $[ee]=="number"){var Te=ce[$[ee]];ce[$[ee]]=Te?"".concat(Te," | ").concat(ee):ee}k[q]=!0}}return function(q,ee){return we(q),ce[ee]||(typeof ee=="number"?"0x".concat(ee.toString(16)):ee)}}()},"./src/v3.js":(Ge,u)=>{u.__esModule=!0,u.add=ce,u.copy=er,u.create=k,u.cross=X,u.distance=ye,u.distanceSq=be,u.divScalar=V,u.divide=le,u.dot=w,u.length=L,u.lengthSq=te,u.lerp=$,u.lerpV=q,u.max=ee,u.min=Te,u.mulScalar=R,u.multiply=Qe,u.negate=Je,u.normalize=pe,u.setDefaultType=U,u.subtract=we;var W=Float32Array;function U(x){var M=W;return W=x,M}function k(x,M,O){var _=new W(3);return x&&(_[0]=x),M&&(_[1]=M),O&&(_[2]=O),_}function ce(x,M,O){return O=O||new W(3),O[0]=x[0]+M[0],O[1]=x[1]+M[1],O[2]=x[2]+M[2],O}function we(x,M,O){return O=O||new W(3),O[0]=x[0]-M[0],O[1]=x[1]-M[1],O[2]=x[2]-M[2],O}function $(x,M,O,_){return _=_||new W(3),_[0]=x[0]+O*(M[0]-x[0]),_[1]=x[1]+O*(M[1]-x[1]),_[2]=x[2]+O*(M[2]-x[2]),_}function q(x,M,O,_){return _=_||new W(3),_[0]=x[0]+O[0]*(M[0]-x[0]),_[1]=x[1]+O[1]*(M[1]-x[1]),_[2]=x[2]+O[2]*(M[2]-x[2]),_}function ee(x,M,O){return O=O||new W(3),O[0]=Math.max(x[0],M[0]),O[1]=Math.max(x[1],M[1]),O[2]=Math.max(x[2],M[2]),O}function Te(x,M,O){return O=O||new W(3),O[0]=Math.min(x[0],M[0]),O[1]=Math.min(x[1],M[1]),O[2]=Math.min(x[2],M[2]),O}function R(x,M,O){return O=O||new W(3),O[0]=x[0]*M,O[1]=x[1]*M,O[2]=x[2]*M,O}function V(x,M,O){return O=O||new W(3),O[0]=x[0]/M,O[1]=x[1]/M,O[2]=x[2]/M,O}function X(x,M,O){O=O||new W(3);var _=x[2]*M[0]-x[0]*M[2],me=x[0]*M[1]-x[1]*M[0];return O[0]=x[1]*M[2]-x[2]*M[1],O[1]=_,O[2]=me,O}function w(x,M){return x[0]*M[0]+x[1]*M[1]+x[2]*M[2]}function L(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])}function te(x){return x[0]*x[0]+x[1]*x[1]+x[2]*x[2]}function ye(x,M){var O=x[0]-M[0],_=x[1]-M[1],me=x[2]-M[2];return Math.sqrt(O*O+_*_+me*me)}function be(x,M){var O=x[0]-M[0],_=x[1]-M[1],me=x[2]-M[2];return O*O+_*_+me*me}function pe(x,M){M=M||new W(3);var O=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],_=Math.sqrt(O);return _>1e-5?(M[0]=x[0]/_,M[1]=x[1]/_,M[2]=x[2]/_):(M[0]=0,M[1]=0,M[2]=0),M}function Je(x,M){return M=M||new W(3),M[0]=-x[0],M[1]=-x[1],M[2]=-x[2],M}function er(x,M){return M=M||new W(3),M[0]=x[0],M[1]=x[1],M[2]=x[2],M}function Qe(x,M,O){return O=O||new W(3),O[0]=x[0]*M[0],O[1]=x[1]*M[1],O[2]=x[2]*M[2],O}function le(x,M,O){return O=O||new W(3),O[0]=x[0]/M[0],O[1]=x[1]/M[1],O[2]=x[2]/M[2],O}},"./src/vertex-arrays.js":(Ge,u,W)=>{function U(R){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},U(R)}u.__esModule=!0,u.createVAOAndSetAttributes=ee,u.createVAOFromBufferInfo=Te,u.createVertexArrayInfo=q;var k=we(W("./src/programs.js"));function ce(R){if(typeof WeakMap!="function")return null;var V=new WeakMap,X=new WeakMap;return(ce=function(L){return L?X:V})(R)}function we(R,V){if(!V&&R&&R.__esModule)return R;if(R===null||U(R)!="object"&&typeof R!="function")return{default:R};var X=ce(V);if(X&&X.has(R))return X.get(R);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in R)if(te!=="default"&&Object.prototype.hasOwnProperty.call(R,te)){var ye=L?Object.getOwnPropertyDescriptor(R,te):null;ye&&(ye.get||ye.set)?Object.defineProperty(w,te,ye):w[te]=R[te]}return w.default=R,X&&X.set(R,w),w}var $=34963;function q(R,V,X){var w=R.createVertexArray();return R.bindVertexArray(w),V.length||(V=[V]),V.forEach(function(L){k.setBuffersAndAttributes(R,L,X)}),R.bindVertexArray(null),{numElements:X.numElements,elementType:X.elementType,vertexArrayObject:w}}function ee(R,V,X,w){var L=R.createVertexArray();return R.bindVertexArray(L),k.setAttributes(V,X),w&&R.bindBuffer($,w),R.bindVertexArray(null),L}function Te(R,V,X){return ee(R,V.attribSetters||V,X.attribs,X.indices)}}},J={};function K(Ge){var u=J[Ge];if(u!==void 0)return u.exports;var W=J[Ge]={exports:{}};return y[Ge](W,W.exports,K),W.exports}var fe=K("./src/twgl-full.js");return fe})())})(bn);var Qr=bn.exports;const wr=class wr{constructor(C){this.blocks=[],this.shape=C,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let y=wr.getBaseShape(C);for(let J=0;J<4;J++)this.blocks.push([...y[J]]),this.blocks[J][0]+=3,this.blocks[J][1]+=19}static getBaseShape(C){let y;switch(C){case"O":y=wr.pieces.O;break;case"I":y=wr.pieces.I;break;case"L":y=wr.pieces.L;break;case"J":y=wr.pieces.J;break;case"T":y=wr.pieces.T;break;case"S":y=wr.pieces.S;break;case"Z":y=wr.pieces.Z;break;default:y=[[0,0],[0,0],[0,0],[0,0]]}return y}};mn(wr,"offsets",{O:[[0,0],[0,-1],[-1,-1],[-1,0]],I:[[[0,0],[-1,0],[-1,1],[0,1]]]}),mn(wr,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let Zr=wr;var Yt,En,Kt,Tn;class gn{constructor(){yn(this,Yt);yn(this,Kt);this.numRows=21,this.gameRunning=!0,this.grid=new Uint32Array(this.numRows),this.rgbGrid=new Uint8Array(600),this.colorMap=new Map,this.pieceMap=new Map,this.pieceQueue=[],this.ghostBlocks=[[0,0],[0,0],[0,0],[0,0]],this.lockTimer=-1,this.lockTimerDuration=.5,this.lockBoostCounter=0,this.timerRunning=!1,this.lineClearCount=0,this.ticksPerGravity=15,this.heldPiece=null,this.refillPieceQueue(),this.grabNextPiece(),this.colorMap.set(1,[255,0,0]),this.colorMap.set(2,[0,255,0]),this.colorMap.set(3,[255,255,0]),this.colorMap.set(4,[0,0,255]),this.colorMap.set(5,[180,90,246]),this.colorMap.set(6,[0,255,255]),this.colorMap.set(7,[255,140,40]),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7)}isBlockHere(C,y){if(C<0||y<0||C>=10||y>=this.numRows)return!0;const J=this.grid[y],K=7<<32-(3+3*C);return(J&K)!=0}getBlockData(C,y){const J=this.grid[y],K=32-(3+3*C),fe=7<<K;return(J&fe)>>>K}placeBlockHere(C,y,J){const fe=~(7<<32-(3+3*C));this.grid[y]&=fe;const Ge=J<<32-(3+3*C);this.grid[y]|=Ge}generateRGBGrid(){for(let C=0;C<20;C++)for(let y=0;y<10;y++){let J=this.getBlockData(y,C),K=30*C+3*y;if(J!=0){let fe=this.colorMap.get(J);this.rgbGrid[K]=fe[0],this.rgbGrid[K+1]=fe[1],this.rgbGrid[K+2]=fe[2]}else this.rgbGrid[K]=0,this.rgbGrid[K+1]=0,this.rgbGrid[K+2]=0}if(this.playerPiece.active){for(let y=0;y<4;y++){let J=200,K=30*this.ghostBlocks[y][1]+3*this.ghostBlocks[y][0];this.rgbGrid[K]=J,this.rgbGrid[K+1]=J,this.rgbGrid[K+2]=J}let C=this.playerPiece.blocks;for(let y=0;y<4;y++){let J=this.colorMap.get(this.pieceMap.get(this.playerPiece.shape)),K=30*C[y][1]+3*C[y][0];this.rgbGrid[K]=J[0],this.rgbGrid[K+1]=J[1],this.rgbGrid[K+2]=J[2]}}return this.rgbGrid}generateRainbowGrid(C){for(let y=0;y<20;y++)for(let J=0;J<10;J++){let K=30*y+3*J;this.rgbGrid[K]=(Math.sin((J+y*10+C)*3.14/200)*.5+.5)*255,this.rgbGrid[K+1]=(Math.sin((J+y*10+C)*3.14/200+3.14/2)*.5+.5)*255,this.rgbGrid[K+2]=(Math.sin((J+y*10+C)*3.14/200+3.14/3)*.5+.5)*255}return this.rgbGrid}tryMovePiece(C,y){let J=!0;for(let K=0;K<4&&J;K++){let fe=this.playerPiece.blocks[K][0]+C,Ge=this.playerPiece.blocks[K][1]+y;this.isBlockHere(fe,Ge)&&(J=!1)}return J&&(hn(this,Yt,En).call(this,C,y),C!=0&&this.boostTimer(),y!=0&&(this.timerRunning=!1)),J}tryRotatePiece(C){hn(this,Kt,Tn).call(this,C)}depositPlayerPiece(){let C,y,J=this.pieceMap.get(this.playerPiece.shape);for(let K=0;K<4;K++)C=this.playerPiece.blocks[K][0],y=this.playerPiece.blocks[K][1],this.placeBlockHere(C,y,J)}refillPieceQueue(){let C=["O","I","T","J","L","S","Z"],y;for(let J=0;J<7;J++)y=Math.floor(Math.random()*C.length),this.pieceQueue.push(C[y]),C.splice(y,1)}grabNextPiece(){let C=this.pieceQueue[0];this.pieceQueue.splice(0,1),this.pieceQueue.length<7&&this.refillPieceQueue(),delete this.playerPiece,this.playerPiece=new Zr(C),this.isPlayerPieceValid()||(this.playerPiece.active=!1,this.gameRunning=!1),this.updateGhostProjections()}isPlayerPieceValid(){let C=!0;for(let y=0;y<4&&C;y++)this.isBlockHere(this.playerPiece.blocks[y][0],this.playerPiece.blocks[y][1])&&(C=!1);return C}startLockTimer(){this.lockTimer=this.lockTimerDuration,this.timerRunning=!0,this.lockBoostCounter=0}updateLockTimer(C){this.lockTimer-=C}boostTimer(){this.timerRunning&&this.lockBoostCounter<30&&(this.lockTimer=Math.min(this.lockTimer+.5,this.lockTimerDuration),this.lockBoostCounter++)}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););this.finishWithPiece()}finishWithPiece(){this.lineClearCount,this.depositPlayerPiece(),this.grabNextPiece(),this.timerRunning=!1,this.resolveLineClears()}resolveLineClears(){for(let C=0;C<20;C++){let y=!0;for(let J=0;J<10&&y;J++)this.isBlockHere(J,C)||(y=!1);y&&(this.clearRow(C),this.lineClearCount++,C--)}this.updateGhostProjections()}clearRow(C){for(let y=C;y<this.numRows-1;y++)this.grid[y]=this.grid[y+1];this.grid[this.numRows-1]=0}updateGhostProjections(){for(let y=0;y<4;y++)this.ghostBlocks[y]=[...this.playerPiece.blocks[y]];let C=!1;for(;!C;){for(let y=0;y<4;y++)this.isBlockHere(this.ghostBlocks[y][0],this.ghostBlocks[y][1]-1)&&(C=!0);if(!C)for(let y=0;y<4;y++)this.ghostBlocks[y][1]-=1}}holdPiece(){if(this.heldPiece==null)this.heldPiece=this.playerPiece.shape,this.grabNextPiece();else if(!this.playerPiece.wasHeld){let C=this.heldPiece;this.heldPiece=this.playerPiece.shape,this.playerPiece=new Zr(C),this.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.playerPiece.active=!1,this.gameRunning=!1),this.updateGhostProjections()}}get gameState(){return{board:this.grid,queue:this.pieceQueue,held:this.heldPiece,linesCleared:this.lineClearCount}}}Yt=new WeakSet,En=function(C,y){for(let J=0;J<4;J++)this.playerPiece.blocks[J][0]+=C,this.playerPiece.blocks[J][1]+=y;this.updateGhostProjections()},Kt=new WeakSet,Tn=function(C){let y=!0,J=(this.playerPiece.rotationIndex+4+(C?1:-1))%4,K=[...this.playerPiece.blocks[0]],fe=[];for(let U=0;U<4;U++)fe.push([...this.playerPiece.blocks[U]]);let Ge=1,u=1;C?u=-1:Ge=-1;let W;for(let U=0;U<4;U++){if(fe[U][0]-=K[0],fe[U][1]-=K[1],W=fe[U][0],fe[U][0]=Ge*fe[U][1],fe[U][1]=u*W,fe[U][0]+=K[0],fe[U][1]+=K[1],this.playerPiece.shape=="O"){let k=[];for(let ce=0;ce<2;ce++)k.push(Zr.offsets.O[this.playerPiece.rotationIndex][ce]-Zr.offsets.O[J][ce]);fe[U][0]+=k[0],fe[U][1]+=k[1]}this.isBlockHere(fe[U][0],fe[U][1])&&(y=!1)}if(!y){y=!0;for(let U=0;U<4;U++)fe[U][0]+=1,this.isBlockHere(fe[U][0],fe[U][1])&&(y=!1)}if(!y){y=!0;for(let U=0;U<4;U++)fe[U][0]-=2,this.isBlockHere(fe[U][0],fe[U][1])&&(y=!1)}if(y){for(let U=0;U<4;U++)this.playerPiece.blocks[U]=[...fe[U]];this.playerPiece.rotationIndex=J,this.updateGhostProjections(),this.boostTimer()}};class Rn{constructor(){this.inputStates=new Map,this.inputStates.set("HardDrop",!1),this.inputStates.set("SoftDrop",!1),this.inputStates.set("MoveLeft",!1),this.inputStates.set("MoveRight",!1),this.inputStates.set("Hold",!1),this.inputStates.set("RotateClockwise",!1),this.inputStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0)}keyToState(C){return C.length==1&&(C=C.toUpperCase()),this.inputKeys.get(C)}setInputState(C,y){let J=this.keyToState(C);J!=null&&this.inputStates.set(J,y)}getInputState(C){return this.inputStates.has(C)?this.inputStates.get(C):(console.log("ERROR: trying to access an input action that doesn't exist ("+C+"). The allowed options are:"),this.inputStates.forEach(function(y,J,K){console.log("    - "+J)}),null)}updateCounters(){for(const[C,y]of this.counters)this.getInputState(C)?this.counters.set(C,y+1):this.counters.set(C,0)}getCounter(C){return this.counters.has(C)?this.counters.get(C):(console.log("ERROR: trying to access input action that doesn't have a counter ("+C+"). The counters are:"),this.counters.forEach(function(y,J,K){console.log("    - "+J+": "+y)}),null)}}function Fn(Ne,C,y,J){let K=new Uint8Array(120),fe=4*3;function Ge(u,W){let U=Zr.getBaseShape(u),k=y.get(J.get(u));for(let ce=0;ce<4;ce++){let we=U[ce],$=W+we[1]*fe+we[0]*3;K[$]=k[0],K[$+1]=k[1],K[$+2]=k[2]}}Ne!=null&&Ge(Ne,0);for(let u=0;u<4;u++)Ge(C[u],24*(1+u));return K}function Cn(){let Ne=new Rn;document.addEventListener("keydown",function(be){Ne.setInputState(be.key,!0)}),document.addEventListener("keyup",function(be){Ne.setInputState(be.key,!1)});const y=document.querySelector("#canvas").getContext("webgl");if(!y){const be=wn.getWebGLErrorMessage();document.body.appendChild(be)}y.viewport(0,0,y.canvas.width,y.canvas.height);let J=document.querySelector("#vertex-shader-2d").text,K=document.querySelector("#fragment-shader-2d").text;const fe=Qr.createProgramInfo(y,[J,K]),Ge={a_Position:{numComponents:2,data:[-.5,-1,.5,-1,.5,1,-.5,1,-.75,1-.2,-.55,1-.2,-.55,1,-.75,1,.55,1-.2,.75,1-.2,.75,1,.55,1]},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,2,0,2,0,2,4,2,4,4,0,4]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8]}},u=Qr.createBufferInfoFromArrays(y,Ge);let W=y.createTexture(),U=new Uint8Array(200*3);y.bindTexture(y.TEXTURE_2D,W),y.pixelStorei(y.UNPACK_ALIGNMENT,1),y.texImage2D(y.TEXTURE_2D,0,y.RGB,10,20,0,y.RGB,y.UNSIGNED_BYTE,U),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE);let k=y.createTexture(),ce=new Uint8Array(3*4*2*5);y.bindTexture(y.TEXTURE_2D,k),y.pixelStorei(y.UNPACK_ALIGNMENT,1),y.texImage2D(y.TEXTURE_2D,0,y.RGB,4,2*5,0,y.RGB,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE);let we={src:"textures/block.png",mag:y.LINEAR},$=Qr.createTexture(y,we),q=new gn,ee=0,Te=0,R=0;function V(be){if(Ne.updateCounters(),!q.gameRunning)Te++,R<q.numRows&&Te%4==0&&(q.clearRow(0),R++);else if(Ne.getCounter("HardDrop")==1)q.hardDropPlayerPiece();else if(Ne.getCounter("Hold")==1)q.holdPiece();else{Ne.getInputState("SoftDrop")&&q.tryMovePiece(0,-1);let pe=0;Ne.getCounter("RotateClockwise")==1&&(pe+=1),Ne.getCounter("RotateAntiClockwise")==1&&(pe-=1),pe!=0&&q.tryRotatePiece(pe==1);let Je=0;if((Ne.getCounter("MoveLeft")==1||Ne.getCounter("MoveLeft")>5)&&(Je-=1),(Ne.getCounter("MoveRight")==1||Ne.getCounter("MoveRight")>5)&&(Je+=1),Je!=0&&q.tryMovePiece(Je,0),ee++,ee>=q.ticksPerGravity){let er=!q.tryMovePiece(0,-1);ee=0,er&&!q.timerRunning&&q.startLockTimer()}q.timerRunning&&(q.updateLockTimer(be),q.lockTimer<=0&&!q.tryMovePiece(0,-1)&&q.finishWithPiece())}}function X(be){U=q.generateRGBGrid(),ce=Fn(q.heldPiece,q.pieceQueue,q.colorMap,q.pieceMap),Qr.resizeCanvasToDisplaySize(y.canvas),y.viewport(0,0,y.canvas.width,y.canvas.height),y.bindTexture(y.TEXTURE_2D,W),y.texSubImage2D(y.TEXTURE_2D,0,0,0,10,20,y.RGB,y.UNSIGNED_BYTE,U),y.bindTexture(y.TEXTURE_2D,k),y.texSubImage2D(y.TEXTURE_2D,0,0,0,4,10,y.RGB,y.UNSIGNED_BYTE,ce);const pe={u_Time:be*.001,u_Resolution:[y.canvas.width,y.canvas.height],u_GridData:W,u_QueueData:k,u_BlockTexture:$};y.useProgram(fe.program),Qr.setBuffersAndAttributes(y,fe,u),Qr.setUniforms(fe,pe),Qr.drawBufferInfo(y,u)}let w=0,L=1/30,te=0;function ye(be){let pe=(be-te)*.001;te=be,w+=pe,w>=L&&(V(L),w=Math.min(w-L,L)),X(be),requestAnimationFrame(ye)}requestAnimationFrame(ye)}Cn();

var pn=Object.defineProperty;var bn=(Xe,y,g)=>y in Xe?pn(Xe,y,{enumerable:!0,configurable:!0,writable:!0,value:g}):Xe[y]=g;var jr=(Xe,y,g)=>(bn(Xe,typeof y!="symbol"?y+"":y,g),g),Ka=(Xe,y,g)=>{if(!y.has(Xe))throw TypeError("Cannot "+g)};var ne=(Xe,y,g)=>(Ka(Xe,y,"read from private field"),g?g.call(Xe):y.get(Xe)),We=(Xe,y,g)=>{if(y.has(Xe))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(Xe):y.set(Xe,g)},mr=(Xe,y,g,J)=>(Ka(Xe,y,"write to private field"),J?J.call(Xe,g):y.set(Xe,g),g);var qa=(Xe,y,g,J)=>({set _(j){mr(Xe,y,j,g)},get _(){return ne(Xe,y,J)}}),ar=(Xe,y,g)=>(Ka(Xe,y,"access private method"),g);(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))J(j);new MutationObserver(j=>{for(const Te of j)if(Te.type==="childList")for(const Ae of Te.addedNodes)Ae.tagName==="LINK"&&Ae.rel==="modulepreload"&&J(Ae)}).observe(document,{childList:!0,subtree:!0});function g(j){const Te={};return j.integrity&&(Te.integrity=j.integrity),j.referrerPolicy&&(Te.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?Te.credentials="include":j.crossOrigin==="anonymous"?Te.credentials="omit":Te.credentials="same-origin",Te}function J(j){if(j.ep)return;j.ep=!0;const Te=g(j);fetch(j.href,Te)}})();class En{constructor(){this.actionStates=new Map,this.actionStates.set("HardDrop",!1),this.actionStates.set("SoftDrop",!1),this.actionStates.set("MoveLeft",!1),this.actionStates.set("MoveRight",!1),this.actionStates.set("Hold",!1),this.actionStates.set("RotateClockwise",!1),this.actionStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0),this.counters.set("Hold",0)}keyToState(y){return y.length==1&&(y=y.toUpperCase()),this.inputKeys.get(y)}setInputState(y,g){let J=this.keyToState(y);J!=null&&this.actionStates.set(J,g)}getInputState(y){return this.actionStates.has(y)?this.actionStates.get(y):(console.log("ERROR: trying to access an input action that doesn't exist ("+y+"). The allowed options are:"),this.actionStates.forEach(function(g,J,j){console.log("    - "+J)}),null)}updateCounters(){for(const[y,g]of this.counters)this.getInputState(y)?this.counters.set(y,g+1):this.counters.set(y,0)}getCounter(y){return this.counters.has(y)?this.counters.get(y):(console.log("ERROR: trying to access input action that doesn't have a counter ("+y+"). The counters are:"),this.counters.forEach(function(g,J,j){console.log("    - "+J+": "+g)}),null)}}var qt,st,Ct,at,It,Kr,Ta,en,Aa,rn,da,tn,_a,an,Qt,Qa,Bt,Ea,Sa,nn,Pa,on,Zt,Za,ga,un,xa,fn;class Tn{constructor(){We(this,Ta);We(this,Aa);We(this,da);We(this,_a);We(this,Qt);We(this,Bt);We(this,Sa);We(this,Pa);We(this,Zt);We(this,ga);We(this,xa);jr(this,"numRows",21);jr(this,"graceTimerDuration",.5);jr(this,"gameTickTime",1/30);jr(this,"pieceMap",new Map);jr(this,"gameState",{gameRunning:!0,gridData:new Uint32Array(this.numRows),playerPiece:null,pieceQueue:[],heldPiece:null,ghostBlocks:[[0,0],[0,0],[0,0],[0,0]],linesCleared:0});We(this,qt,15);We(this,st,!0);We(this,Ct,0);We(this,at,-1);We(this,It,0);We(this,Kr,!1);ar(this,Qt,Qa).call(this),ar(this,Bt,Ea).call(this),mr(this,qt,15),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7)}get isStateChanged(){let y=ne(this,st);return mr(this,st,!1),y}runTick(y){let g=!1;if(y.updateCounters(),!this.gameState.gameRunning)this.animationCount==null||this.rowCount==null?(this.animationCount=0,this.rowCount=0):(this.animationCount++,this.rowCount<this.numRows&&this.animationCount%4==0&&(this.clearRow(0),this.rowCount++,mr(this,st,!0)));else if(y.getCounter("HardDrop")==1)this.hardDropPlayerPiece(),this.finishWithPiece(),g=!0;else if(y.getCounter("Hold")==1)this.holdPiece(),g=!0;else{y.getInputState("SoftDrop")&&(g=this.tryMovePiece(0,-1)||g);let J=0;y.getCounter("RotateClockwise")==1&&(J+=1),y.getCounter("RotateAntiClockwise")==1&&(J-=1),J!=0&&(g=this.tryRotatePiece(J==1)||g);let j=0;if((y.getCounter("MoveLeft")==1||y.getCounter("MoveLeft")>5)&&(j-=1),(y.getCounter("MoveRight")==1||y.getCounter("MoveRight")>5)&&(j+=1),j!=0&&(g=this.tryMovePiece(j,0)||g),qa(this,Ct)._++,ne(this,Ct)>=ne(this,qt)){let Te=!this.tryMovePiece(0,-1);g||(g=!Te),mr(this,Ct,0),Te&&!ne(this,Kr)&&ar(this,Sa,nn).call(this)}if(ne(this,Kr)&&(ar(this,Pa,on).call(this,this.gameTickTime),ne(this,at)<=0)){let Te=!this.tryMovePiece(0,-1);g=!0,Te&&this.finishWithPiece()}}g&&(ar(this,xa,fn).call(this),mr(this,st,!0))}tryMovePiece(y,g){let J=!0;for(let j=0;j<4&&J;j++){let Te=this.gameState.playerPiece.blocks[j][0]+y,Ae=this.gameState.playerPiece.blocks[j][1]+g;this.isBlockHere(Te,Ae)&&(J=!1)}return J&&(ar(this,Aa,rn).call(this,y,g),y!=0&&ar(this,Zt,Za).call(this),g!=0&&mr(this,Kr,!1)),J}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););}tryRotatePiece(y){let g=ar(this,da,tn).call(this,y);return g&&ar(this,Zt,Za).call(this),g}holdPiece(){if(this.gameState.heldPiece==null)this.gameState.heldPiece=this.gameState.playerPiece.shape,ar(this,Bt,Ea).call(this);else if(!this.gameState.playerPiece.wasHeld){let y=this.gameState.heldPiece;this.gameState.heldPiece=this.gameState.playerPiece.shape,this.gameState.playerPiece=new tt(y),this.gameState.playerPiece.wasHeld=!0,this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)}}finishWithPiece(){ar(this,_a,an).call(this),ar(this,Bt,Ea).call(this),mr(this,Kr,!1),ar(this,ga,un).call(this)}clearRow(y){for(let g=y;g<this.numRows-1;g++)this.gameState.gridData[g]=this.gameState.gridData[g+1];this.gameState.gridData[this.numRows-1]=0}isBlockHere(y,g){if(y<0||g<0||y>=10||g>=this.numRows)return!0;const J=this.gameState.gridData[g],j=7<<32-(3+3*y);return(J&j)!=0}getBlockData(y,g){const J=this.gameState.gridData[g],j=32-(3+3*y),Te=7<<j;return(J&Te)>>>j}isPlayerPieceValid(){let y=!0;for(let g=0;g<4&&y;g++)this.isBlockHere(this.gameState.playerPiece.blocks[g][0],this.gameState.playerPiece.blocks[g][1])&&(y=!1);return y}}qt=new WeakMap,st=new WeakMap,Ct=new WeakMap,at=new WeakMap,It=new WeakMap,Kr=new WeakMap,Ta=new WeakSet,en=function(y,g,J){const Te=~(7<<32-(3+3*y));this.gameState.gridData[g]&=Te;const Ae=J<<32-(3+3*y);this.gameState.gridData[g]|=Ae},Aa=new WeakSet,rn=function(y,g){for(let J=0;J<4;J++)this.gameState.playerPiece.blocks[J][0]+=y,this.gameState.playerPiece.blocks[J][1]+=g},da=new WeakSet,tn=function(y){let g=(this.gameState.playerPiece.rotationIndex+4+(y?1:-1))%4,J=[...this.gameState.playerPiece.blocks[0]],j=[];for(let oe=0;oe<4;oe++)j.push([...this.gameState.playerPiece.blocks[oe]]);let Te=1,Ae=1;y?Ae=-1:Te=-1;let u;for(let oe=0;oe<4;oe++)j[oe][0]-=J[0],j[oe][1]-=J[1],u=j[oe][0],j[oe][0]=Te*j[oe][1],j[oe][1]=Ae*u,j[oe][0]+=J[0],j[oe][1]+=J[1];let X;switch(this.gameState.playerPiece.shape){case"O":X=tt.offsets.O;break;case"I":X=tt.offsets.I;break;default:X=tt.offsets.OTHER;break}let fe,k,ce=!1;for(let oe=0;oe<5&&!ce;oe++){fe=X[oe],k=[fe[this.gameState.playerPiece.rotationIndex][0]-fe[g][0],fe[this.gameState.playerPiece.rotationIndex][1]-fe[g][1]],ce=!0;for(let G=0;G<4;G++)j[G][0]+=k[0],j[G][1]+=k[1],this.isBlockHere(j[G][0],j[G][1])&&(ce=!1);if(!ce)for(let G=0;G<4;G++)j[G][0]-=k[0],j[G][1]-=k[1]}if(ce){for(let oe=0;oe<4;oe++)this.gameState.playerPiece.blocks[oe]=[...j[oe]];this.gameState.playerPiece.rotationIndex=g}return ce},_a=new WeakSet,an=function(){let y,g,J=this.pieceMap.get(this.gameState.playerPiece.shape);for(let j=0;j<4;j++)y=this.gameState.playerPiece.blocks[j][0],g=this.gameState.playerPiece.blocks[j][1],ar(this,Ta,en).call(this,y,g,J)},Qt=new WeakSet,Qa=function(){let y=["O","I","T","J","L","S","Z"],g;for(let J=0;J<7;J++)g=Math.floor(Math.random()*y.length),this.gameState.pieceQueue.push(y[g]),y.splice(g,1)},Bt=new WeakSet,Ea=function(){let y=this.gameState.pieceQueue[0];this.gameState.pieceQueue.splice(0,1),this.gameState.pieceQueue.length<7&&ar(this,Qt,Qa).call(this),delete this.gameState.playerPiece,this.gameState.playerPiece=new tt(y),this.isPlayerPieceValid()||(this.gameState.playerPiece.active=!1,this.gameState.gameRunning=!1)},Sa=new WeakSet,nn=function(){mr(this,at,this.graceTimerDuration),mr(this,Kr,!0),mr(this,It,0)},Pa=new WeakSet,on=function(y){mr(this,at,ne(this,at)-y)},Zt=new WeakSet,Za=function(){ne(this,Kr)&&ne(this,It)<30&&(mr(this,at,Math.min(ne(this,at)+.5,this.graceTimerDuration)),qa(this,It)._++)},ga=new WeakSet,un=function(){for(let y=0;y<this.numRows;y++){let g=!0;for(let J=0;J<10&&g;J++)this.isBlockHere(J,y)||(g=!1);g&&(this.clearRow(y),this.gameState.linesCleared++,y--)}},xa=new WeakSet,fn=function(){for(let g=0;g<4;g++)this.gameState.ghostBlocks[g]=[...this.gameState.playerPiece.blocks[g]];let y=!1;for(;!y;){for(let g=0;g<4;g++)this.isBlockHere(this.gameState.ghostBlocks[g][0],this.gameState.ghostBlocks[g][1]-1)&&(y=!0);if(!y)for(let g=0;g<4;g++)this.gameState.ghostBlocks[g][1]-=1}};const Ir=class Ir{constructor(y){this.blocks=[],this.shape=y,this.rotationIndex=0,this.active=!0,this.wasHeld=!1;let g=Ir.getBaseShape(y);for(let J=0;J<4;J++)this.blocks.push([...g[J]]),this.blocks[J][0]+=3,this.blocks[J][1]+=19}static getBaseShape(y){let g;switch(y){case"O":g=Ir.pieces.O;break;case"I":g=Ir.pieces.I;break;case"L":g=Ir.pieces.L;break;case"J":g=Ir.pieces.J;break;case"T":g=Ir.pieces.T;break;case"S":g=Ir.pieces.S;break;case"Z":g=Ir.pieces.Z;break;default:g=[[0,0],[0,0],[0,0],[0,0]]}return g}};jr(Ir,"offsets",{O:[[[0,0],[0,-1],[-1,-1],[-1,0]]],I:[[[0,0],[-1,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,1],[0,1]],[[2,0],[0,0],[-2,1],[0,1]],[[-1,0],[0,1],[1,0],[0,-1]],[[2,0],[0,-2],[-2,0],[0,2]]],OTHER:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,0],[-1,0]],[[0,0],[1,-1],[0,0],[-1,-1]],[[0,0],[0,2],[0,0],[0,2]],[[0,0],[1,2],[0,0],[-1,2]]]}),jr(Ir,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let tt=Ir;var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Xe,y){(function(J,j){Xe.exports=j()})(typeof self<"u"?self:An,()=>(()=>{var g={"./src/attributes.js":(Ae,u,X)=>{function fe(l){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fe(l)}u.__esModule=!0,u.createAttribsFromArrays=ur,u.createBufferFromArray=f,u.createBufferFromTypedArray=ve,u.createBufferInfoFromArrays=i,u.createBuffersFromArrays=E,u.getArray_=O,u.getNumComponents_=we,u.setAttribInfoBufferFromArray=rr,u.setAttributeDefaults_=or,u.setAttributePrefix=nr;var k=G(X("./src/typedarrays.js")),ce=G(X("./src/helper.js"));function oe(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(oe=function(v){return v?n:o})(l)}function G(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||fe(l)!="object"&&typeof l!="function")return{default:l};var n=oe(o);if(n&&n.has(l))return n.get(l);var s={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in l)if(T!=="default"&&Object.prototype.hasOwnProperty.call(l,T)){var S=v?Object.getOwnPropertyDescriptor(l,T):null;S&&(S.get||S.set)?Object.defineProperty(s,T,S):s[T]=l[T]}return s.default=l,n&&n.set(l,s),s}var le=35044,Z=34962,be=34963,F=34660,W=5120,z=5121,w=5122,L=5123,ae=5124,pe=5125,Ne=5126,ge={attribPrefix:""};function nr(l){ge.attribPrefix=l}function or(l){ce.copyExistingProperties(l,ge)}function Je(l,o,n,s,v){l.bindBuffer(o,n),l.bufferData(o,s,v||le)}function ve(l,o,n,s){if(ce.isBuffer(l,o))return o;n=n||Z;var v=l.createBuffer();return Je(l,n,v,o,s),v}function x(l){return l==="indices"}function I(l){return l===Int8Array||l===Uint8Array}function O(l){return l.length?l:l.data}var _=/coord|texture/i,ye=/color|colour/i;function de(l,o){var n;if(_.test(l)?n=2:ye.test(l)?n=4:n=3,o%n>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(n," but ").concat(o," values is not evenly divisible by ").concat(n,". You should specify it."));return n}function we(l,o,n){return l.numComponents||l.size||de(o,n||O(l).length)}function je(l,o){if(k.isArrayBuffer(l))return l;if(k.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var n=l.type?Qe(l.type):void 0;return n||(x(o)?n=Uint16Array:n=Float32Array),new n(l.data)}function Oe(l){return typeof l=="number"?l:l?k.getGLTypeForTypedArrayType(l):Ne}function Qe(l){return typeof l=="number"?k.getTypedArrayTypeForGLType(l):l||Float32Array}function He(l,o){return{buffer:o.buffer,numValues:24,type:Oe(o.type),arrayType:Qe(o.type)}}function ir(l,o){var n=o.data||o,s=Qe(o.type),v=n*s.BYTES_PER_ELEMENT,T=l.createBuffer();return l.bindBuffer(Z,T),l.bufferData(Z,v,o.drawType||le),{buffer:T,numValues:n,type:k.getGLTypeForTypedArrayType(s),arrayType:s}}function Tr(l,o,n){var s=je(o,n);return{arrayType:s.constructor,buffer:ve(l,s,void 0,o.drawType),type:k.getGLTypeForTypedArray(s),numValues:0}}function ur(l,o){var n={};return Object.keys(o).forEach(function(s){if(!x(s)){var v=o[s],T=v.attrib||v.name||v.attribName||ge.attribPrefix+s;if(v.value){if(!Array.isArray(v.value)&&!k.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");n[T]={value:v.value}}else{var S;v.buffer&&v.buffer instanceof WebGLBuffer?S=He:typeof v=="number"||typeof v.data=="number"?S=ir:S=Tr;var B=S(l,v,s),M=B.buffer,V=B.type,H=B.numValues,K=B.arrayType,$=v.normalize!==void 0?v.normalize:I(K),Q=we(v,s,H);n[T]={buffer:M,numComponents:Q,type:V,normalize:$,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),l.bindBuffer(Z,null),n}function rr(l,o,n,s){n=je(n),s!==void 0?(l.bindBuffer(Z,o.buffer),l.bufferSubData(Z,s,n)):Je(l,Z,o.buffer,n,o.drawType)}function lr(l,o){return o===W||o===z?1:o===w||o===L?2:o===ae||o===pe||o===Ne?4:0}var Ar=["position","positions","a_position"];function re(l){var o,n;for(n=0;n<Ar.length&&(o=Ar[n],!(o in l));++n);n===Ar.length&&(o=Object.keys(l)[0]);var s=l[o],v=O(s).length;if(v===void 0)return 1;var T=we(s,o),S=v/T;if(v%T>0)throw new Error("numComponents ".concat(T," not correct for length ").concat(v));return S}function r(l,o){var n,s;for(s=0;s<Ar.length&&(n=Ar[s],!(n in o||(n=ge.attribPrefix+n,n in o)));++s);s===Ar.length&&(n=Object.keys(o)[0]);var v=o[n];if(!v.buffer)return 1;l.bindBuffer(Z,v.buffer);var T=l.getBufferParameter(Z,F);l.bindBuffer(Z,null);var S=lr(l,v.type),B=T/S,M=v.numComponents||v.size,V=B/M;if(V%1!==0)throw new Error("numComponents ".concat(M," not correct for length ").concat(length));return V}function i(l,o,n){var s=ur(l,o),v=Object.assign({},n||{});v.attribs=Object.assign({},n?n.attribs:{},s);var T=o.indices;if(T){var S=je(T,"indices");v.indices=ve(l,S,be),v.numElements=S.length,v.elementType=k.getGLTypeForTypedArray(S)}else v.numElements||(v.numElements=r(l,v.attribs));return v}function f(l,o,n){var s=n==="indices"?be:Z,v=je(o,n);return ve(l,v,s)}function E(l,o){var n={};return Object.keys(o).forEach(function(s){n[s]=f(l,o[s],s)}),o.indices?(n.numElements=o.indices.length,n.elementType=k.getGLTypeForTypedArray(je(o.indices),"indices")):n.numElements=re(o),n}},"./src/draw.js":(Ae,u,X)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},fe(F)}u.__esModule=!0,u.drawBufferInfo=Z,u.drawObjectList=be;var k=oe(X("./src/programs.js"));function ce(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,z=new WeakMap;return(ce=function(L){return L?z:W})(F)}function oe(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var z=ce(W);if(z&&z.has(F))return z.get(F);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=L?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=F[ae]}return w.default=F,z&&z.set(F,w),w}var G=4,le=5123;function Z(F,W,z,w,L,ae){z=z===void 0?G:z;var pe=W.indices,Ne=W.elementType,ge=w===void 0?W.numElements:w;L=L===void 0?0:L,Ne||pe?ae!==void 0?F.drawElementsInstanced(z,ge,Ne===void 0?le:W.elementType,L,ae):F.drawElements(z,ge,Ne===void 0?le:W.elementType,L):ae!==void 0?F.drawArraysInstanced(z,L,ge,ae):F.drawArrays(z,L,ge)}function be(F,W){var z=null,w=null;W.forEach(function(L){if(L.active!==!1){var ae=L.programInfo,pe=L.vertexArrayInfo||L.bufferInfo,Ne=!1,ge=L.type===void 0?G:L.type;ae!==z&&(z=ae,F.useProgram(ae.program),Ne=!0),(Ne||pe!==w)&&(w&&w.vertexArrayObject&&!pe.vertexArrayObject&&F.bindVertexArray(null),w=pe,k.setBuffersAndAttributes(F,ae,pe)),k.setUniforms(ae,L.uniforms),Z(F,pe,ge,L.count,L.offset,L.instanceCount)}}),w&&w.vertexArrayObject&&F.bindVertexArray(null)}},"./src/framebuffers.js":(Ae,u,X)=>{function fe(re){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fe(re)}u.__esModule=!0,u.bindFramebufferInfo=Ar,u.createFramebufferInfo=rr,u.resizeFramebufferInfo=lr;var k=G(X("./src/textures.js")),ce=G(X("./src/helper.js"));function oe(re){if(typeof WeakMap!="function")return null;var r=new WeakMap,i=new WeakMap;return(oe=function(E){return E?i:r})(re)}function G(re,r){if(!r&&re&&re.__esModule)return re;if(re===null||fe(re)!="object"&&typeof re!="function")return{default:re};var i=oe(r);if(i&&i.has(re))return i.get(re);var f={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in re)if(l!=="default"&&Object.prototype.hasOwnProperty.call(re,l)){var o=E?Object.getOwnPropertyDescriptor(re,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=re[l]}return f.default=re,i&&i.set(re,f),f}var le=36160,Z=36161,be=3553,F=5121,W=6402,z=6408,w=33190,L=36012,ae=35056,pe=36013,Ne=32854,ge=32855,nr=36194,or=33189,Je=6401,ve=36168,x=34041,I=36064,O=36096,_=36128,ye=33306,de=33071,we=9729,je=[{format:z,type:F,min:we,wrap:de},{format:x}],Oe={};Oe[x]=ye,Oe[Je]=_,Oe[ve]=_,Oe[W]=O,Oe[or]=O,Oe[w]=O,Oe[L]=O,Oe[ae]=ye,Oe[pe]=ye;function Qe(re,r){return Oe[re]||Oe[r]}var He={};He[Ne]=!0,He[ge]=!0,He[nr]=!0,He[x]=!0,He[or]=!0,He[Je]=!0,He[ve]=!0;function ir(re){return He[re]}var Tr=32;function ur(re){return re>=I&&re<I+Tr}function rr(re,r,i,f){var E=le,l=re.createFramebuffer();re.bindFramebuffer(E,l),i=i||re.drawingBufferWidth,f=f||re.drawingBufferHeight,r=r||je;var o=[],n={framebuffer:l,attachments:[],width:i,height:f};return r.forEach(function(s,v){var T=s.attachment,S=s.samples,B=s.format,M=s.attachmentPoint||Qe(B,s.internalFormat);if(M||(M=I+v),ur(M)&&o.push(M),!T)if(S!==void 0||ir(B))T=re.createRenderbuffer(),re.bindRenderbuffer(Z,T),S>1?re.renderbufferStorageMultisample(Z,S,B,i,f):re.renderbufferStorage(Z,B,i,f);else{var V=Object.assign({},s);V.width=i,V.height=f,V.auto===void 0&&(V.auto=!1,V.min=V.min||V.minMag||we,V.mag=V.mag||V.minMag||we,V.wrapS=V.wrapS||V.wrap||de,V.wrapT=V.wrapT||V.wrap||de),T=k.createTexture(re,V)}if(ce.isRenderbuffer(re,T))re.framebufferRenderbuffer(E,M,Z,T);else if(ce.isTexture(re,T))s.layer!==void 0?re.framebufferTextureLayer(E,M,T,s.level||0,s.layer):re.framebufferTexture2D(E,M,s.target||be,T,s.level||0);else throw new Error("unknown attachment type");n.attachments.push(T)}),re.drawBuffers&&re.drawBuffers(o),n}function lr(re,r,i,f,E){f=f||re.drawingBufferWidth,E=E||re.drawingBufferHeight,r.width=f,r.height=E,i=i||je,i.forEach(function(l,o){var n=r.attachments[o],s=l.format,v=l.samples;if(v!==void 0||ce.isRenderbuffer(re,n))re.bindRenderbuffer(Z,n),v>1?re.renderbufferStorageMultisample(Z,v,s,f,E):re.renderbufferStorage(Z,s,f,E);else if(ce.isTexture(re,n))k.resizeTexture(re,n,l,f,E);else throw new Error("unknown attachment type")})}function Ar(re,r,i){i=i||le,r?(re.bindFramebuffer(i,r.framebuffer),re.viewport(0,0,r.width,r.height)):(re.bindFramebuffer(i,null),re.viewport(0,0,re.drawingBufferWidth,re.drawingBufferHeight))}},"./src/helper.js":(Ae,u)=>{u.__esModule=!0,u.copyExistingProperties=k,u.copyNamedProperties=fe,u.error=ce,u.isBuffer=Z,u.isRenderbuffer=be,u.isSampler=z,u.isShader=F,u.isTexture=W,u.warn=oe;function X(w){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},X(w)}function fe(w,L,ae){w.forEach(function(pe){var Ne=L[pe];Ne!==void 0&&(ae[pe]=Ne)})}function k(w,L){Object.keys(L).forEach(function(ae){L.hasOwnProperty(ae)&&w.hasOwnProperty(ae)&&(L[ae]=w[ae])})}function ce(){var w;(w=console).error.apply(w,arguments)}function oe(){var w;(w=console).warn.apply(w,arguments)}var G=new Map;function le(w,L){if(!w||X(w)!=="object")return!1;var ae=G.get(L);ae||(ae=new WeakMap,G.set(L,ae));var pe=ae.get(w);if(pe===void 0){var Ne=Object.prototype.toString.call(w);pe=Ne.substring(8,Ne.length-1)===L,ae.set(w,pe)}return pe}function Z(w,L){return typeof WebGLBuffer<"u"&&le(L,"WebGLBuffer")}function be(w,L){return typeof WebGLRenderbuffer<"u"&&le(L,"WebGLRenderbuffer")}function F(w,L){return typeof WebGLShader<"u"&&le(L,"WebGLShader")}function W(w,L){return typeof WebGLTexture<"u"&&le(L,"WebGLTexture")}function z(w,L){return typeof WebGLSampler<"u"&&le(L,"WebGLSampler")}},"./src/m4.js":(Ae,u,X)=>{function fe(r){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},fe(r)}u.__esModule=!0,u.axisRotate=Tr,u.axisRotation=ir,u.copy=F,u.create=be,u.frustum=Je,u.getAxis=Ne,u.getTranslation=pe,u.identity=W,u.inverse=w,u.lookAt=O,u.multiply=L,u.negate=Z,u.ortho=or,u.perspective=nr,u.rotateX=we,u.rotateY=Oe,u.rotateZ=He,u.rotationX=de,u.rotationY=je,u.rotationZ=Qe,u.scale=rr,u.scaling=ur,u.setAxis=ge,u.setDefaultType=le,u.setTranslation=ae,u.transformDirection=Ar,u.transformNormal=re,u.transformPoint=lr,u.translate=ye,u.translation=_,u.transpose=z;var k=oe(X("./src/v3.js"));function ce(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(ce=function(l){return l?f:i})(r)}function oe(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||fe(r)!="object"&&typeof r!="function")return{default:r};var f=ce(i);if(f&&f.has(r))return f.get(r);var E={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var n=l?Object.getOwnPropertyDescriptor(r,o):null;n&&(n.get||n.set)?Object.defineProperty(E,o,n):E[o]=r[o]}return E.default=r,f&&f.set(r,E),E}var G=Float32Array;function le(r){var i=G;return G=r,i}function Z(r,i){return i=i||new G(16),i[0]=-r[0],i[1]=-r[1],i[2]=-r[2],i[3]=-r[3],i[4]=-r[4],i[5]=-r[5],i[6]=-r[6],i[7]=-r[7],i[8]=-r[8],i[9]=-r[9],i[10]=-r[10],i[11]=-r[11],i[12]=-r[12],i[13]=-r[13],i[14]=-r[14],i[15]=-r[15],i}function be(){return new G(16).fill(0)}function F(r,i){return i=i||new G(16),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}function W(r){return r=r||new G(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function z(r,i){if(i=i||new G(16),i===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,i}var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],s=r[1*4+0],v=r[1*4+1],T=r[1*4+2],S=r[1*4+3],B=r[2*4+0],M=r[2*4+1],V=r[2*4+2],H=r[2*4+3],K=r[3*4+0],$=r[3*4+1],Q=r[3*4+2],ie=r[3*4+3];return i[0]=E,i[1]=s,i[2]=B,i[3]=K,i[4]=l,i[5]=v,i[6]=M,i[7]=$,i[8]=o,i[9]=T,i[10]=V,i[11]=Q,i[12]=n,i[13]=S,i[14]=H,i[15]=ie,i}function w(r,i){i=i||new G(16);var f=r[0*4+0],E=r[0*4+1],l=r[0*4+2],o=r[0*4+3],n=r[1*4+0],s=r[1*4+1],v=r[1*4+2],T=r[1*4+3],S=r[2*4+0],B=r[2*4+1],M=r[2*4+2],V=r[2*4+3],H=r[3*4+0],K=r[3*4+1],$=r[3*4+2],Q=r[3*4+3],ie=M*Q,ue=$*V,q=v*Q,me=$*T,Be=v*V,Ye=M*T,Ue=l*Q,Ge=$*o,_e=l*V,Re=M*o,qe=l*T,Ve=v*o,Ke=S*K,ke=H*B,Ze=n*K,Fe=H*s,De=n*B,yr=S*s,fr=f*K,dr=H*E,Sr=f*B,Mr=S*E,Or=f*s,Nr=n*E,Qr=ie*s+me*B+Be*K-(ue*s+q*B+Ye*K),mt=ue*E+Ue*B+Re*K-(ie*E+Ge*B+_e*K),yt=q*E+Ge*s+qe*K-(me*E+Ue*s+Ve*K),ht=Ye*E+_e*s+Ve*B-(Be*E+Re*s+qe*B),vr=1/(f*Qr+n*mt+S*yt+H*ht);return i[0]=vr*Qr,i[1]=vr*mt,i[2]=vr*yt,i[3]=vr*ht,i[4]=vr*(ue*n+q*S+Ye*H-(ie*n+me*S+Be*H)),i[5]=vr*(ie*f+Ge*S+_e*H-(ue*f+Ue*S+Re*H)),i[6]=vr*(me*f+Ue*n+Ve*H-(q*f+Ge*n+qe*H)),i[7]=vr*(Be*f+Re*n+qe*S-(Ye*f+_e*n+Ve*S)),i[8]=vr*(Ke*T+Fe*V+De*Q-(ke*T+Ze*V+yr*Q)),i[9]=vr*(ke*o+fr*V+Mr*Q-(Ke*o+dr*V+Sr*Q)),i[10]=vr*(Ze*o+dr*T+Or*Q-(Fe*o+fr*T+Nr*Q)),i[11]=vr*(yr*o+Sr*T+Nr*V-(De*o+Mr*T+Or*V)),i[12]=vr*(Ze*M+yr*$+ke*v-(De*$+Ke*v+Fe*M)),i[13]=vr*(Sr*$+Ke*l+dr*M-(fr*M+Mr*$+ke*l)),i[14]=vr*(fr*v+Nr*$+Fe*l-(Or*$+Ze*l+dr*v)),i[15]=vr*(Or*M+De*l+Mr*v-(Sr*v+Nr*M+yr*l)),i}function L(r,i,f){f=f||new G(16);var E=r[0],l=r[1],o=r[2],n=r[3],s=r[4],v=r[5],T=r[6],S=r[7],B=r[8],M=r[9],V=r[10],H=r[11],K=r[12],$=r[13],Q=r[14],ie=r[15],ue=i[0],q=i[1],me=i[2],Be=i[3],Ye=i[4],Ue=i[5],Ge=i[6],_e=i[7],Re=i[8],qe=i[9],Ve=i[10],Ke=i[11],ke=i[12],Ze=i[13],Fe=i[14],De=i[15];return f[0]=E*ue+s*q+B*me+K*Be,f[1]=l*ue+v*q+M*me+$*Be,f[2]=o*ue+T*q+V*me+Q*Be,f[3]=n*ue+S*q+H*me+ie*Be,f[4]=E*Ye+s*Ue+B*Ge+K*_e,f[5]=l*Ye+v*Ue+M*Ge+$*_e,f[6]=o*Ye+T*Ue+V*Ge+Q*_e,f[7]=n*Ye+S*Ue+H*Ge+ie*_e,f[8]=E*Re+s*qe+B*Ve+K*Ke,f[9]=l*Re+v*qe+M*Ve+$*Ke,f[10]=o*Re+T*qe+V*Ve+Q*Ke,f[11]=n*Re+S*qe+H*Ve+ie*Ke,f[12]=E*ke+s*Ze+B*Fe+K*De,f[13]=l*ke+v*Ze+M*Fe+$*De,f[14]=o*ke+T*Ze+V*Fe+Q*De,f[15]=n*ke+S*Ze+H*Fe+ie*De,f}function ae(r,i,f){return f=f||W(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=i[0],f[13]=i[1],f[14]=i[2],f[15]=1,f}function pe(r,i){return i=i||k.create(),i[0]=r[12],i[1]=r[13],i[2]=r[14],i}function Ne(r,i,f){f=f||k.create();var E=i*4;return f[0]=r[E+0],f[1]=r[E+1],f[2]=r[E+2],f}function ge(r,i,f,E){E!==r&&(E=F(r,E));var l=f*4;return E[l+0]=i[0],E[l+1]=i[1],E[l+2]=i[2],E}function nr(r,i,f,E,l){l=l||new G(16);var o=Math.tan(Math.PI*.5-.5*r),n=1/(f-E);return l[0]=o/i,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+E)*n,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*E*n*2,l[15]=0,l}function or(r,i,f,E,l,o,n){return n=n||new G(16),n[0]=2/(i-r),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2/(E-f),n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2/(l-o),n[11]=0,n[12]=(i+r)/(r-i),n[13]=(E+f)/(f-E),n[14]=(o+l)/(l-o),n[15]=1,n}function Je(r,i,f,E,l,o,n){n=n||new G(16);var s=i-r,v=E-f,T=l-o;return n[0]=2*l/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*l/v,n[6]=0,n[7]=0,n[8]=(r+i)/s,n[9]=(E+f)/v,n[10]=o/T,n[11]=-1,n[12]=0,n[13]=0,n[14]=l*o/T,n[15]=0,n}var ve,x,I;function O(r,i,f,E){return E=E||new G(16),ve=ve||k.create(),x=x||k.create(),I=I||k.create(),k.normalize(k.subtract(r,i,I),I),k.normalize(k.cross(f,I,ve),ve),k.normalize(k.cross(I,ve,x),x),E[0]=ve[0],E[1]=ve[1],E[2]=ve[2],E[3]=0,E[4]=x[0],E[5]=x[1],E[6]=x[2],E[7]=0,E[8]=I[0],E[9]=I[1],E[10]=I[2],E[11]=0,E[12]=r[0],E[13]=r[1],E[14]=r[2],E[15]=1,E}function _(r,i){return i=i||new G(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}function ye(r,i,f){f=f||new G(16);var E=i[0],l=i[1],o=i[2],n=r[0],s=r[1],v=r[2],T=r[3],S=r[1*4+0],B=r[1*4+1],M=r[1*4+2],V=r[1*4+3],H=r[2*4+0],K=r[2*4+1],$=r[2*4+2],Q=r[2*4+3],ie=r[3*4+0],ue=r[3*4+1],q=r[3*4+2],me=r[3*4+3];return r!==f&&(f[0]=n,f[1]=s,f[2]=v,f[3]=T,f[4]=S,f[5]=B,f[6]=M,f[7]=V,f[8]=H,f[9]=K,f[10]=$,f[11]=Q),f[12]=n*E+S*l+H*o+ie,f[13]=s*E+B*l+K*o+ue,f[14]=v*E+M*l+$*o+q,f[15]=T*E+V*l+Q*o+me,f}function de(r,i){i=i||new G(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=f,i[6]=E,i[7]=0,i[8]=0,i[9]=-E,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function we(r,i,f){f=f||new G(16);var E=r[4],l=r[5],o=r[6],n=r[7],s=r[8],v=r[9],T=r[10],S=r[11],B=Math.cos(i),M=Math.sin(i);return f[4]=B*E+M*s,f[5]=B*l+M*v,f[6]=B*o+M*T,f[7]=B*n+M*S,f[8]=B*s-M*E,f[9]=B*v-M*l,f[10]=B*T-M*o,f[11]=B*S-M*n,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function je(r,i){i=i||new G(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=0,i[2]=-E,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=E,i[9]=0,i[10]=f,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Oe(r,i,f){f=f||new G(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],s=r[2*4+0],v=r[2*4+1],T=r[2*4+2],S=r[2*4+3],B=Math.cos(i),M=Math.sin(i);return f[0]=B*E-M*s,f[1]=B*l-M*v,f[2]=B*o-M*T,f[3]=B*n-M*S,f[8]=B*s+M*E,f[9]=B*v+M*l,f[10]=B*T+M*o,f[11]=B*S+M*n,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Qe(r,i){i=i||new G(16);var f=Math.cos(r),E=Math.sin(r);return i[0]=f,i[1]=E,i[2]=0,i[3]=0,i[4]=-E,i[5]=f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function He(r,i,f){f=f||new G(16);var E=r[0*4+0],l=r[0*4+1],o=r[0*4+2],n=r[0*4+3],s=r[1*4+0],v=r[1*4+1],T=r[1*4+2],S=r[1*4+3],B=Math.cos(i),M=Math.sin(i);return f[0]=B*E+M*s,f[1]=B*l+M*v,f[2]=B*o+M*T,f[3]=B*n+M*S,f[4]=B*s-M*E,f[5]=B*v-M*l,f[6]=B*T-M*o,f[7]=B*S-M*n,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ir(r,i,f){f=f||new G(16);var E=r[0],l=r[1],o=r[2],n=Math.sqrt(E*E+l*l+o*o);E/=n,l/=n,o/=n;var s=E*E,v=l*l,T=o*o,S=Math.cos(i),B=Math.sin(i),M=1-S;return f[0]=s+(1-s)*S,f[1]=E*l*M+o*B,f[2]=E*o*M-l*B,f[3]=0,f[4]=E*l*M-o*B,f[5]=v+(1-v)*S,f[6]=l*o*M+E*B,f[7]=0,f[8]=E*o*M+l*B,f[9]=l*o*M-E*B,f[10]=T+(1-T)*S,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Tr(r,i,f,E){E=E||new G(16);var l=i[0],o=i[1],n=i[2],s=Math.sqrt(l*l+o*o+n*n);l/=s,o/=s,n/=s;var v=l*l,T=o*o,S=n*n,B=Math.cos(f),M=Math.sin(f),V=1-B,H=v+(1-v)*B,K=l*o*V+n*M,$=l*n*V-o*M,Q=l*o*V-n*M,ie=T+(1-T)*B,ue=o*n*V+l*M,q=l*n*V+o*M,me=o*n*V-l*M,Be=S+(1-S)*B,Ye=r[0],Ue=r[1],Ge=r[2],_e=r[3],Re=r[4],qe=r[5],Ve=r[6],Ke=r[7],ke=r[8],Ze=r[9],Fe=r[10],De=r[11];return E[0]=H*Ye+K*Re+$*ke,E[1]=H*Ue+K*qe+$*Ze,E[2]=H*Ge+K*Ve+$*Fe,E[3]=H*_e+K*Ke+$*De,E[4]=Q*Ye+ie*Re+ue*ke,E[5]=Q*Ue+ie*qe+ue*Ze,E[6]=Q*Ge+ie*Ve+ue*Fe,E[7]=Q*_e+ie*Ke+ue*De,E[8]=q*Ye+me*Re+Be*ke,E[9]=q*Ue+me*qe+Be*Ze,E[10]=q*Ge+me*Ve+Be*Fe,E[11]=q*_e+me*Ke+Be*De,r!==E&&(E[12]=r[12],E[13]=r[13],E[14]=r[14],E[15]=r[15]),E}function ur(r,i){return i=i||new G(16),i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function rr(r,i,f){f=f||new G(16);var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0],f[1]=E*r[1],f[2]=E*r[2],f[3]=E*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function lr(r,i,f){f=f||k.create();var E=i[0],l=i[1],o=i[2],n=E*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(E*r[0]+l*r[4]+o*r[8]+r[12])/n,f[1]=(E*r[1]+l*r[5]+o*r[9]+r[13])/n,f[2]=(E*r[2]+l*r[6]+o*r[10]+r[14])/n,f}function Ar(r,i,f){f=f||k.create();var E=i[0],l=i[1],o=i[2];return f[0]=E*r[0]+l*r[4]+o*r[8],f[1]=E*r[1]+l*r[5]+o*r[9],f[2]=E*r[2]+l*r[6]+o*r[10],f}function re(r,i,f){f=f||k.create();var E=w(r),l=i[0],o=i[1],n=i[2];return f[0]=l*E[0]+o*E[1]+n*E[2],f[1]=l*E[4]+o*E[5]+n*E[6],f[2]=l*E[8]+o*E[9]+n*E[10],f}},"./src/primitives.js":(Ae,u,X)=>{function fe(o){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fe(o)}u.__esModule=!0,u.concatVertices=i,u.create3DFBuffers=u.create3DFBufferInfo=void 0,u.create3DFVertices=je,u.createAugmentedTypedArray=w,u.createCrescentBuffers=u.createCrescentBufferInfo=void 0,u.createCrescentVertices=Oe,u.createCubeBuffers=u.createCubeBufferInfo=u.createCresentVertices=u.createCresentBuffers=u.createCresentBufferInfo=void 0,u.createCubeVertices=ye,u.createCylinderBuffers=u.createCylinderBufferInfo=void 0,u.createCylinderVertices=Qe,u.createDiscBuffers=u.createDiscBufferInfo=void 0,u.createDiscVertices=ir,u.createPlaneBuffers=u.createPlaneBufferInfo=void 0,u.createPlaneVertices=I,u.createSphereBuffers=u.createSphereBufferInfo=void 0,u.createSphereVertices=O,u.createTorusBuffers=u.createTorusBufferInfo=void 0,u.createTorusVertices=He,u.createTruncatedConeBuffers=u.createTruncatedConeBufferInfo=void 0,u.createTruncatedConeVertices=de,u.createXYQuadBuffers=u.createXYQuadBufferInfo=void 0,u.createXYQuadVertices=x,u.deindexVertices=ae,u.duplicateVertices=f,u.flattenNormals=pe,u.makeRandomVertexColors=ur,u.reorientDirections=nr,u.reorientNormals=or,u.reorientPositions=Je,u.reorientVertices=ve;var k=be(X("./src/attributes.js")),ce=be(X("./src/helper.js")),oe=be(X("./src/typedarrays.js")),G=be(X("./src/m4.js")),le=be(X("./src/v3.js"));function Z(o){if(typeof WeakMap!="function")return null;var n=new WeakMap,s=new WeakMap;return(Z=function(T){return T?s:n})(o)}function be(o,n){if(!n&&o&&o.__esModule)return o;if(o===null||fe(o)!="object"&&typeof o!="function")return{default:o};var s=Z(n);if(s&&s.has(o))return s.get(o);var v={__proto__:null},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in o)if(S!=="default"&&Object.prototype.hasOwnProperty.call(o,S)){var B=T?Object.getOwnPropertyDescriptor(o,S):null;B&&(B.get||B.set)?Object.defineProperty(v,S,B):v[S]=o[S]}return v.default=o,s&&s.set(o,v),v}var F=k.getArray_,W=k.getNumComponents_;function z(o,n){var s=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var T=arguments[v];if(T instanceof Array||oe.isArrayBuffer(T))for(var S=0;S<T.length;++S)o[s++]=T[S];else o[s++]=T}},o.reset=function(v){s=v||0},o.numComponents=n,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function w(o,n,s){var v=s||Float32Array;return z(new v(o*n),o)}function L(o){return o!=="indices"}function ae(o){var n=o.indices,s={},v=n.length;function T(S){for(var B=o[S],M=B.numComponents,V=w(M,v,B.constructor),H=0;H<v;++H)for(var K=n[H],$=K*M,Q=0;Q<M;++Q)V.push(B[$+Q]);s[S]=V}return Object.keys(o).filter(L).forEach(T),s}function pe(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var n=o.normal,s=n.length,v=0;v<s;v+=9){var T=n[v+0],S=n[v+1],B=n[v+2],M=n[v+3],V=n[v+4],H=n[v+5],K=n[v+6],$=n[v+7],Q=n[v+8],ie=T+M+K,ue=S+V+$,q=B+H+Q,me=Math.sqrt(ie*ie+ue*ue+q*q);ie/=me,ue/=me,q/=me,n[v+0]=ie,n[v+1]=ue,n[v+2]=q,n[v+3]=ie,n[v+4]=ue,n[v+5]=q,n[v+6]=ie,n[v+7]=ue,n[v+8]=q}return o}function Ne(o,n,s){for(var v=o.length,T=new Float32Array(3),S=0;S<v;S+=3)s(n,[o[S],o[S+1],o[S+2]],T),o[S]=T[0],o[S+1]=T[1],o[S+2]=T[2]}function ge(o,n,s){s=s||le.create();var v=n[0],T=n[1],S=n[2];return s[0]=v*o[0]+T*o[1]+S*o[2],s[1]=v*o[4]+T*o[5]+S*o[6],s[2]=v*o[8]+T*o[9]+S*o[10],s}function nr(o,n){return Ne(o,n,G.transformDirection),o}function or(o,n){return Ne(o,G.inverse(n),ge),o}function Je(o,n){return Ne(o,n,G.transformPoint),o}function ve(o,n){return Object.keys(o).forEach(function(s){var v=o[s];s.indexOf("pos")>=0?Je(v,n):s.indexOf("tan")>=0||s.indexOf("binorm")>=0?nr(v,n):s.indexOf("norm")>=0&&or(v,n)}),o}function x(o,n,s){return o=o||2,n=n||0,s=s||0,o*=.5,{position:{numComponents:2,data:[n+-1*o,s+-1*o,n+1*o,s+-1*o,n+-1*o,s+1*o,n+1*o,s+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function I(o,n,s,v,T){o=o||1,n=n||1,s=s||1,v=v||1,T=T||G.identity();for(var S=(s+1)*(v+1),B=w(3,S),M=w(3,S),V=w(2,S),H=0;H<=v;H++)for(var K=0;K<=s;K++){var $=K/s,Q=H/v;B.push(o*$-o*.5,0,n*Q-n*.5),M.push(0,1,0),V.push($,Q)}for(var ie=s+1,ue=w(3,s*v*2,Uint16Array),q=0;q<v;q++)for(var me=0;me<s;me++)ue.push((q+0)*ie+me,(q+1)*ie+me,(q+0)*ie+me+1),ue.push((q+1)*ie+me,(q+1)*ie+me+1,(q+0)*ie+me+1);var Be=ve({position:B,normal:M,texcoord:V,indices:ue},T);return Be}function O(o,n,s,v,T,S,B){if(n<=0||s<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,T=T||Math.PI,S=S||0,B=B||Math.PI*2;for(var M=T-v,V=B-S,H=(n+1)*(s+1),K=w(3,H),$=w(3,H),Q=w(2,H),ie=0;ie<=s;ie++)for(var ue=0;ue<=n;ue++){var q=ue/n,me=ie/s,Be=V*q+S,Ye=M*me+v,Ue=Math.sin(Be),Ge=Math.cos(Be),_e=Math.sin(Ye),Re=Math.cos(Ye),qe=Ge*_e,Ve=Re,Ke=Ue*_e;K.push(o*qe,o*Ve,o*Ke),$.push(qe,Ve,Ke),Q.push(1-q,me)}for(var ke=n+1,Ze=w(3,n*s*2,Uint16Array),Fe=0;Fe<n;Fe++)for(var De=0;De<s;De++)Ze.push((De+0)*ke+Fe,(De+0)*ke+Fe+1,(De+1)*ke+Fe),Ze.push((De+1)*ke+Fe,(De+0)*ke+Fe+1,(De+1)*ke+Fe+1);return{position:K,normal:$,texcoord:Q,indices:Ze}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function ye(o){o=o||1;for(var n=o/2,s=[[-n,-n,-n],[+n,-n,-n],[-n,+n,-n],[+n,+n,-n],[-n,-n,+n],[+n,-n,+n],[-n,+n,+n],[+n,+n,+n]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],T=[[1,0],[0,0],[0,1],[1,1]],S=6*4,B=w(3,S),M=w(3,S),V=w(2,S),H=w(3,6*2,Uint16Array),K=0;K<6;++K){for(var $=_[K],Q=0;Q<4;++Q){var ie=s[$[Q]],ue=v[K],q=T[Q];B.push(ie),M.push(ue),V.push(q)}var me=4*K;H.push(me+0,me+1,me+2),H.push(me+0,me+2,me+3)}return{position:B,normal:M,texcoord:V,indices:H}}function de(o,n,s,v,T,S,B){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(T<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var M=S===void 0?!0:S,V=B===void 0?!0:B,H=(M?2:0)+(V?2:0),K=(v+1)*(T+1+H),$=w(3,K),Q=w(3,K),ie=w(2,K),ue=w(3,v*(T+H/2)*2,Uint16Array),q=v+1,me=Math.atan2(o-n,s),Be=Math.cos(me),Ye=Math.sin(me),Ue=M?-2:0,Ge=T+(V?2:0),_e=Ue;_e<=Ge;++_e){var Re=_e/T,qe=s*Re,Ve=void 0;_e<0?(qe=0,Re=1,Ve=o):_e>T?(qe=s,Re=1,Ve=n):Ve=o+(n-o)*(_e/T),(_e===-2||_e===T+2)&&(Ve=0,Re=0),qe-=s/2;for(var Ke=0;Ke<q;++Ke){var ke=Math.sin(Ke*Math.PI*2/v),Ze=Math.cos(Ke*Math.PI*2/v);$.push(ke*Ve,qe,Ze*Ve),_e<0?Q.push(0,-1,0):_e>T?Q.push(0,1,0):Ve===0?Q.push(0,0,0):Q.push(ke*Be,Ye,Ze*Be),ie.push(Ke/v,1-Re)}}for(var Fe=0;Fe<T+H;++Fe)if(!(Fe===1&&M||Fe===T+H-2&&V))for(var De=0;De<v;++De)ue.push(q*(Fe+0)+0+De,q*(Fe+0)+1+De,q*(Fe+1)+1+De),ue.push(q*(Fe+0)+0+De,q*(Fe+1)+1+De,q*(Fe+1)+0+De);return{position:$,normal:Q,texcoord:ie,indices:ue}}function we(o,n){n=n||[];for(var s=[],v=0;v<o.length;v+=4){var T=o[v],S=o.slice(v+1,v+4);S.push.apply(S,n);for(var B=0;B<T;++B)s.push.apply(s,S)}return s}function je(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],n=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],s=we([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=we([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),T=o.length/3,S={position:w(3,T),texcoord:w(2,T),normal:w(3,T),color:w(4,T,Uint8Array),indices:w(3,T/3,Uint16Array)};S.position.push(o),S.texcoord.push(n),S.normal.push(s),S.color.push(v);for(var B=0;B<T;++B)S.indices.push(B);return S}function Oe(o,n,s,v,T,S,B){if(T<=0)throw new Error("subdivisionDown must be > 0");S=S||0,B=B||1;var M=2,V=B-S,H=(T+1)*2*(2+M),K=w(3,H),$=w(3,H),Q=w(2,H);function ie(Ge,_e,Re){return Ge+(_e-Ge)*Re}function ue(Ge,_e,Re,qe,Ve,Ke){for(var ke=0;ke<=T;ke++){var Ze=_e/(M-1),Fe=ke/T,De=(Ze-.5)*2,yr=(S+Fe*V)*Math.PI,fr=Math.sin(yr),dr=Math.cos(yr),Sr=ie(o,Ge,fr),Mr=De*v,Or=dr*o,Nr=fr*Sr;K.push(Mr,Or,Nr);var Qr=le.add(le.multiply([0,fr,dr],Re),qe);$.push(Qr),Q.push(Ze*Ve+Ke,Fe)}}for(var q=0;q<M;q++){var me=(q/(M-1)-.5)*2;ue(n,q,[1,1,1],[0,0,0],1,0),ue(n,q,[0,0,0],[me,0,0],0,0),ue(s,q,[1,1,1],[0,0,0],1,0),ue(s,q,[0,0,0],[me,0,0],0,1)}var Be=w(3,T*2*(2+M),Uint16Array);function Ye(Ge,_e){for(var Re=0;Re<T;++Re)Be.push(Ge+Re+0,Ge+Re+1,_e+Re+0),Be.push(Ge+Re+1,_e+Re+1,_e+Re+0)}var Ue=T+1;return Ye(Ue*0,Ue*4),Ye(Ue*5,Ue*7),Ye(Ue*6,Ue*2),Ye(Ue*3,Ue*1),{position:K,normal:$,texcoord:Q,indices:Be}}function Qe(o,n,s,v,T,S){return de(o,o,n,s,v,T,S)}function He(o,n,s,v,T,S){if(s<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");T=T||0,S=S||Math.PI*2;for(var B=S-T,M=s+1,V=v+1,H=M*V,K=w(3,H),$=w(3,H),Q=w(2,H),ie=w(3,s*v*2,Uint16Array),ue=0;ue<V;++ue)for(var q=ue/v,me=q*Math.PI*2,Be=Math.sin(me),Ye=o+Be*n,Ue=Math.cos(me),Ge=Ue*n,_e=0;_e<M;++_e){var Re=_e/s,qe=T+Re*B,Ve=Math.sin(qe),Ke=Math.cos(qe),ke=Ve*Ye,Ze=Ke*Ye,Fe=Ve*Be,De=Ke*Be;K.push(ke,Ge,Ze),$.push(Fe,Ue,De),Q.push(Re,1-q)}for(var yr=0;yr<v;++yr)for(var fr=0;fr<s;++fr){var dr=1+fr,Sr=1+yr;ie.push(M*yr+fr,M*Sr+fr,M*yr+dr),ie.push(M*Sr+fr,M*Sr+dr,M*yr+dr)}return{position:K,normal:$,texcoord:Q,indices:ie}}function ir(o,n,s,v,T){if(n<3)throw new Error("divisions must be at least 3");s=s||1,T=T||1,v=v||0;for(var S=(n+1)*(s+1),B=w(3,S),M=w(3,S),V=w(2,S),H=w(3,s*n*2,Uint16Array),K=0,$=o-v,Q=n+1,ie=0;ie<=s;++ie){for(var ue=v+$*Math.pow(ie/s,T),q=0;q<=n;++q){var me=2*Math.PI*q/n,Be=ue*Math.cos(me),Ye=ue*Math.sin(me);if(B.push(Be,0,Ye),M.push(0,1,0),V.push(1-q/n,ie/s),ie>0&&q!==n){var Ue=K+(q+1),Ge=K+q,_e=K+q-Q,Re=K+(q+1)-Q;H.push(Ue,Ge,_e),H.push(Ue,_e,Re)}}K+=n+1}return{position:B,normal:M,texcoord:V,indices:H}}function Tr(o){return Math.random()*o|0}function ur(o,n){n=n||{};var s=o.position.numElements,v=w(4,s,Uint8Array),T=n.rand||function($,Q){return Q<3?Tr(256):255};if(o.color=v,o.indices)for(var S=0;S<s;++S)v.push(T(S,0),T(S,1),T(S,2),T(S,3));else for(var B=n.vertsPerColor||3,M=s/B,V=0;V<M;++V)for(var H=[T(V,0),T(V,1),T(V,2),T(V,3)],K=0;K<B;++K)v.push(H);return o}function rr(o){return function(n){var s=o.apply(this,Array.prototype.slice.call(arguments,1));return k.createBuffersFromArrays(n,s)}}function lr(o){return function(n){var s=o.apply(null,Array.prototype.slice.call(arguments,1));return k.createBufferInfoFromArrays(n,s)}}var Ar=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function re(o,n,s,v){v=v||0;for(var T=o.length,S=0;S<T;++S)n[s+S]=o[S]+v}function r(o,n){var s=F(o),v=new s.constructor(n),T=v;return s.numComponents&&s.numElements&&z(v,s.numComponents),o.data&&(T={data:v},ce.copyNamedProperties(Ar,o,T)),T}function i(o){for(var n={},s,v=function(){var K=o[T];Object.keys(K).forEach(function($){n[$]||(n[$]=[]),!s&&$!=="indices"&&(s=$);var Q=K[$],ie=W(Q,$),ue=F(Q),q=ue.length/ie;n[$].push(q)})},T=0;T<o.length;++T)v();function S(H){for(var K=0,$,Q=0;Q<o.length;++Q){var ie=o[Q],ue=ie[H],q=F(ue);K+=q.length,(!$||ue.data)&&($=ue)}return{length:K,spec:$}}function B(H,K,$){for(var Q=0,ie=0,ue=0;ue<o.length;++ue){var q=o[ue],me=q[H],Be=F(me);H==="indices"?(re(Be,$,ie,Q),Q+=K[ue]):re(Be,$,ie),ie+=Be.length}}var M=n[s],V={};return Object.keys(n).forEach(function(H){var K=S(H),$=r(K.spec,K.length);B(H,M,F($)),V[H]=$}),V}function f(o){var n={};return Object.keys(o).forEach(function(s){var v=o[s],T=F(v),S=r(v,T.length);re(T,F(S),0),n[s]=S}),n}u.create3DFBufferInfo=lr(je),u.create3DFBuffers=rr(je),u.createCubeBufferInfo=lr(ye),u.createCubeBuffers=rr(ye),u.createPlaneBufferInfo=lr(I),u.createPlaneBuffers=rr(I),u.createSphereBufferInfo=lr(O),u.createSphereBuffers=rr(O),u.createTruncatedConeBufferInfo=lr(de),u.createTruncatedConeBuffers=rr(de),u.createXYQuadBufferInfo=lr(x),u.createXYQuadBuffers=rr(x);var E=u.createCrescentBufferInfo=lr(Oe),l=u.createCrescentBuffers=rr(Oe);u.createCylinderBufferInfo=lr(Qe),u.createCylinderBuffers=rr(Qe),u.createTorusBufferInfo=lr(He),u.createTorusBuffers=rr(He),u.createDiscBufferInfo=lr(ir),u.createDiscBuffers=rr(ir),u.createCresentBufferInfo=E,u.createCresentBuffers=l,u.createCresentVertices=Oe},"./src/programs.js":(Ae,u,X)=>{function fe(e){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(e)}u.__esModule=!0,u.bindTransformFeedbackInfo=xt,u.bindUniformBlock=wt,u.createAttributeSetters=zt,u.createProgram=ft,u.createProgramAsync=void 0,u.createProgramFromScripts=Vt,u.createProgramFromSources=kt,u.createProgramInfo=c,u.createProgramInfoAsync=void 0,u.createProgramInfoFromProgram=Ft,u.createProgramInfos=d,u.createProgramInfosAsync=void 0,u.createPrograms=h,u.createProgramsAsync=void 0,u.createTransformFeedback=Xt,u.createTransformFeedbackInfo=gt,u.createUniformBlockInfo=Yt,u.createUniformBlockInfoFromProgram=Ht,u.createUniformBlockSpecFromProgram=zr,u.createUniformSetters=$r,u.setAttributes=Kt,u.setBlockUniforms=ka,u.setBuffersAndAttributes=Wa,u.setUniformBlock=ya,u.setUniforms=Rt,u.setUniformsAndBindTextures=void 0;var k=G(X("./src/utils.js")),ce=G(X("./src/helper.js"));function oe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(oe=function(b){return b?a:t})(e)}function G(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||fe(e)!="object"&&typeof e!="function")return{default:e};var a=oe(t);if(a&&a.has(e))return a.get(e);var p={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in e)if(A!=="default"&&Object.prototype.hasOwnProperty.call(e,A)){var R=b?Object.getOwnPropertyDescriptor(e,A):null;R&&(R.get||R.set)?Object.defineProperty(p,A,R):p[A]=e[A]}return p.default=e,a&&a.set(e,p),p}function le(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */le=function(){return t};var e,t={},a=Object.prototype,p=a.hasOwnProperty,b=Object.defineProperty||function(te,U,Y){te[U]=Y.value},A=typeof Symbol=="function"?Symbol:{},R=A.iterator||"@@iterator",P=A.asyncIterator||"@@asyncIterator",D=A.toStringTag||"@@toStringTag";function C(te,U,Y){return Object.defineProperty(te,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}),te[U]}try{C({},"")}catch{C=function(Y,Ee,Ie){return Y[Ee]=Ie}}function N(te,U,Y,Ee){var Ie=U&&U.prototype instanceof Le?U:Le,Pe=Object.create(Ie.prototype),cr=new Ya(Ee||[]);return b(Pe,"_invoke",{value:yn(te,Y,cr)}),Pe}function ee(te,U,Y){try{return{type:"normal",arg:te.call(U,Y)}}catch(Ee){return{type:"throw",arg:Ee}}}t.wrap=N;var se="suspendedStart",he="suspendedYield",xe="executing",Me="completed",Ce={};function Le(){}function ze(){}function tr(){}var sr={};C(sr,R,function(){return this});var Pr=Object.getPrototypeOf,Dr=Pr&&Pr(Pr(za([])));Dr&&Dr!==a&&p.call(Dr,R)&&(sr=Dr);var Gr=tr.prototype=Le.prototype=Object.create(sr);function pa(te){["next","throw","return"].forEach(function(U){C(te,U,function(Y){return this._invoke(U,Y)})})}function ba(te,U){function Y(Ie,Pe,cr,gr){var wr=ee(te[Ie],te,Pe);if(wr.type!=="throw"){var lt=wr.arg,et=lt.value;return et&&fe(et)=="object"&&p.call(et,"__await")?U.resolve(et.__await).then(function(vt){Y("next",vt,cr,gr)},function(vt){Y("throw",vt,cr,gr)}):U.resolve(et).then(function(vt){lt.value=vt,cr(lt)},function(vt){return Y("throw",vt,cr,gr)})}gr(wr.arg)}var Ee;b(this,"_invoke",{value:function(Pe,cr){function gr(){return new U(function(wr,lt){Y(Pe,cr,wr,lt)})}return Ee=Ee?Ee.then(gr,gr):gr()}})}function yn(te,U,Y){var Ee=se;return function(Ie,Pe){if(Ee===xe)throw new Error("Generator is already running");if(Ee===Me){if(Ie==="throw")throw Pe;return{value:e,done:!0}}for(Y.method=Ie,Y.arg=Pe;;){var cr=Y.delegate;if(cr){var gr=$a(cr,Y);if(gr){if(gr===Ce)continue;return gr}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(Ee===se)throw Ee=Me,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);Ee=xe;var wr=ee(te,U,Y);if(wr.type==="normal"){if(Ee=Y.done?Me:he,wr.arg===Ce)continue;return{value:wr.arg,done:Y.done}}wr.type==="throw"&&(Ee=Me,Y.method="throw",Y.arg=wr.arg)}}}function $a(te,U){var Y=U.method,Ee=te.iterator[Y];if(Ee===e)return U.delegate=null,Y==="throw"&&te.iterator.return&&(U.method="return",U.arg=e,$a(te,U),U.method==="throw")||Y!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),Ce;var Ie=ee(Ee,te.iterator,U.arg);if(Ie.type==="throw")return U.method="throw",U.arg=Ie.arg,U.delegate=null,Ce;var Pe=Ie.arg;return Pe?Pe.done?(U[te.resultName]=Pe.value,U.next=te.nextLoc,U.method!=="return"&&(U.method="next",U.arg=e),U.delegate=null,Ce):Pe:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,Ce)}function hn(te){var U={tryLoc:te[0]};1 in te&&(U.catchLoc=te[1]),2 in te&&(U.finallyLoc=te[2],U.afterLoc=te[3]),this.tryEntries.push(U)}function Ha(te){var U=te.completion||{};U.type="normal",delete U.arg,te.completion=U}function Ya(te){this.tryEntries=[{tryLoc:"root"}],te.forEach(hn,this),this.reset(!0)}function za(te){if(te||te===""){var U=te[R];if(U)return U.call(te);if(typeof te.next=="function")return te;if(!isNaN(te.length)){var Y=-1,Ee=function Ie(){for(;++Y<te.length;)if(p.call(te,Y))return Ie.value=te[Y],Ie.done=!1,Ie;return Ie.value=e,Ie.done=!0,Ie};return Ee.next=Ee}}throw new TypeError(fe(te)+" is not iterable")}return ze.prototype=tr,b(Gr,"constructor",{value:tr,configurable:!0}),b(tr,"constructor",{value:ze,configurable:!0}),ze.displayName=C(tr,D,"GeneratorFunction"),t.isGeneratorFunction=function(te){var U=typeof te=="function"&&te.constructor;return!!U&&(U===ze||(U.displayName||U.name)==="GeneratorFunction")},t.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,tr):(te.__proto__=tr,C(te,D,"GeneratorFunction")),te.prototype=Object.create(Gr),te},t.awrap=function(te){return{__await:te}},pa(ba.prototype),C(ba.prototype,P,function(){return this}),t.AsyncIterator=ba,t.async=function(te,U,Y,Ee,Ie){Ie===void 0&&(Ie=Promise);var Pe=new ba(N(te,U,Y,Ee),Ie);return t.isGeneratorFunction(U)?Pe:Pe.next().then(function(cr){return cr.done?cr.value:Pe.next()})},pa(Gr),C(Gr,D,"Generator"),C(Gr,R,function(){return this}),C(Gr,"toString",function(){return"[object Generator]"}),t.keys=function(te){var U=Object(te),Y=[];for(var Ee in U)Y.push(Ee);return Y.reverse(),function Ie(){for(;Y.length;){var Pe=Y.pop();if(Pe in U)return Ie.value=Pe,Ie.done=!1,Ie}return Ie.done=!0,Ie}},t.values=za,Ya.prototype={constructor:Ya,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ha),!U)for(var Y in this)Y.charAt(0)==="t"&&p.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=e)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var Y=this;function Ee(lt,et){return cr.type="throw",cr.arg=U,Y.next=lt,et&&(Y.method="next",Y.arg=e),!!et}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Pe=this.tryEntries[Ie],cr=Pe.completion;if(Pe.tryLoc==="root")return Ee("end");if(Pe.tryLoc<=this.prev){var gr=p.call(Pe,"catchLoc"),wr=p.call(Pe,"finallyLoc");if(gr&&wr){if(this.prev<Pe.catchLoc)return Ee(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return Ee(Pe.finallyLoc)}else if(gr){if(this.prev<Pe.catchLoc)return Ee(Pe.catchLoc,!0)}else{if(!wr)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return Ee(Pe.finallyLoc)}}}},abrupt:function(U,Y){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var Ie=this.tryEntries[Ee];if(Ie.tryLoc<=this.prev&&p.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Pe=Ie;break}}Pe&&(U==="break"||U==="continue")&&Pe.tryLoc<=Y&&Y<=Pe.finallyLoc&&(Pe=null);var cr=Pe?Pe.completion:{};return cr.type=U,cr.arg=Y,Pe?(this.method="next",this.next=Pe.finallyLoc,Ce):this.complete(cr)},complete:function(U,Y){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&Y&&(this.next=Y),Ce},finish:function(U){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var Ee=this.tryEntries[Y];if(Ee.finallyLoc===U)return this.complete(Ee.completion,Ee.afterLoc),Ha(Ee),Ce}},catch:function(U){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var Ee=this.tryEntries[Y];if(Ee.tryLoc===U){var Ie=Ee.completion;if(Ie.type==="throw"){var Pe=Ie.arg;Ha(Ee)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(U,Y,Ee){return this.delegate={iterator:za(U),resultName:Y,nextLoc:Ee},this.method==="next"&&(this.arg=e),Ce}},t}function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable})),a.push.apply(a,p)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Z(Object(a),!0).forEach(function(p){F(e,p,a[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(a,p))})}return e}function F(e,t,a){return t=W(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W(e){var t=z(e,"string");return fe(t)=="symbol"?t:String(t)}function z(e,t){if(fe(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var p=a.call(e,t||"default");if(fe(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w(e,t,a,p,b,A,R){try{var P=e[A](R),D=P.value}catch(C){a(C);return}P.done?t(D):Promise.resolve(D).then(p,b)}function L(e){return function(){var t=this,a=arguments;return new Promise(function(p,b){var A=e.apply(t,a);function R(D){w(A,p,b,R,P,"next",D)}function P(D){w(A,p,b,R,P,"throw",D)}R(void 0)})}}function ae(e,t){return ge(e)||Ne(e,t)||ve(e,t)||pe()}function pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ne(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var p,b,A,R,P=[],D=!0,C=!1;try{if(A=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;D=!1}else for(;!(D=(p=A.call(a)).done)&&(P.push(p.value),P.length!==t);D=!0);}catch(N){C=!0,b=N}finally{try{if(!D&&a.return!=null&&(R=a.return(),Object(R)!==R))return}finally{if(C)throw b}}return P}}function ge(e){if(Array.isArray(e))return e}function nr(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=ve(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var p=0,b=function(){};return{s:b,n:function(){return p>=e.length?{done:!0}:{done:!1,value:e[p++]}},e:function(C){throw C},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,R=!1,P;return{s:function(){a=a.call(e)},n:function(){var C=a.next();return A=C.done,C},e:function(C){R=!0,P=C},f:function(){try{!A&&a.return!=null&&a.return()}finally{if(R)throw P}}}}function or(e){return I(e)||x(e)||ve(e)||Je()}function Je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(e,t){if(e){if(typeof e=="string")return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}}function x(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I(e){if(Array.isArray(e))return O(e)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,p=new Array(t);a<t;a++)p[a]=e[a];return p}var _=ce.error,ye=ce.warn;function de(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var we=33984,je=35048,Oe=34962,Qe=34963,He=35345,ir=35982,Tr=36386,ur=35713,rr=35714,lr=35632,Ar=35633,re=35981,r=35718,i=35721,f=35971,E=35382,l=35396,o=35398,n=35392,s=35395,v=5126,T=35664,S=35665,B=35666,M=5124,V=35667,H=35668,K=35669,$=35670,Q=35671,ie=35672,ue=35673,q=35674,me=35675,Be=35676,Ye=35678,Ue=35680,Ge=35679,_e=35682,Re=35685,qe=35686,Ve=35687,Ke=35688,ke=35689,Ze=35690,Fe=36289,De=36292,yr=36293,fr=5125,dr=36294,Sr=36295,Mr=36296,Or=36298,Nr=36299,Qr=36300,mt=36303,yt=36306,ht=36307,vr=36308,Ia=36311,pt=3553,bt=34067,Ot=32879,Et=35866,Se={};function ea(e,t){return Se[t].bindPoint}function Ba(e,t){return function(a){e.uniform1f(t,a)}}function Ma(e,t){return function(a){e.uniform1fv(t,a)}}function Da(e,t){return function(a){e.uniform2fv(t,a)}}function Oa(e,t){return function(a){e.uniform3fv(t,a)}}function Na(e,t){return function(a){e.uniform4fv(t,a)}}function ra(e,t){return function(a){e.uniform1i(t,a)}}function ta(e,t){return function(a){e.uniform1iv(t,a)}}function aa(e,t){return function(a){e.uniform2iv(t,a)}}function na(e,t){return function(a){e.uniform3iv(t,a)}}function oa(e,t){return function(a){e.uniform4iv(t,a)}}function Ur(e,t){return function(a){e.uniform1ui(t,a)}}function er(e,t){return function(a){e.uniform1uiv(t,a)}}function Tt(e,t){return function(a){e.uniform2uiv(t,a)}}function Zr(e,t){return function(a){e.uniform3uiv(t,a)}}function At(e,t){return function(a){e.uniform4uiv(t,a)}}function Vr(e,t){return function(a){e.uniformMatrix2fv(t,!1,a)}}function hr(e,t){return function(a){e.uniformMatrix3fv(t,!1,a)}}function ia(e,t){return function(a){e.uniformMatrix4fv(t,!1,a)}}function ua(e,t){return function(a){e.uniformMatrix2x3fv(t,!1,a)}}function fa(e,t){return function(a){e.uniformMatrix3x2fv(t,!1,a)}}function Rr(e,t){return function(a){e.uniformMatrix2x4fv(t,!1,a)}}function ut(e,t){return function(a){e.uniformMatrix4x2fv(t,!1,a)}}function Nt(e,t){return function(a){e.uniformMatrix3x4fv(t,!1,a)}}function Ua(e,t){return function(a){e.uniformMatrix4x3fv(t,!1,a)}}function br(e,t,a,p){var b=ea(e,t);return k.isWebGL2(e)?function(A){var R,P;!A||ce.isTexture(e,A)?(R=A,P=null):(R=A.texture,P=A.sampler),e.uniform1i(p,a),e.activeTexture(we+a),e.bindTexture(b,R),e.bindSampler(a,P)}:function(A){e.uniform1i(p,a),e.activeTexture(we+a),e.bindTexture(b,A)}}function Er(e,t,a,p,b){for(var A=ea(e,t),R=new Int32Array(b),P=0;P<b;++P)R[P]=a+P;return k.isWebGL2(e)?function(D){e.uniform1iv(p,R),D.forEach(function(C,N){e.activeTexture(we+R[N]);var ee,se;!C||ce.isTexture(e,C)?(ee=C,se=null):(ee=C.texture,se=C.sampler),e.bindSampler(a,se),e.bindTexture(A,ee)})}:function(D){e.uniform1iv(p,R),D.forEach(function(C,N){e.activeTexture(we+R[N]),e.bindTexture(A,C)})}}Se[v]={Type:Float32Array,size:4,setter:Ba,arraySetter:Ma},Se[T]={Type:Float32Array,size:8,setter:Da,cols:2},Se[S]={Type:Float32Array,size:12,setter:Oa,cols:3},Se[B]={Type:Float32Array,size:16,setter:Na,cols:4},Se[M]={Type:Int32Array,size:4,setter:ra,arraySetter:ta},Se[V]={Type:Int32Array,size:8,setter:aa,cols:2},Se[H]={Type:Int32Array,size:12,setter:na,cols:3},Se[K]={Type:Int32Array,size:16,setter:oa,cols:4},Se[fr]={Type:Uint32Array,size:4,setter:Ur,arraySetter:er},Se[dr]={Type:Uint32Array,size:8,setter:Tt,cols:2},Se[Sr]={Type:Uint32Array,size:12,setter:Zr,cols:3},Se[Mr]={Type:Uint32Array,size:16,setter:At,cols:4},Se[$]={Type:Uint32Array,size:4,setter:ra,arraySetter:ta},Se[Q]={Type:Uint32Array,size:8,setter:aa,cols:2},Se[ie]={Type:Uint32Array,size:12,setter:na,cols:3},Se[ue]={Type:Uint32Array,size:16,setter:oa,cols:4},Se[q]={Type:Float32Array,size:32,setter:Vr,rows:2,cols:2},Se[me]={Type:Float32Array,size:48,setter:hr,rows:3,cols:3},Se[Be]={Type:Float32Array,size:64,setter:ia,rows:4,cols:4},Se[Re]={Type:Float32Array,size:32,setter:ua,rows:2,cols:3},Se[qe]={Type:Float32Array,size:32,setter:Rr,rows:2,cols:4},Se[Ve]={Type:Float32Array,size:48,setter:fa,rows:3,cols:2},Se[Ke]={Type:Float32Array,size:48,setter:Nt,rows:3,cols:4},Se[ke]={Type:Float32Array,size:64,setter:ut,rows:4,cols:2},Se[Ze]={Type:Float32Array,size:64,setter:Ua,rows:4,cols:3},Se[Ye]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Ue]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[Ge]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},Se[_e]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Fe]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[De]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[yr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[Or]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[Nr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},Se[Qr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[mt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et},Se[yt]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:pt},Se[ht]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Ot},Se[vr]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:bt},Se[Ia]={Type:null,size:0,setter:br,arraySetter:Er,bindPoint:Et};function dt(e,t){return function(a){if(a.value)switch(e.disableVertexAttribArray(t),a.value.length){case 4:e.vertexAttrib4fv(t,a.value);break;case 3:e.vertexAttrib3fv(t,a.value);break;case 2:e.vertexAttrib2fv(t,a.value);break;case 1:e.vertexAttrib1fv(t,a.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,a.numComponents||a.size,a.type||v,a.normalize||!1,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function xr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4iv(t,a.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||M,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function Cr(e,t){return function(a){if(a.value)if(e.disableVertexAttribArray(t),a.value.length===4)e.vertexAttrib4uiv(t,a.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Oe,a.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,a.numComponents||a.size,a.type||fr,a.stride||0,a.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,a.divisor||0)}}function kr(e,t,a){var p=a.size,b=a.count;return function(A){e.bindBuffer(Oe,A.buffer);for(var R=A.size||A.numComponents||p,P=R/b,D=A.type||v,C=Se[D],N=C.size*R,ee=A.normalize||!1,se=A.offset||0,he=N/b,xe=0;xe<b;++xe)e.enableVertexAttribArray(t+xe),e.vertexAttribPointer(t+xe,P,D,ee,N,se+he*xe),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+xe,A.divisor||0)}}var $e={};$e[v]={size:4,setter:dt},$e[T]={size:8,setter:dt},$e[S]={size:12,setter:dt},$e[B]={size:16,setter:dt},$e[M]={size:4,setter:xr},$e[V]={size:8,setter:xr},$e[H]={size:12,setter:xr},$e[K]={size:16,setter:xr},$e[fr]={size:4,setter:Cr},$e[dr]={size:8,setter:Cr},$e[Sr]={size:12,setter:Cr},$e[Mr]={size:16,setter:Cr},$e[$]={size:4,setter:xr},$e[Q]={size:8,setter:xr},$e[ie]={size:12,setter:xr},$e[ue]={size:16,setter:xr},$e[q]={size:4,setter:kr,count:2},$e[me]={size:9,setter:kr,count:3},$e[Be]={size:16,setter:kr,count:4};var Wr=/ERROR:\s*\d+:(\d+)/gi;function Lr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=or(t.matchAll(Wr)),b=new Map(p.map(function(A,R){var P=parseInt(A[1]),D=p[R+1],C=D?D.index:t.length,N=t.substring(A.index,C);return[P-1,N]}));return e.split(`
`).map(function(A,R){var P=b.get(R);return"".concat(R+1+a,": ").concat(A).concat(P?`

^^^ `.concat(P):"")}).join(`
`)}var Ut=/^[ \t]*\n/;function pr(e){var t=0;return Ut.test(e)&&(t=1,e=e.replace(Ut,"")),{lineOffset:t,shaderSource:e}}function _t(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function St(e,t,a,p){p=p||_;var b=e.getShaderParameter(a,ur);if(!b){var A=e.getShaderInfoLog(a),R=pr(e.getShaderSource(a)),P=R.lineOffset,D=R.shaderSource,C="".concat(Lr(D,A,P),`
Error compiling `).concat(k.glEnumToString(e,t),": ").concat(A);return p(C),C}return""}function Xr(e,t,a){var p,b,A;if(typeof t=="function"&&(a=t,t=void 0),typeof e=="function")a=e,e=void 0;else if(e&&!Array.isArray(e)){var R=e;a=R.errorCallback,e=R.attribLocations,p=R.transformFeedbackVaryings,b=R.transformFeedbackMode,A=R.callback}var P=a||_,D=[],C={errorCallback:function(se){D.push(se);for(var he=arguments.length,xe=new Array(he>1?he-1:0),Me=1;Me<he;Me++)xe[Me-1]=arguments[Me];P.apply(void 0,[se].concat(xe))},transformFeedbackVaryings:p,transformFeedbackMode:b,callback:A,errors:D};{var N={};Array.isArray(e)?e.forEach(function(ee,se){N[ee]=t?t[se]:se}):N=e||{},C.attribLocations=N}return C}var Hr=["VERTEX_SHADER","FRAGMENT_SHADER"];function ca(e,t){if(t.indexOf("frag")>=0)return lr;if(t.indexOf("vert")>=0)return Ar}function la(e,t,a){var p=e.getAttachedShaders(t),b=nr(p),A;try{for(b.s();!(A=b.n()).done;){var R=A.value;a.has(R)&&e.deleteShader(R)}}catch(P){b.e(P)}finally{b.f()}e.deleteProgram(t)}var va=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(a){return setTimeout(a,t)})};function sa(e,t,a){for(var p=e.createProgram(),b=Xr(a),A=b.attribLocations,R=b.transformFeedbackVaryings,P=b.transformFeedbackMode,D=0;D<t.length;++D){var C=t[D];if(typeof C=="string"){var N=de(C),ee=N?N.text:C,se=e[Hr[D]];N&&N.type&&(se=ca(e,N.type)||se),C=e.createShader(se),e.shaderSource(C,pr(ee).shaderSource),e.compileShader(C),e.attachShader(p,C)}}Object.entries(A).forEach(function(xe){var Me=ae(xe,2),Ce=Me[0],Le=Me[1];return e.bindAttribLocation(p,Le,Ce)});{var he=R;he&&(he.attribs&&(he=he.attribs),Array.isArray(he)||(he=Object.keys(he)),e.transformFeedbackVaryings(p,he,P||re))}return e.linkProgram(p),p}function ft(e,t,a,p,b){var A=Xr(a,p,b),R=new Set(t),P=sa(e,t,A);function D(C,N){var ee=jt(C,N,A.errorCallback);return ee&&la(C,N,R),ee}if(A.callback){Lt(e,P).then(function(){var C=D(e,P);A.callback(C,C?void 0:P)});return}return D(e,P)?void 0:P}function Yr(e){return function(t,a){for(var p=arguments.length,b=new Array(p>2?p-2:0),A=2;A<p;A++)b[A-2]=arguments[A];return new Promise(function(R,P){var D=Xr.apply(void 0,b);D.callback=function(C,N){C?P(C):R(N)},e(t,a,D)})}}u.createProgramAsync=Yr(ft),u.createProgramInfoAsync=Yr(c);function Lt(e,t){return Gt.apply(this,arguments)}function Gt(){return Gt=L(le().mark(function e(t,a){var p,b,A;return le().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:p=t.getExtension("KHR_parallel_shader_compile"),b=p?function(D,C){return D.getProgramParameter(C,p.COMPLETION_STATUS_KHR)}:function(){return!0},A=0;case 3:return P.next=5,va(A);case 5:A=16.666666666666668;case 6:if(!b(t,a)){P.next=3;break}case 7:case"end":return P.stop()}},e)})),Gt.apply(this,arguments)}function Jr(e,t){return Pt.apply(this,arguments)}function Pt(){return Pt=L(le().mark(function e(t,a){var p,b,A;return le().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:p=0,b=Object.values(a);case 1:if(!(p<b.length)){P.next=8;break}return A=b[p],P.next=5,Lt(t,A);case 5:p++,P.next=1;break;case 8:case"end":return P.stop()}},e)})),Pt.apply(this,arguments)}function jt(e,t,a){a=a||_;var p=e.getProgramParameter(t,rr);if(!p){var b=e.getProgramInfoLog(t);a("Error in program linking: ".concat(b));var A=e.getAttachedShaders(t),R=A.map(function(P){return St(e,e.getShaderParameter(P,e.SHADER_TYPE),P,a)});return"".concat(b,`
`).concat(R.filter(function(P){return P}).join(`
`))}}function Vt(e,t,a,p,b){var A=Xr(a,p,b),R=[],P=nr(t),D;try{for(P.s();!(D=P.n()).done;){var C=D.value,N=de(C);if(!N)return _t(A,"unknown script element: ".concat(C));R.push(N.text)}}catch(ee){P.e(ee)}finally{P.f()}return ft(e,R,A)}function kt(e,t,a,p,b){return ft(e,t,a,p,b)}function Wt(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var La=/(\.|\[|]|\w+)/g,Ga=function(t){return t>="0"&&t<="9"};function ct(e,t,a,p){for(var b=e.split(La).filter(function(xe){return xe!==""}),A=0,R="";;){var P=b[A++];R+=P;var D=Ga(P[0]),C=D?parseInt(P):P;D&&(R+=b[A++]);var N=A===b.length;if(N){a[C]=t;break}else{var ee=b[A++],se=ee==="[",he=a[C]||(se?[]:{});a[C]=he,a=he,p[R]=p[R]||function(xe){return function(Me){ha(xe,Me)}}(he),R+=ee}}}function $r(e,t){var a=0;function p(se,he,xe){var Me=he.name.endsWith("[0]"),Ce=he.type,Le=Se[Ce];if(!Le)throw new Error("unknown type: 0x".concat(Ce.toString(16)));var ze;if(Le.bindPoint){var tr=a;a+=he.size,Me?ze=Le.arraySetter(e,Ce,tr,xe,he.size):ze=Le.setter(e,Ce,tr,xe,he.size)}else Le.arraySetter&&Me?ze=Le.arraySetter(e,xe):ze=Le.setter(e,xe);return ze.location=xe,ze}for(var b={},A={},R=e.getProgramParameter(t,r),P=0;P<R;++P){var D=e.getActiveUniform(t,P);if(!Wt(D)){var C=D.name;C.endsWith("[0]")&&(C=C.substr(0,C.length-3));var N=e.getUniformLocation(t,D.name);if(N){var ee=p(t,D,N);b[C]=ee,ct(C,ee,A,b)}}}return b}function gt(e,t){for(var a={},p=e.getProgramParameter(t,f),b=0;b<p;++b){var A=e.getTransformFeedbackVarying(t,b);a[A.name]={index:b,type:A.type,size:A.size}}return a}function xt(e,t,a){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),a.attribs&&(a=a.attribs);for(var p in a){var b=t[p];if(b){var A=a[p];A.offset?e.bindBufferRange(ir,b.index,A.buffer,A.offset,A.size):e.bindBufferBase(ir,b.index,A.buffer)}}}function Xt(e,t,a){var p=e.createTransformFeedback();return e.bindTransformFeedback(Tr,p),e.useProgram(t.program),xt(e,t,a),e.bindTransformFeedback(Tr,null),p}function zr(e,t){for(var a=e.getProgramParameter(t,r),p=[],b=[],A=0;A<a;++A){b.push(A),p.push({});var R=e.getActiveUniform(t,A);p[A].name=R.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(se){var he=se[0],xe=se[1];e.getActiveUniforms(t,b,e[he]).forEach(function(Me,Ce){p[Ce][xe]=Me})});for(var P={},D=e.getProgramParameter(t,E),C=0;C<D;++C){var N=e.getActiveUniformBlockName(t,C),ee={index:e.getUniformBlockIndex(t,N),usedByVertexShader:e.getActiveUniformBlockParameter(t,C,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,C,o),size:e.getActiveUniformBlockParameter(t,C,n),uniformIndices:e.getActiveUniformBlockParameter(t,C,s)};ee.used=ee.usedByVertexShader||ee.usedByFragmentShader,P[N]=ee}return{blockSpecs:P,uniformData:p}}var ma=/\[\d+\]\.$/,ja=function(t,a){return((t+(a-1))/a|0)*a};function Va(e,t,a,p){if(t||a){p=p||1;var b=e.length,A=b/4;return function(R){for(var P=0,D=0,C=0;C<A;++C){for(var N=0;N<p;++N)e[P++]=R[D++];P+=4-p}}}else return function(R){R.length?e.set(R):e[0]=R}}function Ht(e,t,a,p){var b=a.blockSpecs,A=a.uniformData,R=b[p];if(!R)return ye("no uniform block object named:",p),{name:p,uniforms:{}};var P=new ArrayBuffer(R.size),D=e.createBuffer(),C=R.index;e.bindBuffer(He,D),e.uniformBlockBinding(t,R.index,C);var N=p+".";ma.test(N)&&(N=N.replace(ma,"."));var ee={},se={},he={};return R.uniformIndices.forEach(function(xe){var Me=A[xe],Ce=Me.name;Ce.startsWith(N)&&(Ce=Ce.substr(N.length));var Le=Ce.endsWith("[0]");Le&&(Ce=Ce.substr(0,Ce.length-3));var ze=Se[Me.type],tr=ze.Type,sr=Le?ja(ze.size,16)*Me.size:ze.size*Me.size,Pr=new tr(P,Me.offset,sr/tr.BYTES_PER_ELEMENT);ee[Ce]=Pr;var Dr=Va(Pr,Le,ze.rows,ze.cols);se[Ce]=Dr,ct(Ce,Dr,he,se)}),{name:p,array:P,asFloat:new Float32Array(P),buffer:D,uniforms:ee,setters:se}}function Yt(e,t,a){return Ht(e,t.program,t.uniformBlockSpec,a)}function wt(e,t,a){var p=t.uniformBlockSpec||t,b=p.blockSpecs[a.name];if(b){var A=b.index;return e.bindBufferRange(He,A,a.buffer,a.offset||0,a.array.byteLength),!0}return!1}function ya(e,t,a){wt(e,t,a)&&e.bufferData(He,a.array,je)}function ka(e,t){var a=e.setters;for(var p in t){var b=a[p];if(b){var A=t[p];b(A)}}}function ha(e,t){for(var a in t){var p=e[a];typeof p=="function"?p(t[a]):ha(e[a],t[a])}}function Rt(e){for(var t=e.uniformSetters||e,a=arguments.length<=1?0:arguments.length-1,p=0;p<a;++p){var b=p+1<1||arguments.length<=p+1?void 0:arguments[p+1];if(Array.isArray(b))for(var A=b.length,R=0;R<A;++R)Rt(t,b[R]);else for(var P in b){var D=t[P];D&&D(b[P])}}}u.setUniformsAndBindTextures=Rt;function zt(e,t){for(var a={},p=e.getProgramParameter(t,i),b=0;b<p;++b){var A=e.getActiveAttrib(t,b);if(!Wt(A)){var R=e.getAttribLocation(t,A.name),P=$e[A.type],D=P.setter(e,R,P);D.location=R,a[A.name]=D}}return a}function Kt(e,t){for(var a in t){var p=e[a];p&&p(t[a])}}function Wa(e,t,a){a.vertexArrayObject?e.bindVertexArray(a.vertexArrayObject):(Kt(t.attribSetters||t,a.attribs),a.indices&&e.bindBuffer(Qe,a.indices))}function Ft(e,t){var a=$r(e,t),p=zt(e,t),b={program:t,uniformSetters:a,attribSetters:p};return k.isWebGL2(e)&&(b.uniformBlockSpec=zr(e,t),b.transformFeedbackInfo=gt(e,t)),b}var Xa=/\s|{|}|;/;function c(e,t,a,p,b){var A=Xr(a,p,b),R=[];if(t=t.map(function(C){if(!Xa.test(C)){var N=de(C);if(N)C=N.text;else{var ee="no element with id: ".concat(C);A.errorCallback(ee),R.push(ee)}}return C}),R.length)return _t(A,"");var P=A.callback;P&&(A.callback=function(C,N){P(C,C?void 0:Ft(e,N))});var D=kt(e,t,A);return D?Ft(e,D):null}function m(e,t,a,p,b){for(var A=0,R=Object.entries(t);A<R.length;A++){var P=ae(R[A],2),D=P[0],C=P[1],N=be({},b),ee=a[D];Array.isArray(ee)||Object.assign(N,ee);var se=jt(e,C,N.errorCallback);if(se){for(var he=0,xe=Object.values(t);he<xe.length;he++){var Me=xe[he],Ce=e.getAttachedShaders(Me);e.deleteProgram(Me);var Le=nr(Ce),ze;try{for(Le.s();!(ze=Le.n()).done;){var tr=ze.value;p.has(tr)||e.deleteShader(tr)}}catch(sr){Le.e(sr)}finally{Le.f()}}return se}}}function h(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=new Set,b=Object.fromEntries(Object.entries(t).map(function(R){var P=ae(R,2),D=P[0],C=P[1],N=be({},a),ee=Array.isArray(C)?C:C.shaders;return Array.isArray(C)||Object.assign(N,C),ee.forEach(p.add,p),[D,sa(e,ee,N)]}));if(a.callback){Jr(e,b).then(function(){var R=m(e,b,t,p,a);a.callback(R,R?void 0:b)});return}var A=m(e,b,t,p,a);return A?void 0:b}function d(e,t,a){a=Xr(a);function p(R,P){return Object.fromEntries(Object.entries(P).map(function(D){var C=ae(D,2),N=C[0],ee=C[1];return[N,Ft(R,ee)]}))}var b=a.callback;b&&(a.callback=function(R,P){b(R,R?void 0:p(e,P))});var A=h(e,t,a);if(!(b||!A))return p(e,A)}u.createProgramsAsync=Yr(h),u.createProgramInfosAsync=Yr(d)},"./src/textures.js":(Ae,u,X)=>{function fe(c){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},fe(c)}u.__esModule=!0,u.canFilter=va,u.canGenerateMipmap=la,u.createSampler=Wt,u.createSamplers=La,u.createTexture=Kt,u.createTextures=Xa,u.getBytesPerElementForInternalFormat=Xr,u.getFormatAndTypeForInternalFormat=Hr,u.getNumComponentsForFormat=sa,u.loadTextureFromUrl=ya,u.resizeTexture=Wa,u.setDefaultTextureColor=Lt,u.setEmptyTexture=zt,u.setSamplerParameters=kt,u.setTextureDefaults_=Gt,u.setTextureFilteringForSize=ct,u.setTextureFromArray=Rt,u.setTextureFromElement=Xt,u.setTextureParameters=Vt;var k=le(X("./src/utils.js")),ce=le(X("./src/typedarrays.js")),oe=le(X("./src/helper.js"));function G(c){if(typeof WeakMap!="function")return null;var m=new WeakMap,h=new WeakMap;return(G=function(e){return e?h:m})(c)}function le(c,m){if(!m&&c&&c.__esModule)return c;if(c===null||fe(c)!="object"&&typeof c!="function")return{default:c};var h=G(m);if(h&&h.has(c))return h.get(c);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var a=e?Object.getOwnPropertyDescriptor(c,t):null;a&&(a.get||a.set)?Object.defineProperty(d,t,a):d[t]=c[t]}return d.default=c,h&&h.set(c,d),d}var Z={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},be=ce.isArrayBuffer,F=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),W=6406,z=6407,w=6408,L=6409,ae=6410,pe=6402,Ne=34041,ge=33071,nr=9728,or=9729,Je=3553,ve=34067,x=32879,I=35866,O=34069,_=34070,ye=34071,de=34072,we=34073,je=34074,Oe=10241,Qe=10240,He=10242,ir=10243,Tr=32882,ur=33082,rr=33083,lr=33084,Ar=33085,re=34892,r=34893,i=3317,f=3314,E=32878,l=3316,o=3315,n=32877,s=37443,v=37441,T=37440,S=33321,B=36756,M=33325,V=33326,H=33330,K=33329,$=33338,Q=33337,ie=33340,ue=33339,q=33323,me=36757,Be=33327,Ye=33328,Ue=33336,Ge=33335,_e=33332,Re=33331,qe=33334,Ve=33333,Ke=32849,ke=35905,Ze=36194,Fe=36758,De=35898,yr=35901,fr=34843,dr=34837,Sr=36221,Mr=36239,Or=36215,Nr=36233,Qr=36209,mt=36227,yt=32856,ht=35907,vr=36759,Ia=32855,pt=32854,bt=32857,Ot=34842,Et=34836,Se=36220,ea=36238,Ba=36975,Ma=36214,Da=36232,Oa=36226,Na=36208,ra=33189,ta=33190,aa=36012,na=36013,oa=35056,Ur=5120,er=5121,Tt=5122,Zr=5123,At=5124,Vr=5125,hr=5126,ia=32819,ua=32820,fa=33635,Rr=5131,ut=36193,Nt=33640,Ua=35899,br=35902,Er=36269,dt=34042,xr=33319,Cr=33320,kr=6403,$e=36244,Wr=36248,Lr=36249,Ut={};{var pr=Ut;pr[W]={numColorComponents:1},pr[L]={numColorComponents:1},pr[ae]={numColorComponents:2},pr[z]={numColorComponents:3},pr[w]={numColorComponents:4},pr[kr]={numColorComponents:1},pr[$e]={numColorComponents:1},pr[xr]={numColorComponents:2},pr[Cr]={numColorComponents:2},pr[z]={numColorComponents:3},pr[Wr]={numColorComponents:3},pr[w]={numColorComponents:4},pr[Lr]={numColorComponents:4},pr[pe]={numColorComponents:1},pr[Ne]={numColorComponents:2}}var _t;function St(c){if(!_t){var m={};m[W]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Rr,ut,hr]},m[L]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[er,Rr,ut,hr]},m[ae]={textureFormat:ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[er,Rr,ut,hr]},m[z]={textureFormat:z,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[er,Rr,ut,hr,fa]},m[w]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[er,Rr,ut,hr,ia,ua]},m[pe]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Vr,Zr]},m[S]={textureFormat:kr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[er]},m[B]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Ur]},m[M]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[hr,Rr]},m[V]={textureFormat:kr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[hr]},m[H]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[er]},m[K]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ur]},m[_e]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Zr]},m[Re]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Tt]},m[qe]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},m[Ve]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},m[q]={textureFormat:xr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[er]},m[me]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Ur]},m[Be]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[hr,Rr]},m[Ye]={textureFormat:xr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[hr]},m[Ue]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[er]},m[Ge]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ur]},m[$]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zr]},m[Q]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tt]},m[ie]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vr]},m[ue]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[At]},m[Ke]={textureFormat:z,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[er]},m[ke]={textureFormat:z,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[er]},m[Ze]={textureFormat:z,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[er,fa]},m[Fe]={textureFormat:z,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ur]},m[De]={textureFormat:z,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[hr,Rr,Ua]},m[yr]={textureFormat:z,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[hr,Rr,br]},m[fr]={textureFormat:z,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[hr,Rr]},m[dr]={textureFormat:z,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[hr]},m[Sr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[er]},m[Mr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ur]},m[Or]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Zr]},m[Nr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Tt]},m[Qr]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vr]},m[mt]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[At]},m[yt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},m[ht]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[er]},m[vr]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Ur]},m[Ia]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[er,ua,Nt]},m[pt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[er,ia]},m[bt]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Nt]},m[Ot]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[hr,Rr]},m[Et]={textureFormat:w,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[hr]},m[Se]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[er]},m[ea]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ur]},m[Ba]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nt]},m[Ma]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zr]},m[Da]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Tt]},m[Oa]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[At]},m[Na]={textureFormat:Lr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vr]},m[ra]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zr,Vr]},m[ta]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vr]},m[aa]={textureFormat:pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hr]},m[oa]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dt]},m[na]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Er]},Object.keys(m).forEach(function(h){var d=m[h];d.bytesPerElementMap={},d.bytesPerElement.forEach(function(e,t){var a=d.type[t];d.bytesPerElementMap[a]=e})}),_t=m}return _t[c]}function Xr(c,m){var h=St(c);if(!h)throw"unknown internal format";var d=h.bytesPerElementMap[m];if(d===void 0)throw"unknown internal format";return d}function Hr(c){var m=St(c);if(!m)throw"unknown internal format";return{format:m.textureFormat,type:m.type[0]}}function ca(c){return(c&c-1)===0}function la(c,m,h,d){if(!k.isWebGL2(c))return ca(m)&&ca(h);var e=St(d);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function va(c){var m=St(c);if(!m)throw"unknown internal format";return m.textureFilterable}function sa(c){var m=Ut[c];if(!m)throw"unknown format: "+c;return m.numColorComponents}function ft(c,m,h){return be(m)?ce.getGLTypeForTypedArray(m):h||er}function Yr(c,m,h,d,e){if(e%1!==0)throw"can't guess dimensions";if(!h&&!d){var t=Math.sqrt(e/(m===ve?6:1));t%1===0?(h=t,d=t):(h=e,d=1)}else if(d){if(!h&&(h=e/d,h%1))throw"can't guess dimensions"}else if(d=e/h,d%1)throw"can't guess dimensions";return{width:h,height:d}}function Lt(c){Z.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Gt(c){oe.copyExistingProperties(c,Z),c.textureColor&&Lt(c.textureColor)}function Jr(c,m){m.colorspaceConversion!==void 0&&c.pixelStorei(s,m.colorspaceConversion),m.premultiplyAlpha!==void 0&&c.pixelStorei(v,m.premultiplyAlpha),m.flipY!==void 0&&c.pixelStorei(T,m.flipY)}function Pt(c){c.pixelStorei(i,4),k.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(E,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(n,0))}function jt(c,m,h,d){d.minMag&&(h.call(c,m,Oe,d.minMag),h.call(c,m,Qe,d.minMag)),d.min&&h.call(c,m,Oe,d.min),d.mag&&h.call(c,m,Qe,d.mag),d.wrap&&(h.call(c,m,He,d.wrap),h.call(c,m,ir,d.wrap),(m===x||oe.isSampler(c,m))&&h.call(c,m,Tr,d.wrap)),d.wrapR&&h.call(c,m,Tr,d.wrapR),d.wrapS&&h.call(c,m,He,d.wrapS),d.wrapT&&h.call(c,m,ir,d.wrapT),d.minLod!==void 0&&h.call(c,m,ur,d.minLod),d.maxLod!==void 0&&h.call(c,m,rr,d.maxLod),d.baseLevel!==void 0&&h.call(c,m,lr,d.baseLevel),d.maxLevel!==void 0&&h.call(c,m,Ar,d.maxLevel),d.compareFunc!==void 0&&h.call(c,m,r,d.compareFunc),d.compareMode!==void 0&&h.call(c,m,re,d.compareMode)}function Vt(c,m,h){var d=h.target||Je;c.bindTexture(d,m),jt(c,d,c.texParameteri,h)}function kt(c,m,h){jt(c,m,c.samplerParameteri,h)}function Wt(c,m){var h=c.createSampler();return kt(c,h,m),h}function La(c,m){var h={};return Object.keys(m).forEach(function(d){h[d]=Wt(c,m[d])}),h}function Ga(c){return c=c||Z.textureColor,be(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function ct(c,m,h,d,e,t){h=h||Z.textureOptions,t=t||w;var a=h.target||Je;if(d=d||h.width,e=e||h.height,c.bindTexture(a,m),la(c,d,e,t))c.generateMipmap(a);else{var p=va(t)?or:nr;c.texParameteri(a,Oe,p),c.texParameteri(a,Qe,p),c.texParameteri(a,He,ge),c.texParameteri(a,ir,ge)}}function $r(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function gt(c,m){return m=m||{},m.cubeFaceOrder||[O,_,ye,de,we,je]}function xt(c,m){var h=gt(c,m),d=h.map(function(e,t){return{face:e,ndx:t}});return d.sort(function(e,t){return e.face-t.face}),d}function Xt(c,m,h,d){d=d||Z.textureOptions;var e=d.target||Je,t=d.level||0,a=h.width,p=h.height,b=d.internalFormat||d.format||w,A=Hr(b),R=d.format||A.format,P=d.type||A.type;if(Jr(c,d),c.bindTexture(e,m),e===ve){var D=h.width,C=h.height,N,ee;if(D/6===C)N=C,ee=[0,0,1,0,2,0,3,0,4,0,5,0];else if(C/6===D)N=D,ee=[0,0,0,1,0,2,0,3,0,4,0,5];else if(D/3===C/2)N=D/3,ee=[0,0,1,0,2,0,0,1,1,1,2,1];else if(D/2===C/3)N=D/2,ee=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(h.src?h.src:h.nodeName);var se=F();se?(se.canvas.width=N,se.canvas.height=N,a=N,p=N,xt(c,d).forEach(function(Pr){var Dr=ee[Pr.ndx*2+0]*N,Gr=ee[Pr.ndx*2+1]*N;se.drawImage(h,Dr,Gr,N,N,0,0,N,N),c.texImage2D(Pr.face,t,b,R,P,se.canvas)}),se.canvas.width=1,se.canvas.height=1):typeof createImageBitmap<"u"&&(a=N,p=N,xt(c,d).forEach(function(Pr){var Dr=ee[Pr.ndx*2+0]*N,Gr=ee[Pr.ndx*2+1]*N;c.texImage2D(Pr.face,t,b,N,N,0,R,P,null),createImageBitmap(h,Dr,Gr,N,N,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(pa){Jr(c,d),c.bindTexture(e,m),c.texImage2D(Pr.face,t,b,R,P,pa),$r(d)&&ct(c,m,d,a,p,b)})}))}else if(e===x||e===I){var he=Math.min(h.width,h.height),xe=Math.max(h.width,h.height),Me=xe/he;if(Me%1!==0)throw"can not compute 3D dimensions of element";var Ce=h.width===xe?1:0,Le=h.height===xe?1:0;c.pixelStorei(i,1),c.pixelStorei(f,h.width),c.pixelStorei(E,0),c.pixelStorei(n,0),c.texImage3D(e,t,b,he,he,he,0,R,P,null);for(var ze=0;ze<Me;++ze){var tr=ze*he*Ce,sr=ze*he*Le;c.pixelStorei(l,tr),c.pixelStorei(o,sr),c.texSubImage3D(e,t,0,0,ze,he,he,1,R,P,h)}Pt(c)}else c.texImage2D(e,t,b,R,P,h);$r(d)&&ct(c,m,d,a,p,b),Vt(c,m,d)}function zr(){}function ma(c){if(typeof document<"u"){var m=document.createElement("a");return m.href=c,m.hostname===location.hostname&&m.port===location.port&&m.protocol===location.protocol}else{var h=new URL(location.href).origin,d=new URL(c,location.href).origin;return d===h}}function ja(c,m){return m===void 0&&!ma(c)?"anonymous":m}function Va(c,m,h){h=h||zr;var d;if(m=m!==void 0?m:Z.crossOrigin,m=ja(c,m),typeof Image<"u"){d=new Image,m!==void 0&&(d.crossOrigin=m);var e=function(){d.removeEventListener("error",t),d.removeEventListener("load",a),d=null},t=function(){var D="couldn't load image: "+c;oe.error(D),h(D,d),e()},a=function(){h(null,d),e()};return d.addEventListener("error",t),d.addEventListener("load",a),d.src=c,d}else if(typeof ImageBitmap<"u"){var p,b,A=function(){h(p,b)},R={};m&&(R.mode="cors"),fetch(c,R).then(function(P){if(!P.ok)throw P;return P.blob()}).then(function(P){return createImageBitmap(P,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(P){b=P,setTimeout(A)}).catch(function(P){p=P,setTimeout(A)}),d=null}return d}function Ht(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function Yt(c,m,h){return Ht(c)?(setTimeout(function(){h(null,c)}),c):Va(c,m,h)}function wt(c,m,h){h=h||Z.textureOptions;var d=h.target||Je;if(c.bindTexture(d,m),h.color!==!1){var e=Ga(h.color);if(d===ve)for(var t=0;t<6;++t)c.texImage2D(O+t,0,w,1,1,0,w,er,e);else d===x||d===I?c.texImage3D(d,0,w,1,1,1,0,w,er,e):c.texImage2D(d,0,w,1,1,0,w,er,e)}}function ya(c,m,h,d){d=d||zr,h=h||Z.textureOptions,wt(c,m,h),h=Object.assign({},h);var e=Yt(h.src,h.crossOrigin,function(t,a){t?d(t,m,a):(Xt(c,m,a,h),d(null,m,a))});return e}function ka(c,m,h,d){d=d||zr;var e=h.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=h.level||0,a=h.internalFormat||h.format||w,p=Hr(a),b=h.format||p.format,A=h.type||er,R=h.target||Je;if(R!==ve)throw"target must be TEXTURE_CUBE_MAP";wt(c,m,h),h=Object.assign({},h);var P=6,D=[],C=gt(c,h),N;function ee(se){return function(he,xe){--P,he?D.push(he):xe.width!==xe.height?D.push("cubemap face img is not a square: "+xe.src):(Jr(c,h),c.bindTexture(R,m),P===5?gt().forEach(function(Me){c.texImage2D(Me,t,a,b,A,xe)}):c.texImage2D(se,t,a,b,A,xe),$r(h)&&c.generateMipmap(R)),P===0&&d(D.length?D:void 0,m,N)}}N=e.map(function(se,he){return Yt(se,h.crossOrigin,ee(C[he]))})}function ha(c,m,h,d){d=d||zr;var e=h.src,t=h.internalFormat||h.format||w,a=Hr(t),p=h.format||a.format,b=h.type||er,A=h.target||I;if(A!==x&&A!==I)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";wt(c,m,h),h=Object.assign({},h);var R=e.length,P=[],D,C=h.level||0,N=h.width,ee=h.height,se=e.length,he=!0;function xe(Me){return function(Ce,Le){if(--R,Ce)P.push(Ce);else{if(Jr(c,h),c.bindTexture(A,m),he){he=!1,N=h.width||Le.width,ee=h.height||Le.height,c.texImage3D(A,C,t,N,ee,se,0,p,b,null);for(var ze=0;ze<se;++ze)c.texSubImage3D(A,C,0,0,ze,N,ee,1,p,b,Le)}else{var tr=Le,sr;(Le.width!==N||Le.height!==ee)&&(sr=F(),tr=sr.canvas,sr.canvas.width=N,sr.canvas.height=ee,sr.drawImage(Le,0,0,N,ee)),c.texSubImage3D(A,C,0,0,Me,N,ee,1,p,b,tr),sr&&tr===sr.canvas&&(sr.canvas.width=0,sr.canvas.height=0)}$r(h)&&c.generateMipmap(A)}R===0&&d(P.length?P:void 0,m,D)}}D=e.map(function(Me,Ce){return Yt(Me,h.crossOrigin,xe(Ce))})}function Rt(c,m,h,d){d=d||Z.textureOptions;var e=d.target||Je;c.bindTexture(e,m);var t=d.width,a=d.height,p=d.depth,b=d.level||0,A=d.internalFormat||d.format||w,R=Hr(A),P=d.format||R.format,D=d.type||ft(c,h,R.type);if(be(h))h instanceof Uint8ClampedArray&&(h=new Uint8Array(h.buffer));else{var C=ce.getTypedArrayTypeForGLType(D);h=new C(h)}var N=Xr(A,D),ee=h.byteLength/N;if(ee%1)throw"length wrong size for format: "+k.glEnumToString(c,P);var se;if(e===x||e===I)if(!t&&!a&&!p){var he=Math.cbrt(ee);if(he%1!==0)throw"can't guess cube size of array of numElements: "+ee;t=he,a=he,p=he}else t&&(!a||!p)?(se=Yr(c,e,a,p,ee/t),a=se.width,p=se.height):a&&(!t||!p)?(se=Yr(c,e,t,p,ee/a),t=se.width,p=se.height):(se=Yr(c,e,t,a,ee/p),t=se.width,a=se.height);else se=Yr(c,e,t,a,ee),t=se.width,a=se.height;if(Pt(c),c.pixelStorei(i,d.unpackAlignment||1),Jr(c,d),e===ve){var xe=N/h.BYTES_PER_ELEMENT,Me=ee/6*xe;xt(c,d).forEach(function(Ce){var Le=Me*Ce.ndx,ze=h.subarray(Le,Le+Me);c.texImage2D(Ce.face,b,A,t,a,0,P,D,ze)})}else e===x||e===I?c.texImage3D(e,b,A,t,a,p,0,P,D,h):c.texImage2D(e,b,A,t,a,0,P,D,h);return{width:t,height:a,depth:p,type:D}}function zt(c,m,h){var d=h.target||Je;c.bindTexture(d,m);var e=h.level||0,t=h.internalFormat||h.format||w,a=Hr(t),p=h.format||a.format,b=h.type||a.type;if(Jr(c,h),d===ve)for(var A=0;A<6;++A)c.texImage2D(O+A,e,t,h.width,h.height,0,p,b,null);else d===x||d===I?c.texImage3D(d,e,t,h.width,h.height,h.depth,0,p,b,null):c.texImage2D(d,e,t,h.width,h.height,0,p,b,null)}function Kt(c,m,h){h=h||zr,m=m||Z.textureOptions;var d=c.createTexture(),e=m.target||Je,t=m.width||1,a=m.height||1,p=m.internalFormat||w;c.bindTexture(e,d),e===ve&&(c.texParameteri(e,He,ge),c.texParameteri(e,ir,ge));var b=m.src;if(b)if(typeof b=="function"&&(b=b(c,m)),typeof b=="string")ya(c,d,m,h);else if(be(b)||Array.isArray(b)&&(typeof b[0]=="number"||Array.isArray(b[0])||be(b[0]))){var A=Rt(c,d,b,m);t=A.width,a=A.height}else Array.isArray(b)&&(typeof b[0]=="string"||Ht(b[0]))?e===ve?ka(c,d,m,h):ha(c,d,m,h):(Xt(c,d,b,m),t=b.width,a=b.height);else zt(c,d,m);return $r(m)&&ct(c,d,m,t,a,p),Vt(c,d,m),d}function Wa(c,m,h,d,e,t){d=d||h.width,e=e||h.height,t=t||h.depth;var a=h.target||Je;c.bindTexture(a,m);var p=h.level||0,b=h.internalFormat||h.format||w,A=Hr(b),R=h.format||A.format,P,D=h.src;if(D&&(be(D)||Array.isArray(D)&&typeof D[0]=="number")?P=h.type||ft(c,D,A.type):P=h.type||A.type,a===ve)for(var C=0;C<6;++C)c.texImage2D(O+C,p,b,d,e,0,R,P,null);else a===x||a===I?c.texImage3D(a,p,b,d,e,t,0,R,P,null):c.texImage2D(a,p,b,d,e,0,R,P,null)}function Ft(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function Xa(c,m,h){h=h||zr;var d=0,e=[],t={},a={};function p(){d===0&&setTimeout(function(){h(e.length?e:void 0,t,a)},0)}return Object.keys(m).forEach(function(b){var A=m[b],R;Ft(A.src)&&(R=function(D,C,N){a[b]=N,--d,D&&e.push(D),p()},++d),t[b]=Kt(c,A,R)}),p(),t}},"./src/twgl-full.js":(Ae,u,X)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},fe(F)}u.__esModule=!0;var k={m4:!0,v3:!0,primitives:!0};u.v3=u.primitives=u.m4=void 0;var ce=be(X("./src/m4.js"));u.m4=ce;var oe=be(X("./src/v3.js"));u.v3=oe;var G=be(X("./src/primitives.js"));u.primitives=G;var le=X("./src/twgl.js");Object.keys(le).forEach(function(F){F==="default"||F==="__esModule"||Object.prototype.hasOwnProperty.call(k,F)||F in u&&u[F]===le[F]||(u[F]=le[F])});function Z(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,z=new WeakMap;return(Z=function(L){return L?z:W})(F)}function be(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var z=Z(W);if(z&&z.has(F))return z.get(F);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=L?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=F[ae]}return w.default=F,z&&z.set(F,w),w}},"./src/twgl.js":(Ae,u,X)=>{function fe(_){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},fe(_)}u.__esModule=!0;var k={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};u.addExtensionsToContext=or,u.framebuffers=u.draw=u.attributes=void 0,u.getContext=I,u.getWebGLContext=ve,u.programs=void 0,u.resizeCanvasToDisplaySize=O,u.setDefaults=pe,u.vertexArrays=u.utils=u.typedarrays=u.textures=void 0;var ce=L(X("./src/attributes.js"));u.attributes=ce,Object.keys(ce).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===ce[_]||(u[_]=ce[_])});var oe=L(X("./src/textures.js"));u.textures=oe,Object.keys(oe).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===oe[_]||(u[_]=oe[_])});var G=L(X("./src/helper.js")),le=L(X("./src/utils.js"));u.utils=le,Object.keys(le).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===le[_]||(u[_]=le[_])});var Z=L(X("./src/draw.js"));u.draw=Z,Object.keys(Z).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===Z[_]||(u[_]=Z[_])});var be=L(X("./src/framebuffers.js"));u.framebuffers=be,Object.keys(be).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===be[_]||(u[_]=be[_])});var F=L(X("./src/programs.js"));u.programs=F,Object.keys(F).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===F[_]||(u[_]=F[_])});var W=L(X("./src/typedarrays.js"));u.typedarrays=W,Object.keys(W).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===W[_]||(u[_]=W[_])});var z=L(X("./src/vertex-arrays.js"));u.vertexArrays=z,Object.keys(z).forEach(function(_){_==="default"||_==="__esModule"||Object.prototype.hasOwnProperty.call(k,_)||_ in u&&u[_]===z[_]||(u[_]=z[_])});function w(_){if(typeof WeakMap!="function")return null;var ye=new WeakMap,de=new WeakMap;return(w=function(je){return je?de:ye})(_)}function L(_,ye){if(!ye&&_&&_.__esModule)return _;if(_===null||fe(_)!="object"&&typeof _!="function")return{default:_};var de=w(ye);if(de&&de.has(_))return de.get(_);var we={__proto__:null},je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Oe in _)if(Oe!=="default"&&Object.prototype.hasOwnProperty.call(_,Oe)){var Qe=je?Object.getOwnPropertyDescriptor(_,Oe):null;Qe&&(Qe.get||Qe.set)?Object.defineProperty(we,Oe,Qe):we[Oe]=_[Oe]}return we.default=_,de&&de.set(_,we),we}var ae={addExtensionsToContext:!0};function pe(_){G.copyExistingProperties(_,ae),ce.setAttributeDefaults_(_),oe.setTextureDefaults_(_)}var Ne=/^(.*?)_/;function ge(_,ye){le.glEnumToString(_,0);var de=_.getExtension(ye);if(de){var we={},je=Ne.exec(ye)[1],Oe="_"+je;for(var Qe in de){var He=de[Qe],ir=typeof He=="function",Tr=ir?je:Oe,ur=Qe;Qe.endsWith(Tr)&&(ur=Qe.substring(0,Qe.length-Tr.length)),_[ur]!==void 0?!ir&&_[ur]!==He&&G.warn(ur,_[ur],He,Qe):ir?_[ur]=function(rr){return function(){return rr.apply(de,arguments)}}(He):(_[ur]=He,we[ur]=He)}we.constructor={name:de.constructor.name},le.glEnumToString(we,0)}return de}var nr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function or(_){for(var ye=0;ye<nr.length;++ye)ge(_,nr[ye])}function Je(_,ye){for(var de=["webgl","experimental-webgl"],we=null,je=0;je<de.length;++je)if(we=_.getContext(de[je],ye),we){ae.addExtensionsToContext&&or(we);break}return we}function ve(_,ye){var de=Je(_,ye);return de}function x(_,ye){for(var de=["webgl2","webgl","experimental-webgl"],we=null,je=0;je<de.length;++je)if(we=_.getContext(de[je],ye),we){ae.addExtensionsToContext&&or(we);break}return we}function I(_,ye){var de=x(_,ye);return de}function O(_,ye){ye=ye||1,ye=Math.max(0,ye);var de=_.clientWidth*ye|0,we=_.clientHeight*ye|0;return _.width!==de||_.height!==we?(_.width=de,_.height=we,!0):!1}},"./src/typedarrays.js":(Ae,u)=>{u.__esModule=!0,u.getGLTypeForTypedArray=nr,u.getGLTypeForTypedArrayType=or,u.getTypedArrayTypeForGLType=Je,u.isArrayBuffer=void 0;var X=5120,fe=5121,k=5122,ce=5123,oe=5124,G=5125,le=5126,Z=32819,be=32820,F=33635,W=5131,z=33640,w=35899,L=35902,ae=36269,pe=34042,Ne={};{var ge=Ne;ge[X]=Int8Array,ge[fe]=Uint8Array,ge[k]=Int16Array,ge[ce]=Uint16Array,ge[oe]=Int32Array,ge[G]=Uint32Array,ge[le]=Float32Array,ge[Z]=Uint16Array,ge[be]=Uint16Array,ge[F]=Uint16Array,ge[W]=Uint16Array,ge[z]=Uint32Array,ge[w]=Uint32Array,ge[L]=Uint32Array,ge[ae]=Uint32Array,ge[pe]=Uint32Array}function nr(ve){if(ve instanceof Int8Array)return X;if(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray)return fe;if(ve instanceof Int16Array)return k;if(ve instanceof Uint16Array)return ce;if(ve instanceof Int32Array)return oe;if(ve instanceof Uint32Array)return G;if(ve instanceof Float32Array)return le;throw new Error("unsupported typed array type")}function or(ve){if(ve===Int8Array)return X;if(ve===Uint8Array||ve===Uint8ClampedArray)return fe;if(ve===Int16Array)return k;if(ve===Uint16Array)return ce;if(ve===Int32Array)return oe;if(ve===Uint32Array)return G;if(ve===Float32Array)return le;throw new Error("unsupported typed array type")}function Je(ve){var x=Ne[ve];if(!x)throw new Error("unknown gl type");return x}u.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(x){return x&&x.buffer&&(x.buffer instanceof ArrayBuffer||x.buffer instanceof SharedArrayBuffer)}:function(x){return x&&x.buffer&&x.buffer instanceof ArrayBuffer}},"./src/utils.js":(Ae,u)=>{u.__esModule=!0,u.glEnumToString=void 0,u.isWebGL1=fe,u.isWebGL2=X;function X(k){return!!k.texStorage2D}function fe(k){return!k.texStorage2D}u.glEnumToString=function(){var k={},ce={};function oe(G){var le=G.constructor.name;if(!k[le]){for(var Z in G)if(typeof G[Z]=="number"){var be=ce[G[Z]];ce[G[Z]]=be?"".concat(be," | ").concat(Z):Z}k[le]=!0}}return function(le,Z){return oe(le),ce[Z]||(typeof Z=="number"?"0x".concat(Z.toString(16)):Z)}}()},"./src/v3.js":(Ae,u)=>{u.__esModule=!0,u.add=ce,u.copy=or,u.create=k,u.cross=z,u.distance=pe,u.distanceSq=Ne,u.divScalar=W,u.divide=ve,u.dot=w,u.length=L,u.lengthSq=ae,u.lerp=G,u.lerpV=le,u.max=Z,u.min=be,u.mulScalar=F,u.multiply=Je,u.negate=nr,u.normalize=ge,u.setDefaultType=fe,u.subtract=oe;var X=Float32Array;function fe(x){var I=X;return X=x,I}function k(x,I,O){var _=new X(3);return x&&(_[0]=x),I&&(_[1]=I),O&&(_[2]=O),_}function ce(x,I,O){return O=O||new X(3),O[0]=x[0]+I[0],O[1]=x[1]+I[1],O[2]=x[2]+I[2],O}function oe(x,I,O){return O=O||new X(3),O[0]=x[0]-I[0],O[1]=x[1]-I[1],O[2]=x[2]-I[2],O}function G(x,I,O,_){return _=_||new X(3),_[0]=x[0]+O*(I[0]-x[0]),_[1]=x[1]+O*(I[1]-x[1]),_[2]=x[2]+O*(I[2]-x[2]),_}function le(x,I,O,_){return _=_||new X(3),_[0]=x[0]+O[0]*(I[0]-x[0]),_[1]=x[1]+O[1]*(I[1]-x[1]),_[2]=x[2]+O[2]*(I[2]-x[2]),_}function Z(x,I,O){return O=O||new X(3),O[0]=Math.max(x[0],I[0]),O[1]=Math.max(x[1],I[1]),O[2]=Math.max(x[2],I[2]),O}function be(x,I,O){return O=O||new X(3),O[0]=Math.min(x[0],I[0]),O[1]=Math.min(x[1],I[1]),O[2]=Math.min(x[2],I[2]),O}function F(x,I,O){return O=O||new X(3),O[0]=x[0]*I,O[1]=x[1]*I,O[2]=x[2]*I,O}function W(x,I,O){return O=O||new X(3),O[0]=x[0]/I,O[1]=x[1]/I,O[2]=x[2]/I,O}function z(x,I,O){O=O||new X(3);var _=x[2]*I[0]-x[0]*I[2],ye=x[0]*I[1]-x[1]*I[0];return O[0]=x[1]*I[2]-x[2]*I[1],O[1]=_,O[2]=ye,O}function w(x,I){return x[0]*I[0]+x[1]*I[1]+x[2]*I[2]}function L(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])}function ae(x){return x[0]*x[0]+x[1]*x[1]+x[2]*x[2]}function pe(x,I){var O=x[0]-I[0],_=x[1]-I[1],ye=x[2]-I[2];return Math.sqrt(O*O+_*_+ye*ye)}function Ne(x,I){var O=x[0]-I[0],_=x[1]-I[1],ye=x[2]-I[2];return O*O+_*_+ye*ye}function ge(x,I){I=I||new X(3);var O=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],_=Math.sqrt(O);return _>1e-5?(I[0]=x[0]/_,I[1]=x[1]/_,I[2]=x[2]/_):(I[0]=0,I[1]=0,I[2]=0),I}function nr(x,I){return I=I||new X(3),I[0]=-x[0],I[1]=-x[1],I[2]=-x[2],I}function or(x,I){return I=I||new X(3),I[0]=x[0],I[1]=x[1],I[2]=x[2],I}function Je(x,I,O){return O=O||new X(3),O[0]=x[0]*I[0],O[1]=x[1]*I[1],O[2]=x[2]*I[2],O}function ve(x,I,O){return O=O||new X(3),O[0]=x[0]/I[0],O[1]=x[1]/I[1],O[2]=x[2]/I[2],O}},"./src/vertex-arrays.js":(Ae,u,X)=>{function fe(F){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},fe(F)}u.__esModule=!0,u.createVAOAndSetAttributes=Z,u.createVAOFromBufferInfo=be,u.createVertexArrayInfo=le;var k=oe(X("./src/programs.js"));function ce(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,z=new WeakMap;return(ce=function(L){return L?z:W})(F)}function oe(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||fe(F)!="object"&&typeof F!="function")return{default:F};var z=ce(W);if(z&&z.has(F))return z.get(F);var w={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in F)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(F,ae)){var pe=L?Object.getOwnPropertyDescriptor(F,ae):null;pe&&(pe.get||pe.set)?Object.defineProperty(w,ae,pe):w[ae]=F[ae]}return w.default=F,z&&z.set(F,w),w}var G=34963;function le(F,W,z){var w=F.createVertexArray();return F.bindVertexArray(w),W.length||(W=[W]),W.forEach(function(L){k.setBuffersAndAttributes(F,L,z)}),F.bindVertexArray(null),{numElements:z.numElements,elementType:z.elementType,vertexArrayObject:w}}function Z(F,W,z,w){var L=F.createVertexArray();return F.bindVertexArray(L),k.setAttributes(W,z),w&&F.bindBuffer(G,w),F.bindVertexArray(null),L}function be(F,W,z){return Z(F,W.attribSetters||W,z.attribs,z.indices)}}},J={};function j(Ae){var u=J[Ae];if(u!==void 0)return u.exports;var X=J[Ae]={exports:{}};return g[Ae](X,X.exports,j),X.exports}var Te=j("./src/twgl-full.js");return Te})())})(cn);var rt=cn.exports,Fr,Br,nt,Mt,ot,_r,it,qr,Dt,Jt,wa,ln,Ra,vn,Fa,sn,$t,Ja,Ca,mn;class dn{constructor(){We(this,wa);We(this,Ra);We(this,Fa);We(this,$t);We(this,Ca);jr(this,"canvas",document.querySelector("#canvas"));jr(this,"gl");We(this,Fr,new Map);We(this,Br,new Map);We(this,nt,void 0);We(this,Mt,void 0);We(this,ot,void 0);We(this,_r,new Uint8Array(600));We(this,it,void 0);We(this,qr,new Uint8Array(3*40));We(this,Dt,void 0);We(this,Jt,document.createTextNode("0"));document.querySelector("#linesCleared").appendChild(ne(this,Jt)),ne(this,Fr).set(1,[255,0,0]),ne(this,Fr).set(2,[0,255,0]),ne(this,Fr).set(3,[255,255,0]),ne(this,Fr).set(4,[0,0,255]),ne(this,Fr).set(5,[180,90,246]),ne(this,Fr).set(6,[0,255,255]),ne(this,Fr).set(7,[255,140,40]),ne(this,Br).set("Z",1),ne(this,Br).set("S",2),ne(this,Br).set("O",3),ne(this,Br).set("J",4),ne(this,Br).set("T",5),ne(this,Br).set("I",6),ne(this,Br).set("L",7);let y=this.canvas.getContext("webgl");this.gl=y,y||document.body.appendChild(document.createTextNode("WebGL is not supported."));function g(k,ce,oe,G){return[k,ce+G,k+oe,ce+G,k+oe,ce,k,ce]}function J(k,ce,oe,G){let le=[k/2,k],Z=[],be=(300-le[1])/2,F=(400-le[0])/2;Z.push(...g(F,be,le[0],le[1])),Z.push(...g(F-ce-G,be,G,G));for(let W=0;W<3;W++)Z.push(...g(F+ce+le[0],be+W*(G+oe),G,G));return Z}const Te={a_Position:{numComponents:2,data:J(250,3,0,30)},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4,0,0,4,0,4,4,0,4]},a_QueueID:{numComponents:1,data:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3]},a_ShaderID:{numComponents:1,data:[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indices:{numComponents:3,data:[0,1,2,2,3,0,4,5,6,6,7,4,8,9,10,10,11,8,12,13,14,14,15,12,16,17,18,18,19,16,20]}};mr(this,Mt,rt.createBufferInfoFromArrays(y,Te));let Ae=document.querySelector("#vertex-shader-2d").text,u=document.querySelector("#fragment-shader-2d").text;mr(this,nt,rt.createProgramInfo(y,[Ae,u]));let X={src:"textures/block.png",mag:y.LINEAR};mr(this,Dt,rt.createTexture(this.gl,X)),mr(this,ot,y.createTexture()),y.bindTexture(y.TEXTURE_2D,ne(this,ot)),y.pixelStorei(y.UNPACK_ALIGNMENT,1),y.texImage2D(y.TEXTURE_2D,0,y.RGB,10,20,0,y.RGB,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),mr(this,it,y.createTexture()),y.bindTexture(y.TEXTURE_2D,ne(this,it)),y.pixelStorei(y.UNPACK_ALIGNMENT,1),y.texImage2D(y.TEXTURE_2D,0,y.RGB,4,2*5,0,y.RGB,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.useProgram(ne(this,nt).program),rt.setBuffersAndAttributes(y,ne(this,nt),ne(this,Mt));let fe={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:ne(this,ot),u_QueueData:ne(this,it),u_BlockTexture:ne(this,Dt)};rt.setUniforms(ne(this,nt),fe)}updateData(y){ar(this,wa,ln).call(this,y),ar(this,Fa,sn).call(this,y),ar(this,Ca,mn).call(this,y)}renderGame(){rt.resizeCanvasToDisplaySize(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let y={u_Resolution:[this.gl.canvas.width,this.gl.canvas.height],u_GridData:ne(this,ot),u_QueueData:ne(this,it),u_BlockTexture:ne(this,Dt)};rt.setUniforms(ne(this,nt),y),rt.drawBufferInfo(this.gl,ne(this,Mt))}}Fr=new WeakMap,Br=new WeakMap,nt=new WeakMap,Mt=new WeakMap,ot=new WeakMap,_r=new WeakMap,it=new WeakMap,qr=new WeakMap,Dt=new WeakMap,Jt=new WeakMap,wa=new WeakSet,ln=function(y){for(let g=0;g<20;g++){let J=y.gridData[g];for(let j=0;j<10;j++){let Te=ar(this,Ra,vn).call(this,J,j),Ae=3*(10*g+j);if(Te!=0){let u=ne(this,Fr).get(Te);ne(this,_r)[Ae]=u[0],ne(this,_r)[Ae+1]=u[1],ne(this,_r)[Ae+2]=u[2]}else ne(this,_r)[Ae]=0,ne(this,_r)[Ae+1]=0,ne(this,_r)[Ae+2]=0}}if(y.playerPiece.active){let g=170;for(let j=0;j<4;j++){let Te=3*(10*y.ghostBlocks[j][1]+y.ghostBlocks[j][0]);ne(this,_r)[Te]=g,ne(this,_r)[Te+1]=g,ne(this,_r)[Te+2]=g}let J=y.playerPiece.shape;for(let j=0;j<4;j++){let Te=ne(this,Fr).get(ne(this,Br).get(J)),Ae=3*(10*y.playerPiece.blocks[j][1]+y.playerPiece.blocks[j][0]);ne(this,_r)[Ae]=Te[0],ne(this,_r)[Ae+1]=Te[1],ne(this,_r)[Ae+2]=Te[2]}}this.gl.bindTexture(this.gl.TEXTURE_2D,ne(this,ot)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,10,20,this.gl.RGB,this.gl.UNSIGNED_BYTE,ne(this,_r))},Ra=new WeakSet,vn=function(y,g){const J=32-(3+3*g),j=7<<J;return(y&j)>>>J},Fa=new WeakSet,sn=function(y){for(let g=0;g<ne(this,qr).length;g++)ne(this,qr)[g]=0;y.heldPiece!=null&&ar(this,$t,Ja).call(this,y.heldPiece,0);for(let g=0;g<4;g++)ar(this,$t,Ja).call(this,y.pieceQueue[g],24*(1+g));this.gl.bindTexture(this.gl.TEXTURE_2D,ne(this,it)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,4,10,this.gl.RGB,this.gl.UNSIGNED_BYTE,ne(this,qr))},$t=new WeakSet,Ja=function(y,g){let J=tt.getBaseShape(y),j=ne(this,Fr).get(ne(this,Br).get(y));for(let Te=0;Te<4;Te++){let Ae=J[Te],u=g+3*(Ae[1]*4+Ae[0]);ne(this,qr)[u]=j[0],ne(this,qr)[u+1]=j[1],ne(this,qr)[u+2]=j[2]}},Ca=new WeakSet,mn=function(y){ne(this,Jt).nodeValue=y.linesCleared};function _n(){let Xe=document.createTextNode("");document.querySelector("#debug").appendChild(Xe);let y=new En;document.addEventListener("keydown",function(u){y.setInputState(u.key,!0)}),document.addEventListener("keyup",function(u){y.setInputState(u.key,!1)});let g=new Tn,J=new dn,j=0,Te=0;function Ae(u){let X=(u-Te)*.001;Te=u,j+=X,j>=g.gameTickTime&&(g.runTick(y),j=Math.min(j-g.gameTickTime,g.gameTickTime)),g.isStateChanged&&J.updateData(g.gameState),J.renderGame(),requestAnimationFrame(Ae)}requestAnimationFrame(Ae)}_n();

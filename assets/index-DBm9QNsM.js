var _n=Object.defineProperty;var Sn=(Xe,O,_)=>O in Xe?_n(Xe,O,{enumerable:!0,configurable:!0,writable:!0,value:_}):Xe[O]=_;var mn=(Xe,O,_)=>(Sn(Xe,typeof O!="symbol"?O+"":O,_),_),Pn=(Xe,O,_)=>{if(!O.has(Xe))throw TypeError("Cannot "+_)};var yn=(Xe,O,_)=>{if(O.has(Xe))throw TypeError("Cannot add the same private member more than once");O instanceof WeakSet?O.add(Xe):O.set(Xe,_)};var hn=(Xe,O,_)=>(Pn(Xe,O,"access private method"),_);(function(){const O=document.createElement("link").relList;if(O&&O.supports&&O.supports("modulepreload"))return;for(const ae of document.querySelectorAll('link[rel="modulepreload"]'))Z(ae);new MutationObserver(ae=>{for(const ie of ae)if(ie.type==="childList")for(const Le of ie.addedNodes)Le.tagName==="LINK"&&Le.rel==="modulepreload"&&Z(Le)}).observe(document,{childList:!0,subtree:!0});function _(ae){const ie={};return ae.integrity&&(ie.integrity=ae.integrity),ae.referrerPolicy&&(ie.referrerPolicy=ae.referrerPolicy),ae.crossOrigin==="use-credentials"?ie.credentials="include":ae.crossOrigin==="anonymous"?ie.credentials="omit":ie.credentials="same-origin",ie}function Z(ae){if(ae.ep)return;ae.ep=!0;const ie=_(ae);fetch(ae.href,ie)}})();class wn{static isWebGLAvailable(){try{const O=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(O.getContext("webgl")||O.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const O=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&O.getContext("webgl2"))}catch{return!1}}static isColorSpaceAvailable(O){try{const _=document.createElement("canvas"),Z=window.WebGL2RenderingContext&&_.getContext("webgl2");return Z.drawingBufferColorSpace=O,Z.drawingBufferColorSpace===O}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(O){const _={1:"WebGL",2:"WebGL 2"},Z={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let ae='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const ie=document.createElement("div");return ie.id="webglmessage",ie.style.fontFamily="monospace",ie.style.fontSize="13px",ie.style.fontWeight="normal",ie.style.textAlign="center",ie.style.background="#fff",ie.style.color="#000",ie.style.padding="1.5em",ie.style.width="400px",ie.style.margin="5em auto 0",Z[O]?ae=ae.replace("$0","graphics card"):ae=ae.replace("$0","browser"),ae=ae.replace("$1",_[O]),ie.innerHTML=ae,ie}}var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bn={exports:{}};/*!
 * @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */(function(Xe,O){(function(Z,ae){Xe.exports=ae()})(typeof self<"u"?self:xn,()=>(()=>{var _={"./src/attributes.js":(Le,i,z)=>{function U(l){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U(l)}i.__esModule=!0,i.createAttribsFromArrays=ar,i.createBufferFromArray=f,i.createBufferFromTypedArray=fe,i.createBufferInfoFromArrays=u,i.createBuffersFromArrays=b,i.getArray_=D,i.getNumComponents_=we,i.setAttribInfoBufferFromArray=$e,i.setAttributeDefaults_=tr,i.setAttributePrefix=rr;var W=$(z("./src/typedarrays.js")),he=$(z("./src/helper.js"));function pe(l){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(pe=function(v){return v?a:o})(l)}function $(l,o){if(!o&&l&&l.__esModule)return l;if(l===null||U(l)!="object"&&typeof l!="function")return{default:l};var a=pe(o);if(a&&a.has(l))return a.get(l);var s={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in l)if(E!=="default"&&Object.prototype.hasOwnProperty.call(l,E)){var S=v?Object.getOwnPropertyDescriptor(l,E):null;S&&(S.get||S.set)?Object.defineProperty(s,E,S):s[E]=l[E]}return s.default=l,a&&a.set(l,s),s}var me=35044,re=34962,Ee=34963,g=34660,k=5120,V=5121,x=5122,N=5123,Y=5124,le=5125,Ie=5126,Se={attribPrefix:""};function rr(l){Se.attribPrefix=l}function tr(l){he.copyExistingProperties(l,Se)}function Qe(l,o,a,s,v){l.bindBuffer(o,a),l.bufferData(o,s,v||me)}function fe(l,o,a,s){if(he.isBuffer(l,o))return o;a=a||re;var v=l.createBuffer();return Qe(l,a,v,o,s),v}function w(l){return l==="indices"}function M(l){return l===Int8Array||l===Uint8Array}function D(l){return l.length?l:l.data}var d=/coord|texture/i,se=/color|colour/i;function Te(l,o){var a;if(d.test(l)?a=2:se.test(l)?a=4:a=3,o%a>0)throw new Error("Can not guess numComponents for attribute '".concat(l,"'. Tried ").concat(a," but ").concat(o," values is not evenly divisible by ").concat(a,". You should specify it."));return a}function we(l,o,a){return l.numComponents||l.size||Te(o,a||D(l).length)}function Ge(l,o){if(W.isArrayBuffer(l))return l;if(W.isArrayBuffer(l.data))return l.data;Array.isArray(l)&&(l={data:l});var a=l.type?Ke(l.type):void 0;return a||(w(o)?a=Uint16Array:a=Float32Array),new a(l.data)}function Oe(l){return typeof l=="number"?l:l?W.getGLTypeForTypedArrayType(l):Ie}function Ke(l){return typeof l=="number"?W.getTypedArrayTypeForGLType(l):l||Float32Array}function Ve(l,o){return{buffer:o.buffer,numValues:24,type:Oe(o.type),arrayType:Ke(o.type)}}function nr(l,o){var a=o.data||o,s=Ke(o.type),v=a*s.BYTES_PER_ELEMENT,E=l.createBuffer();return l.bindBuffer(re,E),l.bufferData(re,v,o.drawType||me),{buffer:E,numValues:a,type:W.getGLTypeForTypedArrayType(s),arrayType:s}}function hr(l,o,a){var s=Ge(o,a);return{arrayType:s.constructor,buffer:fe(l,s,void 0,o.drawType),type:W.getGLTypeForTypedArray(s),numValues:0}}function ar(l,o){var a={};return Object.keys(o).forEach(function(s){if(!w(s)){var v=o[s],E=v.attrib||v.name||v.attribName||Se.attribPrefix+s;if(v.value){if(!Array.isArray(v.value)&&!W.isArrayBuffer(v.value))throw new Error("array.value is not array or typedarray");a[E]={value:v.value}}else{var S;v.buffer&&v.buffer instanceof WebGLBuffer?S=Ve:typeof v=="number"||typeof v.data=="number"?S=nr:S=hr;var C=S(l,v,s),B=C.buffer,j=C.type,H=C.numValues,K=C.arrayType,J=v.normalize!==void 0?v.normalize:M(K),Q=we(v,s,H);a[E]={buffer:B,numComponents:Q,type:j,normalize:J,stride:v.stride||0,offset:v.offset||0,divisor:v.divisor===void 0?void 0:v.divisor,drawType:v.drawType}}}}),l.bindBuffer(re,null),a}function $e(l,o,a,s){a=Ge(a),s!==void 0?(l.bindBuffer(re,o.buffer),l.bufferSubData(re,s,a)):Qe(l,re,o.buffer,a,o.drawType)}function ir(l,o){return o===k||o===V?1:o===x||o===N?2:o===Y||o===le||o===Ie?4:0}var pr=["position","positions","a_position"];function te(l){var o,a;for(a=0;a<pr.length&&(o=pr[a],!(o in l));++a);a===pr.length&&(o=Object.keys(l)[0]);var s=l[o],v=D(s).length;if(v===void 0)return 1;var E=we(s,o),S=v/E;if(v%E>0)throw new Error("numComponents ".concat(E," not correct for length ").concat(v));return S}function r(l,o){var a,s;for(s=0;s<pr.length&&(a=pr[s],!(a in o||(a=Se.attribPrefix+a,a in o)));++s);s===pr.length&&(a=Object.keys(o)[0]);var v=o[a];if(!v.buffer)return 1;l.bindBuffer(re,v.buffer);var E=l.getBufferParameter(re,g);l.bindBuffer(re,null);var S=ir(l,v.type),C=E/S,B=v.numComponents||v.size,j=C/B;if(j%1!==0)throw new Error("numComponents ".concat(B," not correct for length ").concat(length));return j}function u(l,o,a){var s=ar(l,o),v=Object.assign({},a||{});v.attribs=Object.assign({},a?a.attribs:{},s);var E=o.indices;if(E){var S=Ge(E,"indices");v.indices=fe(l,S,Ee),v.numElements=S.length,v.elementType=W.getGLTypeForTypedArray(S)}else v.numElements||(v.numElements=r(l,v.attribs));return v}function f(l,o,a){var s=a==="indices"?Ee:re,v=Ge(o,a);return fe(l,v,s)}function b(l,o){var a={};return Object.keys(o).forEach(function(s){a[s]=f(l,o[s],s)}),o.indices?(a.numElements=o.indices.length,a.elementType=W.getGLTypeForTypedArray(Ge(o.indices),"indices")):a.numElements=te(o),a}},"./src/draw.js":(Le,i,z)=>{function U(g){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},U(g)}i.__esModule=!0,i.drawBufferInfo=re,i.drawObjectList=Ee;var W=pe(z("./src/programs.js"));function he(g){if(typeof WeakMap!="function")return null;var k=new WeakMap,V=new WeakMap;return(he=function(N){return N?V:k})(g)}function pe(g,k){if(!k&&g&&g.__esModule)return g;if(g===null||U(g)!="object"&&typeof g!="function")return{default:g};var V=he(k);if(V&&V.has(g))return V.get(g);var x={__proto__:null},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in g)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(g,Y)){var le=N?Object.getOwnPropertyDescriptor(g,Y):null;le&&(le.get||le.set)?Object.defineProperty(x,Y,le):x[Y]=g[Y]}return x.default=g,V&&V.set(g,x),x}var $=4,me=5123;function re(g,k,V,x,N,Y){V=V===void 0?$:V;var le=k.indices,Ie=k.elementType,Se=x===void 0?k.numElements:x;N=N===void 0?0:N,Ie||le?Y!==void 0?g.drawElementsInstanced(V,Se,Ie===void 0?me:k.elementType,N,Y):g.drawElements(V,Se,Ie===void 0?me:k.elementType,N):Y!==void 0?g.drawArraysInstanced(V,N,Se,Y):g.drawArrays(V,N,Se)}function Ee(g,k){var V=null,x=null;k.forEach(function(N){if(N.active!==!1){var Y=N.programInfo,le=N.vertexArrayInfo||N.bufferInfo,Ie=!1,Se=N.type===void 0?$:N.type;Y!==V&&(V=Y,g.useProgram(Y.program),Ie=!0),(Ie||le!==x)&&(x&&x.vertexArrayObject&&!le.vertexArrayObject&&g.bindVertexArray(null),x=le,W.setBuffersAndAttributes(g,Y,le)),W.setUniforms(Y,N.uniforms),re(g,le,Se,N.count,N.offset,N.instanceCount)}}),x&&x.vertexArrayObject&&g.bindVertexArray(null)}},"./src/framebuffers.js":(Le,i,z)=>{function U(te){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},U(te)}i.__esModule=!0,i.bindFramebufferInfo=pr,i.createFramebufferInfo=$e,i.resizeFramebufferInfo=ir;var W=$(z("./src/textures.js")),he=$(z("./src/helper.js"));function pe(te){if(typeof WeakMap!="function")return null;var r=new WeakMap,u=new WeakMap;return(pe=function(b){return b?u:r})(te)}function $(te,r){if(!r&&te&&te.__esModule)return te;if(te===null||U(te)!="object"&&typeof te!="function")return{default:te};var u=pe(r);if(u&&u.has(te))return u.get(te);var f={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in te)if(l!=="default"&&Object.prototype.hasOwnProperty.call(te,l)){var o=b?Object.getOwnPropertyDescriptor(te,l):null;o&&(o.get||o.set)?Object.defineProperty(f,l,o):f[l]=te[l]}return f.default=te,u&&u.set(te,f),f}var me=36160,re=36161,Ee=3553,g=5121,k=6402,V=6408,x=33190,N=36012,Y=35056,le=36013,Ie=32854,Se=32855,rr=36194,tr=33189,Qe=6401,fe=36168,w=34041,M=36064,D=36096,d=36128,se=33306,Te=33071,we=9729,Ge=[{format:V,type:g,min:we,wrap:Te},{format:w}],Oe={};Oe[w]=se,Oe[Qe]=d,Oe[fe]=d,Oe[k]=D,Oe[tr]=D,Oe[x]=D,Oe[N]=D,Oe[Y]=se,Oe[le]=se;function Ke(te,r){return Oe[te]||Oe[r]}var Ve={};Ve[Ie]=!0,Ve[Se]=!0,Ve[rr]=!0,Ve[w]=!0,Ve[tr]=!0,Ve[Qe]=!0,Ve[fe]=!0;function nr(te){return Ve[te]}var hr=32;function ar(te){return te>=M&&te<M+hr}function $e(te,r,u,f){var b=me,l=te.createFramebuffer();te.bindFramebuffer(b,l),u=u||te.drawingBufferWidth,f=f||te.drawingBufferHeight,r=r||Ge;var o=[],a={framebuffer:l,attachments:[],width:u,height:f};return r.forEach(function(s,v){var E=s.attachment,S=s.samples,C=s.format,B=s.attachmentPoint||Ke(C,s.internalFormat);if(B||(B=M+v),ar(B)&&o.push(B),!E)if(S!==void 0||nr(C))E=te.createRenderbuffer(),te.bindRenderbuffer(re,E),S>1?te.renderbufferStorageMultisample(re,S,C,u,f):te.renderbufferStorage(re,C,u,f);else{var j=Object.assign({},s);j.width=u,j.height=f,j.auto===void 0&&(j.auto=!1,j.min=j.min||j.minMag||we,j.mag=j.mag||j.minMag||we,j.wrapS=j.wrapS||j.wrap||Te,j.wrapT=j.wrapT||j.wrap||Te),E=W.createTexture(te,j)}if(he.isRenderbuffer(te,E))te.framebufferRenderbuffer(b,B,re,E);else if(he.isTexture(te,E))s.layer!==void 0?te.framebufferTextureLayer(b,B,E,s.level||0,s.layer):te.framebufferTexture2D(b,B,s.target||Ee,E,s.level||0);else throw new Error("unknown attachment type");a.attachments.push(E)}),te.drawBuffers&&te.drawBuffers(o),a}function ir(te,r,u,f,b){f=f||te.drawingBufferWidth,b=b||te.drawingBufferHeight,r.width=f,r.height=b,u=u||Ge,u.forEach(function(l,o){var a=r.attachments[o],s=l.format,v=l.samples;if(v!==void 0||he.isRenderbuffer(te,a))te.bindRenderbuffer(re,a),v>1?te.renderbufferStorageMultisample(re,v,s,f,b):te.renderbufferStorage(re,s,f,b);else if(he.isTexture(te,a))W.resizeTexture(te,a,l,f,b);else throw new Error("unknown attachment type")})}function pr(te,r,u){u=u||me,r?(te.bindFramebuffer(u,r.framebuffer),te.viewport(0,0,r.width,r.height)):(te.bindFramebuffer(u,null),te.viewport(0,0,te.drawingBufferWidth,te.drawingBufferHeight))}},"./src/helper.js":(Le,i)=>{i.__esModule=!0,i.copyExistingProperties=W,i.copyNamedProperties=U,i.error=he,i.isBuffer=re,i.isRenderbuffer=Ee,i.isSampler=V,i.isShader=g,i.isTexture=k,i.warn=pe;function z(x){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},z(x)}function U(x,N,Y){x.forEach(function(le){var Ie=N[le];Ie!==void 0&&(Y[le]=Ie)})}function W(x,N){Object.keys(N).forEach(function(Y){N.hasOwnProperty(Y)&&x.hasOwnProperty(Y)&&(N[Y]=x[Y])})}function he(){var x;(x=console).error.apply(x,arguments)}function pe(){var x;(x=console).warn.apply(x,arguments)}var $=new Map;function me(x,N){if(!x||z(x)!=="object")return!1;var Y=$.get(N);Y||(Y=new WeakMap,$.set(N,Y));var le=Y.get(x);if(le===void 0){var Ie=Object.prototype.toString.call(x);le=Ie.substring(8,Ie.length-1)===N,Y.set(x,le)}return le}function re(x,N){return typeof WebGLBuffer<"u"&&me(N,"WebGLBuffer")}function Ee(x,N){return typeof WebGLRenderbuffer<"u"&&me(N,"WebGLRenderbuffer")}function g(x,N){return typeof WebGLShader<"u"&&me(N,"WebGLShader")}function k(x,N){return typeof WebGLTexture<"u"&&me(N,"WebGLTexture")}function V(x,N){return typeof WebGLSampler<"u"&&me(N,"WebGLSampler")}},"./src/m4.js":(Le,i,z)=>{function U(r){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},U(r)}i.__esModule=!0,i.axisRotate=hr,i.axisRotation=nr,i.copy=g,i.create=Ee,i.frustum=Qe,i.getAxis=Ie,i.getTranslation=le,i.identity=k,i.inverse=x,i.lookAt=D,i.multiply=N,i.negate=re,i.ortho=tr,i.perspective=rr,i.rotateX=we,i.rotateY=Oe,i.rotateZ=Ve,i.rotationX=Te,i.rotationY=Ge,i.rotationZ=Ke,i.scale=$e,i.scaling=ar,i.setAxis=Se,i.setDefaultType=me,i.setTranslation=Y,i.transformDirection=pr,i.transformNormal=te,i.transformPoint=ir,i.translate=se,i.translation=d,i.transpose=V;var W=pe(z("./src/v3.js"));function he(r){if(typeof WeakMap!="function")return null;var u=new WeakMap,f=new WeakMap;return(he=function(l){return l?f:u})(r)}function pe(r,u){if(!u&&r&&r.__esModule)return r;if(r===null||U(r)!="object"&&typeof r!="function")return{default:r};var f=he(u);if(f&&f.has(r))return f.get(r);var b={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var a=l?Object.getOwnPropertyDescriptor(r,o):null;a&&(a.get||a.set)?Object.defineProperty(b,o,a):b[o]=r[o]}return b.default=r,f&&f.set(r,b),b}var $=Float32Array;function me(r){var u=$;return $=r,u}function re(r,u){return u=u||new $(16),u[0]=-r[0],u[1]=-r[1],u[2]=-r[2],u[3]=-r[3],u[4]=-r[4],u[5]=-r[5],u[6]=-r[6],u[7]=-r[7],u[8]=-r[8],u[9]=-r[9],u[10]=-r[10],u[11]=-r[11],u[12]=-r[12],u[13]=-r[13],u[14]=-r[14],u[15]=-r[15],u}function Ee(){return new $(16).fill(0)}function g(r,u){return u=u||new $(16),u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],u[4]=r[4],u[5]=r[5],u[6]=r[6],u[7]=r[7],u[8]=r[8],u[9]=r[9],u[10]=r[10],u[11]=r[11],u[12]=r[12],u[13]=r[13],u[14]=r[14],u[15]=r[15],u}function k(r){return r=r||new $(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function V(r,u){if(u=u||new $(16),u===r){var f;return f=r[1],r[1]=r[4],r[4]=f,f=r[2],r[2]=r[8],r[8]=f,f=r[3],r[3]=r[12],r[12]=f,f=r[6],r[6]=r[9],r[9]=f,f=r[7],r[7]=r[13],r[13]=f,f=r[11],r[11]=r[14],r[14]=f,u}var b=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[1*4+0],v=r[1*4+1],E=r[1*4+2],S=r[1*4+3],C=r[2*4+0],B=r[2*4+1],j=r[2*4+2],H=r[2*4+3],K=r[3*4+0],J=r[3*4+1],Q=r[3*4+2],oe=r[3*4+3];return u[0]=b,u[1]=s,u[2]=C,u[3]=K,u[4]=l,u[5]=v,u[6]=B,u[7]=J,u[8]=o,u[9]=E,u[10]=j,u[11]=Q,u[12]=a,u[13]=S,u[14]=H,u[15]=oe,u}function x(r,u){u=u||new $(16);var f=r[0*4+0],b=r[0*4+1],l=r[0*4+2],o=r[0*4+3],a=r[1*4+0],s=r[1*4+1],v=r[1*4+2],E=r[1*4+3],S=r[2*4+0],C=r[2*4+1],B=r[2*4+2],j=r[2*4+3],H=r[3*4+0],K=r[3*4+1],J=r[3*4+2],Q=r[3*4+3],oe=B*Q,ue=J*j,q=v*Q,ve=J*E,Me=v*j,We=B*E,De=l*Q,Ue=J*o,Ae=l*j,xe=B*o,Ye=l*E,je=v*o,ze=S*K,ke=H*C,qe=a*K,Fe=H*s,Be=a*C,lr=S*s,or=f*K,br=H*b,Er=f*C,wr=S*b,gr=f*s,Rr=a*b,jr=oe*s+ve*C+Me*K-(ue*s+q*C+We*K),Zr=ue*b+De*C+xe*K-(oe*b+Ue*C+Ae*K),Jr=q*b+Ue*s+Ye*K-(ve*b+De*s+je*K),$r=We*b+Ae*s+je*C-(Me*b+xe*s+Ye*C),fr=1/(f*jr+a*Zr+S*Jr+H*$r);return u[0]=fr*jr,u[1]=fr*Zr,u[2]=fr*Jr,u[3]=fr*$r,u[4]=fr*(ue*a+q*S+We*H-(oe*a+ve*S+Me*H)),u[5]=fr*(oe*f+Ue*S+Ae*H-(ue*f+De*S+xe*H)),u[6]=fr*(ve*f+De*a+je*H-(q*f+Ue*a+Ye*H)),u[7]=fr*(Me*f+xe*a+Ye*S-(We*f+Ae*a+je*S)),u[8]=fr*(ze*E+Fe*j+Be*Q-(ke*E+qe*j+lr*Q)),u[9]=fr*(ke*o+or*j+wr*Q-(ze*o+br*j+Er*Q)),u[10]=fr*(qe*o+br*E+gr*Q-(Fe*o+or*E+Rr*Q)),u[11]=fr*(lr*o+Er*E+Rr*j-(Be*o+wr*E+gr*j)),u[12]=fr*(qe*B+lr*J+ke*v-(Be*J+ze*v+Fe*B)),u[13]=fr*(Er*J+ze*l+br*B-(or*B+wr*J+ke*l)),u[14]=fr*(or*v+Rr*J+Fe*l-(gr*J+qe*l+br*v)),u[15]=fr*(gr*B+Be*l+wr*v-(Er*v+Rr*B+lr*l)),u}function N(r,u,f){f=f||new $(16);var b=r[0],l=r[1],o=r[2],a=r[3],s=r[4],v=r[5],E=r[6],S=r[7],C=r[8],B=r[9],j=r[10],H=r[11],K=r[12],J=r[13],Q=r[14],oe=r[15],ue=u[0],q=u[1],ve=u[2],Me=u[3],We=u[4],De=u[5],Ue=u[6],Ae=u[7],xe=u[8],Ye=u[9],je=u[10],ze=u[11],ke=u[12],qe=u[13],Fe=u[14],Be=u[15];return f[0]=b*ue+s*q+C*ve+K*Me,f[1]=l*ue+v*q+B*ve+J*Me,f[2]=o*ue+E*q+j*ve+Q*Me,f[3]=a*ue+S*q+H*ve+oe*Me,f[4]=b*We+s*De+C*Ue+K*Ae,f[5]=l*We+v*De+B*Ue+J*Ae,f[6]=o*We+E*De+j*Ue+Q*Ae,f[7]=a*We+S*De+H*Ue+oe*Ae,f[8]=b*xe+s*Ye+C*je+K*ze,f[9]=l*xe+v*Ye+B*je+J*ze,f[10]=o*xe+E*Ye+j*je+Q*ze,f[11]=a*xe+S*Ye+H*je+oe*ze,f[12]=b*ke+s*qe+C*Fe+K*Be,f[13]=l*ke+v*qe+B*Fe+J*Be,f[14]=o*ke+E*qe+j*Fe+Q*Be,f[15]=a*ke+S*qe+H*Fe+oe*Be,f}function Y(r,u,f){return f=f||k(),r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11]),f[12]=u[0],f[13]=u[1],f[14]=u[2],f[15]=1,f}function le(r,u){return u=u||W.create(),u[0]=r[12],u[1]=r[13],u[2]=r[14],u}function Ie(r,u,f){f=f||W.create();var b=u*4;return f[0]=r[b+0],f[1]=r[b+1],f[2]=r[b+2],f}function Se(r,u,f,b){b!==r&&(b=g(r,b));var l=f*4;return b[l+0]=u[0],b[l+1]=u[1],b[l+2]=u[2],b}function rr(r,u,f,b,l){l=l||new $(16);var o=Math.tan(Math.PI*.5-.5*r),a=1/(f-b);return l[0]=o/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(f+b)*a,l[11]=-1,l[12]=0,l[13]=0,l[14]=f*b*a*2,l[15]=0,l}function tr(r,u,f,b,l,o,a){return a=a||new $(16),a[0]=2/(u-r),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(b-f),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(l-o),a[11]=0,a[12]=(u+r)/(r-u),a[13]=(b+f)/(f-b),a[14]=(o+l)/(l-o),a[15]=1,a}function Qe(r,u,f,b,l,o,a){a=a||new $(16);var s=u-r,v=b-f,E=l-o;return a[0]=2*l/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l/v,a[6]=0,a[7]=0,a[8]=(r+u)/s,a[9]=(b+f)/v,a[10]=o/E,a[11]=-1,a[12]=0,a[13]=0,a[14]=l*o/E,a[15]=0,a}var fe,w,M;function D(r,u,f,b){return b=b||new $(16),fe=fe||W.create(),w=w||W.create(),M=M||W.create(),W.normalize(W.subtract(r,u,M),M),W.normalize(W.cross(f,M,fe),fe),W.normalize(W.cross(M,fe,w),w),b[0]=fe[0],b[1]=fe[1],b[2]=fe[2],b[3]=0,b[4]=w[0],b[5]=w[1],b[6]=w[2],b[7]=0,b[8]=M[0],b[9]=M[1],b[10]=M[2],b[11]=0,b[12]=r[0],b[13]=r[1],b[14]=r[2],b[15]=1,b}function d(r,u){return u=u||new $(16),u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=r[0],u[13]=r[1],u[14]=r[2],u[15]=1,u}function se(r,u,f){f=f||new $(16);var b=u[0],l=u[1],o=u[2],a=r[0],s=r[1],v=r[2],E=r[3],S=r[1*4+0],C=r[1*4+1],B=r[1*4+2],j=r[1*4+3],H=r[2*4+0],K=r[2*4+1],J=r[2*4+2],Q=r[2*4+3],oe=r[3*4+0],ue=r[3*4+1],q=r[3*4+2],ve=r[3*4+3];return r!==f&&(f[0]=a,f[1]=s,f[2]=v,f[3]=E,f[4]=S,f[5]=C,f[6]=B,f[7]=j,f[8]=H,f[9]=K,f[10]=J,f[11]=Q),f[12]=a*b+S*l+H*o+oe,f[13]=s*b+C*l+K*o+ue,f[14]=v*b+B*l+J*o+q,f[15]=E*b+j*l+Q*o+ve,f}function Te(r,u){u=u||new $(16);var f=Math.cos(r),b=Math.sin(r);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=f,u[6]=b,u[7]=0,u[8]=0,u[9]=-b,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function we(r,u,f){f=f||new $(16);var b=r[4],l=r[5],o=r[6],a=r[7],s=r[8],v=r[9],E=r[10],S=r[11],C=Math.cos(u),B=Math.sin(u);return f[4]=C*b+B*s,f[5]=C*l+B*v,f[6]=C*o+B*E,f[7]=C*a+B*S,f[8]=C*s-B*b,f[9]=C*v-B*l,f[10]=C*E-B*o,f[11]=C*S-B*a,r!==f&&(f[0]=r[0],f[1]=r[1],f[2]=r[2],f[3]=r[3],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ge(r,u){u=u||new $(16);var f=Math.cos(r),b=Math.sin(r);return u[0]=f,u[1]=0,u[2]=-b,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=b,u[9]=0,u[10]=f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Oe(r,u,f){f=f||new $(16);var b=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[2*4+0],v=r[2*4+1],E=r[2*4+2],S=r[2*4+3],C=Math.cos(u),B=Math.sin(u);return f[0]=C*b-B*s,f[1]=C*l-B*v,f[2]=C*o-B*E,f[3]=C*a-B*S,f[8]=C*s+B*b,f[9]=C*v+B*l,f[10]=C*E+B*o,f[11]=C*S+B*a,r!==f&&(f[4]=r[4],f[5]=r[5],f[6]=r[6],f[7]=r[7],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function Ke(r,u){u=u||new $(16);var f=Math.cos(r),b=Math.sin(r);return u[0]=f,u[1]=b,u[2]=0,u[3]=0,u[4]=-b,u[5]=f,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ve(r,u,f){f=f||new $(16);var b=r[0*4+0],l=r[0*4+1],o=r[0*4+2],a=r[0*4+3],s=r[1*4+0],v=r[1*4+1],E=r[1*4+2],S=r[1*4+3],C=Math.cos(u),B=Math.sin(u);return f[0]=C*b+B*s,f[1]=C*l+B*v,f[2]=C*o+B*E,f[3]=C*a+B*S,f[4]=C*s-B*b,f[5]=C*v-B*l,f[6]=C*E-B*o,f[7]=C*S-B*a,r!==f&&(f[8]=r[8],f[9]=r[9],f[10]=r[10],f[11]=r[11],f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function nr(r,u,f){f=f||new $(16);var b=r[0],l=r[1],o=r[2],a=Math.sqrt(b*b+l*l+o*o);b/=a,l/=a,o/=a;var s=b*b,v=l*l,E=o*o,S=Math.cos(u),C=Math.sin(u),B=1-S;return f[0]=s+(1-s)*S,f[1]=b*l*B+o*C,f[2]=b*o*B-l*C,f[3]=0,f[4]=b*l*B-o*C,f[5]=v+(1-v)*S,f[6]=l*o*B+b*C,f[7]=0,f[8]=b*o*B+l*C,f[9]=l*o*B-b*C,f[10]=E+(1-E)*S,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function hr(r,u,f,b){b=b||new $(16);var l=u[0],o=u[1],a=u[2],s=Math.sqrt(l*l+o*o+a*a);l/=s,o/=s,a/=s;var v=l*l,E=o*o,S=a*a,C=Math.cos(f),B=Math.sin(f),j=1-C,H=v+(1-v)*C,K=l*o*j+a*B,J=l*a*j-o*B,Q=l*o*j-a*B,oe=E+(1-E)*C,ue=o*a*j+l*B,q=l*a*j+o*B,ve=o*a*j-l*B,Me=S+(1-S)*C,We=r[0],De=r[1],Ue=r[2],Ae=r[3],xe=r[4],Ye=r[5],je=r[6],ze=r[7],ke=r[8],qe=r[9],Fe=r[10],Be=r[11];return b[0]=H*We+K*xe+J*ke,b[1]=H*De+K*Ye+J*qe,b[2]=H*Ue+K*je+J*Fe,b[3]=H*Ae+K*ze+J*Be,b[4]=Q*We+oe*xe+ue*ke,b[5]=Q*De+oe*Ye+ue*qe,b[6]=Q*Ue+oe*je+ue*Fe,b[7]=Q*Ae+oe*ze+ue*Be,b[8]=q*We+ve*xe+Me*ke,b[9]=q*De+ve*Ye+Me*qe,b[10]=q*Ue+ve*je+Me*Fe,b[11]=q*Ae+ve*ze+Me*Be,r!==b&&(b[12]=r[12],b[13]=r[13],b[14]=r[14],b[15]=r[15]),b}function ar(r,u){return u=u||new $(16),u[0]=r[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=r[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=r[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function $e(r,u,f){f=f||new $(16);var b=u[0],l=u[1],o=u[2];return f[0]=b*r[0],f[1]=b*r[1],f[2]=b*r[2],f[3]=b*r[3],f[4]=l*r[4],f[5]=l*r[5],f[6]=l*r[6],f[7]=l*r[7],f[8]=o*r[8],f[9]=o*r[9],f[10]=o*r[10],f[11]=o*r[11],r!==f&&(f[12]=r[12],f[13]=r[13],f[14]=r[14],f[15]=r[15]),f}function ir(r,u,f){f=f||W.create();var b=u[0],l=u[1],o=u[2],a=b*r[0*4+3]+l*r[1*4+3]+o*r[2*4+3]+r[3*4+3];return f[0]=(b*r[0]+l*r[4]+o*r[8]+r[12])/a,f[1]=(b*r[1]+l*r[5]+o*r[9]+r[13])/a,f[2]=(b*r[2]+l*r[6]+o*r[10]+r[14])/a,f}function pr(r,u,f){f=f||W.create();var b=u[0],l=u[1],o=u[2];return f[0]=b*r[0]+l*r[4]+o*r[8],f[1]=b*r[1]+l*r[5]+o*r[9],f[2]=b*r[2]+l*r[6]+o*r[10],f}function te(r,u,f){f=f||W.create();var b=x(r),l=u[0],o=u[1],a=u[2];return f[0]=l*b[0]+o*b[1]+a*b[2],f[1]=l*b[4]+o*b[5]+a*b[6],f[2]=l*b[8]+o*b[9]+a*b[10],f}},"./src/primitives.js":(Le,i,z)=>{function U(o){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},U(o)}i.__esModule=!0,i.concatVertices=u,i.create3DFBuffers=i.create3DFBufferInfo=void 0,i.create3DFVertices=Ge,i.createAugmentedTypedArray=x,i.createCrescentBuffers=i.createCrescentBufferInfo=void 0,i.createCrescentVertices=Oe,i.createCubeBuffers=i.createCubeBufferInfo=i.createCresentVertices=i.createCresentBuffers=i.createCresentBufferInfo=void 0,i.createCubeVertices=se,i.createCylinderBuffers=i.createCylinderBufferInfo=void 0,i.createCylinderVertices=Ke,i.createDiscBuffers=i.createDiscBufferInfo=void 0,i.createDiscVertices=nr,i.createPlaneBuffers=i.createPlaneBufferInfo=void 0,i.createPlaneVertices=M,i.createSphereBuffers=i.createSphereBufferInfo=void 0,i.createSphereVertices=D,i.createTorusBuffers=i.createTorusBufferInfo=void 0,i.createTorusVertices=Ve,i.createTruncatedConeBuffers=i.createTruncatedConeBufferInfo=void 0,i.createTruncatedConeVertices=Te,i.createXYQuadBuffers=i.createXYQuadBufferInfo=void 0,i.createXYQuadVertices=w,i.deindexVertices=Y,i.duplicateVertices=f,i.flattenNormals=le,i.makeRandomVertexColors=ar,i.reorientDirections=rr,i.reorientNormals=tr,i.reorientPositions=Qe,i.reorientVertices=fe;var W=Ee(z("./src/attributes.js")),he=Ee(z("./src/helper.js")),pe=Ee(z("./src/typedarrays.js")),$=Ee(z("./src/m4.js")),me=Ee(z("./src/v3.js"));function re(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(re=function(E){return E?s:a})(o)}function Ee(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||U(o)!="object"&&typeof o!="function")return{default:o};var s=re(a);if(s&&s.has(o))return s.get(o);var v={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in o)if(S!=="default"&&Object.prototype.hasOwnProperty.call(o,S)){var C=E?Object.getOwnPropertyDescriptor(o,S):null;C&&(C.get||C.set)?Object.defineProperty(v,S,C):v[S]=o[S]}return v.default=o,s&&s.set(o,v),v}var g=W.getArray_,k=W.getNumComponents_;function V(o,a){var s=0;return o.push=function(){for(var v=0;v<arguments.length;++v){var E=arguments[v];if(E instanceof Array||pe.isArrayBuffer(E))for(var S=0;S<E.length;++S)o[s++]=E[S];else o[s++]=E}},o.reset=function(v){s=v||0},o.numComponents=a,Object.defineProperty(o,"numElements",{get:function(){return this.length/this.numComponents|0}}),o}function x(o,a,s){var v=s||Float32Array;return V(new v(o*a),o)}function N(o){return o!=="indices"}function Y(o){var a=o.indices,s={},v=a.length;function E(S){for(var C=o[S],B=C.numComponents,j=x(B,v,C.constructor),H=0;H<v;++H)for(var K=a[H],J=K*B,Q=0;Q<B;++Q)j.push(C[J+Q]);s[S]=j}return Object.keys(o).filter(N).forEach(E),s}function le(o){if(o.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var a=o.normal,s=a.length,v=0;v<s;v+=9){var E=a[v+0],S=a[v+1],C=a[v+2],B=a[v+3],j=a[v+4],H=a[v+5],K=a[v+6],J=a[v+7],Q=a[v+8],oe=E+B+K,ue=S+j+J,q=C+H+Q,ve=Math.sqrt(oe*oe+ue*ue+q*q);oe/=ve,ue/=ve,q/=ve,a[v+0]=oe,a[v+1]=ue,a[v+2]=q,a[v+3]=oe,a[v+4]=ue,a[v+5]=q,a[v+6]=oe,a[v+7]=ue,a[v+8]=q}return o}function Ie(o,a,s){for(var v=o.length,E=new Float32Array(3),S=0;S<v;S+=3)s(a,[o[S],o[S+1],o[S+2]],E),o[S]=E[0],o[S+1]=E[1],o[S+2]=E[2]}function Se(o,a,s){s=s||me.create();var v=a[0],E=a[1],S=a[2];return s[0]=v*o[0]+E*o[1]+S*o[2],s[1]=v*o[4]+E*o[5]+S*o[6],s[2]=v*o[8]+E*o[9]+S*o[10],s}function rr(o,a){return Ie(o,a,$.transformDirection),o}function tr(o,a){return Ie(o,$.inverse(a),Se),o}function Qe(o,a){return Ie(o,a,$.transformPoint),o}function fe(o,a){return Object.keys(o).forEach(function(s){var v=o[s];s.indexOf("pos")>=0?Qe(v,a):s.indexOf("tan")>=0||s.indexOf("binorm")>=0?rr(v,a):s.indexOf("norm")>=0&&tr(v,a)}),o}function w(o,a,s){return o=o||2,a=a||0,s=s||0,o*=.5,{position:{numComponents:2,data:[a+-1*o,s+-1*o,a+1*o,s+-1*o,a+-1*o,s+1*o,a+1*o,s+1*o]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function M(o,a,s,v,E){o=o||1,a=a||1,s=s||1,v=v||1,E=E||$.identity();for(var S=(s+1)*(v+1),C=x(3,S),B=x(3,S),j=x(2,S),H=0;H<=v;H++)for(var K=0;K<=s;K++){var J=K/s,Q=H/v;C.push(o*J-o*.5,0,a*Q-a*.5),B.push(0,1,0),j.push(J,Q)}for(var oe=s+1,ue=x(3,s*v*2,Uint16Array),q=0;q<v;q++)for(var ve=0;ve<s;ve++)ue.push((q+0)*oe+ve,(q+1)*oe+ve,(q+0)*oe+ve+1),ue.push((q+1)*oe+ve,(q+1)*oe+ve+1,(q+0)*oe+ve+1);var Me=fe({position:C,normal:B,texcoord:j,indices:ue},E);return Me}function D(o,a,s,v,E,S,C){if(a<=0||s<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");v=v||0,E=E||Math.PI,S=S||0,C=C||Math.PI*2;for(var B=E-v,j=C-S,H=(a+1)*(s+1),K=x(3,H),J=x(3,H),Q=x(2,H),oe=0;oe<=s;oe++)for(var ue=0;ue<=a;ue++){var q=ue/a,ve=oe/s,Me=j*q+S,We=B*ve+v,De=Math.sin(Me),Ue=Math.cos(Me),Ae=Math.sin(We),xe=Math.cos(We),Ye=Ue*Ae,je=xe,ze=De*Ae;K.push(o*Ye,o*je,o*ze),J.push(Ye,je,ze),Q.push(1-q,ve)}for(var ke=a+1,qe=x(3,a*s*2,Uint16Array),Fe=0;Fe<a;Fe++)for(var Be=0;Be<s;Be++)qe.push((Be+0)*ke+Fe,(Be+0)*ke+Fe+1,(Be+1)*ke+Fe),qe.push((Be+1)*ke+Fe,(Be+0)*ke+Fe+1,(Be+1)*ke+Fe+1);return{position:K,normal:J,texcoord:Q,indices:qe}}var d=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function se(o){o=o||1;for(var a=o/2,s=[[-a,-a,-a],[+a,-a,-a],[-a,+a,-a],[+a,+a,-a],[-a,-a,+a],[+a,-a,+a],[-a,+a,+a],[+a,+a,+a]],v=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],E=[[1,0],[0,0],[0,1],[1,1]],S=6*4,C=x(3,S),B=x(3,S),j=x(2,S),H=x(3,6*2,Uint16Array),K=0;K<6;++K){for(var J=d[K],Q=0;Q<4;++Q){var oe=s[J[Q]],ue=v[K],q=E[Q];C.push(oe),B.push(ue),j.push(q)}var ve=4*K;H.push(ve+0,ve+1,ve+2),H.push(ve+0,ve+2,ve+3)}return{position:C,normal:B,texcoord:j,indices:H}}function Te(o,a,s,v,E,S,C){if(v<3)throw new Error("radialSubdivisions must be 3 or greater");if(E<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var B=S===void 0?!0:S,j=C===void 0?!0:C,H=(B?2:0)+(j?2:0),K=(v+1)*(E+1+H),J=x(3,K),Q=x(3,K),oe=x(2,K),ue=x(3,v*(E+H/2)*2,Uint16Array),q=v+1,ve=Math.atan2(o-a,s),Me=Math.cos(ve),We=Math.sin(ve),De=B?-2:0,Ue=E+(j?2:0),Ae=De;Ae<=Ue;++Ae){var xe=Ae/E,Ye=s*xe,je=void 0;Ae<0?(Ye=0,xe=1,je=o):Ae>E?(Ye=s,xe=1,je=a):je=o+(a-o)*(Ae/E),(Ae===-2||Ae===E+2)&&(je=0,xe=0),Ye-=s/2;for(var ze=0;ze<q;++ze){var ke=Math.sin(ze*Math.PI*2/v),qe=Math.cos(ze*Math.PI*2/v);J.push(ke*je,Ye,qe*je),Ae<0?Q.push(0,-1,0):Ae>E?Q.push(0,1,0):je===0?Q.push(0,0,0):Q.push(ke*Me,We,qe*Me),oe.push(ze/v,1-xe)}}for(var Fe=0;Fe<E+H;++Fe)if(!(Fe===1&&B||Fe===E+H-2&&j))for(var Be=0;Be<v;++Be)ue.push(q*(Fe+0)+0+Be,q*(Fe+0)+1+Be,q*(Fe+1)+1+Be),ue.push(q*(Fe+0)+0+Be,q*(Fe+1)+1+Be,q*(Fe+1)+0+Be);return{position:J,normal:Q,texcoord:oe,indices:ue}}function we(o,a){a=a||[];for(var s=[],v=0;v<o.length;v+=4){var E=o[v],S=o.slice(v+1,v+4);S.push.apply(S,a);for(var C=0;C<E;++C)s.push.apply(s,S)}return s}function Ge(){var o=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],a=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],s=we([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),v=we([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),E=o.length/3,S={position:x(3,E),texcoord:x(2,E),normal:x(3,E),color:x(4,E,Uint8Array),indices:x(3,E/3,Uint16Array)};S.position.push(o),S.texcoord.push(a),S.normal.push(s),S.color.push(v);for(var C=0;C<E;++C)S.indices.push(C);return S}function Oe(o,a,s,v,E,S,C){if(E<=0)throw new Error("subdivisionDown must be > 0");S=S||0,C=C||1;var B=2,j=C-S,H=(E+1)*2*(2+B),K=x(3,H),J=x(3,H),Q=x(2,H);function oe(Ue,Ae,xe){return Ue+(Ae-Ue)*xe}function ue(Ue,Ae,xe,Ye,je,ze){for(var ke=0;ke<=E;ke++){var qe=Ae/(B-1),Fe=ke/E,Be=(qe-.5)*2,lr=(S+Fe*j)*Math.PI,or=Math.sin(lr),br=Math.cos(lr),Er=oe(o,Ue,or),wr=Be*v,gr=br*o,Rr=or*Er;K.push(wr,gr,Rr);var jr=me.add(me.multiply([0,or,br],xe),Ye);J.push(jr),Q.push(qe*je+ze,Fe)}}for(var q=0;q<B;q++){var ve=(q/(B-1)-.5)*2;ue(a,q,[1,1,1],[0,0,0],1,0),ue(a,q,[0,0,0],[ve,0,0],0,0),ue(s,q,[1,1,1],[0,0,0],1,0),ue(s,q,[0,0,0],[ve,0,0],0,1)}var Me=x(3,E*2*(2+B),Uint16Array);function We(Ue,Ae){for(var xe=0;xe<E;++xe)Me.push(Ue+xe+0,Ue+xe+1,Ae+xe+0),Me.push(Ue+xe+1,Ae+xe+1,Ae+xe+0)}var De=E+1;return We(De*0,De*4),We(De*5,De*7),We(De*6,De*2),We(De*3,De*1),{position:K,normal:J,texcoord:Q,indices:Me}}function Ke(o,a,s,v,E,S){return Te(o,o,a,s,v,E,S)}function Ve(o,a,s,v,E,S){if(s<3)throw new Error("radialSubdivisions must be 3 or greater");if(v<3)throw new Error("verticalSubdivisions must be 3 or greater");E=E||0,S=S||Math.PI*2;for(var C=S-E,B=s+1,j=v+1,H=B*j,K=x(3,H),J=x(3,H),Q=x(2,H),oe=x(3,s*v*2,Uint16Array),ue=0;ue<j;++ue)for(var q=ue/v,ve=q*Math.PI*2,Me=Math.sin(ve),We=o+Me*a,De=Math.cos(ve),Ue=De*a,Ae=0;Ae<B;++Ae){var xe=Ae/s,Ye=E+xe*C,je=Math.sin(Ye),ze=Math.cos(Ye),ke=je*We,qe=ze*We,Fe=je*Me,Be=ze*Me;K.push(ke,Ue,qe),J.push(Fe,De,Be),Q.push(xe,1-q)}for(var lr=0;lr<v;++lr)for(var or=0;or<s;++or){var br=1+or,Er=1+lr;oe.push(B*lr+or,B*Er+or,B*lr+br),oe.push(B*Er+or,B*Er+br,B*lr+br)}return{position:K,normal:J,texcoord:Q,indices:oe}}function nr(o,a,s,v,E){if(a<3)throw new Error("divisions must be at least 3");s=s||1,E=E||1,v=v||0;for(var S=(a+1)*(s+1),C=x(3,S),B=x(3,S),j=x(2,S),H=x(3,s*a*2,Uint16Array),K=0,J=o-v,Q=a+1,oe=0;oe<=s;++oe){for(var ue=v+J*Math.pow(oe/s,E),q=0;q<=a;++q){var ve=2*Math.PI*q/a,Me=ue*Math.cos(ve),We=ue*Math.sin(ve);if(C.push(Me,0,We),B.push(0,1,0),j.push(1-q/a,oe/s),oe>0&&q!==a){var De=K+(q+1),Ue=K+q,Ae=K+q-Q,xe=K+(q+1)-Q;H.push(De,Ue,Ae),H.push(De,Ae,xe)}}K+=a+1}return{position:C,normal:B,texcoord:j,indices:H}}function hr(o){return Math.random()*o|0}function ar(o,a){a=a||{};var s=o.position.numElements,v=x(4,s,Uint8Array),E=a.rand||function(J,Q){return Q<3?hr(256):255};if(o.color=v,o.indices)for(var S=0;S<s;++S)v.push(E(S,0),E(S,1),E(S,2),E(S,3));else for(var C=a.vertsPerColor||3,B=s/C,j=0;j<B;++j)for(var H=[E(j,0),E(j,1),E(j,2),E(j,3)],K=0;K<C;++K)v.push(H);return o}function $e(o){return function(a){var s=o.apply(this,Array.prototype.slice.call(arguments,1));return W.createBuffersFromArrays(a,s)}}function ir(o){return function(a){var s=o.apply(null,Array.prototype.slice.call(arguments,1));return W.createBufferInfoFromArrays(a,s)}}var pr=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function te(o,a,s,v){v=v||0;for(var E=o.length,S=0;S<E;++S)a[s+S]=o[S]+v}function r(o,a){var s=g(o),v=new s.constructor(a),E=v;return s.numComponents&&s.numElements&&V(v,s.numComponents),o.data&&(E={data:v},he.copyNamedProperties(pr,o,E)),E}function u(o){for(var a={},s,v=function(){var K=o[E];Object.keys(K).forEach(function(J){a[J]||(a[J]=[]),!s&&J!=="indices"&&(s=J);var Q=K[J],oe=k(Q,J),ue=g(Q),q=ue.length/oe;a[J].push(q)})},E=0;E<o.length;++E)v();function S(H){for(var K=0,J,Q=0;Q<o.length;++Q){var oe=o[Q],ue=oe[H],q=g(ue);K+=q.length,(!J||ue.data)&&(J=ue)}return{length:K,spec:J}}function C(H,K,J){for(var Q=0,oe=0,ue=0;ue<o.length;++ue){var q=o[ue],ve=q[H],Me=g(ve);H==="indices"?(te(Me,J,oe,Q),Q+=K[ue]):te(Me,J,oe),oe+=Me.length}}var B=a[s],j={};return Object.keys(a).forEach(function(H){var K=S(H),J=r(K.spec,K.length);C(H,B,g(J)),j[H]=J}),j}function f(o){var a={};return Object.keys(o).forEach(function(s){var v=o[s],E=g(v),S=r(v,E.length);te(E,g(S),0),a[s]=S}),a}i.create3DFBufferInfo=ir(Ge),i.create3DFBuffers=$e(Ge),i.createCubeBufferInfo=ir(se),i.createCubeBuffers=$e(se),i.createPlaneBufferInfo=ir(M),i.createPlaneBuffers=$e(M),i.createSphereBufferInfo=ir(D),i.createSphereBuffers=$e(D),i.createTruncatedConeBufferInfo=ir(Te),i.createTruncatedConeBuffers=$e(Te),i.createXYQuadBufferInfo=ir(w),i.createXYQuadBuffers=$e(w);var b=i.createCrescentBufferInfo=ir(Oe),l=i.createCrescentBuffers=$e(Oe);i.createCylinderBufferInfo=ir(Ke),i.createCylinderBuffers=$e(Ke),i.createTorusBufferInfo=ir(Ve),i.createTorusBuffers=$e(Ve),i.createDiscBufferInfo=ir(nr),i.createDiscBuffers=$e(nr),i.createCresentBufferInfo=b,i.createCresentBuffers=l,i.createCresentVertices=Oe},"./src/programs.js":(Le,i,z)=>{function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}i.__esModule=!0,i.bindTransformFeedbackInfo=lt,i.bindUniformBlock=vt,i.createAttributeSetters=xt,i.createProgram=zr,i.createProgramAsync=void 0,i.createProgramFromScripts=At,i.createProgramFromSources=dt,i.createProgramInfo=c,i.createProgramInfoAsync=void 0,i.createProgramInfoFromProgram=mt,i.createProgramInfos=A,i.createProgramInfosAsync=void 0,i.createPrograms=y,i.createProgramsAsync=void 0,i.createTransformFeedback=St,i.createTransformFeedbackInfo=ct,i.createUniformBlockInfo=wt,i.createUniformBlockInfoFromProgram=Pt,i.createUniformBlockSpecFromProgram=Gr,i.createUniformSetters=Wr,i.setAttributes=Ft,i.setBlockUniforms=un,i.setBuffersAndAttributes=fn,i.setUniformBlock=Wt,i.setUniforms=st,i.setUniformsAndBindTextures=void 0;var W=$(z("./src/utils.js")),he=$(z("./src/helper.js"));function pe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(pe=function(p){return p?n:t})(e)}function $(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||U(e)!="object"&&typeof e!="function")return{default:e};var n=pe(t);if(n&&n.has(e))return n.get(e);var h={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if(T!=="default"&&Object.prototype.hasOwnProperty.call(e,T)){var F=p?Object.getOwnPropertyDescriptor(e,T):null;F&&(F.get||F.set)?Object.defineProperty(h,T,F):h[T]=e[T]}return h.default=e,n&&n.set(e,h),h}function me(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */me=function(){return t};var e,t={},n=Object.prototype,h=n.hasOwnProperty,p=Object.defineProperty||function(ne,G,X){ne[G]=X.value},T=typeof Symbol=="function"?Symbol:{},F=T.iterator||"@@iterator",P=T.asyncIterator||"@@asyncIterator",I=T.toStringTag||"@@toStringTag";function R(ne,G,X){return Object.defineProperty(ne,G,{value:X,enumerable:!0,configurable:!0,writable:!0}),ne[G]}try{R({},"")}catch{R=function(X,be,Re){return X[be]=Re}}function L(ne,G,X,be){var Re=G&&G.prototype instanceof Ne?G:Ne,_e=Object.create(Re.prototype),ur=new vn(be||[]);return p(_e,"_invoke",{value:An(ne,X,ur)}),_e}function ee(ne,G,X){try{return{type:"normal",arg:ne.call(G,X)}}catch(be){return{type:"throw",arg:be}}}t.wrap=L;var ce="suspendedStart",ye="suspendedYield",Pe="executing",Ce="completed",ge={};function Ne(){}function He(){}function er(){}var cr={};R(cr,F,function(){return this});var Tr=Object.getPrototypeOf,xr=Tr&&Tr(Tr(sn([])));xr&&xr!==n&&h.call(xr,F)&&(cr=xr);var Br=er.prototype=Ne.prototype=Object.create(cr);function Xt(ne){["next","throw","return"].forEach(function(G){R(ne,G,function(X){return this._invoke(G,X)})})}function zt(ne,G){function X(Re,_e,ur,Ar){var _r=ee(ne[Re],ne,_e);if(_r.type!=="throw"){var Kr=_r.arg,Hr=Kr.value;return Hr&&U(Hr)=="object"&&h.call(Hr,"__await")?G.resolve(Hr.__await).then(function(qr){X("next",qr,ur,Ar)},function(qr){X("throw",qr,ur,Ar)}):G.resolve(Hr).then(function(qr){Kr.value=qr,ur(Kr)},function(qr){return X("throw",qr,ur,Ar)})}Ar(_r.arg)}var be;p(this,"_invoke",{value:function(_e,ur){function Ar(){return new G(function(_r,Kr){X(_e,ur,_r,Kr)})}return be=be?be.then(Ar,Ar):Ar()}})}function An(ne,G,X){var be=ce;return function(Re,_e){if(be===Pe)throw new Error("Generator is already running");if(be===Ce){if(Re==="throw")throw _e;return{value:e,done:!0}}for(X.method=Re,X.arg=_e;;){var ur=X.delegate;if(ur){var Ar=pn(ur,X);if(Ar){if(Ar===ge)continue;return Ar}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(be===ce)throw be=Ce,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);be=Pe;var _r=ee(ne,G,X);if(_r.type==="normal"){if(be=X.done?Ce:ye,_r.arg===ge)continue;return{value:_r.arg,done:X.done}}_r.type==="throw"&&(be=Ce,X.method="throw",X.arg=_r.arg)}}}function pn(ne,G){var X=G.method,be=ne.iterator[X];if(be===e)return G.delegate=null,X==="throw"&&ne.iterator.return&&(G.method="return",G.arg=e,pn(ne,G),G.method==="throw")||X!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+X+"' method")),ge;var Re=ee(be,ne.iterator,G.arg);if(Re.type==="throw")return G.method="throw",G.arg=Re.arg,G.delegate=null,ge;var _e=Re.arg;return _e?_e.done?(G[ne.resultName]=_e.value,G.next=ne.nextLoc,G.method!=="return"&&(G.method="next",G.arg=e),G.delegate=null,ge):_e:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,ge)}function dn(ne){var G={tryLoc:ne[0]};1 in ne&&(G.catchLoc=ne[1]),2 in ne&&(G.finallyLoc=ne[2],G.afterLoc=ne[3]),this.tryEntries.push(G)}function ln(ne){var G=ne.completion||{};G.type="normal",delete G.arg,ne.completion=G}function vn(ne){this.tryEntries=[{tryLoc:"root"}],ne.forEach(dn,this),this.reset(!0)}function sn(ne){if(ne||ne===""){var G=ne[F];if(G)return G.call(ne);if(typeof ne.next=="function")return ne;if(!isNaN(ne.length)){var X=-1,be=function Re(){for(;++X<ne.length;)if(h.call(ne,X))return Re.value=ne[X],Re.done=!1,Re;return Re.value=e,Re.done=!0,Re};return be.next=be}}throw new TypeError(U(ne)+" is not iterable")}return He.prototype=er,p(Br,"constructor",{value:er,configurable:!0}),p(er,"constructor",{value:He,configurable:!0}),He.displayName=R(er,I,"GeneratorFunction"),t.isGeneratorFunction=function(ne){var G=typeof ne=="function"&&ne.constructor;return!!G&&(G===He||(G.displayName||G.name)==="GeneratorFunction")},t.mark=function(ne){return Object.setPrototypeOf?Object.setPrototypeOf(ne,er):(ne.__proto__=er,R(ne,I,"GeneratorFunction")),ne.prototype=Object.create(Br),ne},t.awrap=function(ne){return{__await:ne}},Xt(zt.prototype),R(zt.prototype,P,function(){return this}),t.AsyncIterator=zt,t.async=function(ne,G,X,be,Re){Re===void 0&&(Re=Promise);var _e=new zt(L(ne,G,X,be),Re);return t.isGeneratorFunction(G)?_e:_e.next().then(function(ur){return ur.done?ur.value:_e.next()})},Xt(Br),R(Br,I,"Generator"),R(Br,F,function(){return this}),R(Br,"toString",function(){return"[object Generator]"}),t.keys=function(ne){var G=Object(ne),X=[];for(var be in G)X.push(be);return X.reverse(),function Re(){for(;X.length;){var _e=X.pop();if(_e in G)return Re.value=_e,Re.done=!1,Re}return Re.done=!0,Re}},t.values=sn,vn.prototype={constructor:vn,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ln),!G)for(var X in this)X.charAt(0)==="t"&&h.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=e)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var X=this;function be(Kr,Hr){return ur.type="throw",ur.arg=G,X.next=Kr,Hr&&(X.method="next",X.arg=e),!!Hr}for(var Re=this.tryEntries.length-1;Re>=0;--Re){var _e=this.tryEntries[Re],ur=_e.completion;if(_e.tryLoc==="root")return be("end");if(_e.tryLoc<=this.prev){var Ar=h.call(_e,"catchLoc"),_r=h.call(_e,"finallyLoc");if(Ar&&_r){if(this.prev<_e.catchLoc)return be(_e.catchLoc,!0);if(this.prev<_e.finallyLoc)return be(_e.finallyLoc)}else if(Ar){if(this.prev<_e.catchLoc)return be(_e.catchLoc,!0)}else{if(!_r)throw new Error("try statement without catch or finally");if(this.prev<_e.finallyLoc)return be(_e.finallyLoc)}}}},abrupt:function(G,X){for(var be=this.tryEntries.length-1;be>=0;--be){var Re=this.tryEntries[be];if(Re.tryLoc<=this.prev&&h.call(Re,"finallyLoc")&&this.prev<Re.finallyLoc){var _e=Re;break}}_e&&(G==="break"||G==="continue")&&_e.tryLoc<=X&&X<=_e.finallyLoc&&(_e=null);var ur=_e?_e.completion:{};return ur.type=G,ur.arg=X,_e?(this.method="next",this.next=_e.finallyLoc,ge):this.complete(ur)},complete:function(G,X){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&X&&(this.next=X),ge},finish:function(G){for(var X=this.tryEntries.length-1;X>=0;--X){var be=this.tryEntries[X];if(be.finallyLoc===G)return this.complete(be.completion,be.afterLoc),ln(be),ge}},catch:function(G){for(var X=this.tryEntries.length-1;X>=0;--X){var be=this.tryEntries[X];if(be.tryLoc===G){var Re=be.completion;if(Re.type==="throw"){var _e=Re.arg;ln(be)}return _e}}throw new Error("illegal catch attempt")},delegateYield:function(G,X,be){return this.delegate={iterator:sn(G),resultName:X,nextLoc:be},this.method==="next"&&(this.arg=e),ge}},t}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);t&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),n.push.apply(n,h)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(h){g(e,h,n[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(n,h))})}return e}function g(e,t,n){return t=k(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){var t=V(e,"string");return U(t)=="symbol"?t:String(t)}function V(e,t){if(U(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var h=n.call(e,t||"default");if(U(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x(e,t,n,h,p,T,F){try{var P=e[T](F),I=P.value}catch(R){n(R);return}P.done?t(I):Promise.resolve(I).then(h,p)}function N(e){return function(){var t=this,n=arguments;return new Promise(function(h,p){var T=e.apply(t,n);function F(I){x(T,h,p,F,P,"next",I)}function P(I){x(T,h,p,F,P,"throw",I)}F(void 0)})}}function Y(e,t){return Se(e)||Ie(e,t)||fe(e,t)||le()}function le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var h,p,T,F,P=[],I=!0,R=!1;try{if(T=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;I=!1}else for(;!(I=(h=T.call(n)).done)&&(P.push(h.value),P.length!==t);I=!0);}catch(L){R=!0,p=L}finally{try{if(!I&&n.return!=null&&(F=n.return(),Object(F)!==F))return}finally{if(R)throw p}}return P}}function Se(e){if(Array.isArray(e))return e}function rr(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var h=0,p=function(){};return{s:p,n:function(){return h>=e.length?{done:!0}:{done:!1,value:e[h++]}},e:function(R){throw R},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T=!0,F=!1,P;return{s:function(){n=n.call(e)},n:function(){var R=n.next();return T=R.done,R},e:function(R){F=!0,P=R},f:function(){try{!T&&n.return!=null&&n.return()}finally{if(F)throw P}}}}function tr(e){return M(e)||w(e)||fe(e)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(e,t){if(e){if(typeof e=="string")return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}}function w(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M(e){if(Array.isArray(e))return D(e)}function D(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,h=new Array(t);n<t;n++)h[n]=e[n];return h}var d=he.error,se=he.warn;function Te(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var we=33984,Ge=35048,Oe=34962,Ke=34963,Ve=35345,nr=35982,hr=36386,ar=35713,$e=35714,ir=35632,pr=35633,te=35981,r=35718,u=35721,f=35971,b=35382,l=35396,o=35398,a=35392,s=35395,v=5126,E=35664,S=35665,C=35666,B=5124,j=35667,H=35668,K=35669,J=35670,Q=35671,oe=35672,ue=35673,q=35674,ve=35675,Me=35676,We=35678,De=35680,Ue=35679,Ae=35682,xe=35685,Ye=35686,je=35687,ze=35688,ke=35689,qe=35690,Fe=36289,Be=36292,lr=36293,or=5125,br=36294,Er=36295,wr=36296,gr=36298,Rr=36299,jr=36300,Zr=36303,Jr=36306,$r=36307,fr=36308,qt=36311,et=3553,rt=34067,yt=32879,tt=35866,de={};function Rt(e,t){return de[t].bindPoint}function Qt(e,t){return function(n){e.uniform1f(t,n)}}function Zt(e,t){return function(n){e.uniform1fv(t,n)}}function Jt(e,t){return function(n){e.uniform2fv(t,n)}}function $t(e,t){return function(n){e.uniform3fv(t,n)}}function en(e,t){return function(n){e.uniform4fv(t,n)}}function Mt(e,t){return function(n){e.uniform1i(t,n)}}function Ct(e,t){return function(n){e.uniform1iv(t,n)}}function Bt(e,t){return function(n){e.uniform2iv(t,n)}}function It(e,t){return function(n){e.uniform3iv(t,n)}}function Ot(e,t){return function(n){e.uniform4iv(t,n)}}function Mr(e,t){return function(n){e.uniform1ui(t,n)}}function Je(e,t){return function(n){e.uniform1uiv(t,n)}}function nt(e,t){return function(n){e.uniform2uiv(t,n)}}function kr(e,t){return function(n){e.uniform3uiv(t,n)}}function at(e,t){return function(n){e.uniform4uiv(t,n)}}function Ir(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function vr(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Dt(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Nt(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Lt(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Sr(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Xr(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function ht(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function rn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function mr(e,t,n,h){var p=Rt(e,t);return W.isWebGL2(e)?function(T){var F,P;!T||he.isTexture(e,T)?(F=T,P=null):(F=T.texture,P=T.sampler),e.uniform1i(h,n),e.activeTexture(we+n),e.bindTexture(p,F),e.bindSampler(n,P)}:function(T){e.uniform1i(h,n),e.activeTexture(we+n),e.bindTexture(p,T)}}function yr(e,t,n,h,p){for(var T=Rt(e,t),F=new Int32Array(p),P=0;P<p;++P)F[P]=n+P;return W.isWebGL2(e)?function(I){e.uniform1iv(h,F),I.forEach(function(R,L){e.activeTexture(we+F[L]);var ee,ce;!R||he.isTexture(e,R)?(ee=R,ce=null):(ee=R.texture,ce=R.sampler),e.bindSampler(n,ce),e.bindTexture(T,ee)})}:function(I){e.uniform1iv(h,F),I.forEach(function(R,L){e.activeTexture(we+F[L]),e.bindTexture(T,R)})}}de[v]={Type:Float32Array,size:4,setter:Qt,arraySetter:Zt},de[E]={Type:Float32Array,size:8,setter:Jt,cols:2},de[S]={Type:Float32Array,size:12,setter:$t,cols:3},de[C]={Type:Float32Array,size:16,setter:en,cols:4},de[B]={Type:Int32Array,size:4,setter:Mt,arraySetter:Ct},de[j]={Type:Int32Array,size:8,setter:Bt,cols:2},de[H]={Type:Int32Array,size:12,setter:It,cols:3},de[K]={Type:Int32Array,size:16,setter:Ot,cols:4},de[or]={Type:Uint32Array,size:4,setter:Mr,arraySetter:Je},de[br]={Type:Uint32Array,size:8,setter:nt,cols:2},de[Er]={Type:Uint32Array,size:12,setter:kr,cols:3},de[wr]={Type:Uint32Array,size:16,setter:at,cols:4},de[J]={Type:Uint32Array,size:4,setter:Mt,arraySetter:Ct},de[Q]={Type:Uint32Array,size:8,setter:Bt,cols:2},de[oe]={Type:Uint32Array,size:12,setter:It,cols:3},de[ue]={Type:Uint32Array,size:16,setter:Ot,cols:4},de[q]={Type:Float32Array,size:32,setter:Ir,rows:2,cols:2},de[ve]={Type:Float32Array,size:48,setter:vr,rows:3,cols:3},de[Me]={Type:Float32Array,size:64,setter:Dt,rows:4,cols:4},de[xe]={Type:Float32Array,size:32,setter:Nt,rows:2,cols:3},de[Ye]={Type:Float32Array,size:32,setter:Sr,rows:2,cols:4},de[je]={Type:Float32Array,size:48,setter:Lt,rows:3,cols:2},de[ze]={Type:Float32Array,size:48,setter:ht,rows:3,cols:4},de[ke]={Type:Float32Array,size:64,setter:Xr,rows:4,cols:2},de[qe]={Type:Float32Array,size:64,setter:rn,rows:4,cols:3},de[We]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:et},de[De]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},de[Ue]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:yt},de[Ae]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:et},de[Fe]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},de[Be]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},de[lr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},de[gr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:et},de[Rr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:yt},de[jr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},de[Zr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt},de[Jr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:et},de[$r]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:yt},de[fr]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:rt},de[qt]={Type:null,size:0,setter:mr,arraySetter:yr,bindPoint:tt};function ot(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Oe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||v,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function dr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Oe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||B,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Pr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Oe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||or,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Or(e,t,n){var h=n.size,p=n.count;return function(T){e.bindBuffer(Oe,T.buffer);for(var F=T.size||T.numComponents||h,P=F/p,I=T.type||v,R=de[I],L=R.size*F,ee=T.normalize||!1,ce=T.offset||0,ye=L/p,Pe=0;Pe<p;++Pe)e.enableVertexAttribArray(t+Pe),e.vertexAttribPointer(t+Pe,P,I,ee,L,ce+ye*Pe),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+Pe,T.divisor||0)}}var Ze={};Ze[v]={size:4,setter:ot},Ze[E]={size:8,setter:ot},Ze[S]={size:12,setter:ot},Ze[C]={size:16,setter:ot},Ze[B]={size:4,setter:dr},Ze[j]={size:8,setter:dr},Ze[H]={size:12,setter:dr},Ze[K]={size:16,setter:dr},Ze[or]={size:4,setter:Pr},Ze[br]={size:8,setter:Pr},Ze[Er]={size:12,setter:Pr},Ze[wr]={size:16,setter:Pr},Ze[J]={size:4,setter:dr},Ze[Q]={size:8,setter:dr},Ze[oe]={size:12,setter:dr},Ze[ue]={size:16,setter:dr},Ze[q]={size:4,setter:Or,count:2},Ze[ve]={size:9,setter:Or,count:3},Ze[Me]={size:16,setter:Or,count:4};var Dr=/ERROR:\s*\d+:(\d+)/gi;function Cr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=tr(t.matchAll(Dr)),p=new Map(h.map(function(T,F){var P=parseInt(T[1]),I=h[F+1],R=I?I.index:t.length,L=t.substring(T.index,R);return[P-1,L]}));return e.split(`
`).map(function(T,F){var P=p.get(F);return"".concat(F+1+n,": ").concat(T).concat(P?`

^^^ `.concat(P):"")}).join(`
`)}var pt=/^[ \t]*\n/;function sr(e){var t=0;return pt.test(e)&&(t=1,e=e.replace(pt,"")),{lineOffset:t,shaderSource:e}}function ut(e,t){return e.errorCallback(t),e.callback&&setTimeout(function(){e.callback("".concat(t,`
`).concat(e.errors.join(`
`)))}),null}function it(e,t,n,h){h=h||d;var p=e.getShaderParameter(n,ar);if(!p){var T=e.getShaderInfoLog(n),F=sr(e.getShaderSource(n)),P=F.lineOffset,I=F.shaderSource,R="".concat(Cr(I,T,P),`
Error compiling `).concat(W.glEnumToString(e,t),": ").concat(T);return h(R),R}return""}function Nr(e,t,n){var h,p,T;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){var F=e;n=F.errorCallback,e=F.attribLocations,h=F.transformFeedbackVaryings,p=F.transformFeedbackMode,T=F.callback}var P=n||d,I=[],R={errorCallback:function(ce){I.push(ce);for(var ye=arguments.length,Pe=new Array(ye>1?ye-1:0),Ce=1;Ce<ye;Ce++)Pe[Ce-1]=arguments[Ce];P.apply(void 0,[ce].concat(Pe))},transformFeedbackVaryings:h,transformFeedbackMode:p,callback:T,errors:I};{var L={};Array.isArray(e)?e.forEach(function(ee,ce){L[ee]=t?t[ce]:ce}):L=e||{},R.attribLocations=L}return R}var Lr=["VERTEX_SHADER","FRAGMENT_SHADER"];function Ut(e,t){if(t.indexOf("frag")>=0)return ir;if(t.indexOf("vert")>=0)return pr}function Gt(e,t,n){var h=e.getAttachedShaders(t),p=rr(h),T;try{for(p.s();!(T=p.n()).done;){var F=T.value;n.has(F)&&e.deleteShader(F)}}catch(P){p.e(P)}finally{p.f()}e.deleteProgram(t)}var jt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(n){return setTimeout(n,t)})};function kt(e,t,n){for(var h=e.createProgram(),p=Nr(n),T=p.attribLocations,F=p.transformFeedbackVaryings,P=p.transformFeedbackMode,I=0;I<t.length;++I){var R=t[I];if(typeof R=="string"){var L=Te(R),ee=L?L.text:R,ce=e[Lr[I]];L&&L.type&&(ce=Ut(e,L.type)||ce),R=e.createShader(ce),e.shaderSource(R,sr(ee).shaderSource),e.compileShader(R),e.attachShader(h,R)}}Object.entries(T).forEach(function(Pe){var Ce=Y(Pe,2),ge=Ce[0],Ne=Ce[1];return e.bindAttribLocation(h,Ne,ge)});{var ye=F;ye&&(ye.attribs&&(ye=ye.attribs),Array.isArray(ye)||(ye=Object.keys(ye)),e.transformFeedbackVaryings(h,ye,P||te))}return e.linkProgram(h),h}function zr(e,t,n,h,p){var T=Nr(n,h,p),F=new Set(t),P=kt(e,t,T);function I(R,L){var ee=Tt(R,L,T.errorCallback);return ee&&Gt(R,L,F),ee}if(T.callback){bt(e,P).then(function(){var R=I(e,P);T.callback(R,R?void 0:P)});return}return I(e,P)?void 0:P}function Ur(e){return function(t,n){for(var h=arguments.length,p=new Array(h>2?h-2:0),T=2;T<h;T++)p[T-2]=arguments[T];return new Promise(function(F,P){var I=Nr.apply(void 0,p);I.callback=function(R,L){R?P(R):F(L)},e(t,n,I)})}}i.createProgramAsync=Ur(zr),i.createProgramInfoAsync=Ur(c);function bt(e,t){return Et.apply(this,arguments)}function Et(){return Et=N(me().mark(function e(t,n){var h,p,T;return me().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:h=t.getExtension("KHR_parallel_shader_compile"),p=h?function(I,R){return I.getProgramParameter(R,h.COMPLETION_STATUS_KHR)}:function(){return!0},T=0;case 3:return P.next=5,jt(T);case 5:T=16.666666666666668;case 6:if(!p(t,n)){P.next=3;break}case 7:case"end":return P.stop()}},e)})),Et.apply(this,arguments)}function Vr(e,t){return ft.apply(this,arguments)}function ft(){return ft=N(me().mark(function e(t,n){var h,p,T;return me().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:h=0,p=Object.values(n);case 1:if(!(h<p.length)){P.next=8;break}return T=p[h],P.next=5,bt(t,T);case 5:h++,P.next=1;break;case 8:case"end":return P.stop()}},e)})),ft.apply(this,arguments)}function Tt(e,t,n){n=n||d;var h=e.getProgramParameter(t,$e);if(!h){var p=e.getProgramInfoLog(t);n("Error in program linking: ".concat(p));var T=e.getAttachedShaders(t),F=T.map(function(P){return it(e,e.getShaderParameter(P,e.SHADER_TYPE),P,n)});return"".concat(p,`
`).concat(F.filter(function(P){return P}).join(`
`))}}function At(e,t,n,h,p){var T=Nr(n,h,p),F=[],P=rr(t),I;try{for(P.s();!(I=P.n()).done;){var R=I.value,L=Te(R);if(!L)return ut(T,"unknown script element: ".concat(R));F.push(L.text)}}catch(ee){P.e(ee)}finally{P.f()}return zr(e,F,T)}function dt(e,t,n,h,p){return zr(e,t,n,h,p)}function _t(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var tn=/(\.|\[|]|\w+)/g,nn=function(t){return t>="0"&&t<="9"};function Yr(e,t,n,h){for(var p=e.split(tn).filter(function(Pe){return Pe!==""}),T=0,F="";;){var P=p[T++];F+=P;var I=nn(P[0]),R=I?parseInt(P):P;I&&(F+=p[T++]);var L=T===p.length;if(L){n[R]=t;break}else{var ee=p[T++],ce=ee==="[",ye=n[R]||(ce?[]:{});n[R]=ye,n=ye,h[F]=h[F]||function(Pe){return function(Ce){Ht(Pe,Ce)}}(ye),F+=ee}}}function Wr(e,t){var n=0;function h(ce,ye,Pe){var Ce=ye.name.endsWith("[0]"),ge=ye.type,Ne=de[ge];if(!Ne)throw new Error("unknown type: 0x".concat(ge.toString(16)));var He;if(Ne.bindPoint){var er=n;n+=ye.size,Ce?He=Ne.arraySetter(e,ge,er,Pe,ye.size):He=Ne.setter(e,ge,er,Pe,ye.size)}else Ne.arraySetter&&Ce?He=Ne.arraySetter(e,Pe):He=Ne.setter(e,Pe);return He.location=Pe,He}for(var p={},T={},F=e.getProgramParameter(t,r),P=0;P<F;++P){var I=e.getActiveUniform(t,P);if(!_t(I)){var R=I.name;R.endsWith("[0]")&&(R=R.substr(0,R.length-3));var L=e.getUniformLocation(t,I.name);if(L){var ee=h(t,I,L);p[R]=ee,Yr(R,ee,T,p)}}}return p}function ct(e,t){for(var n={},h=e.getProgramParameter(t,f),p=0;p<h;++p){var T=e.getTransformFeedbackVarying(t,p);n[T.name]={index:p,type:T.type,size:T.size}}return n}function lt(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(var h in n){var p=t[h];if(p){var T=n[h];T.offset?e.bindBufferRange(nr,p.index,T.buffer,T.offset,T.size):e.bindBufferBase(nr,p.index,T.buffer)}}}function St(e,t,n){var h=e.createTransformFeedback();return e.bindTransformFeedback(hr,h),e.useProgram(t.program),lt(e,t,n),e.bindTransformFeedback(hr,null),h}function Gr(e,t){for(var n=e.getProgramParameter(t,r),h=[],p=[],T=0;T<n;++T){p.push(T),h.push({});var F=e.getActiveUniform(t,T);h[T].name=F.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(ce){var ye=ce[0],Pe=ce[1];e.getActiveUniforms(t,p,e[ye]).forEach(function(Ce,ge){h[ge][Pe]=Ce})});for(var P={},I=e.getProgramParameter(t,b),R=0;R<I;++R){var L=e.getActiveUniformBlockName(t,R),ee={index:e.getUniformBlockIndex(t,L),usedByVertexShader:e.getActiveUniformBlockParameter(t,R,l),usedByFragmentShader:e.getActiveUniformBlockParameter(t,R,o),size:e.getActiveUniformBlockParameter(t,R,a),uniformIndices:e.getActiveUniformBlockParameter(t,R,s)};ee.used=ee.usedByVertexShader||ee.usedByFragmentShader,P[L]=ee}return{blockSpecs:P,uniformData:h}}var Vt=/\[\d+\]\.$/,an=function(t,n){return((t+(n-1))/n|0)*n};function on(e,t,n,h){if(t||n){h=h||1;var p=e.length,T=p/4;return function(F){for(var P=0,I=0,R=0;R<T;++R){for(var L=0;L<h;++L)e[P++]=F[I++];P+=4-h}}}else return function(F){F.length?e.set(F):e[0]=F}}function Pt(e,t,n,h){var p=n.blockSpecs,T=n.uniformData,F=p[h];if(!F)return se("no uniform block object named:",h),{name:h,uniforms:{}};var P=new ArrayBuffer(F.size),I=e.createBuffer(),R=F.index;e.bindBuffer(Ve,I),e.uniformBlockBinding(t,F.index,R);var L=h+".";Vt.test(L)&&(L=L.replace(Vt,"."));var ee={},ce={},ye={};return F.uniformIndices.forEach(function(Pe){var Ce=T[Pe],ge=Ce.name;ge.startsWith(L)&&(ge=ge.substr(L.length));var Ne=ge.endsWith("[0]");Ne&&(ge=ge.substr(0,ge.length-3));var He=de[Ce.type],er=He.Type,cr=Ne?an(He.size,16)*Ce.size:He.size*Ce.size,Tr=new er(P,Ce.offset,cr/er.BYTES_PER_ELEMENT);ee[ge]=Tr;var xr=on(Tr,Ne,He.rows,He.cols);ce[ge]=xr,Yr(ge,xr,ye,ce)}),{name:h,array:P,asFloat:new Float32Array(P),buffer:I,uniforms:ee,setters:ce}}function wt(e,t,n){return Pt(e,t.program,t.uniformBlockSpec,n)}function vt(e,t,n){var h=t.uniformBlockSpec||t,p=h.blockSpecs[n.name];if(p){var T=p.index;return e.bindBufferRange(Ve,T,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Wt(e,t,n){vt(e,t,n)&&e.bufferData(Ve,n.array,Ge)}function un(e,t){var n=e.setters;for(var h in t){var p=n[h];if(p){var T=t[h];p(T)}}}function Ht(e,t){for(var n in t){var h=e[n];typeof h=="function"?h(t[n]):Ht(e[n],t[n])}}function st(e){for(var t=e.uniformSetters||e,n=arguments.length<=1?0:arguments.length-1,h=0;h<n;++h){var p=h+1<1||arguments.length<=h+1?void 0:arguments[h+1];if(Array.isArray(p))for(var T=p.length,F=0;F<T;++F)st(t,p[F]);else for(var P in p){var I=t[P];I&&I(p[P])}}}i.setUniformsAndBindTextures=st;function xt(e,t){for(var n={},h=e.getProgramParameter(t,u),p=0;p<h;++p){var T=e.getActiveAttrib(t,p);if(!_t(T)){var F=e.getAttribLocation(t,T.name),P=Ze[T.type],I=P.setter(e,F,P);I.location=F,n[T.name]=I}}return n}function Ft(e,t){for(var n in t){var h=e[n];h&&h(t[n])}}function fn(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Ft(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Ke,n.indices))}function mt(e,t){var n=Wr(e,t),h=xt(e,t),p={program:t,uniformSetters:n,attribSetters:h};return W.isWebGL2(e)&&(p.uniformBlockSpec=Gr(e,t),p.transformFeedbackInfo=ct(e,t)),p}var cn=/\s|{|}|;/;function c(e,t,n,h,p){var T=Nr(n,h,p),F=[];if(t=t.map(function(R){if(!cn.test(R)){var L=Te(R);if(L)R=L.text;else{var ee="no element with id: ".concat(R);T.errorCallback(ee),F.push(ee)}}return R}),F.length)return ut(T,"");var P=T.callback;P&&(T.callback=function(R,L){P(R,R?void 0:mt(e,L))});var I=dt(e,t,T);return I?mt(e,I):null}function m(e,t,n,h,p){for(var T=0,F=Object.entries(t);T<F.length;T++){var P=Y(F[T],2),I=P[0],R=P[1],L=Ee({},p),ee=n[I];Array.isArray(ee)||Object.assign(L,ee);var ce=Tt(e,R,L.errorCallback);if(ce){for(var ye=0,Pe=Object.values(t);ye<Pe.length;ye++){var Ce=Pe[ye],ge=e.getAttachedShaders(Ce);e.deleteProgram(Ce);var Ne=rr(ge),He;try{for(Ne.s();!(He=Ne.n()).done;){var er=He.value;h.has(er)||e.deleteShader(er)}}catch(cr){Ne.e(cr)}finally{Ne.f()}}return ce}}}function y(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=new Set,p=Object.fromEntries(Object.entries(t).map(function(F){var P=Y(F,2),I=P[0],R=P[1],L=Ee({},n),ee=Array.isArray(R)?R:R.shaders;return Array.isArray(R)||Object.assign(L,R),ee.forEach(h.add,h),[I,kt(e,ee,L)]}));if(n.callback){Vr(e,p).then(function(){var F=m(e,p,t,h,n);n.callback(F,F?void 0:p)});return}var T=m(e,p,t,h,n);return T?void 0:p}function A(e,t,n){n=Nr(n);function h(F,P){return Object.fromEntries(Object.entries(P).map(function(I){var R=Y(I,2),L=R[0],ee=R[1];return[L,mt(F,ee)]}))}var p=n.callback;p&&(n.callback=function(F,P){p(F,F?void 0:h(e,P))});var T=y(e,t,n);if(!(p||!T))return h(e,T)}i.createProgramsAsync=Ur(y),i.createProgramInfosAsync=Ur(A)},"./src/textures.js":(Le,i,z)=>{function U(c){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},U(c)}i.__esModule=!0,i.canFilter=jt,i.canGenerateMipmap=Gt,i.createSampler=_t,i.createSamplers=tn,i.createTexture=Ft,i.createTextures=cn,i.getBytesPerElementForInternalFormat=Nr,i.getFormatAndTypeForInternalFormat=Lr,i.getNumComponentsForFormat=kt,i.loadTextureFromUrl=Wt,i.resizeTexture=fn,i.setDefaultTextureColor=bt,i.setEmptyTexture=xt,i.setSamplerParameters=dt,i.setTextureDefaults_=Et,i.setTextureFilteringForSize=Yr,i.setTextureFromArray=st,i.setTextureFromElement=St,i.setTextureParameters=At;var W=me(z("./src/utils.js")),he=me(z("./src/typedarrays.js")),pe=me(z("./src/helper.js"));function $(c){if(typeof WeakMap!="function")return null;var m=new WeakMap,y=new WeakMap;return($=function(e){return e?y:m})(c)}function me(c,m){if(!m&&c&&c.__esModule)return c;if(c===null||U(c)!="object"&&typeof c!="function")return{default:c};var y=$(m);if(y&&y.has(c))return y.get(c);var A={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var n=e?Object.getOwnPropertyDescriptor(c,t):null;n&&(n.get||n.set)?Object.defineProperty(A,t,n):A[t]=c[t]}return A.default=c,y&&y.set(c,A),A}var re={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ee=he.isArrayBuffer,g=function(){var c;return function(){return c=c||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),c}}(),k=6406,V=6407,x=6408,N=6409,Y=6410,le=6402,Ie=34041,Se=33071,rr=9728,tr=9729,Qe=3553,fe=34067,w=32879,M=35866,D=34069,d=34070,se=34071,Te=34072,we=34073,Ge=34074,Oe=10241,Ke=10240,Ve=10242,nr=10243,hr=32882,ar=33082,$e=33083,ir=33084,pr=33085,te=34892,r=34893,u=3317,f=3314,b=32878,l=3316,o=3315,a=32877,s=37443,v=37441,E=37440,S=33321,C=36756,B=33325,j=33326,H=33330,K=33329,J=33338,Q=33337,oe=33340,ue=33339,q=33323,ve=36757,Me=33327,We=33328,De=33336,Ue=33335,Ae=33332,xe=33331,Ye=33334,je=33333,ze=32849,ke=35905,qe=36194,Fe=36758,Be=35898,lr=35901,or=34843,br=34837,Er=36221,wr=36239,gr=36215,Rr=36233,jr=36209,Zr=36227,Jr=32856,$r=35907,fr=36759,qt=32855,et=32854,rt=32857,yt=34842,tt=34836,de=36220,Rt=36238,Qt=36975,Zt=36214,Jt=36232,$t=36226,en=36208,Mt=33189,Ct=33190,Bt=36012,It=36013,Ot=35056,Mr=5120,Je=5121,nt=5122,kr=5123,at=5124,Ir=5125,vr=5126,Dt=32819,Nt=32820,Lt=33635,Sr=5131,Xr=36193,ht=33640,rn=35899,mr=35902,yr=36269,ot=34042,dr=33319,Pr=33320,Or=6403,Ze=36244,Dr=36248,Cr=36249,pt={};{var sr=pt;sr[k]={numColorComponents:1},sr[N]={numColorComponents:1},sr[Y]={numColorComponents:2},sr[V]={numColorComponents:3},sr[x]={numColorComponents:4},sr[Or]={numColorComponents:1},sr[Ze]={numColorComponents:1},sr[dr]={numColorComponents:2},sr[Pr]={numColorComponents:2},sr[V]={numColorComponents:3},sr[Dr]={numColorComponents:3},sr[x]={numColorComponents:4},sr[Cr]={numColorComponents:4},sr[le]={numColorComponents:1},sr[Ie]={numColorComponents:2}}var ut;function it(c){if(!ut){var m={};m[k]={textureFormat:k,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Je,Sr,Xr,vr]},m[N]={textureFormat:N,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Je,Sr,Xr,vr]},m[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Je,Sr,Xr,vr]},m[V]={textureFormat:V,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Je,Sr,Xr,vr,Lt]},m[x]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Je,Sr,Xr,vr,Dt,Nt]},m[le]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ir,kr]},m[S]={textureFormat:Or,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Je]},m[C]={textureFormat:Or,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Mr]},m[B]={textureFormat:Or,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[vr,Sr]},m[j]={textureFormat:Or,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[vr]},m[H]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Je]},m[K]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Mr]},m[Ae]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[kr]},m[xe]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[nt]},m[Ye]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ir]},m[je]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[at]},m[q]={textureFormat:dr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Je]},m[ve]={textureFormat:dr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Mr]},m[Me]={textureFormat:dr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[vr,Sr]},m[We]={textureFormat:dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[vr]},m[De]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Je]},m[Ue]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Mr]},m[J]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kr]},m[Q]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nt]},m[oe]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ir]},m[ue]={textureFormat:Pr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[at]},m[ze]={textureFormat:V,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Je]},m[ke]={textureFormat:V,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Je]},m[qe]={textureFormat:V,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Je,Lt]},m[Fe]={textureFormat:V,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Mr]},m[Be]={textureFormat:V,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[vr,Sr,rn]},m[lr]={textureFormat:V,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[vr,Sr,mr]},m[or]={textureFormat:V,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[vr,Sr]},m[br]={textureFormat:V,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[vr]},m[Er]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Je]},m[wr]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Mr]},m[gr]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[kr]},m[Rr]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[nt]},m[jr]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ir]},m[Zr]={textureFormat:Dr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[at]},m[Jr]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Je]},m[$r]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Je]},m[fr]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Mr]},m[qt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Je,Nt,ht]},m[et]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Je,Dt]},m[rt]={textureFormat:x,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ht]},m[yt]={textureFormat:x,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[vr,Sr]},m[tt]={textureFormat:x,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[vr]},m[de]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Je]},m[Rt]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mr]},m[Qt]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ht]},m[Zt]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[kr]},m[Jt]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[nt]},m[$t]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[at]},m[en]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ir]},m[Mt]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[kr,Ir]},m[Ct]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ir]},m[Bt]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vr]},m[Ot]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ot]},m[It]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yr]},Object.keys(m).forEach(function(y){var A=m[y];A.bytesPerElementMap={},A.bytesPerElement.forEach(function(e,t){var n=A.type[t];A.bytesPerElementMap[n]=e})}),ut=m}return ut[c]}function Nr(c,m){var y=it(c);if(!y)throw"unknown internal format";var A=y.bytesPerElementMap[m];if(A===void 0)throw"unknown internal format";return A}function Lr(c){var m=it(c);if(!m)throw"unknown internal format";return{format:m.textureFormat,type:m.type[0]}}function Ut(c){return(c&c-1)===0}function Gt(c,m,y,A){if(!W.isWebGL2(c))return Ut(m)&&Ut(y);var e=it(A);if(!e)throw"unknown internal format";return e.colorRenderable&&e.textureFilterable}function jt(c){var m=it(c);if(!m)throw"unknown internal format";return m.textureFilterable}function kt(c){var m=pt[c];if(!m)throw"unknown format: "+c;return m.numColorComponents}function zr(c,m,y){return Ee(m)?he.getGLTypeForTypedArray(m):y||Je}function Ur(c,m,y,A,e){if(e%1!==0)throw"can't guess dimensions";if(!y&&!A){var t=Math.sqrt(e/(m===fe?6:1));t%1===0?(y=t,A=t):(y=e,A=1)}else if(A){if(!y&&(y=e/A,y%1))throw"can't guess dimensions"}else if(A=e/y,A%1)throw"can't guess dimensions";return{width:y,height:A}}function bt(c){re.textureColor=new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Et(c){pe.copyExistingProperties(c,re),c.textureColor&&bt(c.textureColor)}function Vr(c,m){m.colorspaceConversion!==void 0&&c.pixelStorei(s,m.colorspaceConversion),m.premultiplyAlpha!==void 0&&c.pixelStorei(v,m.premultiplyAlpha),m.flipY!==void 0&&c.pixelStorei(E,m.flipY)}function ft(c){c.pixelStorei(u,4),W.isWebGL2(c)&&(c.pixelStorei(f,0),c.pixelStorei(b,0),c.pixelStorei(l,0),c.pixelStorei(o,0),c.pixelStorei(a,0))}function Tt(c,m,y,A){A.minMag&&(y.call(c,m,Oe,A.minMag),y.call(c,m,Ke,A.minMag)),A.min&&y.call(c,m,Oe,A.min),A.mag&&y.call(c,m,Ke,A.mag),A.wrap&&(y.call(c,m,Ve,A.wrap),y.call(c,m,nr,A.wrap),(m===w||pe.isSampler(c,m))&&y.call(c,m,hr,A.wrap)),A.wrapR&&y.call(c,m,hr,A.wrapR),A.wrapS&&y.call(c,m,Ve,A.wrapS),A.wrapT&&y.call(c,m,nr,A.wrapT),A.minLod!==void 0&&y.call(c,m,ar,A.minLod),A.maxLod!==void 0&&y.call(c,m,$e,A.maxLod),A.baseLevel!==void 0&&y.call(c,m,ir,A.baseLevel),A.maxLevel!==void 0&&y.call(c,m,pr,A.maxLevel),A.compareFunc!==void 0&&y.call(c,m,r,A.compareFunc),A.compareMode!==void 0&&y.call(c,m,te,A.compareMode)}function At(c,m,y){var A=y.target||Qe;c.bindTexture(A,m),Tt(c,A,c.texParameteri,y)}function dt(c,m,y){Tt(c,m,c.samplerParameteri,y)}function _t(c,m){var y=c.createSampler();return dt(c,y,m),y}function tn(c,m){var y={};return Object.keys(m).forEach(function(A){y[A]=_t(c,m[A])}),y}function nn(c){return c=c||re.textureColor,Ee(c)?c:new Uint8Array([c[0]*255,c[1]*255,c[2]*255,c[3]*255])}function Yr(c,m,y,A,e,t){y=y||re.textureOptions,t=t||x;var n=y.target||Qe;if(A=A||y.width,e=e||y.height,c.bindTexture(n,m),Gt(c,A,e,t))c.generateMipmap(n);else{var h=jt(t)?tr:rr;c.texParameteri(n,Oe,h),c.texParameteri(n,Ke,h),c.texParameteri(n,Ve,Se),c.texParameteri(n,nr,Se)}}function Wr(c){return c.auto===!0||c.auto===void 0&&c.level===void 0}function ct(c,m){return m=m||{},m.cubeFaceOrder||[D,d,se,Te,we,Ge]}function lt(c,m){var y=ct(c,m),A=y.map(function(e,t){return{face:e,ndx:t}});return A.sort(function(e,t){return e.face-t.face}),A}function St(c,m,y,A){A=A||re.textureOptions;var e=A.target||Qe,t=A.level||0,n=y.width,h=y.height,p=A.internalFormat||A.format||x,T=Lr(p),F=A.format||T.format,P=A.type||T.type;if(Vr(c,A),c.bindTexture(e,m),e===fe){var I=y.width,R=y.height,L,ee;if(I/6===R)L=R,ee=[0,0,1,0,2,0,3,0,4,0,5,0];else if(R/6===I)L=I,ee=[0,0,0,1,0,2,0,3,0,4,0,5];else if(I/3===R/2)L=I/3,ee=[0,0,1,0,2,0,0,1,1,1,2,1];else if(I/2===R/3)L=I/2,ee=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(y.src?y.src:y.nodeName);var ce=g();ce?(ce.canvas.width=L,ce.canvas.height=L,n=L,h=L,lt(c,A).forEach(function(Tr){var xr=ee[Tr.ndx*2+0]*L,Br=ee[Tr.ndx*2+1]*L;ce.drawImage(y,xr,Br,L,L,0,0,L,L),c.texImage2D(Tr.face,t,p,F,P,ce.canvas)}),ce.canvas.width=1,ce.canvas.height=1):typeof createImageBitmap<"u"&&(n=L,h=L,lt(c,A).forEach(function(Tr){var xr=ee[Tr.ndx*2+0]*L,Br=ee[Tr.ndx*2+1]*L;c.texImage2D(Tr.face,t,p,L,L,0,F,P,null),createImageBitmap(y,xr,Br,L,L,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(Xt){Vr(c,A),c.bindTexture(e,m),c.texImage2D(Tr.face,t,p,F,P,Xt),Wr(A)&&Yr(c,m,A,n,h,p)})}))}else if(e===w||e===M){var ye=Math.min(y.width,y.height),Pe=Math.max(y.width,y.height),Ce=Pe/ye;if(Ce%1!==0)throw"can not compute 3D dimensions of element";var ge=y.width===Pe?1:0,Ne=y.height===Pe?1:0;c.pixelStorei(u,1),c.pixelStorei(f,y.width),c.pixelStorei(b,0),c.pixelStorei(a,0),c.texImage3D(e,t,p,ye,ye,ye,0,F,P,null);for(var He=0;He<Ce;++He){var er=He*ye*ge,cr=He*ye*Ne;c.pixelStorei(l,er),c.pixelStorei(o,cr),c.texSubImage3D(e,t,0,0,He,ye,ye,1,F,P,y)}ft(c)}else c.texImage2D(e,t,p,F,P,y);Wr(A)&&Yr(c,m,A,n,h,p),At(c,m,A)}function Gr(){}function Vt(c){if(typeof document<"u"){var m=document.createElement("a");return m.href=c,m.hostname===location.hostname&&m.port===location.port&&m.protocol===location.protocol}else{var y=new URL(location.href).origin,A=new URL(c,location.href).origin;return A===y}}function an(c,m){return m===void 0&&!Vt(c)?"anonymous":m}function on(c,m,y){y=y||Gr;var A;if(m=m!==void 0?m:re.crossOrigin,m=an(c,m),typeof Image<"u"){A=new Image,m!==void 0&&(A.crossOrigin=m);var e=function(){A.removeEventListener("error",t),A.removeEventListener("load",n),A=null},t=function(){var I="couldn't load image: "+c;pe.error(I),y(I,A),e()},n=function(){y(null,A),e()};return A.addEventListener("error",t),A.addEventListener("load",n),A.src=c,A}else if(typeof ImageBitmap<"u"){var h,p,T=function(){y(h,p)},F={};m&&(F.mode="cors"),fetch(c,F).then(function(P){if(!P.ok)throw P;return P.blob()}).then(function(P){return createImageBitmap(P,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(P){p=P,setTimeout(T)}).catch(function(P){h=P,setTimeout(T)}),A=null}return A}function Pt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap||typeof ImageData<"u"&&c instanceof ImageData||typeof HTMLElement<"u"&&c instanceof HTMLElement}function wt(c,m,y){return Pt(c)?(setTimeout(function(){y(null,c)}),c):on(c,m,y)}function vt(c,m,y){y=y||re.textureOptions;var A=y.target||Qe;if(c.bindTexture(A,m),y.color!==!1){var e=nn(y.color);if(A===fe)for(var t=0;t<6;++t)c.texImage2D(D+t,0,x,1,1,0,x,Je,e);else A===w||A===M?c.texImage3D(A,0,x,1,1,1,0,x,Je,e):c.texImage2D(A,0,x,1,1,0,x,Je,e)}}function Wt(c,m,y,A){A=A||Gr,y=y||re.textureOptions,vt(c,m,y),y=Object.assign({},y);var e=wt(y.src,y.crossOrigin,function(t,n){t?A(t,m,n):(St(c,m,n,y),A(null,m,n))});return e}function un(c,m,y,A){A=A||Gr;var e=y.src;if(e.length!==6)throw"there must be 6 urls for a cubemap";var t=y.level||0,n=y.internalFormat||y.format||x,h=Lr(n),p=y.format||h.format,T=y.type||Je,F=y.target||Qe;if(F!==fe)throw"target must be TEXTURE_CUBE_MAP";vt(c,m,y),y=Object.assign({},y);var P=6,I=[],R=ct(c,y),L;function ee(ce){return function(ye,Pe){--P,ye?I.push(ye):Pe.width!==Pe.height?I.push("cubemap face img is not a square: "+Pe.src):(Vr(c,y),c.bindTexture(F,m),P===5?ct().forEach(function(Ce){c.texImage2D(Ce,t,n,p,T,Pe)}):c.texImage2D(ce,t,n,p,T,Pe),Wr(y)&&c.generateMipmap(F)),P===0&&A(I.length?I:void 0,m,L)}}L=e.map(function(ce,ye){return wt(ce,y.crossOrigin,ee(R[ye]))})}function Ht(c,m,y,A){A=A||Gr;var e=y.src,t=y.internalFormat||y.format||x,n=Lr(t),h=y.format||n.format,p=y.type||Je,T=y.target||M;if(T!==w&&T!==M)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";vt(c,m,y),y=Object.assign({},y);var F=e.length,P=[],I,R=y.level||0,L=y.width,ee=y.height,ce=e.length,ye=!0;function Pe(Ce){return function(ge,Ne){if(--F,ge)P.push(ge);else{if(Vr(c,y),c.bindTexture(T,m),ye){ye=!1,L=y.width||Ne.width,ee=y.height||Ne.height,c.texImage3D(T,R,t,L,ee,ce,0,h,p,null);for(var He=0;He<ce;++He)c.texSubImage3D(T,R,0,0,He,L,ee,1,h,p,Ne)}else{var er=Ne,cr;(Ne.width!==L||Ne.height!==ee)&&(cr=g(),er=cr.canvas,cr.canvas.width=L,cr.canvas.height=ee,cr.drawImage(Ne,0,0,L,ee)),c.texSubImage3D(T,R,0,0,Ce,L,ee,1,h,p,er),cr&&er===cr.canvas&&(cr.canvas.width=0,cr.canvas.height=0)}Wr(y)&&c.generateMipmap(T)}F===0&&A(P.length?P:void 0,m,I)}}I=e.map(function(Ce,ge){return wt(Ce,y.crossOrigin,Pe(ge))})}function st(c,m,y,A){A=A||re.textureOptions;var e=A.target||Qe;c.bindTexture(e,m);var t=A.width,n=A.height,h=A.depth,p=A.level||0,T=A.internalFormat||A.format||x,F=Lr(T),P=A.format||F.format,I=A.type||zr(c,y,F.type);if(Ee(y))y instanceof Uint8ClampedArray&&(y=new Uint8Array(y.buffer));else{var R=he.getTypedArrayTypeForGLType(I);y=new R(y)}var L=Nr(T,I),ee=y.byteLength/L;if(ee%1)throw"length wrong size for format: "+W.glEnumToString(c,P);var ce;if(e===w||e===M)if(!t&&!n&&!h){var ye=Math.cbrt(ee);if(ye%1!==0)throw"can't guess cube size of array of numElements: "+ee;t=ye,n=ye,h=ye}else t&&(!n||!h)?(ce=Ur(c,e,n,h,ee/t),n=ce.width,h=ce.height):n&&(!t||!h)?(ce=Ur(c,e,t,h,ee/n),t=ce.width,h=ce.height):(ce=Ur(c,e,t,n,ee/h),t=ce.width,n=ce.height);else ce=Ur(c,e,t,n,ee),t=ce.width,n=ce.height;if(ft(c),c.pixelStorei(u,A.unpackAlignment||1),Vr(c,A),e===fe){var Pe=L/y.BYTES_PER_ELEMENT,Ce=ee/6*Pe;lt(c,A).forEach(function(ge){var Ne=Ce*ge.ndx,He=y.subarray(Ne,Ne+Ce);c.texImage2D(ge.face,p,T,t,n,0,P,I,He)})}else e===w||e===M?c.texImage3D(e,p,T,t,n,h,0,P,I,y):c.texImage2D(e,p,T,t,n,0,P,I,y);return{width:t,height:n,depth:h,type:I}}function xt(c,m,y){var A=y.target||Qe;c.bindTexture(A,m);var e=y.level||0,t=y.internalFormat||y.format||x,n=Lr(t),h=y.format||n.format,p=y.type||n.type;if(Vr(c,y),A===fe)for(var T=0;T<6;++T)c.texImage2D(D+T,e,t,y.width,y.height,0,h,p,null);else A===w||A===M?c.texImage3D(A,e,t,y.width,y.height,y.depth,0,h,p,null):c.texImage2D(A,e,t,y.width,y.height,0,h,p,null)}function Ft(c,m,y){y=y||Gr,m=m||re.textureOptions;var A=c.createTexture(),e=m.target||Qe,t=m.width||1,n=m.height||1,h=m.internalFormat||x;c.bindTexture(e,A),e===fe&&(c.texParameteri(e,Ve,Se),c.texParameteri(e,nr,Se));var p=m.src;if(p)if(typeof p=="function"&&(p=p(c,m)),typeof p=="string")Wt(c,A,m,y);else if(Ee(p)||Array.isArray(p)&&(typeof p[0]=="number"||Array.isArray(p[0])||Ee(p[0]))){var T=st(c,A,p,m);t=T.width,n=T.height}else Array.isArray(p)&&(typeof p[0]=="string"||Pt(p[0]))?e===fe?un(c,A,m,y):Ht(c,A,m,y):(St(c,A,p,m),t=p.width,n=p.height);else xt(c,A,m);return Wr(m)&&Yr(c,A,m,t,n,h),At(c,A,m),A}function fn(c,m,y,A,e,t){A=A||y.width,e=e||y.height,t=t||y.depth;var n=y.target||Qe;c.bindTexture(n,m);var h=y.level||0,p=y.internalFormat||y.format||x,T=Lr(p),F=y.format||T.format,P,I=y.src;if(I&&(Ee(I)||Array.isArray(I)&&typeof I[0]=="number")?P=y.type||zr(c,I,T.type):P=y.type||T.type,n===fe)for(var R=0;R<6;++R)c.texImage2D(D+R,h,p,A,e,0,F,P,null);else n===w||n===M?c.texImage3D(n,h,p,A,e,t,0,F,P,null):c.texImage2D(n,h,p,A,e,0,F,P,null)}function mt(c){return typeof c=="string"||Array.isArray(c)&&typeof c[0]=="string"}function cn(c,m,y){y=y||Gr;var A=0,e=[],t={},n={};function h(){A===0&&setTimeout(function(){y(e.length?e:void 0,t,n)},0)}return Object.keys(m).forEach(function(p){var T=m[p],F;mt(T.src)&&(F=function(I,R,L){n[p]=L,--A,I&&e.push(I),h()},++A),t[p]=Ft(c,T,F)}),h(),t}},"./src/twgl-full.js":(Le,i,z)=>{function U(g){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},U(g)}i.__esModule=!0;var W={m4:!0,v3:!0,primitives:!0};i.v3=i.primitives=i.m4=void 0;var he=Ee(z("./src/m4.js"));i.m4=he;var pe=Ee(z("./src/v3.js"));i.v3=pe;var $=Ee(z("./src/primitives.js"));i.primitives=$;var me=z("./src/twgl.js");Object.keys(me).forEach(function(g){g==="default"||g==="__esModule"||Object.prototype.hasOwnProperty.call(W,g)||g in i&&i[g]===me[g]||(i[g]=me[g])});function re(g){if(typeof WeakMap!="function")return null;var k=new WeakMap,V=new WeakMap;return(re=function(N){return N?V:k})(g)}function Ee(g,k){if(!k&&g&&g.__esModule)return g;if(g===null||U(g)!="object"&&typeof g!="function")return{default:g};var V=re(k);if(V&&V.has(g))return V.get(g);var x={__proto__:null},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in g)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(g,Y)){var le=N?Object.getOwnPropertyDescriptor(g,Y):null;le&&(le.get||le.set)?Object.defineProperty(x,Y,le):x[Y]=g[Y]}return x.default=g,V&&V.set(g,x),x}},"./src/twgl.js":(Le,i,z)=>{function U(d){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},U(d)}i.__esModule=!0;var W={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};i.addExtensionsToContext=tr,i.framebuffers=i.draw=i.attributes=void 0,i.getContext=M,i.getWebGLContext=fe,i.programs=void 0,i.resizeCanvasToDisplaySize=D,i.setDefaults=le,i.vertexArrays=i.utils=i.typedarrays=i.textures=void 0;var he=N(z("./src/attributes.js"));i.attributes=he,Object.keys(he).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===he[d]||(i[d]=he[d])});var pe=N(z("./src/textures.js"));i.textures=pe,Object.keys(pe).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===pe[d]||(i[d]=pe[d])});var $=N(z("./src/helper.js")),me=N(z("./src/utils.js"));i.utils=me,Object.keys(me).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===me[d]||(i[d]=me[d])});var re=N(z("./src/draw.js"));i.draw=re,Object.keys(re).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===re[d]||(i[d]=re[d])});var Ee=N(z("./src/framebuffers.js"));i.framebuffers=Ee,Object.keys(Ee).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===Ee[d]||(i[d]=Ee[d])});var g=N(z("./src/programs.js"));i.programs=g,Object.keys(g).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===g[d]||(i[d]=g[d])});var k=N(z("./src/typedarrays.js"));i.typedarrays=k,Object.keys(k).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===k[d]||(i[d]=k[d])});var V=N(z("./src/vertex-arrays.js"));i.vertexArrays=V,Object.keys(V).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(W,d)||d in i&&i[d]===V[d]||(i[d]=V[d])});function x(d){if(typeof WeakMap!="function")return null;var se=new WeakMap,Te=new WeakMap;return(x=function(Ge){return Ge?Te:se})(d)}function N(d,se){if(!se&&d&&d.__esModule)return d;if(d===null||U(d)!="object"&&typeof d!="function")return{default:d};var Te=x(se);if(Te&&Te.has(d))return Te.get(d);var we={__proto__:null},Ge=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Oe in d)if(Oe!=="default"&&Object.prototype.hasOwnProperty.call(d,Oe)){var Ke=Ge?Object.getOwnPropertyDescriptor(d,Oe):null;Ke&&(Ke.get||Ke.set)?Object.defineProperty(we,Oe,Ke):we[Oe]=d[Oe]}return we.default=d,Te&&Te.set(d,we),we}var Y={addExtensionsToContext:!0};function le(d){$.copyExistingProperties(d,Y),he.setAttributeDefaults_(d),pe.setTextureDefaults_(d)}var Ie=/^(.*?)_/;function Se(d,se){me.glEnumToString(d,0);var Te=d.getExtension(se);if(Te){var we={},Ge=Ie.exec(se)[1],Oe="_"+Ge;for(var Ke in Te){var Ve=Te[Ke],nr=typeof Ve=="function",hr=nr?Ge:Oe,ar=Ke;Ke.endsWith(hr)&&(ar=Ke.substring(0,Ke.length-hr.length)),d[ar]!==void 0?!nr&&d[ar]!==Ve&&$.warn(ar,d[ar],Ve,Ke):nr?d[ar]=function($e){return function(){return $e.apply(Te,arguments)}}(Ve):(d[ar]=Ve,we[ar]=Ve)}we.constructor={name:Te.constructor.name},me.glEnumToString(we,0)}return Te}var rr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function tr(d){for(var se=0;se<rr.length;++se)Se(d,rr[se])}function Qe(d,se){for(var Te=["webgl","experimental-webgl"],we=null,Ge=0;Ge<Te.length;++Ge)if(we=d.getContext(Te[Ge],se),we){Y.addExtensionsToContext&&tr(we);break}return we}function fe(d,se){var Te=Qe(d,se);return Te}function w(d,se){for(var Te=["webgl2","webgl","experimental-webgl"],we=null,Ge=0;Ge<Te.length;++Ge)if(we=d.getContext(Te[Ge],se),we){Y.addExtensionsToContext&&tr(we);break}return we}function M(d,se){var Te=w(d,se);return Te}function D(d,se){se=se||1,se=Math.max(0,se);var Te=d.clientWidth*se|0,we=d.clientHeight*se|0;return d.width!==Te||d.height!==we?(d.width=Te,d.height=we,!0):!1}},"./src/typedarrays.js":(Le,i)=>{i.__esModule=!0,i.getGLTypeForTypedArray=rr,i.getGLTypeForTypedArrayType=tr,i.getTypedArrayTypeForGLType=Qe,i.isArrayBuffer=void 0;var z=5120,U=5121,W=5122,he=5123,pe=5124,$=5125,me=5126,re=32819,Ee=32820,g=33635,k=5131,V=33640,x=35899,N=35902,Y=36269,le=34042,Ie={};{var Se=Ie;Se[z]=Int8Array,Se[U]=Uint8Array,Se[W]=Int16Array,Se[he]=Uint16Array,Se[pe]=Int32Array,Se[$]=Uint32Array,Se[me]=Float32Array,Se[re]=Uint16Array,Se[Ee]=Uint16Array,Se[g]=Uint16Array,Se[k]=Uint16Array,Se[V]=Uint32Array,Se[x]=Uint32Array,Se[N]=Uint32Array,Se[Y]=Uint32Array,Se[le]=Uint32Array}function rr(fe){if(fe instanceof Int8Array)return z;if(fe instanceof Uint8Array||fe instanceof Uint8ClampedArray)return U;if(fe instanceof Int16Array)return W;if(fe instanceof Uint16Array)return he;if(fe instanceof Int32Array)return pe;if(fe instanceof Uint32Array)return $;if(fe instanceof Float32Array)return me;throw new Error("unsupported typed array type")}function tr(fe){if(fe===Int8Array)return z;if(fe===Uint8Array||fe===Uint8ClampedArray)return U;if(fe===Int16Array)return W;if(fe===Uint16Array)return he;if(fe===Int32Array)return pe;if(fe===Uint32Array)return $;if(fe===Float32Array)return me;throw new Error("unsupported typed array type")}function Qe(fe){var w=Ie[fe];if(!w)throw new Error("unknown gl type");return w}i.isArrayBuffer=typeof SharedArrayBuffer<"u"?function(w){return w&&w.buffer&&(w.buffer instanceof ArrayBuffer||w.buffer instanceof SharedArrayBuffer)}:function(w){return w&&w.buffer&&w.buffer instanceof ArrayBuffer}},"./src/utils.js":(Le,i)=>{i.__esModule=!0,i.glEnumToString=void 0,i.isWebGL1=U,i.isWebGL2=z;function z(W){return!!W.texStorage2D}function U(W){return!W.texStorage2D}i.glEnumToString=function(){var W={},he={};function pe($){var me=$.constructor.name;if(!W[me]){for(var re in $)if(typeof $[re]=="number"){var Ee=he[$[re]];he[$[re]]=Ee?"".concat(Ee," | ").concat(re):re}W[me]=!0}}return function(me,re){return pe(me),he[re]||(typeof re=="number"?"0x".concat(re.toString(16)):re)}}()},"./src/v3.js":(Le,i)=>{i.__esModule=!0,i.add=he,i.copy=tr,i.create=W,i.cross=V,i.distance=le,i.distanceSq=Ie,i.divScalar=k,i.divide=fe,i.dot=x,i.length=N,i.lengthSq=Y,i.lerp=$,i.lerpV=me,i.max=re,i.min=Ee,i.mulScalar=g,i.multiply=Qe,i.negate=rr,i.normalize=Se,i.setDefaultType=U,i.subtract=pe;var z=Float32Array;function U(w){var M=z;return z=w,M}function W(w,M,D){var d=new z(3);return w&&(d[0]=w),M&&(d[1]=M),D&&(d[2]=D),d}function he(w,M,D){return D=D||new z(3),D[0]=w[0]+M[0],D[1]=w[1]+M[1],D[2]=w[2]+M[2],D}function pe(w,M,D){return D=D||new z(3),D[0]=w[0]-M[0],D[1]=w[1]-M[1],D[2]=w[2]-M[2],D}function $(w,M,D,d){return d=d||new z(3),d[0]=w[0]+D*(M[0]-w[0]),d[1]=w[1]+D*(M[1]-w[1]),d[2]=w[2]+D*(M[2]-w[2]),d}function me(w,M,D,d){return d=d||new z(3),d[0]=w[0]+D[0]*(M[0]-w[0]),d[1]=w[1]+D[1]*(M[1]-w[1]),d[2]=w[2]+D[2]*(M[2]-w[2]),d}function re(w,M,D){return D=D||new z(3),D[0]=Math.max(w[0],M[0]),D[1]=Math.max(w[1],M[1]),D[2]=Math.max(w[2],M[2]),D}function Ee(w,M,D){return D=D||new z(3),D[0]=Math.min(w[0],M[0]),D[1]=Math.min(w[1],M[1]),D[2]=Math.min(w[2],M[2]),D}function g(w,M,D){return D=D||new z(3),D[0]=w[0]*M,D[1]=w[1]*M,D[2]=w[2]*M,D}function k(w,M,D){return D=D||new z(3),D[0]=w[0]/M,D[1]=w[1]/M,D[2]=w[2]/M,D}function V(w,M,D){D=D||new z(3);var d=w[2]*M[0]-w[0]*M[2],se=w[0]*M[1]-w[1]*M[0];return D[0]=w[1]*M[2]-w[2]*M[1],D[1]=d,D[2]=se,D}function x(w,M){return w[0]*M[0]+w[1]*M[1]+w[2]*M[2]}function N(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])}function Y(w){return w[0]*w[0]+w[1]*w[1]+w[2]*w[2]}function le(w,M){var D=w[0]-M[0],d=w[1]-M[1],se=w[2]-M[2];return Math.sqrt(D*D+d*d+se*se)}function Ie(w,M){var D=w[0]-M[0],d=w[1]-M[1],se=w[2]-M[2];return D*D+d*d+se*se}function Se(w,M){M=M||new z(3);var D=w[0]*w[0]+w[1]*w[1]+w[2]*w[2],d=Math.sqrt(D);return d>1e-5?(M[0]=w[0]/d,M[1]=w[1]/d,M[2]=w[2]/d):(M[0]=0,M[1]=0,M[2]=0),M}function rr(w,M){return M=M||new z(3),M[0]=-w[0],M[1]=-w[1],M[2]=-w[2],M}function tr(w,M){return M=M||new z(3),M[0]=w[0],M[1]=w[1],M[2]=w[2],M}function Qe(w,M,D){return D=D||new z(3),D[0]=w[0]*M[0],D[1]=w[1]*M[1],D[2]=w[2]*M[2],D}function fe(w,M,D){return D=D||new z(3),D[0]=w[0]/M[0],D[1]=w[1]/M[1],D[2]=w[2]/M[2],D}},"./src/vertex-arrays.js":(Le,i,z)=>{function U(g){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},U(g)}i.__esModule=!0,i.createVAOAndSetAttributes=re,i.createVAOFromBufferInfo=Ee,i.createVertexArrayInfo=me;var W=pe(z("./src/programs.js"));function he(g){if(typeof WeakMap!="function")return null;var k=new WeakMap,V=new WeakMap;return(he=function(N){return N?V:k})(g)}function pe(g,k){if(!k&&g&&g.__esModule)return g;if(g===null||U(g)!="object"&&typeof g!="function")return{default:g};var V=he(k);if(V&&V.has(g))return V.get(g);var x={__proto__:null},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in g)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(g,Y)){var le=N?Object.getOwnPropertyDescriptor(g,Y):null;le&&(le.get||le.set)?Object.defineProperty(x,Y,le):x[Y]=g[Y]}return x.default=g,V&&V.set(g,x),x}var $=34963;function me(g,k,V){var x=g.createVertexArray();return g.bindVertexArray(x),k.length||(k=[k]),k.forEach(function(N){W.setBuffersAndAttributes(g,N,V)}),g.bindVertexArray(null),{numElements:V.numElements,elementType:V.elementType,vertexArrayObject:x}}function re(g,k,V,x){var N=g.createVertexArray();return g.bindVertexArray(N),W.setAttributes(k,V),x&&g.bindBuffer($,x),g.bindVertexArray(null),N}function Ee(g,k,V){return re(g,k.attribSetters||k,V.attribs,V.indices)}}},Z={};function ae(Le){var i=Z[Le];if(i!==void 0)return i.exports;var z=Z[Le]={exports:{}};return _[Le](z,z.exports,ae),z.exports}var ie=ae("./src/twgl-full.js");return ie})())})(bn);var Qr=bn.exports;const Fr=class Fr{constructor(O){this.blocks=[],this.shape=O,this.rotationIndex=0;let _;switch(O){case"O":_=Fr.pieces.O;break;case"I":_=Fr.pieces.I;break;case"L":_=Fr.pieces.L;break;case"J":_=Fr.pieces.J;break;case"T":_=Fr.pieces.T;break;case"S":_=Fr.pieces.S;break;case"Z":_=Fr.pieces.Z;break;default:_=[[0,0],[0,0],[0,0],[0,0]]}for(let Z=0;Z<4;Z++)this.blocks.push([..._[Z]]),this.blocks[Z][0]+=3,this.blocks[Z][1]+=18}};mn(Fr,"offsets",{O:[[0,0],[0,-1],[-1,-1],[-1,0]],I:[[[0,0],[-1,0],[-1,1],[0,1]]]}),mn(Fr,"pieces",{O:[[1,0],[1,1],[2,1],[2,0]],I:[[1,0],[0,0],[2,0],[3,0]],L:[[1,0],[0,0],[2,0],[2,1]],J:[[1,0],[0,0],[0,1],[2,0]],T:[[1,0],[0,0],[2,0],[1,1]],S:[[1,0],[0,0],[1,1],[2,1]],Z:[[1,0],[2,0],[1,1],[0,1]]});let gt=Fr;var Yt,En,Kt,Tn;class Fn{constructor(){yn(this,Yt);yn(this,Kt);this.grid=new Uint32Array(20),this.rgbGrid=new Uint8Array(600),this.colorMap=new Map,this.pieceMap=new Map,this.pieceQueue=[],this.ghostBlocks=[[0,0],[0,0],[0,0],[0,0]],this.lockTimer=-1,this.lockTimerDuration=.5,this.timerRunning=!1,this.refillPieceQueue(),this.grabNextPiece(),this.colorMap.set(1,[255,0,0]),this.colorMap.set(2,[0,255,0]),this.colorMap.set(3,[255,255,0]),this.colorMap.set(4,[0,0,255]),this.colorMap.set(5,[180,90,246]),this.colorMap.set(6,[0,255,255]),this.colorMap.set(7,[255,140,40]),this.pieceMap.set("Z",1),this.pieceMap.set("S",2),this.pieceMap.set("O",3),this.pieceMap.set("J",4),this.pieceMap.set("T",5),this.pieceMap.set("I",6),this.pieceMap.set("L",7)}isBlockHere(O,_){if(O<0||_<0||O>=10||_>=20)return!0;const Z=this.grid[_],ae=7<<32-(3+3*O);return(Z&ae)!=0}getBlockData(O,_){const Z=this.grid[_],ae=32-(3+3*O),ie=7<<ae;return(Z&ie)>>>ae}placeBlockHere(O,_,Z){const ie=~(7<<32-(3+3*O));this.grid[_]&=ie;const Le=Z<<32-(3+3*O);this.grid[_]|=Le}generateRGBGrid(){for(let _=0;_<20;_++)for(let Z=0;Z<10;Z++){let ae=this.getBlockData(Z,_),ie=30*_+3*Z;if(ae!=0){let Le=this.colorMap.get(ae);this.rgbGrid[ie]=Le[0],this.rgbGrid[ie+1]=Le[1],this.rgbGrid[ie+2]=Le[2]}else this.rgbGrid[ie]=0,this.rgbGrid[ie+1]=0,this.rgbGrid[ie+2]=0}for(let _=0;_<4;_++){let Z=200,ae=30*this.ghostBlocks[_][1]+3*this.ghostBlocks[_][0];this.rgbGrid[ae]=Z,this.rgbGrid[ae+1]=Z,this.rgbGrid[ae+2]=Z}let O=this.playerPiece.blocks;for(let _=0;_<4;_++){let Z=this.colorMap.get(this.pieceMap.get(this.playerPiece.shape)),ae=30*O[_][1]+3*O[_][0];this.rgbGrid[ae]=Z[0],this.rgbGrid[ae+1]=Z[1],this.rgbGrid[ae+2]=Z[2]}return this.rgbGrid}generateRainbowGrid(O){for(let _=0;_<20;_++)for(let Z=0;Z<10;Z++){let ae=30*_+3*Z;this.rgbGrid[ae]=(Math.sin((Z+_*10+O)*3.14/200)*.5+.5)*255,this.rgbGrid[ae+1]=(Math.sin((Z+_*10+O)*3.14/200+3.14/2)*.5+.5)*255,this.rgbGrid[ae+2]=(Math.sin((Z+_*10+O)*3.14/200+3.14/3)*.5+.5)*255}return this.rgbGrid}tryMovePiece(O,_){let Z=!0;for(let ae=0;ae<4&&Z;ae++){let ie=this.playerPiece.blocks[ae][0]+O,Le=this.playerPiece.blocks[ae][1]+_;this.isBlockHere(ie,Le)&&(Z=!1)}return Z&&(hn(this,Yt,En).call(this,O,_),O!=0&&this.boostTimer(),_!=0&&(this.timerRunning=!1)),Z}tryRotatePiece(O){hn(this,Kt,Tn).call(this,O)}depositPlayerPiece(){let O,_,Z=this.pieceMap.get(this.playerPiece.shape);for(let ae=0;ae<4;ae++)O=this.playerPiece.blocks[ae][0],_=this.playerPiece.blocks[ae][1],this.placeBlockHere(O,_,Z)}refillPieceQueue(){let O=["O","I","T","J","L","S","Z"],_;for(let Z=0;Z<7;Z++)_=Math.floor(Math.random()*O.length),this.pieceQueue.push(O[_]),O.splice(_,1)}grabNextPiece(){let O=this.pieceQueue[0];this.pieceQueue.splice(0,1),this.pieceQueue.length<7&&this.refillPieceQueue(),delete this.playerPiece,this.playerPiece=new gt(O),this.updateGhostProjections()}startLockTimer(){this.lockTimer=this.lockTimerDuration,this.timerRunning=!0}updateLockTimer(O){this.lockTimer-=O}boostTimer(){this.timerRunning&&(this.lockTimer=Math.min(this.lockTimer+.5,this.lockTimerDuration))}hardDropPlayerPiece(){for(;this.tryMovePiece(0,-1););this.finishWithPiece()}finishWithPiece(){this.depositPlayerPiece(),this.grabNextPiece(),this.timerRunning=!1,this.resolveLineClears()}resolveLineClears(){for(let O=0;O<20;O++){let _=!0;for(let Z=0;Z<10&&_;Z++)this.isBlockHere(Z,O)||(_=!1);_&&(this.clearRow(O),O--)}this.updateGhostProjections()}clearRow(O){for(let _=O;_<19;_++)this.grid[_]=this.grid[_+1];this.grid[20]=0}updateGhostProjections(){for(let _=0;_<4;_++)this.ghostBlocks[_]=[...this.playerPiece.blocks[_]];let O=!1;for(;!O;){for(let _=0;_<4;_++)this.isBlockHere(this.ghostBlocks[_][0],this.ghostBlocks[_][1]-1)&&(O=!0);if(!O)for(let _=0;_<4;_++)this.ghostBlocks[_][1]-=1}}}Yt=new WeakSet,En=function(O,_){for(let Z=0;Z<4;Z++)this.playerPiece.blocks[Z][0]+=O,this.playerPiece.blocks[Z][1]+=_;this.updateGhostProjections()},Kt=new WeakSet,Tn=function(O){let _=!0,Z=(this.playerPiece.rotationIndex+4+(O?1:-1))%4,ae=[...this.playerPiece.blocks[0]],ie=[];for(let U=0;U<4;U++)ie.push([...this.playerPiece.blocks[U]]);let Le=1,i=1;O?i=-1:Le=-1;let z;for(let U=0;U<4;U++){if(ie[U][0]-=ae[0],ie[U][1]-=ae[1],z=ie[U][0],ie[U][0]=Le*ie[U][1],ie[U][1]=i*z,ie[U][0]+=ae[0],ie[U][1]+=ae[1],this.playerPiece.shape=="O"){let W=[];for(let he=0;he<2;he++)W.push(gt.offsets.O[this.playerPiece.rotationIndex][he]-gt.offsets.O[Z][he]);ie[U][0]+=W[0],ie[U][1]+=W[1]}this.isBlockHere(ie[U][0],ie[U][1])&&(_=!1)}if(!_){_=!0;for(let U=0;U<4;U++)ie[U][0]+=1,this.isBlockHere(ie[U][0],ie[U][1])&&(_=!1)}if(!_){_=!0;for(let U=0;U<4;U++)ie[U][0]-=2,this.isBlockHere(ie[U][0],ie[U][1])&&(_=!1)}if(_){for(let U=0;U<4;U++)this.playerPiece.blocks[U]=[...ie[U]];this.playerPiece.rotationIndex=Z,this.updateGhostProjections(),this.boostTimer()}};class gn{constructor(){this.inputStates=new Map,this.inputStates.set("HardDrop",!1),this.inputStates.set("SoftDrop",!1),this.inputStates.set("MoveLeft",!1),this.inputStates.set("MoveRight",!1),this.inputStates.set("Hold",!1),this.inputStates.set("RotateClockwise",!1),this.inputStates.set("RotateAntiClockwise",!1),this.inputKeys=new Map,this.inputKeys.set("A","MoveLeft"),this.inputKeys.set("D","MoveRight"),this.inputKeys.set("W","HardDrop"),this.inputKeys.set("S","SoftDrop"),this.inputKeys.set("E","Hold"),this.inputKeys.set("ArrowLeft","RotateAntiClockwise"),this.inputKeys.set("J","RotateAntiClockwise"),this.inputKeys.set("ArrowRight","RotateClockwise"),this.inputKeys.set("L","RotateClockwise"),this.counters=new Map,this.counters.set("MoveLeft",0),this.counters.set("MoveRight",0),this.counters.set("RotateClockwise",0),this.counters.set("RotateAntiClockwise",0),this.counters.set("HardDrop",0)}keyToState(O){return O.length==1&&(O=O.toUpperCase()),this.inputKeys.get(O)}setInputState(O,_){let Z=this.keyToState(O);Z!=null&&this.inputStates.set(Z,_)}getInputState(O){return this.inputStates.has(O)?this.inputStates.get(O):(console.log("ERROR: trying to access an input action that doesn't exist ("+O+"). The allowed options are:"),this.inputStates.forEach(function(_,Z,ae){console.log("    - "+Z)}),null)}updateCounters(){for(const[O,_]of this.counters)this.getInputState(O)?this.counters.set(O,_+1):this.counters.set(O,0)}getCounter(O){return this.counters.has(O)?this.counters.get(O):(console.log("ERROR: trying to access input action that doesn't have a counter ("+O+"). The counters are:"),this.counters.forEach(function(_,Z,ae){console.log("    - "+Z+": "+_)}),null)}}function Rn(){let Xe=new gn;document.addEventListener("keydown",function(N){Xe.setInputState(N.key,!0)}),document.addEventListener("keyup",function(N){Xe.setInputState(N.key,!1)});const _=document.querySelector("#canvas").getContext("webgl");if(!_){const N=wn.getWebGLErrorMessage();document.body.appendChild(N)}_.viewport(0,0,_.canvas.width,_.canvas.height);let Z=document.querySelector("#vertex-shader-2d").text,ae=document.querySelector("#fragment-shader-2d").text;const ie=Qr.createProgramInfo(_,[Z,ae]),Le={a_Position:{numComponents:2,data:[-.5,-1,.5,-1,.5,1,-.5,1]},a_GridPos:{numComponents:2,data:[0,0,10,0,10,20,0,20]},indices:{numComponents:3,data:[0,1,2,2,3,0]}},i=Qr.createBufferInfoFromArrays(_,Le);let z=_.createTexture(),U=new Uint8Array(200*3);_.bindTexture(_.TEXTURE_2D,z),_.pixelStorei(_.UNPACK_ALIGNMENT,1),_.texImage2D(_.TEXTURE_2D,0,_.RGB,10,20,0,_.RGB,_.UNSIGNED_BYTE,U),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);let W={src:"textures/block.png",mag:_.LINEAR},he=Qr.createTexture(_,W),pe=new Fn,$=0,me=15;function re(N){if(Xe.updateCounters(),Xe.getCounter("HardDrop")==1)pe.hardDropPlayerPiece();else{Xe.getInputState("SoftDrop")&&pe.tryMovePiece(0,-1);let Y=0;Xe.getCounter("RotateClockwise")==1&&(Y+=1),Xe.getCounter("RotateAntiClockwise")==1&&(Y-=1),Y!=0&&pe.tryRotatePiece(Y==1);let le=0;if((Xe.getCounter("MoveLeft")==1||Xe.getCounter("MoveLeft")>5)&&(le-=1),(Xe.getCounter("MoveRight")==1||Xe.getCounter("MoveRight")>5)&&(le+=1),le!=0&&pe.tryMovePiece(le,0),$++,$>=me){let Ie=!pe.tryMovePiece(0,-1);$=0,Ie&&!pe.timerRunning&&pe.startLockTimer()}pe.timerRunning&&(pe.updateLockTimer(N),pe.lockTimer<=0&&!pe.tryMovePiece(0,-1)&&pe.finishWithPiece())}}function Ee(N){U=pe.generateRGBGrid(),Qr.resizeCanvasToDisplaySize(_.canvas),_.viewport(0,0,_.canvas.width,_.canvas.height),_.bindTexture(_.TEXTURE_2D,z),_.texSubImage2D(_.TEXTURE_2D,0,0,0,10,20,_.RGB,_.UNSIGNED_BYTE,U);const Y={u_Time:N*.001,u_Resolution:[_.canvas.width,_.canvas.height],u_GridData:z,u_BlockTexture:he};_.useProgram(ie.program),Qr.setBuffersAndAttributes(_,ie,i),Qr.setUniforms(ie,Y),Qr.drawBufferInfo(_,i)}let g=0,k=1/30,V=0;function x(N){let Y=(N-V)*.001;V=N,g+=Y,g>=k&&(re(k),g=Math.min(g-k,k)),Ee(N),requestAnimationFrame(x)}requestAnimationFrame(x)}Rn();
